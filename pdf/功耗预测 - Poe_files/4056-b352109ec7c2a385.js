(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4056],{53968:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.614 4.211a1 1 0 0 1 .175 1.403L10.607 18.691a1 1 0 0 1-1.496.093l-5.818-5.819a1 1 0 1 1 1.414-1.414l5.018 5.018L19.21 4.386a1 1 0 0 1 1.403-.175Z"})))}},57758:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{d:"M2.5 8.38c0 .26.1.51.29.71l8.5 8.5c.39.39 1.02.39 1.41 0l8.5-8.5a.996.996 0 1 0-1.41-1.41L12 15.46 4.2 7.67a.996.996 0 0 0-1.41 0c-.19.2-.29.45-.29.71Z"})))}},46309:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{fill:"currentColor",d:"M8.38 21.5c.26 0 .51-.1.71-.29l8.5-8.5a.996.996 0 0 0 0-1.41l-8.5-8.5a.996.996 0 1 0-1.41 1.41L15.46 12l-7.79 7.8a.996.996 0 0 0 0 1.41c.2.19.45.29.71.29Z"})))}},99240:function(e,a,n){"use strict";var t,i,s=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return s.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=s.createElement("path",{d:"M19.5 21h-15c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1s1 .45 1 1v2h13v-2c0-.55.45-1 1-1s1 .45 1 1v3c0 .55-.45 1-1 1Z"})),i||(i=s.createElement("path",{d:"M12 16.5c-.25 0-.48-.09-.65-.24-.01-.01-.02-.01-.02-.02l-6.05-5.5a.997.997 0 1 1 1.34-1.48L11 13.24V4c0-.55.45-1 1-1s1 .45 1 1v9.23l4.38-3.97a.997.997 0 1 1 1.34 1.48l-5.98 5.43c-.18.2-.44.33-.74.33Z"})))}},99929:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{d:"M10 6.167 15.834 12 10 17.833M4.167 12H15 4.167Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",style:{fill:"none"},strokeLinejoin:"round"}),t||(t=i.createElement("path",{d:"M20 6v12",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}},19644:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{d:"M18.72 3.87c-1.76-1.75-4.61-1.75-6.36 0L8.82 7.4a4.477 4.477 0 0 0-1.23 4.07l-2.3 2.3a4.509 4.509 0 0 0 0 6.36c.88.88 2.03 1.32 3.18 1.32 1.15 0 2.31-.44 3.18-1.32l3.54-3.54a4.471 4.471 0 0 0 1.23-4.06l2.3-2.3a4.509 4.509 0 0 0 0-6.36ZM17.3 8.82l-1.8 1.8c-.1-.13-.2-.27-.32-.39A4.434 4.434 0 0 0 12.88 9l-1.23 1.23a.485.485 0 0 0 0 .7s.01 0 .01.01c.11-.02.22-.03.34-.03.67 0 1.29.26 1.77.73s.73 1.1.73 1.77c0 .67-.26 1.29-.73 1.77l-3.54 3.54c-.97.97-2.56.97-3.54 0-.97-.97-.97-2.56 0-3.54l1.8-1.8c.1.13.2.27.32.39.64.64 1.44 1.06 2.3 1.23l1.23-1.23a.485.485 0 0 0 0-.7c-.01-.01-.03-.02-.04-.03-.75.09-1.53-.13-2.08-.68-.47-.47-.73-1.1-.73-1.77 0-.67.26-1.29.73-1.77l3.54-3.54a2.49 2.49 0 0 1 1.77-.73 2.499 2.499 0 0 1 1.77 4.27Z"})))}},97341:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1ZM12 16a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1ZM5.293 5.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM15.293 15.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM2 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1ZM16 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM8.707 15.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 0 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0ZM18.707 5.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0Z"})))}},11784:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"AppPublishedBanner_canvasTab",selections:[{kind:"InlineFragment",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isPrivateBot"}]}],type:"BotCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="f876e31d8bfd9fe0cacf7a3fc40c4949",a.default=t},43181:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"Attachments_attachment",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"},{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"}]},{kind:"FragmentSpread",name:"FileInfo_attachment"},{kind:"FragmentSpread",name:"VideoPlayer_attachment"},{kind:"FragmentSpread",name:"VideoPreview_attachment"},{kind:"FragmentSpread",name:"CustomAudioPlayer_attachment"}],type:"Attachment",abstractKey:"__isAttachment"};t.hash="c9c5ebefca1b01190f648a6b77ad0d0c",a.default=t},44593:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"BarePreviewFrame_viewer",selections:[{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="7613ebdb02222e8d59667d75a5163485",a.default=t},64528:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"allowLink"},{defaultValue:null,kind:"LocalArgument",name:"imageSize"},{defaultValue:!1,kind:"LocalArgument",name:"showDescription"}],kind:"Fragment",name:"BotHeader_bot",selections:[{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"isPrivateBot"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{condition:"showDescription",kind:"Condition",passingValue:!0,selections:[{kind:"ScalarField",name:"description"}]},{kind:"ScalarField",name:"translatedBotTags"},{args:[{kind:"Variable",name:"size",variableName:"imageSize"}],kind:"FragmentSpread",name:"BotImage_bot"},{condition:"allowLink",kind:"Condition",passingValue:!0,selections:[{kind:"FragmentSpread",name:"BotLink_bot"}]},{kind:"FragmentSpread",name:"IdAnnotation_node"},{kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{kind:"FragmentSpread",name:"botHelpers_useBotDisplayName_bot"}],type:"Bot"};t.hash="b693e330cdfe5fa3fb4a994775a208a9",a.default=t},32260:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"BotMessageHeader_bot",selections:[{kind:"FragmentSpread",name:"BotHeader_bot"}],type:"Bot"};t.hash="5a2ffe49fcf3682c56545c15467b8ea7",a.default=t},10948:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"BudgetDropdownMenuItem_canvasTab",selections:[{kind:"ScalarField",name:"canvasCode"},{kind:"FragmentSpread",name:"useIsCanvasTabOptimistic_canvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="a58a37f4f6c6ab0357049d9fb3de7c5b",a.default=t},13272:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasHeader_viewer",selections:[{kind:"FragmentSpread",name:"InCanvasToggleMenuButton_viewer"}],type:"Viewer"};t.hash="64fd09e63c6c95402aa46bece28e0b7d",a.default=t},13323:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasLayout_viewer",selections:[{kind:"FragmentSpread",name:"CanvasHeader_viewer"}],type:"Viewer"};t.hash="554fe7fa7d173557808d9bcddd83b7b2",a.default=t},73394:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasLoadingPlaceholder_viewer",selections:[{kind:"FragmentSpread",name:"CanvasLayout_viewer"}],type:"Viewer"};t.hash="70a48be19b74541b7dff61e432995a29",a.default=t},30048:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabSelectorItem_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"title"},{kind:"FragmentSpread",name:"IdAnnotation_node"},{kind:"FragmentSpread",name:"useSwitchToCanvasTab_canvasTab"},{kind:"FragmentSpread",name:"CanvasTab_canvasTab"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"}],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="3385fee3b7204ba1c591044cc1819f4f",a.default=t},47653:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabSelectorItem_canvasTabToOpen",selections:[{kind:"ScalarField",name:"id"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"}],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="0f6c2911e020c2eec4f680414facbcbb",a.default=t},58501:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabSelectorItem_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"useSwitchToCanvasTab_chat"},{kind:"FragmentSpread",name:"useCloseCanvasTab_chat"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[t]}],type:"Chat"};i.hash="4abe73fa542e2c8d5580442b3dbd955d",a.default=i},23822:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p;n.r(a);let k=(t=[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"id",variableName:"id"}],s={kind:"ScalarField",name:"__typename"},l=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}],o={kind:"ScalarField",name:"state"},m={kind:"ScalarField",name:"messageId"},p={kind:"InlineFragment",selections:[u={kind:"ScalarField",name:"botId"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[u,r={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[c={kind:"ScalarField",name:"content"},d={kind:"ScalarField",name:"contentType"}]}]},g={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"CanvasTabSelectorPaginationQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"CanvasTabSelector_chat_canvasTabsConnection"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"CanvasTabSelectorPaginationQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[s,r,{kind:"InlineFragment",selections:[{args:l,concreteType:"CanvasTabConnection",kind:"LinkedField",name:"canvasTabsConnection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[s,r,o,{kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},{kind:"ScalarField",name:"title"},{kind:"ScalarField",name:"globalId"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[d,{kind:"ScalarField",name:"language"},c]},{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"canvasCode"},{kind:"TypeDiscriminator",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[m,{kind:"ScalarField",name:"codeblockIndex"},{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[m,r,o]},{kind:"InlineFragment",selections:[p,{kind:"InlineFragment",selections:[g],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"},g],type:"MessageCanvasTab"},p]},{kind:"ScalarField",name:"cursor"},r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},r]},{args:l,handle:"connection",key:"CanvasTabSelector_canvasTabsConnection",kind:"LinkedHandle",name:"canvasTabsConnection"}],type:"Chat"}]}]},params:{id:"b0ad5b99345a3c81a704de3b2a086163129d5a81e7fa1070bdd36f8480a014dc",metadata:{},name:"CanvasTabSelectorPaginationQuery",operationKind:"query",text:null}});k.hash="65a14dae03df8323c2e1b0033306c9cd",a.default=k},68801:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p;n.r(a);let k=(t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"id",variableName:"id"}],s={kind:"ScalarField",name:"__typename"},l=[{kind:"Literal",name:"first",value:10}],o={kind:"ScalarField",name:"state"},m={kind:"ScalarField",name:"messageId"},p={kind:"InlineFragment",selections:[u={kind:"ScalarField",name:"botId"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[u,r={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[c={kind:"ScalarField",name:"content"},d={kind:"ScalarField",name:"contentType"}]}]},g={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"CanvasTabSelectorQuery",selections:[{alias:"chat",args:i,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"CanvasTabSelector_chat_canvasTabsConnection"},{kind:"FragmentSpread",name:"CanvasTabSelectorItem_chat"},{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"}],type:"Chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"CanvasTabSelectorQuery",selections:[{alias:"chat",args:i,kind:"LinkedField",name:"node",plural:!1,selections:[s,r,{kind:"InlineFragment",selections:[{args:l,concreteType:"CanvasTabConnection",kind:"LinkedField",name:"canvasTabsConnection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[s,r,o,{kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},{kind:"ScalarField",name:"title"},{kind:"ScalarField",name:"globalId"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[d,{kind:"ScalarField",name:"language"},c]},{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"canvasCode"},{kind:"TypeDiscriminator",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[m,{kind:"ScalarField",name:"codeblockIndex"},{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[m,r,o]},{kind:"InlineFragment",selections:[p,{kind:"InlineFragment",selections:[g],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"},g],type:"MessageCanvasTab"},p]},{kind:"ScalarField",name:"cursor"},r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},r],storageKey:"canvasTabsConnection(first:10)"},{args:l,handle:"connection",key:"CanvasTabSelector_canvasTabsConnection",kind:"LinkedHandle",name:"canvasTabsConnection"},{kind:"ScalarField",name:"chatId"},{kind:"ScalarField",name:"hasMultipleUsers"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[s,r]}],type:"Chat"}]}]},params:{id:"41af84f7898cb5de10a91911f7eddfe8f7f13b24950f6a2e2a1f54606a32e559",metadata:{},name:"CanvasTabSelectorQuery",operationKind:"query",text:null}});k.hash="f17cf796e5386f689b9b0ff4fc7fd29c",a.default=k},8081:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabSelector_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"canvasTabsCount"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="78c9ed533d332806d486320b7475980c",a.default=t},90684:function(e,a,n){"use strict";var t,i;n.r(a);let s=(i={kind:"ScalarField",name:"id"},{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:t=["canvasTabsConnection"]}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:t},fragmentPathInResult:["node"],operation:n(23822),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"CanvasTabSelector_chat_canvasTabsConnection",selections:[{alias:"canvasTabsConnection",concreteType:"CanvasTabConnection",kind:"LinkedField",name:"__CanvasTabSelector_canvasTabsConnection_connection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[i,{kind:"ScalarField",name:"state"},{kind:"FragmentSpread",name:"CanvasTabSelectorItem_canvasTab"},{kind:"FragmentSpread",name:"CanvasTabSelectorItem_canvasTabToOpen"},{kind:"ScalarField",name:"__typename"}]},{kind:"ScalarField",name:"cursor"}]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}]},i],type:"Chat"});s.hash="65a14dae03df8323c2e1b0033306c9cd",a.default=s},89766:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabShareButton_canvasTab",selections:[{kind:"ScalarField",name:"canvasCode"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"codeblockIndex"},{kind:"ScalarField",name:"messageId"},{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"state"}]}],type:"MessageCanvasTab"},{kind:"InlineFragment",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"botId"}]}],type:"BotCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="908017d1e720bb306b354ee955626d30",a.default=t},8793:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabShareButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatInviteSection_viewer"},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'}],type:"Viewer"};t.hash="35d2c77d62e840d3c498a3e0f25e957a",a.default=t},24979:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabShareOrPublishButton_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"CanvasTabShareButton_canvasTab"},{kind:"FragmentSpread",name:"PublishButton_canvasTab"},{kind:"FragmentSpread",name:"useIsCanvasBotTab_canvasTab"},{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_canvasTab"},{kind:"InlineFragment",selections:[{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="92aacf46044c1816fa711aabab174b40",a.default=t},84765:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabShareOrPublishButton_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:[{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_bot"}]},{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_chat"},{kind:"FragmentSpread",name:"useIsEditingCanvasBotWithBuilder_chat"}],type:"Chat"};t.hash="c002f3c9d28c1897b31565b42e0dbbd1",a.default=t},20154:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTabShareOrPublishButton_viewer",selections:[{kind:"FragmentSpread",name:"CanvasTabShareButton_viewer"}],type:"Viewer"};t.hash="518a27c79aa95dd9b42dce2d9fa8f0fe",a.default=t},9532:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"CanvasTab_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"title"},{kind:"ScalarField",name:"globalId"},{kind:"FragmentSpread",name:"useCanvasTabContentSource_canvasTab"},{kind:"FragmentSpread",name:"IdAnnotation_node"},{kind:"InlineDataFragmentSpread",name:"CanvasTab_getSourceMetadata_canvasTab",selections:[{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"clientNonce"},t={kind:"ScalarField",name:"botId"},i={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[i],type:"MessageCanvasTab"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useCanvasInteractionLogger_canvasTab"},{kind:"FragmentSpread",name:"PublishButton_canvasTab"},{kind:"FragmentSpread",name:"PublishAsNewDropdownMenuItem_canvasTab"},{kind:"FragmentSpread",name:"useIsCanvasBotTab_canvasTab"},{kind:"FragmentSpread",name:"useProcessCanvasActions_canvasTab"},{kind:"FragmentSpread",name:"useCanvasActionsSubscription_canvasTab"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"InlineFragment",selections:[t,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"FragmentSpread",name:"DeleteBotModal_bot"}]},i],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"},{kind:"FragmentSpread",name:"PublishButtonGroup_canvasTab"},i],type:"MessageCanvasTab"},{kind:"FragmentSpread",name:"useHideCanvasTab_canvasTab"},{kind:"FragmentSpread",name:"CanvasTabShareOrPublishButton_canvasTab"},{kind:"FragmentSpread",name:"ViewBotDetailsButton_canvasTab"},{kind:"FragmentSpread",name:"EditBotButton_canvasTab"},{kind:"FragmentSpread",name:"EditButtonInHeader_canvasTab"},{kind:"FragmentSpread",name:"ShareDropdownMenuItem_canvasTab"},{kind:"FragmentSpread",name:"BudgetDropdownMenuItem_canvasTab"},{kind:"FragmentSpread",name:"AppPublishedBanner_canvasTab"},{kind:"FragmentSpread",name:"useOnSendUserMessageFromCanvas_canvasTab"},{kind:"FragmentSpread",name:"RemixButton_canvasTab"},{kind:"FragmentSpread",name:"RemixDropdownMenuItem_canvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};s.hash="7c33b098601b4a6b6b28ebc68d13f880",a.default=s},48056:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c=(i={kind:"ScalarField",name:"chatId"},s={kind:"ScalarField",name:"handle"},r=[t={kind:"ScalarField",name:"id"}],{argumentDefinitions:[],kind:"Fragment",name:"CanvasTab_chat",selections:[t,i,{kind:"FragmentSpread",name:"CanvasTabSelector_chat"},{kind:"FragmentSpread",name:"CanvasTabShareOrPublishButton_chat"},{kind:"FragmentSpread",name:"PublishButtonGroup_chat"},{kind:"FragmentSpread",name:"useHideCanvasTab_chat"},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t,i,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,s]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:r,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},l={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},l],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useProcessCanvasActions_chat"},{kind:"FragmentSpread",name:"useCanvasInteractionLogger_chat"},{kind:"FragmentSpread",name:"useIsEditingCanvasBotWithBuilder_chat"},{kind:"FragmentSpread",name:"useOnSendUserMessageFromCanvas_chat"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_bot",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:r,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreviewOptimisticChat_bot",selections:[{kind:"InlineDataFragmentSpread",name:"optimisticChat_createOptimisticChat_bot",selections:[t,o={kind:"ScalarField",name:"botId"},s,{kind:"ScalarField",name:"introduction"},d={kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[d,{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[t,{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}]},{concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:[o,{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[{kind:"ScalarField",name:"viewerIsUser"}]}]},l],type:"Chat"});c.hash="a6bf2c7fda7ce417498f1dacd627cb46",a.default=c},81299:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"CanvasTab_getSourceMetadata_canvasTab"};t.hash="dfd6b8760cbd3e453205d836f5147eb6",a.default=t},10043:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CanvasTab_viewer",selections:[{kind:"FragmentSpread",name:"CanvasLayout_viewer"},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{alias:"useInFrameCanvasServerRelay",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_use_in_frame_canvas_server_relay"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_canvas_use_in_frame_canvas_server_relay")'},{alias:"enableCanvasAppDebugMode",args:[{kind:"Literal",name:"gateName",value:"poe_canvas_enable_debug_mode"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_canvas_enable_debug_mode")'},{alias:"persistenceAndSyncEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_canvas_data_store"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_canvas_data_store")'},{alias:"codeEditorCanvasBotId",args:[{kind:"Literal",name:"gateName",value:"poe_web_code_editor_canvas_bot_id"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_code_editor_canvas_bot_id")'},{alias:"editCanvasTabPrimaryButtonEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_edit_app_primary_button_in_canvas_tab_header"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_edit_app_primary_button_in_canvas_tab_header")'},{kind:"FragmentSpread",name:"useProcessCanvasActions_viewer"},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useOnSendUserMessageFromCanvas_viewer"},{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"},{kind:"FragmentSpread",name:"useOnMiniAppRequest_viewer"},{kind:"FragmentSpread",name:"useCanvasActionsSubscription_viewer"},{kind:"FragmentSpread",name:"CanvasTabShareOrPublishButton_viewer"},{kind:"FragmentSpread",name:"ShareDropdownMenuItem_viewer"}],type:"Viewer"};t.hash="55c1955c17547e9ed7a3cce2a4872fa1",a.default=t},56216:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"Canvas_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[t,{kind:"ScalarField",name:"state"},{kind:"FragmentSpread",name:"CanvasTab_canvasTab"},{kind:"ScalarField",name:"clientNonce"},{kind:"InlineFragment",selections:i=[{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"idWhenWasOptimistic"}]}],type:"MessageCanvasTab"},{kind:"InlineFragment",selections:i,type:"BotCanvasTab"}]},{kind:"FragmentSpread",name:"CanvasTab_chat"},{kind:"FragmentSpread",name:"useEnsureLeftMenuCollapsedForOptimisticCanvasChats_chat"}],type:"Chat"};s.hash="6ceff4a9713356a240f3eccca0f7d2af",a.default=s},75427:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"Canvas_viewer",selections:[{kind:"FragmentSpread",name:"CanvasLayout_viewer"},{kind:"FragmentSpread",name:"CanvasTab_viewer"},{kind:"FragmentSpread",name:"CanvasLoadingPlaceholder_viewer"}],type:"Viewer"};t.hash="9baa586715055bfe69d9853c88dff60b",a.default=t},6582:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatBreakButton_bot",selections:[{kind:"ScalarField",name:"allowsClearContext"},t={kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[t],argumentDefinitions:[]}],type:"Bot"};i.hash="fb334e5bd6389b06f6c32a4e78ea4475",a.default=i},4664:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"ChatBreakButton_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendChatBreak_chat",selections:[t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"chatId"},{kind:"InlineDataFragmentSpread",name:"sendChatBreak_onChatBreakSend_chat",selections:[t,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendChatBreak_createOptimisticIntroMessage_bot",selections:[{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"hasMarkdownRendering"},{kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[{kind:"ScalarField",name:"nickname"},{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[t,{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}]}],argumentDefinitions:[]},s={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useViewerCanCancelJobs_chat"},{kind:"InlineDataFragmentSpread",name:"cancelViewerActiveJobs_chat",selections:[t,i],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"checkLastMessageAndRefetch_chat",selections:[i,t,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[t]},s],argumentDefinitions:[]},s],type:"Chat"};r.hash="05c399f0d04c442764ceae00289839f1",a.default=r},82611:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatBreakButton_lastMessage",selections:[{kind:"ScalarField",name:"id"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]}],type:"Message"};t.hash="90eeed362c2c9650f377655e78614968",a.default=t},58993:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatBreakButton_viewer",selections:[{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'}],type:"Viewer"};t.hash="0961defd78cee2ba76030737aee2e523",a.default=t},18548:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatFooterHoveringButtonSection_chat",selections:[{kind:"FragmentSpread",name:"ChatStopMessageButton_chat"},{kind:"FragmentSpread",name:"ShowCanvasFAB_chat"}],type:"Chat"};t.hash="6fb83360e38d4ad7b6bac0b6c18e5b08",a.default=t},25902:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatInviteSection_viewer",selections:[{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'}],type:"Viewer"};t.hash="69bfcc8b365249c5bd421645173097f2",a.default=t},71650:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j,A,N,O,R,U,E,Z,H,V,G;n.r(a);let K=(t={defaultValue:null,kind:"LocalArgument",name:"chatNodeId"},i={defaultValue:null,kind:"LocalArgument",name:"messageNodeId"},s=[{kind:"Variable",name:"id",variableName:"messageNodeId"}],r=[{kind:"Variable",name:"id",variableName:"chatNodeId"}],o={kind:"ScalarField",name:"id"},d={kind:"ScalarField",name:"botId"},c={kind:"ScalarField",name:"nickname"},m={kind:"ScalarField",name:"displayName"},u={kind:"ScalarField",name:"handle"},g={kind:"ScalarField",name:"limitedAccessType"},p={kind:"ScalarField",name:"isPrivateBot"},k={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},h={kind:"ScalarField",name:"translatedBotTags"},f={kind:"ScalarField",name:"deletionState"},F={kind:"LinkedField",name:"picture",plural:!1,selections:[l={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[_={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},b={kind:"TypeDiscriminator",abstractKey:"__isNode"},v={kind:"ScalarField",name:"messageId"},C=[S={kind:"ScalarField",name:"uid"},o],M=[v,o],y={kind:"ScalarField",name:"text"},w={kind:"ScalarField",name:"isDeleted"},I={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[g,p,k,h,f,m,F,u,o,b]},T={concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[o,S,u,{kind:"ScalarField",name:"fullName"},{kind:"ScalarField",name:"viewerIsFollowing"},w,{alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},b]},D={concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[x={kind:"ScalarField",name:"name"},_,L={concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[B={kind:"ScalarField",name:"mimeType"},o]}],type:"Attachment",abstractKey:"__isAttachment"},o]},P={kind:"InlineFragment",selections:[o],type:"Node",abstractKey:"__isNode"},j={alias:"titleText",kind:"ScalarField",name:"title"},A={alias:"bodyText",kind:"ScalarField",name:"body"},N={kind:"ScalarField",name:"attachmentId"},O={kind:"ScalarField",name:"size"},E={kind:"InlineFragment",selections:[U={kind:"ClientExtension",selections:[R={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},Z={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]},V={kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:H=[l,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionImageSource"},{kind:"InlineFragment",selections:[o,x,_,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[B,{kind:"ScalarField",name:"thumbnailUrl"},o]}],type:"MessageAttachment"},{kind:"InlineFragment",selections:[o,u,f,m,F],type:"Bot"},P]},{fragment:{argumentDefinitions:[t,i],kind:"Fragment",name:"ChatLastMessageAreaQuery",selections:[{alias:"messageNode",args:s,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatLastMessageArea_lastMessage"},{kind:"FragmentSpread",name:"ChatLastMessageArea_messageFollowupActions"}]},{alias:"chatNode",args:r,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatLastMessageArea_lastMessage_chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[i,t],kind:"Operation",name:"ChatLastMessageAreaQuery",selections:[{alias:"messageNode",args:s,kind:"LinkedField",name:"node",plural:!1,selections:[l,o,{kind:"InlineFragment",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"introduction"},d,c,m,o,{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"allowsImageAttachments"},u,{kind:"ScalarField",name:"isApiBot"},g,p,k,h,f,F,{kind:"ScalarField",name:"supportsRemix"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},b]},{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"isChatAnnouncement"},{kind:"ScalarField",name:"state"},v,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:C},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:C},o,{kind:"LinkedField",name:"trigger",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:M}],type:"MessageSendJobTrigger"}]}]},{kind:"ScalarField",name:"clientNonce"},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[v,o,y,w,I,T,D],type:"Message"},{kind:"InlineFragment",selections:M,type:"DeletedMessage"},P]},{kind:"LinkedField",name:"followupActions",plural:!0,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionBase"},{kind:"InlineFragment",selections:[j,A,{alias:"bodyTextJson",kind:"ScalarField",name:"bodyWhenUsingJsonParams"},{kind:"ScalarField",name:"sendText"},{kind:"ScalarField",name:"sendTextWhenUsingJsonParams"},{kind:"ScalarField",name:"sendParameters"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"sendAttachments",plural:!0,selections:[N,o,{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[B,o,O]},x,_,E,Z],type:"Attachment",abstractKey:"__isAttachment"}]},V,G={kind:"LinkedField",name:"secondaryImageSources",plural:!0,selections:H},{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[u,o,d,c,m]}]},{concreteType:"Message",kind:"LinkedField",name:"referencedMessage",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[v,l,y,w,I,T,D],type:"Message"},{kind:"InlineFragment",selections:[v,l],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"}]},{concreteType:"SendMessageFollowupActionMessageSource",kind:"LinkedField",name:"messageSource",plural:!1,selections:[{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"metadata"}]}],type:"SendMessageFollowupAction"},{kind:"InlineFragment",selections:[j,A,{kind:"ScalarField",name:"prefillText"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"prefillAttachments",plural:!0,selections:[N,o,_,x,L,{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[O]},E,Z],type:"Attachment",abstractKey:"__isAttachment"}]},V,G],type:"PrefillMessageFollowupAction"},{kind:"InlineFragment",selections:[j,A,V,{kind:"ScalarField",name:"commandType"},{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[d,u,o,c,m]}]}],type:"CommandMessageFollowupAction"}]},{kind:"ClientExtension",selections:[R,{kind:"ScalarField",name:"createStatus"}]}],type:"Message"}]},{alias:"chatNode",args:r,kind:"LinkedField",name:"node",plural:!1,selections:[l,o,{kind:"InlineFragment",selections:[{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[o,{kind:"ScalarField",name:"jobId"}]},{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o,u,{kind:"ScalarField",name:"hasMarkdownRendering"}]},{kind:"ScalarField",name:"chatCode"},{kind:"ScalarField",name:"hasMultipleUsers"},U],type:"Chat"}]}]},params:{id:"1c5590a88333b149013982f8bb1adc87c1a857a69f01a1bf4524957e676f3708",metadata:{},name:"ChatLastMessageAreaQuery",operationKind:"query",text:null}});K.hash="d895340561732e32a142dd98b626a40a",a.default=K},29741:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_bot",selections:[{kind:"ScalarField",name:"introduction"},{kind:"FragmentSpread",name:"ChatMessageActionBar_bot"}],type:"Bot"};t.hash="1f10e8d05fb5ebe14b73bf5d80d03c1f",a.default=t},25986:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="2b707c6aa902bf5e89931a34555d04b3",a.default=t},50102:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_lastMessage",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"}]},i={kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t,argumentDefinitions:[]},i,{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageActionBar_message"}],type:"Message"};s.hash="abf30a3f64033d0c759977936f8b1790",a.default=s},23917:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_lastMessage_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_chat"},{kind:"FragmentSpread",name:"ChatMessageFollowupActions_chat"},{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"},{kind:"FragmentSpread",name:"useChatHasActiveJobs_chat"}],type:"Chat"};t.hash="7fc10d8f74e69cba3714c437af6600a8",a.default=t},17203:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};t.hash="8b1572394bf0dbaa4a34805fc040a134",a.default=t},21506:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_messageFollowupActions",selections:[{kind:"FragmentSpread",name:"ChatMessageFollowupActions_message"}],type:"Message"};t.hash="15883f62fdd5ed3020607b2280246f3c",a.default=t},83451:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_pairedUserMessage",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_pairedUserMessage"}],type:"Message"};t.hash="6350c9ff3d02b9ae6583ec63b1ac05bd",a.default=t},62259:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatLastMessageArea_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_viewer"},{kind:"FragmentSpread",name:"ChatMessageFollowupActions_viewer"}],type:"Viewer"};t.hash="66d4aa55b7b064410db08fbee69d35fe",a.default=t},25295:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D;n.r(a);let P=(t=[{defaultValue:12,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"id",variableName:"id"}],r={kind:"ScalarField",name:"id"},l=[{kind:"Variable",name:"before",variableName:"cursor"},{kind:"Variable",name:"last",variableName:"count"}],o={kind:"ScalarField",name:"uid"},d={kind:"ScalarField",name:"fullName"},c={kind:"ScalarField",name:"handle"},m={kind:"ScalarField",name:"viewerIsFollowing"},u={kind:"ScalarField",name:"isDeleted"},g={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},p={kind:"TypeDiscriminator",abstractKey:"__isNode"},k={kind:"ScalarField",name:"limitedAccessType"},h={kind:"ScalarField",name:"isPrivateBot"},f={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},_={kind:"ScalarField",name:"translatedBotTags"},F={kind:"ScalarField",name:"deletionState"},b={kind:"ScalarField",name:"displayName"},S={kind:"LinkedField",name:"picture",plural:!1,selections:[s={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[v={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},C={kind:"ScalarField",name:"messageId"},M={kind:"ScalarField",name:"text"},y=[o,r],B={kind:"ScalarField",name:"reaction"},L=[{kind:"Literal",name:"first",value:5}],D={kind:"ScalarField",name:"cursor"},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"ChatListPaginationQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"ChatPageMain_pagination_chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ChatListPaginationQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[s,r,{kind:"InlineFragment",selections:[{args:l,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"isChatAnnouncement"},r,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[o,r,d,c,m,u,g,p]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},r,{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"allowsImageAttachments"},c,{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"nickname"},k,h,f,_,F,b,S,p]},C,{kind:"ScalarField",name:"creationTime"},M,{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:y},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[r,{kind:"ScalarField",name:"attachmentId"},w={kind:"ScalarField",name:"name"},v,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[I={kind:"ScalarField",name:"mimeType"},r,{kind:"ScalarField",name:"size"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},v,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[x={kind:"ClientExtension",selections:[T={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},x]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[s,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[C,M,u,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[k,h,f,_,F,b,S,c,r,p]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[r,o,c,d,m,u,g,p]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[w,v,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[I,r]}],type:"Attachment",abstractKey:"__isAttachment"},r]}],type:"Message"},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"},r]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[B,{kind:"ScalarField",name:"count"},r]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:y},{kind:"ScalarField",name:"hasCitations"},{kind:"ScalarField",name:"textLengthOnCancellation"},{args:L,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[B,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[o,d,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},r]},r,s]},D,r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:L,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},s,{kind:"ClientExtension",selections:[T,{kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[u],type:"Message"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},p]},r,D]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},r]},{args:l,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"}],type:"Chat"}]}]},params:{id:"adf1ab5e308c656f4dcd60eee879e5882f244e094cea8ef31665e0bd2ebfdb1f",metadata:{},name:"ChatListPaginationQuery",operationKind:"query",text:null}});P.hash="cba346cdc03b16d2f805b4efe51a06b9",a.default=P},31069:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useActionBarItems_bot"}],type:"Bot"};t.hash="642fdb9abfa2cf663c0740db4982b8b2",a.default=t},9543:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useActionBarItems_chat"},{kind:"FragmentSpread",name:"useChatHasActiveJobs_chat"}],type:"Chat"};t.hash="5e43789035268440ad42c94e06a289ea",a.default=t},94853:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_message",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageActionBar_useActionBarItems_message"}],type:"Message"};t.hash="448841d686a3a865a50e2cae54ecdec0",a.default=t},34882:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_pairedUserMessage",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useActionBarItems_pairedUserMessage"}],type:"Message"};t.hash="63039fea5a982838d8e047b10911f595",a.default=t},68422:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useActionBarItems_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useRegenerateButton_bot"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useResendButton_bot"}],type:"Bot"};t.hash="bc4c841e5c858ae3d63ceebe5ac67b4f",a.default=t},31184:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useActionBarItems_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useRegenerateButton_chat"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useRetryButton_chat"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useResendButton_chat"}],type:"Chat"};t.hash="a7504da3108ab679827ac960e4ed45ab",a.default=t},65288:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useActionBarItems_message",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useShareButton_message"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useRegenerateButton_message"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useRetryButton_message"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useResendButton_message"}],type:"Message"};t.hash="5a4ef3486f380b7ea25c7b233539fa4b",a.default=t},2303:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useActionBarItems_pairedUserMessage",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useRetryButton_pairedUserMessage"}],type:"Message"};t.hash="6233cec19b1b7e01521c71c315145685",a.default=t},7987:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useActionBarItems_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useRegenerateButton_viewer"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useRetryButton_viewer"},{kind:"FragmentSpread",name:"ChatMessageActionBar_useResendButton_viewer"}],type:"Viewer"};t.hash="bad42dd11cc03e8c3dcde9a1083f0524",a.default=t},91216:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRegenerateButton_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageRegenerateActionButton_bot"}],type:"Bot"};t.hash="38c761105202ec099cbf7cb39c26339c",a.default=t},28380:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRegenerateButton_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageRegenerateActionButton_chat"}],type:"Chat"};t.hash="ddbd786d3c2a94e0f64211a552a20c1c",a.default=t},85728:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRegenerateButton_message",selections:[{kind:"ScalarField",name:"state"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageRegenerateActionButton_message"},{kind:"FragmentSpread",name:"useIsViewerMessageCreator_message"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};i.hash="5db44a8fe6c2aa62824b04048c9d3f83",a.default=i},98275:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRegenerateButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageRegenerateActionButton_viewer"},{kind:"FragmentSpread",name:"useIsViewerMessageCreator_viewer"}],type:"Viewer"};t.hash="679b009b7f134bfa5117040bfcabd3ae",a.default=t},24420:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useResendButton_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageResendActionButton_bot"}],type:"Bot"};t.hash="636d67518b3eaed7ee930773d8ea71f6",a.default=t},10617:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useResendButton_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageResendActionButton_chat"}],type:"Chat"};t.hash="5c3df9bb6c6afefb28d6319c933b11be",a.default=t},80567:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useResendButton_message",selections:[{kind:"ScalarField",name:"state"},t={kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageResendActionButton_message"},{kind:"InlineDataFragmentSpread",name:"messageCreateStatus_message",selections:[{kind:"InlineDataFragmentSpread",name:"messageCreateStatus_returnsMessageCreateStatus_message",selections:[t],argumentDefinitions:[]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"createStatus"}]}],argumentDefinitions:[]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};i.hash="351b393f59bf800dc8ba2f02dfcc836d",a.default=i},37736:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useResendButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageResendActionButton_viewer"}],type:"Viewer"};t.hash="dcfa374ef4840aa6b182a1723782c0d7",a.default=t},89659:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRetryButton_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageRetryActionButton_chat"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="6a0be7d406ada77edfffc59909e776d4",a.default=t},44651:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRetryButton_message",selections:[{kind:"ScalarField",name:"state"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatMessageRetryActionButton_bot"}]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useIsViewerMessageCreator_message"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};i.hash="9d73f9dccca7ea7e040e054eb8291a67",a.default=i},59099:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRetryButton_pairedUserMessage",selections:[{kind:"FragmentSpread",name:"ChatMessageRetryActionButton_message"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};t.hash="98196a02abd57c5542d69e18614cef04",a.default=t},8195:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useRetryButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageRetryActionButton_viewer"},{kind:"FragmentSpread",name:"useIsViewerMessageCreator_viewer"}],type:"Viewer"};t.hash="15e97b622734c3b8919277518008c81a",a.default=t},97506:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_useShareButton_message",selections:[{kind:"ScalarField",name:"state"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageShareActionButton_message"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};i.hash="0fc94694471e523bd3004f4686d69e22",a.default=i},26879:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageActionBar_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageActionBar_useActionBarItems_viewer"}],type:"Viewer"};t.hash="ab0523dfb8898011a70a38ea23ee9544",a.default=t},78033:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageContextMenu_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_bot"}],type:"Bot"};t.hash="f7b64cf1c26febe2a79ac6af59d5b6c1",a.default=t},41100:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageContextMenu_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_chat"}],type:"Chat"};t.hash="0b7386f14778047b49f7cd5470633dff",a.default=t},68126:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageContextMenu_message",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_message"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],type:"Message"};t.hash="35a3b8e61b5af2bf4b0b821069f7e625",a.default=t},82457:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageContextMenu_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_viewer"}],type:"Viewer"};t.hash="d7cf5fab9d525baa51a1442fea3d3546",a.default=t},19701:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFollowupActionsModalContextWrapper_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="f678d48d1a7e22fba288172d7b561222",a.default=t},72232:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFollowupActionsModalContextWrapper_message",selections:[{kind:"ScalarField",name:"messageId"}],type:"Message"};t.hash="f9f60dd617fbd71a5e59dc7e23a04cfc",a.default=t},9977:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFollowupActions_chat",selections:[{kind:"FragmentSpread",name:"MessageFollowupActionMain_chat"}],type:"Chat"};t.hash="6176470ba153afda786294fa36c97116",a.default=t},12572:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFollowupActions_message",selections:[{kind:"LinkedField",name:"followupActions",plural:!0,selections:[{kind:"FragmentSpread",name:"MessageFollowupActionMain_followupAction"}]},{kind:"FragmentSpread",name:"MessageFollowupActionMain_message"}],type:"Message"};t.hash="2fe2b1abd6178a6b376bf27f6640d2fc",a.default=t},70306:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFollowupActions_viewer",selections:[{kind:"FragmentSpread",name:"MessageFollowupActionMain_viewer"}],type:"Viewer"};t.hash="6abff8b85914309d2da297aeaa0f600c",a.default=t},84087:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_chat",selections:[t={kind:"ScalarField",name:"chatId"},{kind:"FragmentSpread",name:"ChatBreakButton_chat"},{kind:"FragmentSpread",name:"ChatMessageInputFooter_useSubmitMessage_chat"},{kind:"FragmentSpread",name:"ChatMessageInputContainer_chat"},{kind:"InlineDataFragmentSpread",name:"checkLastMessageAndRefetch_chat",selections:[t,i={kind:"ScalarField",name:"id"},{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[i]},s={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{kind:"ScalarField",name:"shouldBotAutoRespond"},s],type:"Chat"};r.hash="b52907c1636359c139b9dd5df05bbc50",a.default=r},23813:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_defaultBot",selections:[{kind:"ScalarField",name:"noAccessMessage"},{kind:"FragmentSpread",name:"ChatBreakButton_bot"}],type:"Bot"};t.hash="0c257d7b399b65bed1a1689ef3c0804a",a.default=t},27259:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_lastMessage",selections:[{kind:"ScalarField",name:"author"},{kind:"FragmentSpread",name:"inputHelpers_useIsBotResponding_message"},{kind:"FragmentSpread",name:"ChatBreakButton_lastMessage"}],type:"Message"};t.hash="c222a74aba692608787cc0a6911b8b56",a.default=t},3178:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputFooter_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageInputContainer_messageEdges"}],type:"MessageEdge"};t.hash="3702e7f49846d4e096cad6df82eafb7a",a.default=t},70139:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_referencedMessage",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:t=[{kind:"ScalarField",name:"messageId"}],type:"Message"},{kind:"InlineFragment",selections:t,type:"DeletedMessage"},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_referencedMessage",selections:[{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:i=[{kind:"ScalarField",name:"id"}],type:"Message"},{kind:"InlineFragment",selections:i,type:"DeletedMessage"},{kind:"FragmentSpread",name:"ChatReferencedMessage_message"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"};s.hash="e326a05f80afe0b9122a94d332a702ef",a.default=s},55023:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"ChatMessageInputFooter_selectBot"};t.hash="67e9e0fb046d365e324f57267730f027",a.default=t},35858:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_targetedBot",selections:[{kind:"ScalarField",name:"handle"},{kind:"FragmentSpread",name:"ChatMessageInputContainer_bot"},{kind:"FragmentSpread",name:"ChatMessageInputFooter_useSubmitMessage_bot"}],type:"Bot"};t.hash="1d17c5d226c0858a4bc03c79d47810fb",a.default=t},28824:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_useSubmitMessage_bot",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]}],type:"Bot"};t.hash="d16b6d76f2c8970789af7b892c466c1d",a.default=t},41257:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_useSubmitMessage_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},i={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},i],type:"Chat"};s.hash="b5de89645b7d1cec2abd2a373dc81cbe",a.default=s},89929:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_useSubmitMessage_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],type:"Viewer"};t.hash="00150c38e0894437664c655dd756e89d",a.default=t},59948:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputFooter_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageInputContainer_viewer"},{kind:"FragmentSpread",name:"ChatMessageInputFooter_useSubmitMessage_viewer"},{kind:"InlineDataFragmentSpread",name:"messageEditing_messageEdgeEdit_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatBreakButton_viewer"}],type:"Viewer"};t.hash="041d58c521c8e3436df50e3c9610e825",a.default=t},25243:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageOverflowButton_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_bot"}],type:"Bot"};t.hash="df46ab9d9c5a0846f04175160665b253",a.default=t},79111:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageOverflowButton_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_chat"}],type:"Chat"};t.hash="29b40cc8cfb1229a6f85a0f45f81359d",a.default=t},91781:function(e,a,n){"use strict";var t,i;n.r(a);let s=(i={kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{argumentDefinitions:[],kind:"Fragment",name:"ChatMessageOverflowButton_message",selections:[{kind:"ScalarField",name:"text"},{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_message"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},i,{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},i],type:"Message"});s.hash="67f924fd7aa9632f49ddf9b2694d3bbd",a.default=s},12506:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageOverflowButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageDropdownMenu_viewer"}],type:"Viewer"};t.hash="1f6169cc441b259bcc51f7e9826feacd",a.default=t},45692:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageReactionsContextWrapper_message",selections:[{kind:"ScalarField",name:"messageId"},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[{kind:"ScalarField",name:"reaction"},{kind:"ScalarField",name:"count"}]},{kind:"ScalarField",name:"viewerReaction"}],type:"Message"};t.hash="6fb7ca98c86170c11a738872850ffff6",a.default=t},4399:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageReadByMembersModalContextWrapper_chat",selections:[{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"}],type:"Chat"};t.hash="fd300b1f59ca30e5dcf0380b66867c0e",a.default=t},59586:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageReadByMembersModalContextWrapper_message",selections:[{kind:"ScalarField",name:"messageId"}],type:"Message"};t.hash="cf4e41707a2ded30bdb4b7c4ce741f09",a.default=t},38577:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRegenerateActionButton_bot",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};t.hash="1ee983b6fb471080f4f276574c5d160f",a.default=t},88738:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRegenerateActionButton_chat",selections:[{kind:"InlineDataFragmentSpread",name:"regenerateMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[t,{kind:"ScalarField",name:"jobId"}]}],argumentDefinitions:[]}],type:"Chat"};i.hash="4e701a281a03dc9fd84c720c44743209",a.default=i},3102:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRegenerateActionButton_message",selections:[{kind:"InlineDataFragmentSpread",name:"regenerateMessage_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"messageId"}],argumentDefinitions:[]}],type:"Message"};t.hash="b918c4006184e75c765d2342e7e5ad39",a.default=t},81908:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRegenerateActionButton_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]}],type:"Viewer"};t.hash="078e3260ee542b726f5324eaba7c7497",a.default=t},87924:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageResendActionButton_bot",selections:[{kind:"InlineDataFragmentSpread",name:"resendMessage_bot",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};t.hash="ad4be12cb5193fc54f99b8611dc14846",a.default=t},99697:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageResendActionButton_chat",selections:[{kind:"InlineDataFragmentSpread",name:"resendMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t,{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},i={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},i],type:"Chat"};s.hash="5378a282f1301a9de68fa9c04a475795",a.default=s},212:function(e,a,n){"use strict";var t,i,s;n.r(a);let r=(i=[{kind:"ScalarField",name:"messageId"}],s=[t={kind:"ScalarField",name:"id"}],{argumentDefinitions:[],kind:"Fragment",name:"ChatMessageResendActionButton_message",selections:[{kind:"InlineDataFragmentSpread",name:"resendMessage_message",selections:[t,{kind:"ScalarField",name:"clientNonce"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:i,type:"Message"},{kind:"InlineFragment",selections:i,type:"DeletedMessage"},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_referencedMessage",selections:[{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:s,type:"Message"},{kind:"InlineFragment",selections:s,type:"DeletedMessage"},{kind:"FragmentSpread",name:"ChatReferencedMessage_message"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}]}],type:"Message"});r.hash="357a6060bad8771f0893f1369625e6c2",a.default=r},21879:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageResendActionButton_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"resendMessage_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Viewer"};t.hash="f92a7a701c4cea27d7cc9d49606cd641",a.default=t},36575:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRetryActionButton_bot",selections:[{kind:"InlineDataFragmentSpread",name:"retryMessage_bot",selections:[{kind:"InlineDataFragmentSpread",name:"retryMessage_createOptimisticMessage_bot",selections:[t={kind:"ScalarField",name:"botId"},{kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[i={kind:"ScalarField",name:"nickname"},{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[t,i,{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};s.hash="a2f7a067ed1e0a0d19a35fce5c92aed0",a.default=s},13585:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRetryActionButton_chat",selections:[{kind:"InlineDataFragmentSpread",name:"retryMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"InlineDataFragmentSpread",name:"retryMessage_createOptimisiticMessage_chat",selections:[t],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Chat"};i.hash="258cc577d34eacff7d05e3b141916e89",a.default=i},41110:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRetryActionButton_message",selections:[{kind:"InlineDataFragmentSpread",name:"retryMessage_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"messageId"},{kind:"InlineDataFragmentSpread",name:"retryMessage_createOptimisticMessage_message",selections:[{kind:"ScalarField",name:"contentType"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Message"};t.hash="20693a71058849f569fb4dbc6e5548e7",a.default=t},36866:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageRetryActionButton_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]}],type:"Viewer"};t.hash="640f3939797ce523000ebee906e10175",a.default=t},82748:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageShareActionButton_message",selections:[{kind:"ScalarField",name:"messageId"}],type:"Message"};t.hash="91f8bc135ef4f7ff38dc4a50a1831c09",a.default=t},35906:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageSubline_message",selections:[{kind:"ScalarField",name:"sourceType"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};t.hash="f833f4f84b4390d74c1fa79797293ce8",a.default=t},32122:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_ChatMessageFooter_message",selections:[{kind:"ScalarField",name:"state"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"FragmentSpread",name:"Attachments_attachment"}]},{kind:"FragmentSpread",name:"CitationFooter_message"}],type:"Message"};t.hash="30389d5b4297422a9e5865dd47a476b1",a.default=t},73147:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_ChatMessageFooter_viewer",selections:[{alias:"showInteractiveMedia",args:[{kind:"Literal",name:"gateName",value:"poe_enable_user_message_attachments_new_ui"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_user_message_attachments_new_ui")'}],type:"Viewer"};t.hash="b491a5b4ab8b33c9664c55b7c6d648a2",a.default=t},73511:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_bot",selections:[{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"botId"},{kind:"FragmentSpread",name:"ChatMessageContextMenu_bot"},{kind:"FragmentSpread",name:"ChatMessageOverflowButton_bot"},{kind:"FragmentSpread",name:"Message_bot"},{kind:"FragmentSpread",name:"messageTimeout_useTimeoutLevel_bot"},{kind:"FragmentSpread",name:"LeftSideMessageHeader_bot"}],type:"Bot"};t.hash="6d55360c8a9881386b877010219b10f6",a.default=t},80916:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_chat",selections:[t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"chatId"},{kind:"FragmentSpread",name:"InChatIFrame_chat"},{kind:"FragmentSpread",name:"useChatMessageSeenState_chat"},{kind:"FragmentSpread",name:"ChatMessageReadByMembersModalContextWrapper_chat"},{kind:"FragmentSpread",name:"ChatMessageFollowupActionsModalContextWrapper_chat"},{kind:"FragmentSpread",name:"messageTimeout_useTimeoutLevel_chat"},{kind:"FragmentSpread",name:"ChatLastMessageArea_chat"},{kind:"FragmentSpread",name:"ChatMessageOverflowButton_chat"},{kind:"FragmentSpread",name:"ChatMessageContextMenu_chat"},{kind:"InlineDataFragmentSpread",name:"useChatLastMessageImpressionTracker_chat",selections:[t,i,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[{kind:"ScalarField",name:"messageId"}]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"Message_chat"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};s.hash="ad72bc093244489cf9870ad6c67315e0",a.default=s},27268:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_defaultBot",selections:[{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"InChatIFrame_bot"}],type:"Bot"};t.hash="cb42d261f9a1ea0027351e207d8ae352",a.default=t},92559:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m;n.r(a);let u=(i=[{kind:"ScalarField",name:"uid"}],r={kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:s=[t={kind:"ScalarField",name:"author"}],argumentDefinitions:[]},d={kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]},c={kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[r,l={kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:s,argumentDefinitions:[]},o={kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:s,argumentDefinitions:[]},d],argumentDefinitions:[]},{argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"text"},{kind:"ScalarField",name:"parameters"},t,{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"creationTime"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[{kind:"ScalarField",name:"fullName"},{kind:"FragmentSpread",name:"LeftSideMessageHeader_poeUser"}]},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:i},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"FragmentSpread",name:"Attachments_attachment"}]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},{kind:"FragmentSpread",name:"ChatMessage_bot"}]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatReferencedMessage_message"}]},{kind:"FragmentSpread",name:"ChatMessageSubline_message"},{kind:"FragmentSpread",name:"InChatIFrame_message"},{kind:"FragmentSpread",name:"useChatMessageSeenState_message"},{kind:"FragmentSpread",name:"ChatMessageReadByMembersModalContextWrapper_message"},{kind:"FragmentSpread",name:"ChatMessageFollowupActionsModalContextWrapper_message"},{kind:"FragmentSpread",name:"ChatMessageReactionsContextWrapper_message"},{kind:"FragmentSpread",name:"ChatMessageContextMenu_message"},{kind:"FragmentSpread",name:"ChatMessageOverflowButton_message"},{kind:"FragmentSpread",name:"ChatMessage_ChatMessageFooter_message"},r,c,l,d,o,{kind:"InlineDataFragmentSpread",name:"messageHelpers_isSentByViewer_message",selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:i},c,{kind:"ClientExtension",selections:[m={kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"messageTimeout_useTimeoutLevel"},{kind:"FragmentSpread",name:"IdAnnotation_node"},{kind:"FragmentSpread",name:"useIsMessageCancelled_message"},{kind:"FragmentSpread",name:"ChatLastMessageArea_message"},{kind:"FragmentSpread",name:"MessageReactionsModal_message"},{kind:"FragmentSpread",name:"useMessageRemoveReaction_message"},{kind:"ClientExtension",selections:[m,{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]}],type:"Message"});u.hash="7d8d7c303e1e23565c7191f2c715db16",a.default=u},90199:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_pairedUserMessage",selections:[{kind:"ScalarField",name:"messageId"},{kind:"FragmentSpread",name:"messageTimeout_useTimeoutLevel_pairedUserMessage"},{kind:"FragmentSpread",name:"ChatLastMessageArea_pairedUserMessage"}],type:"Message"};t.hash="f2ca9b9afbf2f01f3f44250bf1f01133",a.default=t},89975:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_root",selections:[{kind:"FragmentSpread",name:"useSupportedPreviewContentTypes_root"},{concreteType:"ExecutableLanguageInfo",kind:"LinkedField",name:"supportedExecutableLanguages",plural:!0,selections:[{kind:"ScalarField",name:"language"}]}],type:"QueryRoot"};t.hash="c7a6461644ab818289ecde4ced2d5be7",a.default=t},5619:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatMessage_viewer",selections:[t={kind:"ScalarField",name:"uid"},{kind:"FragmentSpread",name:"Message_viewer"},{kind:"FragmentSpread",name:"messageTimeout_useTimeoutLevel_viewer"},{kind:"FragmentSpread",name:"ChatMessageContextMenu_viewer"},{kind:"FragmentSpread",name:"ChatMessageOverflowButton_viewer"},{kind:"FragmentSpread",name:"ChatLastMessageArea_viewer"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isSentByViewer_viewer",selections:[t],argumentDefinitions:[]},{kind:"FragmentSpread",name:"InChatIFrame_viewer"},{kind:"FragmentSpread",name:"useChatMessageSeenState_viewer"},{kind:"FragmentSpread",name:"ChatMessage_ChatMessageFooter_viewer"},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{alias:"badgeAtBotMessageCreationEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_badge_at_bot_message_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_badge_at_bot_message_creation")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'}],type:"Viewer"};i.hash="5edeef3d9490436938d38e992797a39c",a.default=i},83011:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_ChatMessagesGroupedByDate_chat",selections:[{kind:"FragmentSpread",name:"ChatMessage_chat"},{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"},{kind:"ScalarField",name:"shouldBotAutoRespond"},{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[{kind:"FragmentSpread",name:"inputHelpers_useIsBotResponding_message"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="2e23059616eb9fdb5a599fd354bafad2",a.default=t},61309:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_ChatMessagesGroupedByDate_defaultBot",selections:[{kind:"FragmentSpread",name:"ChatMessage_defaultBot"}],type:"Bot"};t.hash="343e023c4f31380b99027762b3edd298",a.default=t},4681:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_ChatMessagesGroupedByDate_root",selections:[{kind:"FragmentSpread",name:"ChatMessage_root"}],type:"QueryRoot"};t.hash="39891515c70991ec2858809a1e04ab17",a.default=t},53347:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_ChatMessagesGroupedByDate_viewer",selections:[{kind:"ScalarField",name:"uid"},{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'},{kind:"FragmentSpread",name:"ChatMessage_viewer"}],type:"Viewer"};t.hash="57dd84fa6dc05351d755a217cf2a1dc0",a.default=t},68250:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_EmptyChat_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"FragmentSpread",name:"BotInfoCard_bot"},{kind:"ScalarField",name:"isCanvasOnlyBot"}],type:"Bot"};t.hash="d659b2d8188feca616ffc2d3ed4f3d2e",a.default=t},61495:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_EmptyChat_chat",selections:[{kind:"ScalarField",name:"chatId"},{kind:"ScalarField",name:"shouldBotAutoRespond"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="9dde30acf59dd58131c5371933f6fce8",a.default=t},64834:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessagesView_EmptyChat_chatEdges",selections:[{kind:"FragmentSpread",name:"ContinueLastChat_chatEdges"}],type:"ChatEdge"};t.hash="fdcfaad6aa41702d7f0a4d7886c093aa",a.default=t},33265:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_EmptyChat_viewer",selections:[{kind:"FragmentSpread",name:"BotInfoCard_viewer"},{kind:"FragmentSpread",name:"ChatInviteSection_viewer"},{alias:"shouldHideBotInfoCardWithAutoReplyOff",args:[{kind:"Literal",name:"gateName",value:"poe_hide_bot_info_card_with_auto_reply_off"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_bot_info_card_with_auto_reply_off")'}],type:"Viewer"};t.hash="35ea80eb4826f4711396a1fb035be278",a.default=t},91596:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_chat",selections:[{kind:"ScalarField",name:"chatId"},{kind:"ScalarField",name:"unseenItemCount"},{concreteType:"Message",kind:"LinkedField",name:"viewerLastSeenMessage",plural:!1,selections:[{kind:"ScalarField",name:"messageId"}]},{kind:"ScalarField",name:"shouldBotAutoRespond"},{kind:"ScalarField",name:"creationTime"},{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[{kind:"FragmentSpread",name:"inputHelpers_useIsBotResponding_message"}]},{kind:"FragmentSpread",name:"IdAnnotation_node"},{kind:"FragmentSpread",name:"ChatMessagesView_ChatMessagesGroupedByDate_chat"},{kind:"FragmentSpread",name:"ChatMessagesView_EmptyChat_chat"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="ec287749d5c600b8123662fdbc2d4217",a.default=t},68207:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessagesView_chatEdges",selections:[{kind:"FragmentSpread",name:"ContinueLastChat_chatEdges"},{kind:"FragmentSpread",name:"ChatMessagesView_EmptyChat_chatEdges"}],type:"ChatEdge"};t.hash="43c25dbe02985f7bf7fbf761d37c6e9f",a.default=t},15054:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_defaultBot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"FragmentSpread",name:"ChatMessagesView_EmptyChat_bot"},{kind:"FragmentSpread",name:"ChatMessagesView_ChatMessagesGroupedByDate_defaultBot"},{kind:"FragmentSpread",name:"BotInfoCard_bot"}],type:"Bot"};t.hash="422ace223e1acf903b7fb61a5c146325",a.default=t},1755:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessagesView_edges",selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessagesView_useMessageTuples_messages"}]}],type:"MessageEdge"};i.hash="95839f84e5fcb4f03f434c8b05a69450",a.default=i},79964:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_root",selections:[{kind:"FragmentSpread",name:"ChatMessagesView_ChatMessagesGroupedByDate_root"}],type:"QueryRoot"};t.hash="1bbd1891b2ce4863f4dc1c398cf41cc3",a.default=t},78959:function(e,a,n){"use strict";var t,i,s,r;n.r(a);let l={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessagesView_useMessageTuples_messages",selections:[{kind:"ScalarField",name:"id"},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[{kind:"ScalarField",name:"uid"}]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"}]},{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"creationTime"},{kind:"ScalarField",name:"text"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"clientNonce"},{kind:"FragmentSpread",name:"ChatMessage_message"},{kind:"FragmentSpread",name:"ChatMessage_pairedUserMessage"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[i={kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},s={kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},r={kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},i,s,r,{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};l.hash="5f0ac4eb8a5f386cb440af33c4ce3e72",a.default=l},47579:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessagesView_viewer",selections:[{kind:"ScalarField",name:"uid"},{kind:"FragmentSpread",name:"ChatMessagesView_EmptyChat_viewer"},{kind:"FragmentSpread",name:"ChatMessagesView_ChatMessagesGroupedByDate_viewer"},{kind:"FragmentSpread",name:"BotInfoCard_viewer"},{kind:"FragmentSpread",name:"ChatInviteSection_viewer"},{alias:"enableEasierUndoContextClear",args:[{kind:"Literal",name:"gateName",value:"poe_enable_easier_undo_context_clear"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_easier_undo_context_clear")'},{alias:"shouldHideBotInfoCardWithAutoReplyOff",args:[{kind:"Literal",name:"gateName",value:"poe_hide_bot_info_card_with_auto_reply_off"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_bot_info_card_with_auto_reply_off")'},{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'},{alias:"lastAtMentionEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_add_last_at_mention_to_dropdown"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_add_last_at_mention_to_dropdown")'}],type:"Viewer"};t.hash="93cd0538c73d77a76f91ee559fd650fc",a.default=t},37678:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageColumn_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isDeleted"},{kind:"ScalarField",name:"title"},{kind:"FragmentSpread",name:"useChatTitle_chat"},{kind:"FragmentSpread",name:"MaybeWithCanvas_chat"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"FragmentSpread",name:"ChatPageNavbar_bot"},{kind:"FragmentSpread",name:"botHelpers_useBotDisplayName_bot"}]},{kind:"FragmentSpread",name:"ChatPageMain_chat"},{kind:"FragmentSpread",name:"ChatHeader_chat"},{kind:"FragmentSpread",name:"ChatPageNavbar_chat"},{kind:"FragmentSpread",name:"useInitialCanvasSidebarState_chat"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="5e68a518c306b28f26c245b54167bd86",a.default=t},96400:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageColumn_root",selections:[{kind:"FragmentSpread",name:"ChatPageMain_root"}],type:"QueryRoot"};t.hash="5919de275b3fc4c6487373b01e541918",a.default=t},31120:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageColumn_viewer",selections:[{kind:"FragmentSpread",name:"MaybeWithCanvas_viewer"},{kind:"FragmentSpread",name:"ChatPageMain_viewer"},{kind:"FragmentSpread",name:"ChatPageNavbar_viewer"},{kind:"FragmentSpread",name:"MainNavbarLeftItem_viewer"},{kind:"FragmentSpread",name:"ChatHeader_viewer"}],type:"Viewer"};t.hash="2bc57a56af25f427dda18e16b67bb060",a.default=t},12370:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_ChatPageConversationStarter_bot",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};t.hash="bf1f7b55f46c549cd562884a3fd72a92",a.default=t},76130:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_ChatPageConversationStarter_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]}],type:"Chat"};i.hash="fcd00f26d0e57bc5a1ce0423cb2bd1cd",a.default=i},6477:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_ChatPageConversationStarter_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],type:"Viewer"};t.hash="14e0465450250c66383591692de3b3fd",a.default=t},88249:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_bot",selections:[{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"conversationStarters"},{kind:"FragmentSpread",name:"ChatPageConversationStarters_ChatPageConversationStarter_bot"}],type:"Bot"};t.hash="d17e366033e569e4202b0c5ff038a996",a.default=t},40053:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_chat",selections:[{kind:"FragmentSpread",name:"ChatPageConversationStarters_ChatPageConversationStarter_chat"}],type:"Chat"};t.hash="b0d8e6564c7109b30837ca1b7239df32",a.default=t},16544:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatPageConversationStarters_edges",selections:[{kind:"ScalarField",name:"id"}],type:"MessageEdge"};t.hash="c34b3032300710004e28635d230670c8",a.default=t},73339:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageConversationStarters_viewer",selections:[{kind:"FragmentSpread",name:"ChatPageConversationStarters_ChatPageConversationStarter_viewer"}],type:"Viewer"};t.hash="b01c2c83b0c335dbf77c0cd7afbf6746",a.default=t},24294:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageDeleteFooter_chat",selections:[{kind:"ScalarField",name:"chatCode"}],type:"Chat"};t.hash="9dac4d26889366270faf783f0c2fac4f",a.default=t},51023:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMainFooter_chat",selections:[{kind:"FragmentSpread",name:"ChatMessageInputFooter_chat"},{kind:"FragmentSpread",name:"ChatPageShareFooter_chat"},{kind:"FragmentSpread",name:"ChatPageDeleteFooter_chat"},{kind:"FragmentSpread",name:"ChatPageConversationStarters_chat"},{kind:"FragmentSpread",name:"ChatFooterHoveringButtonSection_chat"}],type:"Chat"};t.hash="1507e9a299d675be8ce011f3966209fc",a.default=t},56308:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMainFooter_defaultBot",selections:[{kind:"FragmentSpread",name:"ChatMessageInputFooter_defaultBot"},{kind:"FragmentSpread",name:"ChatPageConversationStarters_bot"}],type:"Bot"};t.hash="9d501d08cb3994fd983a6a7992678ab1",a.default=t},48645:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatPageMainFooter_edges",selections:[{kind:"FragmentSpread",name:"ChatMessageInputFooter_messageEdges"},{kind:"FragmentSpread",name:"ChatPageConversationStarters_edges"}],type:"MessageEdge"};t.hash="fd18a4e98f211c305df8b1d88d2a15e5",a.default=t},25066:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMainFooter_lastMessage",selections:[{kind:"FragmentSpread",name:"ChatMessageInputFooter_lastMessage"}],type:"Message"};t.hash="82b01397690f2776426a6f2fdc399683",a.default=t},99205:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMainFooter_targetedBot",selections:[{kind:"ScalarField",name:"supportsRemix"},{kind:"FragmentSpread",name:"ChatMessageInputFooter_targetedBot"}],type:"Bot"};t.hash="9c50fdc9759884bc5fd2f829451b488a",a.default=t},56530:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMainFooter_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageInputFooter_viewer"},{kind:"FragmentSpread",name:"ChatPageConversationStarters_viewer"}],type:"Viewer"};t.hash="3e052befee765cd09216f458cd5e0c8e",a.default=t},63212:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j,A,N,O,R,U;n.r(a);let E=(t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"id",variableName:"id"}],r={kind:"ScalarField",name:"id"},l={kind:"ScalarField",name:"handle"},o={kind:"ScalarField",name:"allowsImageAttachments"},d={kind:"ScalarField",name:"deletionState"},c={kind:"ScalarField",name:"botId"},m={kind:"ScalarField",name:"nickname"},u={kind:"ScalarField",name:"displayName"},g={kind:"ScalarField",name:"author"},p={kind:"ScalarField",name:"state"},k={kind:"ScalarField",name:"textLengthOnCancellation"},h={kind:"ScalarField",name:"isOptimistic"},f={kind:"ScalarField",name:"timeoutLevel"},_=[{kind:"Literal",name:"last",value:12}],F={kind:"ScalarField",name:"uid"},b={kind:"ScalarField",name:"fullName"},v={kind:"ScalarField",name:"viewerIsFollowing"},S={kind:"ScalarField",name:"isDeleted"},C={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},M={kind:"TypeDiscriminator",abstractKey:"__isNode"},y={kind:"ScalarField",name:"limitedAccessType"},w={kind:"ScalarField",name:"isPrivateBot"},I={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},T={kind:"ScalarField",name:"translatedBotTags"},B={kind:"LinkedField",name:"picture",plural:!1,selections:[s={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[x={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},L={kind:"ScalarField",name:"messageId"},D={kind:"ScalarField",name:"text"},P=[F,r],j={kind:"ScalarField",name:"name"},A={kind:"ScalarField",name:"mimeType"},N={kind:"ClientExtension",selections:[h]},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"ChatPageMainRefetchQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"ChatPageMain_refetch_chat"}],type:"Chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ChatPageMainRefetchQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[s,r,{kind:"InlineFragment",selections:[{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[r,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"supportsRemix"},l,r,{kind:"ScalarField",name:"isServerBot"},o,{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},d,c,m,u]},g,p,k,{kind:"ClientExtension",selections:[h,f]}]},{args:_,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[g,{kind:"ScalarField",name:"isChatAnnouncement"},r,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[F,r,b,l,v,S,C,M]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[c,r,{kind:"ScalarField",name:"messageTimeoutSecs"},o,l,{kind:"ScalarField",name:"isApiBot"},m,y,w,I,T,d,u,B,M]},L,{kind:"ScalarField",name:"creationTime"},D,p,{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:P},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[r,{kind:"ScalarField",name:"attachmentId"},j,x,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[A,r,{kind:"ScalarField",name:"size"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},x,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[N],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},N]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[s,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[L,D,S,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[y,w,I,T,d,u,B,l,r,M]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[r,F,l,b,v,S,C,M]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[j,x,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[A,r]}],type:"Attachment",abstractKey:"__isAttachment"},r]}],type:"Message"},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"},r]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[O={kind:"ScalarField",name:"reaction"},{kind:"ScalarField",name:"count"},r]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:P},{kind:"ScalarField",name:"hasCitations"},k,{args:R=[{kind:"Literal",name:"first",value:5}],concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[O,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[F,b,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},r]},r,s]},U={kind:"ScalarField",name:"cursor"},r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:R,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},s,{kind:"ClientExtension",selections:[h,f,{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[S],type:"Message"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},M]},r,U]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},r],storageKey:"messagesConnection(last:12)"},{args:_,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"}],type:"Chat"}]}]},params:{id:"8bad1a876dad371656896b82cde403d758fd889dca8ba9d99dbbb8b80bc675be",metadata:{},name:"ChatPageMainRefetchQuery",operationKind:"query",text:null}});E.hash="7d247a8c4d99e8a70d16594ea43d9884",a.default=E},68311:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"FragmentSpread",name:"PaywallContextWrapper_bot"},{kind:"FragmentSpread",name:"ChatPageMainFooter_defaultBot"},{kind:"FragmentSpread",name:"ChatMessagesView_defaultBot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],type:"Bot"};t.hash="074ad2c9a477e25ec66e004d549b1f52",a.default=t},31748:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_chat",selections:[t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatPageMain_bot"}]},{kind:"FragmentSpread",name:"ChatPageShareFooter_chat"},{kind:"FragmentSpread",name:"ChatPageDeleteFooter_chat"},{kind:"FragmentSpread",name:"ChatMessagesView_chat"},{kind:"FragmentSpread",name:"ChatPageMainFooter_chat"},{kind:"FragmentSpread",name:"ChatPageMain_refetch_chat"},{kind:"FragmentSpread",name:"ChatModalMain_chat"},{kind:"FragmentSpread",name:"subscriptions_useJobStartedSubscription_chat"},{kind:"FragmentSpread",name:"subscriptions_useJobUpdatedSubscription_chat"},{kind:"InlineDataFragmentSpread",name:"checkLastMessageAndRefetch_chat",selections:[i,t,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[t]},s={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},s],type:"Chat"};r.hash="d18ebfc4edce9ec84fc45918c1029999",a.default=r},14002:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatPageMain_chatEdges",selections:[{kind:"FragmentSpread",name:"ChatMessagesView_chatEdges"}],type:"ChatEdge"};t.hash="3c24d765f17020c6b07325c8834f2061",a.default=t},80082:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_lastMessage",selections:[{kind:"ScalarField",name:"id"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}]},{kind:"FragmentSpread",name:"ChatPageMainFooter_lastMessage"}],type:"Message"};t.hash="aea071c0a2dd4af778eb5623d99f27d8",a.default=t},14009:function(e,a,n){"use strict";var t,i;n.r(a);let s=(i=[{kind:"ScalarField",name:"author"}],{argumentDefinitions:[{defaultValue:12,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"backward",path:t=["messagesConnection"]}],refetch:{connection:{forward:null,backward:{count:"count",cursor:"cursor"},path:t},fragmentPathInResult:["node"],operation:n(25295),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"ChatPageMain_pagination_chat",selections:[{kind:"ScalarField",name:"id"},{alias:"messagesConnection",concreteType:"MessagesConnection",kind:"LinkedField",name:"__ChatMessagesView_chat_messagesConnection_connection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:i,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:i,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:i,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"ScalarField",name:"__typename"}]},{kind:"FragmentSpread",name:"ChatPageMain_useFilterDuplicateMessageEdges_edges"},{kind:"FragmentSpread",name:"ChatMessagesView_edges"},{kind:"FragmentSpread",name:"ChatPageMainFooter_edges"},{kind:"ScalarField",name:"cursor"}]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]}]}],type:"Chat"});s.hash="cba346cdc03b16d2f805b4efe51a06b9",a.default=s},70447:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_refetch_chat",selections:[{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatPageMain_lastMessage"}]},{kind:"FragmentSpread",name:"ChatPageMain_pagination_chat"}],type:"Chat"};t.hash="6d957172334a182e8216d9be4fd3a50d",a.default=t},33441:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_root",selections:[{kind:"FragmentSpread",name:"ChatMessagesView_root"}],type:"QueryRoot"};t.hash="8d3847abf4073902ed2634ec623ec09b",a.default=t},70107:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_targetedBot",selections:[{kind:"FragmentSpread",name:"ChatPageMainFooter_targetedBot"},{kind:"ScalarField",name:"id"}],type:"Bot"};t.hash="9bde31ab42610facbbda41e8923bae0e",a.default=t},42297:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatPageMain_useFilterDuplicateMessageEdges_edges",selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"id"}]}],type:"MessageEdge"};t.hash="73d2aa9dd570d599bb3288c7bc9592ab",a.default=t},52178:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageMain_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessagesView_viewer"},{kind:"FragmentSpread",name:"PaywallContextWrapper_viewer"},{kind:"FragmentSpread",name:"ChatPageMainFooter_viewer"},{kind:"FragmentSpread",name:"ChatModalMain_viewer"}],type:"Viewer"};t.hash="c86a7a701c3f2c2148f765348e18ba4d",a.default=t},92013:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatPageShareFooter_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="ce18bfa28ddeccd7682f5f87583169d1",a.default=t},44883:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatReferencedMessage_message",selections:[{kind:"InlineFragment",selections:[t={kind:"ScalarField",name:"__typename"},{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"text"},{kind:"ScalarField",name:"isDeleted"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_bot"}]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_poeUser"}]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_attachment"}]}],type:"Message"},{kind:"InlineFragment",selections:[t],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"};i.hash="afdd631db59ccb300cc23995d4b3d04d",a.default=i},78517:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatStopMessageButton_chat",selections:[{kind:"InlineDataFragmentSpread",name:"cancelViewerActiveJobs_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useViewerCanCancelJobs_chat"}],type:"Chat"};t.hash="677ca1d62436dc230fdb6d7f77c2bbd1",a.default=t},63377:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"CitationFooter_message",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"hasCitations"},{kind:"ScalarField",name:"state"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isBotMessage",selections:[{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:t=[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatBreak",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isCommandMessage",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isChatAnnouncement",selections:[{kind:"ScalarField",name:"isChatAnnouncement"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Message"};i.hash="557924f397cb252988f7f3047e8a8525",a.default=i},49333:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"CommandMessageFollowupAction_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendCommandMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"},{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[t,{kind:"ScalarField",name:"jobId"}]},{kind:"InlineDataFragmentSpread",name:"sendCommandMessage_onCommandMessageSend_chat",selections:[t],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Chat"};i.hash="8e2174962e476e26f13d18afc74cc08f",a.default=i},29043:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"CommandMessageFollowupAction_followupAction",selections:[{kind:"ScalarField",name:"__typename"},{alias:"titleText",kind:"ScalarField",name:"title"},{alias:"bodyText",kind:"ScalarField",name:"body"},{kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:[{kind:"FragmentSpread",name:"FollowupActionImageSources_imageSources"}]},{kind:"ScalarField",name:"commandType"},{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[t={kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"handle"},{kind:"InlineDataFragmentSpread",name:"sendCommandMessage_bot",selections:[{kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"nickname"},s={kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[t,i,s],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],argumentDefinitions:[]}]}]}],type:"CommandMessageFollowupAction"};r.hash="79fd8f6d96c9c845f8a8c9f2475b4143",a.default=r},70196:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CommandMessageFollowupAction_message",selections:[{kind:"InlineDataFragmentSpread",name:"sendCommandMessage_message",selections:[{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"LinkedField",name:"trigger",plural:!1,selections:[{kind:"InlineFragment",selections:[{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"messageId"}]}],type:"MessageSendJobTrigger"}]}]}],argumentDefinitions:[]}],type:"Message"};t.hash="d6b732914c0173a700dcf591beda77da",a.default=t},51705:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"CommandMessageFollowupAction_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]}],type:"Viewer"};t.hash="52aa7adade9b8b2e4c1b542930aed830",a.default=t},95352:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ContinueLastChat_chatEdges",selections:[{concreteType:"Chat",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"chatCode"},{kind:"ScalarField",name:"title"},{kind:"ScalarField",name:"hasMultipleUsers"}]}],type:"ChatEdge"};t.hash="475ff3e8cf3f65734003584e23738a75",a.default=t},90688:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"EditBotButton_canvasTab",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"isCanvasOnlyBot"}]}],type:"BotCanvasTab"};t.hash="a9494f2e534274c48e2a07a81f57cb3e",a.default=t},34366:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"EditButtonInHeader_canvasTab",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isCanvasOnlyBot"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"};t.hash="9ee6017347208529016c2f3bde8c8d05",a.default=t},65021:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"FollowupActionImageSources_imageSources",selections:[{kind:"ScalarField",name:"__typename"},{kind:"InlineFragment",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"name"},{kind:"ScalarField",name:"url"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"},{kind:"ScalarField",name:"thumbnailUrl"}]}],type:"MessageAttachment"},{kind:"InlineFragment",selections:[t,{kind:"ScalarField",name:"handle"},{kind:"FragmentSpread",name:"BotImage_bot"}],type:"Bot"}],type:"MessageFollowupActionImageSource",abstractKey:"__isMessageFollowupActionImageSource"};i.hash="94bf6942432a49efac9e0a47ac903127",a.default=i},67575:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"InCanvasToggleMenuButton_viewer",selections:[{kind:"FragmentSpread",name:"ToggleSidebarButton_viewer"}],type:"Viewer"};t.hash="5da21b07736b30939204c908c96c6e91",a.default=t},12346:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"InChatIFrame_bot",selections:[t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"botId"},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_bot",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreviewOptimisticChat_bot",selections:[{kind:"InlineDataFragmentSpread",name:"optimisticChat_createOptimisticChat_bot",selections:[t,i,{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"introduction"},s={kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[s,{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[t,{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};r.hash="a74e43ee468aa9691b20a124e4413d5c",a.default=r},90871:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"InChatIFrame_chat",selections:[t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"chatId"},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t,i,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},s={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},s],argumentDefinitions:[]},s],type:"Chat"};r.hash="bf84d45f3ca36a5a98eba680073edc5f",a.default=r},68353:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"InChatIFrame_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"messageId"},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};t.hash="08b8cd215575d7e15398b9aaedb95b09",a.default=t},72238:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"InChatIFrame_viewer",selections:[{alias:"codeEditorCanvasBotId",args:[{kind:"Literal",name:"gateName",value:"poe_web_code_editor_canvas_bot_id"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_code_editor_canvas_bot_id")'},{alias:"enableCanvasAppDebugMode",args:[{kind:"Literal",name:"gateName",value:"poe_canvas_enable_debug_mode"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_canvas_enable_debug_mode")'},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{kind:"InlineDataFragmentSpread",name:"useSendMessageFromPreview_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"},{kind:"FragmentSpread",name:"useOnMiniAppRequest_viewer"},{kind:"FragmentSpread",name:"BarePreviewFrame_viewer"},{kind:"FragmentSpread",name:"PreviewFrame_viewer"}],type:"Viewer"};t.hash="e772e0ca6307768d8fcc3d1beb1a2bb7",a.default=t},71472:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"InputFooterReferencedMessageHeader_message",selections:[{kind:"ScalarField",name:"text"},{kind:"ScalarField",name:"messageId"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_bot"}]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_poeUser"}]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"FragmentSpread",name:"ReferencedMessage_attachment"}]}],type:"Message"};t.hash="39dbd07ec0a671473e199159521b661e",a.default=t},90254:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"LeftSideMessageHeader_bot",selections:[{kind:"FragmentSpread",name:"BotMessageHeader_bot"}],type:"Bot"};t.hash="591c2619c010286b9c5f69a2a2f506ee",a.default=t},93142:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"LeftSideMessageHeader_poeUser",selections:[{kind:"FragmentSpread",name:"UserMessageHeader_poeUser"}],type:"PoeUser"};t.hash="3d1055df98c860d1ffbd2cf3b69debda",a.default=t},17878:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"Markdown_chat",selections:[{kind:"FragmentSpread",name:"MarkdownCodeBlock_chat"}],type:"Chat"};t.hash="c4c9cbfa1f7bbc0e1ca858fc8897f300",a.default=t},13309:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MaybeWithCanvas_chat",selections:[{kind:"FragmentSpread",name:"Canvas_chat"},{kind:"FragmentSpread",name:"SetupCanvasSubscriptions_chat"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="ff125ba3c56e583581e426192f59b761",a.default=t},55892:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MaybeWithCanvas_viewer",selections:[{kind:"FragmentSpread",name:"CanvasLoadingPlaceholder_viewer"},{kind:"FragmentSpread",name:"CanvasLayout_viewer"},{kind:"FragmentSpread",name:"Canvas_viewer"}],type:"Viewer"};t.hash="99af306c995564f94989a4ada3d0bb06",a.default=t},73884:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MessageBubble_chat",selections:[{kind:"FragmentSpread",name:"Markdown_chat"}],type:"Chat"};t.hash="60c99e993f5f8b627bc2dd5ba842ba03",a.default=t},51975:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MessageFollowupActionMain_chat",selections:[{kind:"FragmentSpread",name:"SendMessageFollowupAction_chat"},{kind:"FragmentSpread",name:"CommandMessageFollowupAction_chat"}],type:"Chat"};t.hash="d40f264a66f83a70d64f81b3338225e4",a.default=t},6664:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MessageFollowupActionMain_followupAction",selections:[{kind:"ScalarField",name:"__typename"},{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"SendMessageFollowupAction_followupAction"}],type:"SendMessageFollowupAction"},{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"PrefillMessageFollowupAction_followupAction"}],type:"PrefillMessageFollowupAction"},{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"CommandMessageFollowupAction_followupAction"}],type:"CommandMessageFollowupAction"}],type:"MessageFollowupActionBase",abstractKey:"__isMessageFollowupActionBase"};t.hash="37d5c848548a8f6d18af1a3be6df04a0",a.default=t},2797:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MessageFollowupActionMain_message",selections:[{kind:"FragmentSpread",name:"CommandMessageFollowupAction_message"}],type:"Message"};t.hash="2e8f13378c548df1e1a000aacbdbe656",a.default=t},31137:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"MessageFollowupActionMain_viewer",selections:[{kind:"FragmentSpread",name:"SendMessageFollowupAction_viewer"},{kind:"FragmentSpread",name:"CommandMessageFollowupAction_viewer"}],type:"Viewer"};t.hash="ac2fddf078ea5fbb7a7e85aca3fa405e",a.default=t},2395:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"Message_bot",selections:[{kind:"ScalarField",name:"isApiBot"}],type:"Bot"};t.hash="7dfacd681672e42424101fb8d87e8f31",a.default=t},43396:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"Message_chat",selections:[{kind:"FragmentSpread",name:"MessageBubble_chat"}],type:"Chat"};t.hash="c7c8a5067a16439dc3c0c5bb9e0ecb07",a.default=t},52224:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"Message_viewer",selections:[{alias:"markdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_markdown_character_limit")'},{alias:"botMarkdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_bot_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_bot_markdown_character_limit")'},{kind:"ScalarField",name:"promptBotImageDomainWhitelist"},{alias:"enableScriptingCodeReference",args:[{kind:"Literal",name:"gateName",value:"poe_enable_scripting_code_blocks"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_scripting_code_blocks")'},{alias:"enableScriptBotCreation",args:[{kind:"Literal",name:"gateName",value:"poe_web_script_bot_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_script_bot_creation")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'}],type:"Viewer"};t.hash="f7e9e43450f7c44ebecae04a36eb9f35",a.default=t},87717:function(e,a,n){"use strict";var t,i,s,r;n.r(a);let l={argumentDefinitions:[],kind:"Fragment",name:"PrefillMessageFollowupAction_followupAction",selections:[{kind:"ScalarField",name:"__typename"},{alias:"titleText",kind:"ScalarField",name:"title"},{alias:"bodyText",kind:"ScalarField",name:"body"},{kind:"ScalarField",name:"prefillText"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"prefillAttachments",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_messageAttachment",selections:[t={kind:"ScalarField",name:"attachmentId"},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_messageAttachment",selections:[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"FileInfo_attachment"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"useFileUpload_addAttachments",selections:[i={kind:"ScalarField",name:"url"},s={kind:"ScalarField",name:"name"},t,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"}]}],argumentDefinitions:[]},i,s]},{kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:r=[{kind:"FragmentSpread",name:"FollowupActionImageSources_imageSources"}]},{kind:"LinkedField",name:"secondaryImageSources",plural:!0,selections:r}],type:"PrefillMessageFollowupAction"};l.hash="36904085bafbf31161ad023bae1686cc",a.default=l},97453:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PreviewFrame_viewer",selections:[{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="73cf370f6b05deb93b13a2de6a726310",a.default=t},8525:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PublishAsNewDropdownMenuItem_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"useIsCanvasBotTab_canvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="4321e4c9acd31d4d9c137bc3552cb589",a.default=t},50852:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PublishButtonGroup_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_canvasTab"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageCanvasTab"};t.hash="7d519b650677eb06ebdf648a08e311db",a.default=t},15837:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PublishButtonGroup_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:[{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_bot"}]},{kind:"FragmentSpread",name:"useUpdateCanvasBotConfirmationModal_chat"}],type:"Chat"};t.hash="de3074479b2bd98e16123c009d70c862",a.default=t},35939:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PublishButton_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageCanvasTab"};t.hash="d0cf53947ed76cd48af542d25afad585",a.default=t},75177:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c;n.r(a);let m={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"referencedMessageId"}],kind:"Fragment",name:"ReferencedMessageDraftLoaderQuery",selections:[{args:i=[{kind:"Variable",name:"messageId",variableName:"referencedMessageId"}],concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"FragmentSpread",name:"InputFooterReferencedMessageContextWrapper_message"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ReferencedMessageDraftLoaderQuery",selections:[{args:i,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"text"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"isPrivateBot"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"displayName"},{kind:"LinkedField",name:"picture",plural:!1,selections:[s={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[r={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},l={kind:"ScalarField",name:"handle"},o={kind:"ScalarField",name:"id"},d={kind:"TypeDiscriminator",abstractKey:"__isNode"}]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[o,{kind:"ScalarField",name:"uid"},l,{kind:"ScalarField",name:"fullName"},{kind:"ScalarField",name:"viewerIsFollowing"},c={kind:"ScalarField",name:"isDeleted"},{alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},d]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"name"},r,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"},o]}],type:"Attachment",abstractKey:"__isAttachment"},o]},o,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[s,c],type:"Message"},{kind:"InlineFragment",selections:[s],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"}]}]},params:{id:"4e035866cd4de4a7895a746eaac8f3a6f3cfea387988d7999c23065c12f36bc3",metadata:{},name:"ReferencedMessageDraftLoaderQuery",operationKind:"query",text:null}};m.hash="f6bc6d9f9479725d1591d63e1d306f20",a.default=m},98422:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ReferencedMessage_attachment",selections:[{kind:"ScalarField",name:"name"},{kind:"ScalarField",name:"url"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"}]}],type:"Attachment",abstractKey:"__isAttachment"};t.hash="4a75bfe7d0de6f6b708462c170757def",a.default=t},14151:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ReferencedMessage_bot",selections:[{kind:"FragmentSpread",name:"BotMessageHeader_bot"}],type:"Bot"};t.hash="a46056ef40eebbe21bc489beb5615951",a.default=t},38369:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ReferencedMessage_poeUser",selections:[{kind:"FragmentSpread",name:"UserMessageHeader_poeUser"}],type:"PoeUser"};t.hash="884bea7bc0ec4692778be09acbf2c803",a.default=t},27269:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"},{defaultValue:null,kind:"LocalArgument",name:"canvasContent"},{defaultValue:null,kind:"LocalArgument",name:"isRemixFlow"}],kind:"Fragment",name:"RemixButtonMutation",selections:[{args:i=[{kind:"Variable",name:"botId",variableName:"botId"},{kind:"Variable",name:"canvasContent",variableName:"canvasContent"},{kind:"Variable",name:"isRemixFlow",variableName:"isRemixFlow"}],concreteType:"ContinueChatToEditCanvasBot",kind:"LinkedField",name:"continueChatToEditCanvasBot",plural:!1,selections:[s={kind:"ScalarField",name:"status"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[r={kind:"ScalarField",name:"chatCode"},l={kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o={kind:"ScalarField",name:"displayName"}]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"RemixButtonMutation",selections:[{args:i,concreteType:"ContinueChatToEditCanvasBot",kind:"LinkedField",name:"continueChatToEditCanvasBot",plural:!1,selections:[s,{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[r,l,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o,d={kind:"ScalarField",name:"id"}]},d]}]}]},params:{id:"7bec521a76a285d0b715f158bf9fe15ee2970a677af68aea52964549ba2fa122",metadata:{},name:"RemixButtonMutation",operationKind:"mutation",text:null}};c.hash="748bbc29e0621b3ecfab78b06167c279",a.default=c},33370:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"RemixButton_canvasTab",selections:[{kind:"ScalarField",name:"id"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"}]}]}],type:"BotCanvasTab"};t.hash="868bf9b50337193eec36d8979114de4f",a.default=t},22946:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"},{defaultValue:null,kind:"LocalArgument",name:"canvasContent"},{defaultValue:null,kind:"LocalArgument",name:"isRemixFlow"}],kind:"Fragment",name:"RemixDropdownMenuItemMutation",selections:[{args:i=[{kind:"Variable",name:"botId",variableName:"botId"},{kind:"Variable",name:"canvasContent",variableName:"canvasContent"},{kind:"Variable",name:"isRemixFlow",variableName:"isRemixFlow"}],concreteType:"ContinueChatToEditCanvasBot",kind:"LinkedField",name:"continueChatToEditCanvasBot",plural:!1,selections:[s={kind:"ScalarField",name:"status"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[r={kind:"ScalarField",name:"chatCode"},l={kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o={kind:"ScalarField",name:"displayName"}]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"RemixDropdownMenuItemMutation",selections:[{args:i,concreteType:"ContinueChatToEditCanvasBot",kind:"LinkedField",name:"continueChatToEditCanvasBot",plural:!1,selections:[s,{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[r,l,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o,d={kind:"ScalarField",name:"id"}]},d]}]}]},params:{id:"290c8490a225d813dc5d480b78d3610720e4b3a5e9981b6bad5f56c3cf5d6d6c",metadata:{},name:"RemixDropdownMenuItemMutation",operationKind:"mutation",text:null}};c.hash="17535737c76e603ef41ddb0a892ca4b2",a.default=c},3525:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"RemixDropdownMenuItem_canvasTab",selections:[{kind:"ScalarField",name:"id"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"}]}]}],type:"BotCanvasTab"};t.hash="e36bcce407b153286005f4aa3303801c",a.default=t},32815:function(e,a,n){"use strict";var t,i;n.r(a);let s={argumentDefinitions:[],kind:"Fragment",name:"SendMessageFollowupAction_chat",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[t],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},i={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{kind:"ScalarField",name:"chatCode"},i],type:"Chat"};s.hash="1fa8880517a1d5cec799afc9bdf68373",a.default=s},65718:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"SendMessageFollowupAction_followupAction",selections:[{kind:"ScalarField",name:"__typename"},{alias:"titleText",kind:"ScalarField",name:"title"},{alias:"bodyText",kind:"ScalarField",name:"body"},{alias:"bodyTextJson",kind:"ScalarField",name:"bodyWhenUsingJsonParams"},{kind:"ScalarField",name:"sendText"},{kind:"ScalarField",name:"sendTextWhenUsingJsonParams"},{kind:"ScalarField",name:"sendParameters"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"sendAttachments",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_messageAttachment",selections:[{kind:"ScalarField",name:"attachmentId"},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_messageAttachment",selections:t=[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"FileInfo_attachment"}],argumentDefinitions:[]}]},{kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:i=[{kind:"FragmentSpread",name:"FollowupActionImageSources_imageSources"}]},{kind:"LinkedField",name:"secondaryImageSources",plural:!0,selections:i},{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"},{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:t,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],argumentDefinitions:[]}]}]},{concreteType:"Message",kind:"LinkedField",name:"referencedMessage",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:s=[{kind:"ScalarField",name:"messageId"}],type:"Message"},{kind:"InlineFragment",selections:s,type:"DeletedMessage"},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_referencedMessage",selections:[{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_referencedMessage",selections:[{kind:"InlineFragment",selections:t,type:"Message"},{kind:"InlineFragment",selections:t,type:"DeletedMessage"},{kind:"FragmentSpread",name:"ChatReferencedMessage_message"}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"}],argumentDefinitions:[]}]},{kind:"FragmentSpread",name:"SendMessageFollowupAction_useFollowupActionMessageSource_followupAction"}],type:"SendMessageFollowupAction"};r.hash="07339052349e75e76a894842cd6b439d",a.default=r},32428:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"SendMessageFollowupAction_useFollowupActionMessageSource_followupAction",selections:[{concreteType:"SendMessageFollowupActionMessageSource",kind:"LinkedField",name:"messageSource",plural:!1,selections:[{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"metadata"}]}],type:"SendMessageFollowupAction"};t.hash="640841d151b1a7f9318aa6707a7d193f",a.default=t},53088:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"SendMessageFollowupAction_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'}],type:"Viewer"};t.hash="fcd23a1553eff1e38653e03754b0f157",a.default=t},30564:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"SetupCanvasSubscriptions_chat",selections:[{kind:"ScalarField",name:"chatId"},{kind:"FragmentSpread",name:"SetupCanvasSubscriptions_useDeleteCanvasTabsOnMessageDeletedSubscription_chat"}],type:"Chat"};t.hash="a2dfa1d93c4fe362db746fba95b51cb2",a.default=t},53598:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"SetupCanvasSubscriptions_useDeleteCanvasTabsOnMessageDeletedSubscription_chat",selections:[{kind:"ScalarField",name:"chatId"},{kind:"ScalarField",name:"id"}],type:"Chat"};t.hash="78debededd95368fdacd498b69f63e89",a.default=t},91952:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ShareDropdownMenuItem_canvasTab",selections:[{kind:"ScalarField",name:"canvasCode"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"},{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"state"}]}],type:"MessageCanvasTab"},{kind:"FragmentSpread",name:"useIsCanvasBotTab_canvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="56d79062f59f9ea88dcedb6a100b56d3",a.default=t},71270:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ShareDropdownMenuItem_viewer",selections:[{kind:"FragmentSpread",name:"ChatInviteSection_viewer"},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'}],type:"Viewer"};t.hash="780da85e71f3260f024447410baa2139",a.default=t},11074:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ShowCanvasFABInner_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"state"},{kind:"FragmentSpread",name:"useSwitchToCanvasTab_canvasTab"},{kind:"FragmentSpread",name:"useCanvasInteractionLogger_canvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="e7000f74a252451e21b58e4db108f952",a.default=t},25682:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ShowCanvasFABInner_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"useCanvasInteractionLogger_chat"},{kind:"FragmentSpread",name:"useSwitchToCanvasTab_chat"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="4fc08a54bcfc80c59ce3b0aaff23a066",a.default=t},4618:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["canvasTabsConnection"]}]},name:"ShowCanvasFAB_chat",selections:[{kind:"FragmentSpread",name:"ShowCanvasFABInner_chat"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[t={kind:"FragmentSpread",name:"ShowCanvasFABInner_canvasTab"}]},{alias:"canvasTabsConnection",concreteType:"CanvasTabConnection",kind:"LinkedField",name:"__CanvasTabSelector_canvasTabsConnection_connection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[t,{kind:"ScalarField",name:"__typename"}]},{kind:"ScalarField",name:"cursor"}]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}]}],type:"Chat"};i.hash="6d10e5779a6126892e1f58e1c7bef417",a.default=i},30679:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"UserMessageHeader_poeUser",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"uid"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"fullName"},{kind:"ScalarField",name:"viewerIsFollowing"},{kind:"ScalarField",name:"isDeleted"},{args:[{kind:"Literal",name:"small",value:!0}],kind:"FragmentSpread",name:"UserImage_poeUser"},{kind:"FragmentSpread",name:"IdAnnotation_node"}],type:"PoeUser"};t.hash="d29a737a1926e7b1d8a515c4860e7570",a.default=t},15708:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"entryType"},i={defaultValue:null,kind:"LocalArgument",name:"targetUid"}],kind:"Fragment",name:"UserMessageHeader_poeUserSetFollow_Mutation",selections:[{args:s=[{kind:"Variable",name:"entryType",variableName:"entryType"},{kind:"Literal",name:"shouldFollow",value:!0},{kind:"Variable",name:"targetUid",variableName:"targetUid"}],concreteType:"PoeUserSetFollow",kind:"LinkedField",name:"poeUserSetFollow",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[r={kind:"ScalarField",name:"viewerIsFollowing"},l={kind:"ScalarField",name:"followerCount"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[o={kind:"ScalarField",name:"followeeCount"}]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[i,t],kind:"Operation",name:"UserMessageHeader_poeUserSetFollow_Mutation",selections:[{args:s,concreteType:"PoeUserSetFollow",kind:"LinkedField",name:"poeUserSetFollow",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[r,l,d={kind:"ScalarField",name:"id"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[o,d]},d]}]}]},params:{id:"95ad3eb5685b5696be6d892310d89ee80d18331199688fa388022c8ace73992f",metadata:{},name:"UserMessageHeader_poeUserSetFollow_Mutation",operationKind:"mutation",text:null}};c.hash="63a92aa03601fe150984154110caccc4",a.default=c},3765:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"VideoPreview_attachment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"FragmentSpread",name:"FileInfo_GenericFileInfo_attachment"}],type:"Attachment",abstractKey:"__isAttachment"};t.hash="2fdec1ca51ecfccc837ea86099fdb0a8",a.default=t},96479:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ViewBotDetailsButton_canvasTab",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"handle"}]}],type:"BotCanvasTab"};t.hash="0af2efe4722f73e03edbcf00fbad5d57",a.default=t},8057:function(e,a,n){"use strict";var t,i;n.r(a);let s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"chatId"}],kind:"Fragment",name:"cancelViewerActiveJobs_cancelViewerActiveJobs_Mutation",selections:i=[{args:[{kind:"Variable",name:"chatId",variableName:"chatId"}],concreteType:"CancelViewerActiveJobs",kind:"LinkedField",name:"cancelViewerActiveJobs",plural:!1,selections:[{kind:"ScalarField",name:"__typename"}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"cancelViewerActiveJobs_cancelViewerActiveJobs_Mutation",selections:i},params:{id:"bec4c5fb9ea395932da3174c38da893ffaf7ab142130ef1f0f796526051a80de",metadata:{},name:"cancelViewerActiveJobs_cancelViewerActiveJobs_Mutation",operationKind:"mutation",text:null}};s.hash="caca1aa63401baf8a45e08e6afbba4da",a.default=s},3768:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"cancelViewerActiveJobs_chat"};t.hash="c6b2a741a184aae7e0156ee70740ae7c",a.default=t},10607:function(e,a,n){"use strict";var t,i,s;n.r(a);let r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"chatId"}],kind:"Fragment",name:"checkLastMessageAndRefetchLastMessageQuery",selections:s=[{args:[{kind:"Variable",name:"chatId",variableName:"chatId"}],concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[i={kind:"ScalarField",name:"id"},{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[i]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"checkLastMessageAndRefetchLastMessageQuery",selections:s},params:{id:"53a254866b6c1081c11a6d704340f6907c04b6ddb17a7258def35cb091cf4a94",metadata:{},name:"checkLastMessageAndRefetchLastMessageQuery",operationKind:"query",text:null}};r.hash="48d5bb489288a728b2276e0966d8cbf5",a.default=r},89371:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"checkLastMessageAndRefetch_chat"};t.hash="51b627e428f27915be98fd38659284c2",a.default=t},82863:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j,A,N,O,R,U;n.r(a);let E=(t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"id",variableName:"id"}],r={kind:"ScalarField",name:"id"},l={kind:"ScalarField",name:"handle"},o={kind:"ScalarField",name:"allowsImageAttachments"},d={kind:"ScalarField",name:"deletionState"},c={kind:"ScalarField",name:"botId"},m={kind:"ScalarField",name:"nickname"},u={kind:"ScalarField",name:"displayName"},g={kind:"ScalarField",name:"author"},p={kind:"ScalarField",name:"state"},k={kind:"ScalarField",name:"textLengthOnCancellation"},h={kind:"ScalarField",name:"isOptimistic"},f={kind:"ScalarField",name:"timeoutLevel"},_=[{kind:"Literal",name:"last",value:12}],F={kind:"ScalarField",name:"uid"},b={kind:"ScalarField",name:"fullName"},v={kind:"ScalarField",name:"viewerIsFollowing"},S={kind:"ScalarField",name:"isDeleted"},C={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},M={kind:"TypeDiscriminator",abstractKey:"__isNode"},y={kind:"ScalarField",name:"limitedAccessType"},w={kind:"ScalarField",name:"isPrivateBot"},I={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},T={kind:"ScalarField",name:"translatedBotTags"},B={kind:"LinkedField",name:"picture",plural:!1,selections:[s={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[x={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},L={kind:"ScalarField",name:"messageId"},D={kind:"ScalarField",name:"text"},P=[F,r],j={kind:"ScalarField",name:"name"},A={kind:"ScalarField",name:"mimeType"},N={kind:"ClientExtension",selections:[h]},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"checkLastMessageAndRefetch_refetchQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"FragmentSpread",name:"ChatPageMain_refetch_chat"}],type:"Chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"checkLastMessageAndRefetch_refetchQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[s,r,{kind:"InlineFragment",selections:[{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[r,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"supportsRemix"},l,r,{kind:"ScalarField",name:"isServerBot"},o,{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},d,c,m,u]},g,p,k,{kind:"ClientExtension",selections:[h,f]}]},{args:_,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[g,{kind:"ScalarField",name:"isChatAnnouncement"},r,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[F,r,b,l,v,S,C,M]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[c,r,{kind:"ScalarField",name:"messageTimeoutSecs"},o,l,{kind:"ScalarField",name:"isApiBot"},m,y,w,I,T,d,u,B,M]},L,{kind:"ScalarField",name:"creationTime"},D,p,{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:P},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[r,{kind:"ScalarField",name:"attachmentId"},j,x,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[A,r,{kind:"ScalarField",name:"size"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},x,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[N],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},N]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[s,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[L,D,S,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[y,w,I,T,d,u,B,l,r,M]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[r,F,l,b,v,S,C,M]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[j,x,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[A,r]}],type:"Attachment",abstractKey:"__isAttachment"},r]}],type:"Message"},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"},r]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[O={kind:"ScalarField",name:"reaction"},{kind:"ScalarField",name:"count"},r]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:P},{kind:"ScalarField",name:"hasCitations"},k,{args:R=[{kind:"Literal",name:"first",value:5}],concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[O,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[F,b,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},r]},r,s]},U={kind:"ScalarField",name:"cursor"},r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:R,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},s,{kind:"ClientExtension",selections:[h,f,{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[S],type:"Message"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},M]},r,U]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},r],storageKey:"messagesConnection(last:12)"},{args:_,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"}],type:"Chat"}]}]},params:{id:"c13987956215f43fbec3f34ecd390bae31676592e5a70f8224070cb80820a48c",metadata:{},name:"checkLastMessageAndRefetch_refetchQuery",operationKind:"query",text:null}});E.hash="bcb31b5e98c8c34e16249d0ff678943d",a.default=E},34798:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"messageCreateStatus_message"};t.hash="46740b9b27384b497c30d6abff9cfcfd",a.default=t},30675:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"messageCreateStatus_returnsMessageCreateStatus_message"};t.hash="91cfe8561191602d1ac588da0e98d33d",a.default=t},33866:function(e,a,n){"use strict";var t,i,s,r;n.r(a);let l={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"isShareAllRecentMessages"},s={defaultValue:null,kind:"LocalArgument",name:"messageIds"}],kind:"Fragment",name:"messageSharing_shareMessagesMutation_Mutation",selections:r=[{args:[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"isShareAllRecentMessages",variableName:"isShareAllRecentMessages"},{kind:"Variable",name:"messageIds",variableName:"messageIds"}],concreteType:"MessagesShare",kind:"LinkedField",name:"messagesShare",plural:!1,selections:[{kind:"ScalarField",name:"shareCode"},{kind:"ScalarField",name:"status"},{kind:"ScalarField",name:"statusMessage"}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[t,s,i],kind:"Operation",name:"messageSharing_shareMessagesMutation_Mutation",selections:r},params:{id:"652521d75d063d7665de9d96f690b61edcc24640f8428112b9490ebd307b1896",metadata:{},name:"messageSharing_shareMessagesMutation_Mutation",operationKind:"mutation",text:null}};l.hash="d683fe22c476ec1331cab87045ec079c",a.default=l},2258:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"messageTimeout_getUserMessageTimeoutCap_message"};t.hash="44b7daa89587d9358f0f467a990a35c9",a.default=t},39990:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"messageTimeout_useTimeoutLevel",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"text"},{kind:"ScalarField",name:"messageId"},{kind:"InlineDataFragmentSpread",name:"messageTimeout_getUserMessageTimeoutCap_message",selections:[{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"size"}]},{kind:"ClientExtension",selections:[t={kind:"ScalarField",name:"isOptimistic"}]}]}],argumentDefinitions:[]},{kind:"ScalarField",name:"author"},{kind:"ClientExtension",selections:[t,{kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"}]}],type:"Message"};i.hash="48c5e8acd5e999df9ccc5509b35b14e6",a.default=i},83712:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"messageTimeout_useTimeoutLevel_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"nickname"}],type:"Bot"};t.hash="f58664e4bf0e4bdc392b416d3c28f7c1",a.default=t},68248:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"messageTimeout_useTimeoutLevel_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="7226ee325d5338125d0812ecd0b791b9",a.default=t},94286:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"messageTimeout_useTimeoutLevel_pairedUserMessage",selections:[{kind:"ScalarField",name:"messageId"}],type:"Message"};t.hash="e9ef72900bdf7719a0557fe779e8bcf9",a.default=t},43267:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"messageTimeout_useTimeoutLevel_viewer",selections:[{kind:"ScalarField",name:"uid"}],type:"Viewer"};t.hash="98d9938f4ccb690658b27a7bd2393500",a.default=t},21097:function(e,a,n){"use strict";var t,i;n.r(a);let s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",name:"regenerateMessageMutation",selections:i=[{args:[{kind:"Variable",name:"messageId",variableName:"messageId"}],concreteType:"MessageRegenerate",kind:"LinkedField",name:"messageRegenerate",plural:!1,selections:[{kind:"ScalarField",name:"status"},{kind:"ScalarField",name:"statusMessage"},{concreteType:"PoeJob",kind:"LinkedField",name:"job",plural:!1,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"jobId"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"regenerateMessageMutation",selections:i},params:{id:"c57eb11b407a486eb95d94eb698707b66509e1f8b59e08b8e8bb8e1e51bcf426",metadata:{},name:"regenerateMessageMutation",operationKind:"mutation",text:null}};s.hash="ce4e52338a6cff5b09a1937acca86e60",a.default=s},2751:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"regenerateMessage_chat"};t.hash="cd90998e379e3566100e40c8be93c728",a.default=t},86102:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"regenerateMessage_message"};t.hash="3caf553d74d86799cbef79475574af18",a.default=t},71770:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D;n.r(a);let P=(t=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],i=[{kind:"Variable",name:"messageId",variableName:"messageId"}],s={kind:"ScalarField",name:"status"},r={kind:"ScalarField",name:"statusMessage"},l={kind:"ScalarField",name:"id"},o={kind:"ScalarField",name:"uid"},d={kind:"ScalarField",name:"fullName"},c={kind:"ScalarField",name:"handle"},m={kind:"ScalarField",name:"viewerIsFollowing"},u={kind:"ScalarField",name:"isDeleted"},g={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},p={kind:"TypeDiscriminator",abstractKey:"__isNode"},k={kind:"ScalarField",name:"limitedAccessType"},h={kind:"ScalarField",name:"isPrivateBot"},f={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},_={kind:"ScalarField",name:"translatedBotTags"},F={kind:"ScalarField",name:"deletionState"},b={kind:"ScalarField",name:"displayName"},C={kind:"LinkedField",name:"picture",plural:!1,selections:[v={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[S={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},M={kind:"ScalarField",name:"messageId"},y={kind:"ScalarField",name:"text"},w=[o,l],L={kind:"ScalarField",name:"reaction"},D=[{kind:"Literal",name:"first",value:5}],{fragment:{argumentDefinitions:t,kind:"Fragment",name:"retryMessageMutation",selections:[{args:i,concreteType:"MessageRetry",kind:"LinkedField",name:"messageRetry",plural:!1,selections:[s,r,{concreteType:"Message",kind:"LinkedField",name:"responseMessage",plural:!1,selections:[l,{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[l,{kind:"FragmentSpread",name:"ChatMessagesView_useMessageTuples_messages"},{kind:"FragmentSpread",name:"ChatHistoryPagedList_message"},{kind:"FragmentSpread",name:"ChatSwitcherPagedList_message"}],argumentDefinitions:[]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"retryMessageMutation",selections:[{args:i,concreteType:"MessageRetry",kind:"LinkedField",name:"messageRetry",plural:!1,selections:[s,r,{concreteType:"Message",kind:"LinkedField",name:"responseMessage",plural:!1,selections:[l,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[o,l,d,c,m,u,g,p]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},l,{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"allowsImageAttachments"},c,{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"nickname"},k,h,f,_,F,b,C,p]},M,{kind:"ScalarField",name:"creationTime"},y,{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:w},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[l,{kind:"ScalarField",name:"attachmentId"},I={kind:"ScalarField",name:"name"},S,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[T={kind:"ScalarField",name:"mimeType"},l,{kind:"ScalarField",name:"size"}]},{kind:"ScalarField",name:"isInline"},{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},S,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[B={kind:"ClientExtension",selections:[x={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},B]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[v,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[M,y,u,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[k,h,f,_,F,b,C,c,l,p]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[l,o,c,d,m,u,g,p]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[I,S,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[T,l]}],type:"Attachment",abstractKey:"__isAttachment"},l]}],type:"Message"},{kind:"InlineFragment",selections:[l],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"},l]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[L,{kind:"ScalarField",name:"count"},l]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:w},{kind:"ScalarField",name:"isChatAnnouncement"},{kind:"ScalarField",name:"hasCitations"},{kind:"ScalarField",name:"textLengthOnCancellation"},{args:D,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[L,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[o,d,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},l]},l,v]},{kind:"ScalarField",name:"cursor"},l]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:D,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},{kind:"ClientExtension",selections:[x,{kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[v,u],type:"Message"},{kind:"InlineFragment",selections:[v],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},p]}]}]},params:{id:"ece96787d1cb01d23b1d8e4ddf1906927a3fb6386ee9eaee589e1ddc72949c88",metadata:{},name:"retryMessageMutation",operationKind:"mutation",text:null}});P.hash="e3d4da4521c6c7e1ed9461eb376ecfda",a.default=P},55246:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_bot"};t.hash="08d6fe2fd722e910321fc2bc6bbd8d02",a.default=t},72013:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_chat"};t.hash="31aa240f5ee05d6677439793a29b2e32",a.default=t},11806:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_createOptimisiticMessage_chat"};t.hash="056a191645415a811d12f67383dd6f8f",a.default=t},24505:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_createOptimisticMessage_bot"};t.hash="cb0078c1cf6b997a41f9c482f27a5eb4",a.default=t},82128:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_createOptimisticMessage_message"};t.hash="9057632284726535421d54fdf1a9753f",a.default=t},319:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"retryMessage_message"};t.hash="cdaf2dfb3d636b1493de925cba010b84",a.default=t},46688:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j;n.r(a);let A=(t=[{defaultValue:null,kind:"LocalArgument",name:"chatId"},{defaultValue:null,kind:"LocalArgument",name:"clientNonce"}],i=[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"clientNonce",variableName:"clientNonce"}],o=[s={kind:"ScalarField",name:"cursor"},{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[r={kind:"ScalarField",name:"id"},l={kind:"ScalarField",name:"clientNonce"},{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[r,{kind:"FragmentSpread",name:"ChatMessagesView_useMessageTuples_messages"},{kind:"FragmentSpread",name:"ChatHistoryPagedList_message"},{kind:"FragmentSpread",name:"ChatSwitcherPagedList_message"}],argumentDefinitions:[]}]}],d={kind:"ScalarField",name:"uid"},c={kind:"ScalarField",name:"fullName"},m={kind:"ScalarField",name:"handle"},u={kind:"ScalarField",name:"viewerIsFollowing"},g={kind:"ScalarField",name:"isDeleted"},p={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},k={kind:"TypeDiscriminator",abstractKey:"__isNode"},h={kind:"ScalarField",name:"limitedAccessType"},f={kind:"ScalarField",name:"isPrivateBot"},_={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},F={kind:"ScalarField",name:"translatedBotTags"},b={kind:"ScalarField",name:"deletionState"},v={kind:"ScalarField",name:"displayName"},M={kind:"LinkedField",name:"picture",plural:!1,selections:[S={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[C={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},y={kind:"ScalarField",name:"messageId"},w={kind:"ScalarField",name:"text"},I=[d,r],D={kind:"ScalarField",name:"reaction"},P=[{kind:"Literal",name:"first",value:5}],{fragment:{argumentDefinitions:t,kind:"Fragment",name:"sendChatBreakMutation",selections:[{args:i,concreteType:"MessageBreakEdgeCreate",kind:"LinkedField",name:"messageBreakEdgeCreate",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:o},{concreteType:"MessageEdge",kind:"LinkedField",name:"introductionMessage",plural:!1,selections:o}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"sendChatBreakMutation",selections:[{args:i,concreteType:"MessageBreakEdgeCreate",kind:"LinkedField",name:"messageBreakEdgeCreate",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:j=[s,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[r,l,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[d,r,c,m,u,g,p,k]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},r,{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"allowsImageAttachments"},m,{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"nickname"},h,f,_,F,b,v,M,k]},y,{kind:"ScalarField",name:"creationTime"},w,{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:I},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[r,{kind:"ScalarField",name:"attachmentId"},T={kind:"ScalarField",name:"name"},C,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[x={kind:"ScalarField",name:"mimeType"},r,{kind:"ScalarField",name:"size"}]},{kind:"ScalarField",name:"isInline"},{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},C,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[L={kind:"ClientExtension",selections:[B={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},L]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[S,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[y,w,g,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h,f,_,F,b,v,M,m,r,k]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[r,d,m,c,u,g,p,k]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[T,C,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[x,r]}],type:"Attachment",abstractKey:"__isAttachment"},r]}],type:"Message"},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{kind:"ScalarField",name:"jobId"},r]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[D,{kind:"ScalarField",name:"count"},r]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:I},{kind:"ScalarField",name:"isChatAnnouncement"},{kind:"ScalarField",name:"hasCitations"},{kind:"ScalarField",name:"textLengthOnCancellation"},{args:P,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[D,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[d,c,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},r]},r,S]},s,r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:P,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},{kind:"ClientExtension",selections:[B,{kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[S,g],type:"Message"},{kind:"InlineFragment",selections:[S],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},k]},r]},{concreteType:"MessageEdge",kind:"LinkedField",name:"introductionMessage",plural:!1,selections:j}]}]},params:{id:"12603ee540ca30179a0ba6e186d125a267b7ad57c4b8672f0f79af7e5b9ea236",metadata:{},name:"sendChatBreakMutation",operationKind:"mutation",text:null}});A.hash="33690e1f8834fb9bd8334c8c856a59d3",a.default=A},58343:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendChatBreak_chat"};t.hash="1d620424c16869fd2a57bf2f5e980738",a.default=t},81333:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendChatBreak_createOptimisticIntroMessage_bot"};t.hash="f14786524ea9140b99bf96c0d7c71e94",a.default=t},51915:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendChatBreak_onChatBreakSend_chat"};t.hash="8d11c79dcda12bd80f1e1983b3761293",a.default=t},99673:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j,A,N;n.r(a);let O=(t=[{defaultValue:null,kind:"LocalArgument",name:"bot"},{defaultValue:null,kind:"LocalArgument",name:"chatId"},{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"referencedMessageId"}],i=[{kind:"Variable",name:"bot",variableName:"bot"},{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"referencedMessageId",variableName:"referencedMessageId"}],s={kind:"ScalarField",name:"status"},r={kind:"ScalarField",name:"statusMessage"},o={kind:"ScalarField",name:"cursor"},d={kind:"ScalarField",name:"messageId"},c={kind:"ScalarField",name:"clientNonce"},u={concreteType:"PoeJob",kind:"LinkedField",name:"job",plural:!1,selections:[l={kind:"ScalarField",name:"id"},m={kind:"ScalarField",name:"jobId"}]},g={kind:"ScalarField",name:"uid"},p={kind:"ScalarField",name:"fullName"},k={kind:"ScalarField",name:"handle"},h={kind:"ScalarField",name:"viewerIsFollowing"},f={kind:"ScalarField",name:"isDeleted"},_={alias:"smallProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},F={kind:"TypeDiscriminator",abstractKey:"__isNode"},b={kind:"ScalarField",name:"limitedAccessType"},v={kind:"ScalarField",name:"isPrivateBot"},S={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},C={kind:"ScalarField",name:"translatedBotTags"},M={kind:"ScalarField",name:"deletionState"},y={kind:"ScalarField",name:"displayName"},T={kind:"LinkedField",name:"picture",plural:!1,selections:[w={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[I={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},x={kind:"ScalarField",name:"text"},B=[g,l],A={kind:"ScalarField",name:"reaction"},N=[{kind:"Literal",name:"first",value:5}],{fragment:{argumentDefinitions:t,kind:"Fragment",name:"sendCommandMessageMutation",selections:[{args:i,concreteType:"CommandMessageEdgeCreate",kind:"LinkedField",name:"commandMessageEdgeCreate",plural:!1,selections:[s,r,{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[l,o,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[l,d,c,{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[l,{kind:"FragmentSpread",name:"ChatMessagesView_useMessageTuples_messages"},{kind:"FragmentSpread",name:"ChatHistoryPagedList_message"},{kind:"FragmentSpread",name:"ChatSwitcherPagedList_message"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessagesView_message"}]}]},u]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"sendCommandMessageMutation",selections:[{args:i,concreteType:"CommandMessageEdgeCreate",kind:"LinkedField",name:"commandMessageEdgeCreate",plural:!1,selections:[s,r,{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[l,o,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[l,d,c,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[g,l,p,k,h,f,_,F]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"},l,{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"allowsImageAttachments"},k,{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"nickname"},b,v,S,C,M,y,T,F]},{kind:"ScalarField",name:"creationTime"},x,{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:B},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[l,{kind:"ScalarField",name:"attachmentId"},L={kind:"ScalarField",name:"name"},I,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[D={kind:"ScalarField",name:"mimeType"},l,{kind:"ScalarField",name:"size"}]},{kind:"ScalarField",name:"isInline"},{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},I,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[j={kind:"ClientExtension",selections:[P={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},j]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[w,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[d,x,f,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[b,v,S,C,M,y,T,k,l,F]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[l,g,k,p,h,f,_,F]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[L,I,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[D,l]}],type:"Attachment",abstractKey:"__isAttachment"},l]}],type:"Message"},{kind:"InlineFragment",selections:[l],type:"Node",abstractKey:"__isNode"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[m,l]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[A,{kind:"ScalarField",name:"count"},l]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:B},{kind:"ScalarField",name:"isChatAnnouncement"},{kind:"ScalarField",name:"hasCitations"},{kind:"ScalarField",name:"textLengthOnCancellation"},{args:N,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[A,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[g,p,{kind:"ScalarField",name:"viewerIsUser"},{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},l]},l,w]},o,l]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"reactionsConnection(first:5)"},{args:N,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},{kind:"ClientExtension",selections:[P,{kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[w,f],type:"Message"},{kind:"InlineFragment",selections:[w],type:"DeletedMessage"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},F]}]},u]}]},params:{id:"e8879aa3347d732f1669d554d7d24e64655ffc8a6b688f3c3588434ea71e7a65",metadata:{},name:"sendCommandMessageMutation",operationKind:"mutation",text:null}});O.hash="8d89ca30de7f97585430d1838d01673c",a.default=O},86574:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendCommandMessage_bot"};t.hash="debba6ce5bc03fe152cfe085a3074f22",a.default=t},69105:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendCommandMessage_chat"};t.hash="e0648bc68b77ffc547126ea7d4974d7c",a.default=t},44704:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendCommandMessage_message"};t.hash="92807f989c936b82ef97888f0cd089f1",a.default=t},55831:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendCommandMessage_onCommandMessageSend_chat"};t.hash="8e75dd7b275ac7bcebcc5af9cbde63f1",a.default=t},72679:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useCanvasActionsSubscription_canvasTab",selections:[{kind:"ScalarField",name:"globalId"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="4564a4078ee5d0acfed5a64376042e30",a.default=t},94711:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useCanvasActionsSubscription_viewer",selections:[{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="321b7a814a59652443d080e433421fb0",a.default=t},78573:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useCanvasInteractionLogger_canvasTab",selections:[{kind:"ScalarField",name:"id"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageCanvasTab"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"botId"}],type:"BotCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="27e6274296da16f00da99a9517de2fbc",a.default=t},66646:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useCanvasInteractionLogger_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="b8ee619afc9d3a178470f464239c3077",a.default=t},52032:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useCanvasTabContentSource_canvasTab",selections:[{kind:"ScalarField",name:"globalId"},{kind:"ScalarField",name:"__typename"},{kind:"InlineFragment",selections:[t={kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"botId"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[t,{kind:"ScalarField",name:"messageId"},{kind:"ScalarField",name:"codeblockIndex"}],type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};i.hash="14282fd8d482aeea8effc3b119e2590c",a.default=i},50989:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useChatHasActiveJobs_chat",selections:[{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[{kind:"ScalarField",name:"jobId"}]}],type:"Chat"};t.hash="21e268454b662b0ef8ae0e0a914980cc",a.default=t},75807:function(e,a,n){"use strict";var t,i;n.r(a);let s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"chatId"}],kind:"Fragment",name:"useChatLastMessageImpressionTracker_ChatMarkAsSeen_Mutation",selections:i=[{args:[{kind:"Variable",name:"chatId",variableName:"chatId"}],concreteType:"ChatMarkAsSeen",kind:"LinkedField",name:"chatMarkAsSeen",plural:!1,selections:[{kind:"ScalarField",name:"__typename"}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useChatLastMessageImpressionTracker_ChatMarkAsSeen_Mutation",selections:i},params:{id:"dcfc17acd2ec0bbd1525fd786ead7689d8c6201c59300c31f2d5d335984689db",metadata:{},name:"useChatLastMessageImpressionTracker_ChatMarkAsSeen_Mutation",operationKind:"mutation",text:null}};s.hash="c12aa54b3c53ff353539f4076aa1299f",a.default=s},84623:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useChatLastMessageImpressionTracker_chat"};t.hash="0bb79505e4ddf086b6d23b7b60fb48f5",a.default=t},48379:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useChatMessageSeenState_chat",selections:[{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"},{concreteType:"Message",kind:"LinkedField",name:"lastMessageSeenByAllOtherMembers",plural:!1,selections:[{kind:"ScalarField",name:"messageId"}]}],type:"Chat"};t.hash="b64af37995959c68199f5f1cade68f3b",a.default=t},51457:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useChatMessageSeenState_message",selections:[{kind:"ScalarField",name:"messageId"},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[{kind:"ScalarField",name:"uid"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};t.hash="80fc2e727799dae4db7d4831377abd38",a.default=t},17013:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useChatMessageSeenState_viewer",selections:[{kind:"ScalarField",name:"uid"},{alias:"poeEnableMessageReadReceipts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_read_receipts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_read_receipts")'}],type:"Viewer"};t.hash="554872fc5b25ae3b362096686ea3b071",a.default=t},26500:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g;n.r(a);let p={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"connections"},s={defaultValue:null,kind:"LocalArgument",name:"tabInput"},r={defaultValue:null,kind:"LocalArgument",name:"tabNodeId"},l={defaultValue:null,kind:"LocalArgument",name:"tabToOpenNodeId"}],kind:"Fragment",name:"useCloseCanvasTabMutation",selections:[{args:o=[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"tabInput",variableName:"tabInput"},{kind:"Variable",name:"tabNodeId",variableName:"tabNodeId"},{kind:"Variable",name:"tabToOpenNodeId",variableName:"tabToOpenNodeId"}],concreteType:"CloseCanvasTab",kind:"LinkedField",name:"closeCanvasTab",plural:!1,selections:[d={kind:"ScalarField",name:"status"},{kind:"LinkedField",name:"closedCanvasTab",plural:!1,selections:[c={kind:"ScalarField",name:"id"},m={kind:"ScalarField",name:"state"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[u={kind:"ScalarField",name:"canvasTabsCount"}]}]},{kind:"LinkedField",name:"openedCanvasTab",plural:!1,selections:[c,m]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[t,s,r,l,i],kind:"Operation",name:"useCloseCanvasTabMutation",selections:[{args:o,concreteType:"CloseCanvasTab",kind:"LinkedField",name:"closeCanvasTab",plural:!1,selections:[d,{kind:"LinkedField",name:"closedCanvasTab",plural:!1,selections:[g={kind:"ScalarField",name:"__typename"},c,{handle:"deleteEdge",key:"",kind:"ScalarHandle",name:"id",handleArgs:[{kind:"Variable",name:"connections",variableName:"connections"}]},m,{kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[u,c]}]},{kind:"LinkedField",name:"openedCanvasTab",plural:!1,selections:[g,c,m]}]}]},params:{id:"83d797e8a0f77205a82ec6577af3fb8e49f5ff1f9c3c2e30a738a375ce71f624",metadata:{},name:"useCloseCanvasTabMutation",operationKind:"mutation",text:null}};p.hash="d50fd3feac737eba34d288075ad1b53f",a.default=p},37976:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useCloseCanvasTab_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"},{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"}],type:"Chat"};t.hash="46078486d41efddac4378d0296ba4a4e",a.default=t},75641:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useEnsureLeftMenuCollapsedForOptimisticCanvasChats_chat",selections:[{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="73e0225764e7e47264937fb7c0406b0e",a.default=t},96916:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"tabInput"},s={defaultValue:null,kind:"LocalArgument",name:"tabNodeId"}],kind:"Fragment",name:"useHideCanvasTabMutation",selections:[{args:r=[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"tabInput",variableName:"tabInput"},{kind:"Variable",name:"tabNodeId",variableName:"tabNodeId"}],concreteType:"PutCanvasTabInBackground",kind:"LinkedField",name:"putCanvasTabInBackground",plural:!1,selections:[l={kind:"ScalarField",name:"status"},{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[o={kind:"ScalarField",name:"id"},d={kind:"ScalarField",name:"state"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[t,s,i],kind:"Operation",name:"useHideCanvasTabMutation",selections:[{args:r,concreteType:"PutCanvasTabInBackground",kind:"LinkedField",name:"putCanvasTabInBackground",plural:!1,selections:[l,{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},o,d]}]}]},params:{id:"417f9bea08d151461f9b4c18834e4464f35082dea06ee844741edf6441260a7d",metadata:{},name:"useHideCanvasTabMutation",operationKind:"mutation",text:null}};c.hash="6c5a9b453b277e6dc4a5b5bc29668773",a.default=c},73863:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useHideCanvasTab_canvasTab",selections:[{kind:"ScalarField",name:"id"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};t.hash="98329689a84498e391d31a859a9140fa",a.default=t},65545:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useHideCanvasTab_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="3ac84977702c72c195238c3b3c9ad40f",a.default=t},75351:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useInitialCanvasSidebarState_chat",selections:[t={kind:"ScalarField",name:"id"},{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[t]},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[{kind:"ScalarField",name:"state"},{kind:"FragmentSpread",name:"useIsCanvasBotTab_canvasTab"}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};i.hash="256583acefd1104acec7ef8b86431407",a.default=i},25385:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useIsCanvasBotTab_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"__typename"}],type:"BotCanvasTab"};t.hash="c45e5233ce69c09039732f84b2e678c7",a.default=t},94083:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useIsCanvasTabOptimistic_canvasTab",selections:[{kind:"InlineFragment",selections:t=[{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{kind:"InlineFragment",selections:t,type:"MessageCanvasTab"}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};i.hash="d3e9b9510b2f8799d783514097918b57",a.default=i},90954:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useIsCodeblockOpenInCanvas_message",selections:[{concreteType:"MessageCanvasTab",kind:"LinkedField",name:"canvasTabs",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"codeblockIndex"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"title"}]}],type:"Message"};t.hash="fc89cc6d081cc9f990acc0a27587204a",a.default=t},65176:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useIsEditingCanvasBotWithBuilder_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:t=[{kind:"ScalarField",name:"botId"}]},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:t}],type:"Chat"};i.hash="84c63b85843a99890cc52fe1c9188bd3",a.default=i},49953:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useIsViewerMessageCreator_message",selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:t=[{kind:"ScalarField",name:"uid"}]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:t}]},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Message"};i.hash="0ae4ea64d45b9d10966ddda91a9d28f0",a.default=i},4001:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useIsViewerMessageCreator_viewer",selections:[{kind:"ScalarField",name:"uid"}],type:"Viewer"};t.hash="f0fc13557df01edbf0fb358c4d3dd0f5",a.default=t},68418:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useOnMiniAppRequest_viewer",selections:[{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="49f40e663009b237d24f7dc6d71efde4",a.default=t},1425:function(e,a,n){"use strict";var t,i,s;n.r(a);let r=(s={kind:"InlineFragment",selections:i=[t={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageCanvasTab"},{argumentDefinitions:[],kind:"Fragment",name:"useOnSendUserMessageFromCanvas_canvasTab",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"globalId"},{kind:"InlineFragment",selections:i,type:"BotCanvasTab"},s,{kind:"InlineDataFragmentSpread",name:"CanvasTab_getSourceMetadata_canvasTab",selections:[{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"botId"},t],type:"BotCanvasTab"},s],argumentDefinitions:[]}],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"});r.hash="93434598e5fa9be372114a1809b044c6",a.default=r},19143:function(e,a,n){"use strict";var t,i,s;n.r(a);let r=(i=[t={kind:"ScalarField",name:"id"}],{argumentDefinitions:[],kind:"Fragment",name:"useOnSendUserMessageFromCanvas_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[t,{kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:i,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[t,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},s={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[t,{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:i,argumentDefinitions:[]}]},s],type:"Chat"});r.hash="b2d5e44150ee800619f4406a6d0fdfb5",a.default=r},93578:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useOnSendUserMessageFromCanvas_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="7748b7ed28400a04bf4e45fe6588d15f",a.default=t},69438:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_;n.r(a);let F={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"connections"},s={defaultValue:null,kind:"LocalArgument",name:"contentObject"},r={defaultValue:null,kind:"LocalArgument",name:"openedAt"},l={defaultValue:null,kind:"LocalArgument",name:"tabInput"}],kind:"Fragment",name:"useOpenCanvasTabMutation",selections:[{args:o=[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"contentObject",variableName:"contentObject"},{kind:"Variable",name:"openedAt",variableName:"openedAt"},{kind:"Variable",name:"tabInput",variableName:"tabInput"}],concreteType:"OpenCanvasTabInChat",kind:"LinkedField",name:"openCanvasTabInChat",plural:!1,selections:[d={kind:"ScalarField",name:"status"},{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"canvasTabEdge",plural:!1,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[c={kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"CanvasTab_canvasTab"},m={kind:"ScalarField",name:"state"},{kind:"InlineFragment",selections:[u={kind:"ScalarField",name:"messageId"},g={kind:"ScalarField",name:"codeblockIndex"}],type:"MessageCanvasTab"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p={kind:"ScalarField",name:"canvasTabsCount"}]}]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[t,l,s,i,r],kind:"Operation",name:"useOpenCanvasTabMutation",selections:[{args:o,concreteType:"OpenCanvasTabInChat",kind:"LinkedField",name:"openCanvasTabInChat",plural:!1,selections:[d,{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"canvasTabEdge",plural:!1,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},c,{kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},{kind:"ScalarField",name:"title"},{kind:"ScalarField",name:"globalId"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[k={kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"},h={kind:"ScalarField",name:"content"}]},{kind:"ScalarField",name:"clientNonce"},{kind:"ScalarField",name:"canvasCode"},m,{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p,c]},{kind:"InlineFragment",selections:[f={kind:"ScalarField",name:"botId"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[f,c,{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[h,k]}]},_={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[u,g,{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[u,c,m]},_],type:"MessageCanvasTab"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}]},c]},{handle:"prependEdge",key:"",kind:"LinkedHandle",name:"canvasTabEdge",handleArgs:[{kind:"Variable",name:"connections",variableName:"connections"}]}]}]},params:{id:"2d00eadb3e3ceab217e025810116a7c44b1e3d1a7e834fe18cbed8a36bda86ff",metadata:{},name:"useOpenCanvasTabMutation",operationKind:"mutation",text:null}};F.hash="c487c9a4bf68a17543a55c716c0418ae",a.default=F},69905:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useOpenCanvasTab_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="294c04df8ef9ead80f3b514501deeac3",a.default=t},57089:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useOptimisticCanvasTabInput_canvasTab"};t.hash="7e8533d2c0db97545ae0342d6e790e4a",a.default=t},8805:function(e,a,n){"use strict";var t,i,s,r,l,o;n.r(a);let d={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatNodeId"},i={defaultValue:null,kind:"LocalArgument",name:"messageNodeId"}],kind:"Fragment",name:"usePreviewHeaderCanvasHelpersLazyLoadQuery",selections:[{alias:"message",args:s=[{kind:"Variable",name:"id",variableName:"messageNodeId"}],kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"usePreviewHeaderCanvasHelpers_message"}]},{alias:"chat",args:r=[{kind:"Variable",name:"id",variableName:"chatNodeId"}],kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"usePreviewHeaderCanvasHelpers_chat"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[i,t],kind:"Operation",name:"usePreviewHeaderCanvasHelpersLazyLoadQuery",selections:[{alias:"message",args:s,kind:"LinkedField",name:"node",plural:!1,selections:[l={kind:"ScalarField",name:"__typename"},{kind:"InlineFragment",selections:[{concreteType:"MessageCanvasTab",kind:"LinkedField",name:"canvasTabs",plural:!0,selections:[o={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"codeblockIndex"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"title"}]},{kind:"ScalarField",name:"messageId"}],type:"Message"},o]},{alias:"chat",args:r,kind:"LinkedField",name:"node",plural:!1,selections:[l,o,{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"chatId"},{kind:"ScalarField",name:"hasMultipleUsers"}],type:"Chat"}]}]},params:{id:"4a96bcf319a6658a35f08978df7ae509cf7dbf56a1a5b08782b2697384022c44",metadata:{},name:"usePreviewHeaderCanvasHelpersLazyLoadQuery",operationKind:"query",text:null}};d.hash="41e0208a588899aa732717a45e57ab05",a.default=d},53281:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"usePreviewHeaderCanvasHelpers_chat",selections:[{kind:"FragmentSpread",name:"useCloseCanvasTab_chat"},{kind:"FragmentSpread",name:"useOpenCanvasTab_chat"}],type:"Chat"};t.hash="5ff1ed200ce4945c10e548b685ad11c6",a.default=t},76206:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"usePreviewHeaderCanvasHelpers_message",selections:[{kind:"FragmentSpread",name:"useIsCodeblockOpenInCanvas_message"},{kind:"ScalarField",name:"messageId"}],type:"Message"};t.hash="679e674b6ca746e26002114cb090ab0b",a.default=t},54599:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"usePreviewIframeUrl_viewer",selections:[{alias:"canvasPreviewUrlOverride",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_preview_url_override"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_canvas_preview_url_override")'}],type:"Viewer"};t.hash="960cb9b7b7cd5941c35bace019791e7f",a.default=t},21060:function(e,a,n){"use strict";var t,i,s,r,l;n.r(a);let o={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"actions"},{defaultValue:null,kind:"LocalArgument",name:"canvasTabGlobalId"}],kind:"Fragment",name:"useProcessCanvasActionsFromCanvasTabMutation",selections:[{args:i=[{kind:"Variable",name:"actions",variableName:"actions"},{kind:"Variable",name:"canvasTabGlobalId",variableName:"canvasTabGlobalId"}],concreteType:"ProcessActionsFromCanvasTab",kind:"LinkedField",name:"processActionsFromCanvasTab",plural:!1,selections:[s={kind:"ScalarField",name:"status"},{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[r={kind:"ScalarField",name:"id"}]},l={kind:"ScalarField",name:"dataForCanvasTab"}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useProcessCanvasActionsFromCanvasTabMutation",selections:[{args:i,concreteType:"ProcessActionsFromCanvasTab",kind:"LinkedField",name:"processActionsFromCanvasTab",plural:!1,selections:[s,{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},r]},l]}]},params:{id:"56ee3854fdd58cbe5e161808f0e3ee13eae1a1e115c76bafe918209ca2a55ba1",metadata:{},name:"useProcessCanvasActionsFromCanvasTabMutation",operationKind:"mutation",text:null}};o.hash="323d39866caa26c21c7db9db3959064f",a.default=o},74229:function(e,a,n){"use strict";var t,i,s,r,l,o,d,c,m,u,g,p,k,h,f,_,F,b,v,S,C,M,y,w,I,T,x,B,L,D,P,j,A,N,O,R,U,E,Z,H,V,G,K,W,z,q,$,J,Q,Y,X,ee,ea,en,et,ei,es,er,el,eo,ed,ec,em,eu,eg,ep,ek,eh,ef,e_,eF,eb,ev,eS,eC,eM,ey,ew,eI,eT,ex,eB,eL,eD;n.r(a);let eP=(t=[{defaultValue:null,kind:"LocalArgument",name:"actions"},{defaultValue:null,kind:"LocalArgument",name:"optimisticCanvasTab"}],i=[{kind:"Variable",name:"actions",variableName:"actions"},{kind:"Variable",name:"optimisticCanvasTab",variableName:"optimisticCanvasTab"}],s={kind:"ScalarField",name:"status"},r={kind:"ScalarField",name:"id"},l={kind:"ScalarField",name:"globalId"},o={kind:"ScalarField",name:"chatCode"},m={kind:"ScalarField",name:"chatId"},u={kind:"ScalarField",name:"hasMarkdownRendering"},g=[{kind:"Literal",name:"first",value:2}],p={kind:"ScalarField",name:"__typename"},k={kind:"InlineFragment",selections:c=[d={kind:"ScalarField",name:"botId"}],type:"BotCanvasTab"},f={kind:"ClientExtension",selections:[h={kind:"ScalarField",name:"isOptimistic"}]},_={kind:"ScalarField",name:"dataForCanvasTab"},F={kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},b={kind:"ScalarField",name:"title"},M={concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[v={kind:"ScalarField",name:"contentType"},S={kind:"ScalarField",name:"language"},C={kind:"ScalarField",name:"content"}]},y={kind:"ScalarField",name:"clientNonce"},w={kind:"ScalarField",name:"canvasCode"},I={kind:"ScalarField",name:"handle"},T={kind:"ScalarField",name:"nickname"},x={kind:"ScalarField",name:"viewerIsCreator"},B={kind:"ScalarField",name:"isPrivateBot"},L={kind:"ScalarField",name:"messageTimeoutSecs"},D={kind:"ScalarField",name:"allowsImageAttachments"},P={kind:"ScalarField",name:"isApiBot"},j={kind:"ScalarField",name:"limitedAccessType"},A={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},N={kind:"ScalarField",name:"translatedBotTags"},O={kind:"ScalarField",name:"deletionState"},R={kind:"ScalarField",name:"displayName"},Z={kind:"LinkedField",name:"picture",plural:!1,selections:E=[p,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[U={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},H={kind:"ScalarField",name:"supportsRemix"},V={kind:"ScalarField",name:"isServerBot"},G={kind:"ScalarField",name:"supportsFileUpload"},K={kind:"ScalarField",name:"customUIDefinition"},W={kind:"ScalarField",name:"isCanvasOnlyBot"},Q={concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[z={kind:"ScalarField",name:"isDeleted"},{args:q=[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},$={kind:"ScalarField",name:"fullName"},{alias:"nullableHandle",kind:"ScalarField",name:"handle"},r,J={kind:"TypeDiscriminator",abstractKey:"__isNode"}]},Y={kind:"ScalarField",name:"canUserAccessBot"},X={kind:"ScalarField",name:"poweredBy"},ea={kind:"ScalarField",name:"state"},en={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[d,r,I,x,O,ee={kind:"ScalarField",name:"isPromptPublic"},W,B,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[C,v]}]},et={kind:"ClientExtension",selections:[h,{kind:"ScalarField",name:"idWhenWasOptimistic"}]},es={kind:"ScalarField",name:"codeblockIndex"},er={concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[ei={kind:"ScalarField",name:"messageId"},r,ea]},el={kind:"ScalarField",name:"viewerIsUser"},eo=[ei,r],ed={kind:"ScalarField",name:"creationTime"},ec={kind:"ScalarField",name:"author"},em={kind:"ScalarField",name:"textLengthOnCancellation"},eu={kind:"ScalarField",name:"timeoutLevel"},eg={kind:"ScalarField",name:"jobId"},ep={kind:"InlineFragment",selections:[d,en,f],type:"BotCanvasTab"},ek={kind:"ScalarField",name:"cursor"},eh={concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},ef=[{kind:"Literal",name:"last",value:12}],e_={kind:"ScalarField",name:"uid"},eF={kind:"ScalarField",name:"viewerIsFollowing"},eb={alias:"smallProfilePhotoUrl",args:q,kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},ev={kind:"ScalarField",name:"text"},eS=[e_,r],eC={kind:"ScalarField",name:"name"},eM={kind:"ScalarField",name:"mimeType"},ey={kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"},ew={kind:"ScalarField",name:"reaction"},eI=[{kind:"Literal",name:"first",value:5}],eT=[b],ex={kind:"ScalarField",name:"costBreakdown"},eB={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[d,T,R,r,I,O,Z]},eL={concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[m,r]},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"useProcessCanvasActionsFromOptimisticCanvasTabMutation",selections:[{args:i,concreteType:"ProcessActionsFromOptimisticCanvasTab",kind:"LinkedField",name:"processActionsFromOptimisticCanvasTab",plural:!1,selections:[s,{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[r,l,{kind:"FragmentSpread",name:"CanvasTab_canvasTab"},{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useNavigateFromOptimisticChatToRealChat_chat",selections:[o,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:c},{kind:"FragmentSpread",name:"ChatPageColumn_chat"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_chat",selections:[r,m,o,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[u]}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_handleOptimisticTabInNewChat_chat",selections:[r,{kind:"InlineDataFragmentSpread",name:"sendMessage_areSameCanvasTab_chat",selections:[{args:g,concreteType:"CanvasTabConnection",kind:"LinkedField",name:"canvasTabsConnection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[p,r]}]}],storageKey:"canvasTabsConnection(first:2)"}],argumentDefinitions:[]},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[r,{kind:"InlineDataFragmentSpread",name:"sendMessage_areSameCanvasTab_canvasTab",selections:[p,k],argumentDefinitions:[]}]},f],argumentDefinitions:[]}],argumentDefinitions:[]}]}]},_]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useProcessCanvasActionsFromOptimisticCanvasTabMutation",selections:[{args:i,concreteType:"ProcessActionsFromOptimisticCanvasTab",kind:"LinkedField",name:"processActionsFromOptimisticCanvasTab",plural:!1,selections:[s,{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[p,r,l,F,b,M,y,w,{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[o,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[d,r,I,u,{kind:"ScalarField",name:"introduction"},T,x,{kind:"ScalarField",name:"isTrustedBot"},B,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[C,v,S]},L,D,P,j,A,N,O,R,Z,H,V,G,K,{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"shareLink"},{kind:"ScalarField",name:"isDown"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"noAccessMessage"},{kind:"ScalarField",name:"allowsClearContext"},{kind:"ScalarField",name:"conversationStarters"},W,{kind:"ScalarField",name:"monthlyActiveUsers"},Q,Y,{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingLabel"}]},{kind:"ScalarField",name:"description"},X,ee,{kind:"ScalarField",name:"promptPlaintext"},{kind:"ScalarField",name:"shouldHide"},{kind:"ScalarField",name:"isOfficialBot"},{kind:"ScalarField",name:"botCategory"},{alias:"smallPicture",args:q,kind:"LinkedField",name:"picture",plural:!1,selections:E,storageKey:'picture(size:"small")'},J]},r,z,b,{kind:"ScalarField",name:"hasMultipleUsers"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[p,r,ea,F,b,l,M,y,w,{kind:"InlineFragment",selections:[d,en,et],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[ei,es,er,et,{kind:"InlineFragment",selections:[J],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"}],type:"MessageCanvasTab"},J]},m,{kind:"ScalarField",name:"canvasTabsCount"},{concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:[d,r,{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[el,r]}]},{kind:"ScalarField",name:"unseenItemCount"},{concreteType:"Message",kind:"LinkedField",name:"viewerLastSeenMessage",plural:!1,selections:eo},{kind:"ScalarField",name:"shouldBotAutoRespond"},ed,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[ec,ea,r,em,{kind:"ClientExtension",selections:[h,eu]},ei,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[H,I,r,V,D,G,K,O,d,T,R]}]},{concreteType:"Message",kind:"LinkedField",name:"lastMessageSeenByAllOtherMembers",plural:!1,selections:eo},{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[eg,{kind:"ScalarField",name:"viewerCanCancel"},r]},{args:g,concreteType:"CanvasTabConnection",kind:"LinkedField",name:"canvasTabsConnection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[p,F,r,ea,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[v,S]},{kind:"InlineFragment",selections:[ei,es,{kind:"InlineFragment",selections:[b,l,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[C]},y,w,ep,{kind:"InlineFragment",selections:[er,f],type:"MessageCanvasTab"},J],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"},f],type:"MessageCanvasTab"},k]},ek,r]},eh,r],storageKey:"canvasTabsConnection(first:2)"},{args:g,handle:"connection",key:"CanvasTabSelector_canvasTabsConnection",kind:"LinkedHandle",name:"canvasTabsConnection"},{args:ef,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[ec,{kind:"ScalarField",name:"isChatAnnouncement"},r,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[e_,r,$,I,eF,z,eb,J]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[d,r,L,D,I,P,T,j,B,A,N,O,R,Z,J]},ei,ed,ev,ea,y,{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},v,{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:eS},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[r,{kind:"ScalarField",name:"attachmentId"},eC,U,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[eM,r,{kind:"ScalarField",name:"size"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},U,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"InlineFragment",selections:[f],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"},f]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[p,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[ei,ev,z,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[j,B,A,N,O,R,Z,I,r,J]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[r,e_,I,$,eF,z,eb,J]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[eC,U,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[eM,r]}],type:"Attachment",abstractKey:"__isAttachment"},r]}],type:"Message"},ey]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[eg,r]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[ew,{kind:"ScalarField",name:"count"},r]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:eS},{kind:"ScalarField",name:"hasCitations"},em,{args:eI,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[ew,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[e_,$,el,{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},r]},r,p]},ek,r]},eh],storageKey:"reactionsConnection(first:5)"},{args:eI,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},p,{kind:"ClientExtension",selections:[h,eu,{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"clientMessageStateText"}]},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[z],type:"Message"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},J]},r,ek]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},r],storageKey:"messagesConnection(last:12)"},{args:ef,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"},{kind:"LinkedField",name:"displayedChatModal",plural:!1,selections:[p,{kind:"InlineFragment",selections:[m,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[I,O,R,Z,r]},{kind:"LinkedField",name:"budgetIncreaseRequester",plural:!1,selections:[p,{kind:"InlineFragment",selections:[I],type:"Bot"},{kind:"InlineFragment",selections:eT,type:"MessageCanvasTab"},{kind:"InlineFragment",selections:eT,type:"BotCanvasTab"},ey]},{kind:"ScalarField",name:"applicablePointPriceThreshold"},{kind:"ScalarField",name:"totalRequestAmount"},ei,ex,{concreteType:"MessagePointInfo",kind:"LinkedField",name:"messagePointInfo",plural:!1,selections:[{kind:"ScalarField",name:"messagePointBalance"},r]}],type:"CostThresholdUpdateChatModal"},{kind:"InlineFragment",selections:[m,eB,eL,ed],type:"PaywallChatModal"},{kind:"InlineFragment",selections:[m,eB,eL,ed,eD={kind:"ScalarField",name:"messageCostAmount"},ex],type:"PointLimitPaywallChatModal"},{kind:"InlineFragment",selections:[m,ed,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[I,O,R,Z,r,d,T]},eD,ex,{kind:"ScalarField",name:"subscriberPointLimitSubtext"}],type:"SubscriberPointLimitChatModal"},{kind:"InlineFragment",selections:[eL,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[d,r,X,O,R,Z,I,{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingType"},{kind:"ScalarField",name:"standardMessagePrice"}]},B,Q,Y]},{kind:"ScalarField",name:"isPrivateDeletedBotsChangesEnabled"}],type:"AddBotChatModal"},ey]},{kind:"ScalarField",name:"isContextOptimizationOn"},{kind:"ScalarField",name:"membersIncludeUntrustedBot"},{kind:"ScalarField",name:"membersCount"},{args:g,concreteType:"ChatMembersConnection",kind:"LinkedField",name:"userMembersConnection",plural:!1,selections:[{concreteType:"ChatMemberEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[p,{kind:"InlineFragment",selections:[e_,$,eb],type:"PoeUser"},r]},r]}],storageKey:"userMembersConnection(first:2)"},f,J]},ep,{kind:"InlineFragment",selections:[ei,es,er,f],type:"MessageCanvasTab"},J]},_]}]},params:{id:"d232c83e37bc426157d60e2ffc704c1598f1563be2f8185e8596c9c86c4b8a17",metadata:{},name:"useProcessCanvasActionsFromOptimisticCanvasTabMutation",operationKind:"mutation",text:null}});eP.hash="6ca6318dd75ec070f582f67ff4f88721",a.default=eP},65554:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useProcessCanvasActions_canvasTab",selections:[{kind:"FragmentSpread",name:"useIsCanvasTabOptimistic_canvasTab"},{kind:"InlineDataFragmentSpread",name:"useOptimisticCanvasTabInput_canvasTab",selections:[{kind:"ScalarField",name:"__typename"},t={kind:"ScalarField",name:"clientNonce"},{kind:"InlineFragment",selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{kind:"ScalarField",name:"botId"}]}],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[{concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"messageId"}]},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"codeblockIndex"}],type:"MessageCanvasTab"}],argumentDefinitions:[]},{kind:"ScalarField",name:"globalId"},t],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"};i.hash="511fc41df4d3a119af41ff06eff4d640",a.default=i},80055:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useProcessCanvasActions_chat",selections:[{kind:"ScalarField",name:"id"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="ef96e69704cf23c50216d900236d9ff4",a.default=t},86613:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useProcessCanvasActions_viewer",selections:[{alias:"canvasActionsEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_enable_canvas_tab_actions"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_canvas_tab_actions")'},{kind:"FragmentSpread",name:"usePreviewIframeUrl_viewer"}],type:"Viewer"};t.hash="a29d9872de408d647e5d5c58bd6b2326",a.default=t},65304:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useSendMessageFromPreviewOptimisticChat_bot"};t.hash="7d90a0cfd17beae92e6e9bbd0c136c72",a.default=t},55735:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useSendMessageFromPreview_bot"};t.hash="9545ec8c5d9dd69d9276b2bd63e2fca4",a.default=t},40870:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useSendMessageFromPreview_chat"};t.hash="372ab98802a7058183f043fb03a09a34",a.default=t},13746:function(e,a,n){"use strict";var t,i,s,r,l,o,d;n.r(a);let c={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"optimisticChatId"}],kind:"Fragment",name:"useSendMessageFromPreview_optimisticChatQuery",selections:[{kind:"ClientExtension",selections:[{args:i=[{kind:"Variable",name:"optimisticChatId",variableName:"optimisticChatId"}],concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[s={kind:"ScalarField",name:"id"},r={kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[s,l={kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[s],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[s,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o={kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"ClientExtension",selections:[d={kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]}]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useSendMessageFromPreview_optimisticChatQuery",selections:[{kind:"ClientExtension",selections:[{args:i,concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[s,r,d,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[s,l,o]}]}]}]},params:{cacheID:"0953389618f59ba9a826244d4d6db284",id:null,metadata:{},name:"useSendMessageFromPreview_optimisticChatQuery",operationKind:"query",text:null}};c.hash="e1f9142f9e73938b9b5c431161e974a2",a.default=c},940:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useSendMessageFromPreview_viewer"};t.hash="c296b2776d82a112ae710013af37cac5",a.default=t},64773:function(e,a,n){"use strict";var t,i,s,r,l;n.r(a);let o={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"index"},{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",name:"useSharePreviewFromMessage_Mutation",selections:[{args:i=[{kind:"Variable",name:"indexOfPreviewInMessage",variableName:"index"},{kind:"Variable",name:"messageId",variableName:"messageId"},{kind:"Literal",name:"previewType",value:"codeblock"}],concreteType:"SharePreviewFromMessage",kind:"LinkedField",name:"sharePreviewFromMessage",plural:!1,selections:[s={kind:"ScalarField",name:"status"},r={kind:"ScalarField",name:"statusMessage"},{concreteType:"SharedPreview",kind:"LinkedField",name:"sharedPreview",plural:!1,selections:[l={kind:"ScalarField",name:"shareUrl"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useSharePreviewFromMessage_Mutation",selections:[{args:i,concreteType:"SharePreviewFromMessage",kind:"LinkedField",name:"sharePreviewFromMessage",plural:!1,selections:[s,r,{concreteType:"SharedPreview",kind:"LinkedField",name:"sharedPreview",plural:!1,selections:[l,{kind:"ScalarField",name:"id"}]}]}]},params:{id:"56d6f245645427d368357d32dd444af37edaca497aa15219364864d0de495d41",metadata:{},name:"useSharePreviewFromMessage_Mutation",operationKind:"mutation",text:null}};o.hash="406814769300afdac60c3b629580a014",a.default=o},50654:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useSupportedPreviewContentTypes_root",selections:[{kind:"ScalarField",name:"supportedPreviewsContentTypes"}],type:"QueryRoot"};t.hash="31c023c8bd89011c746a0c428f8adc2b",a.default=t},27300:function(e,a,n){"use strict";var t,i,s,r;n.r(a);let l={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatId"},i={defaultValue:null,kind:"LocalArgument",name:"tabNodeId"}],kind:"Fragment",name:"useSwitchToCanvasTabMutation",selections:[{args:s=[{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"tabNodeId",variableName:"tabNodeId"}],concreteType:"PutCanvasTabInForeground",kind:"LinkedField",name:"putCanvasTabInForeground",plural:!1,selections:[{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[r={kind:"ScalarField",name:"state"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[i,t],kind:"Operation",name:"useSwitchToCanvasTabMutation",selections:[{args:s,concreteType:"PutCanvasTabInForeground",kind:"LinkedField",name:"putCanvasTabInForeground",plural:!1,selections:[{kind:"LinkedField",name:"canvasTab",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},r,{kind:"ScalarField",name:"id"}]}]}]},params:{id:"26a90d53ea6b36f8deeec09cfcfbb4f5469f95fdab409dd2d55fcbbd2f519355",metadata:{},name:"useSwitchToCanvasTabMutation",operationKind:"mutation",text:null}};l.hash="b145f40a7db5403907827b6c81eab3a1",a.default=l},42608:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"useSwitchToCanvasTab_canvasTab",selections:[t={kind:"ScalarField",name:"id"},{kind:"InlineDataFragmentSpread",name:"optimisticCanvasTabHelpers_setActiveCanvasTabUsingRelayKey_canvasTab",selections:[t,{kind:"FragmentSpread",name:"CanvasTab_canvasTab"}],argumentDefinitions:[]}],type:"MessageCanvasTab"};i.hash="8bf7c2ce22761fbacf8fbfd358be4c4f",a.default=i},79699:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useSwitchToCanvasTab_chat",selections:[{kind:"ScalarField",name:"chatId"},{kind:"InlineDataFragmentSpread",name:"optimisticCanvasTabHelpers_setActiveCanvasTabUsingRelayKey_chat",selections:[{kind:"ScalarField",name:"id"}],argumentDefinitions:[]}],type:"Chat"};t.hash="201a4f4a52073c61e6b8a8343c5dd9b5",a.default=t},62874:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useUpdateCanvasBotConfirmationModal_bot",selections:[{kind:"ScalarField",name:"botId"}],type:"Bot"};t.hash="83db4fc4d658e270eca0366348c8a080",a.default=t},90629:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useUpdateCanvasBotConfirmationModal_canvasTab",selections:[{kind:"ScalarField",name:"id"}],type:"MessageCanvasTab"};t.hash="dc5ab51c22d78811988c7b631b820089",a.default=t},20660:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useUpdateCanvasBotConfirmationModal_chat",selections:[{kind:"ScalarField",name:"chatId"}],type:"Chat"};t.hash="b626bd040b3f241302bdee6e5ebfb164",a.default=t},97957:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useViewerCanCancelJobs_chat",selections:[{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[{kind:"ScalarField",name:"jobId"},{kind:"ScalarField",name:"viewerCanCancel"}]}],type:"Chat"};t.hash="fd90ce0170acf227b51313f51c5c2474",a.default=t},4118:function(e,a,n){"use strict";var t=n(85893),i=n(22120),s=n(22578),r=n(11803),l=n(77581),o=n(42093),d=n(12251),c=n(25917),m=n.n(c),u=n(52612),g=n(93581),p=n(24752);a.Z=e=>{let a,{bot:c,bold:k=!1,showLimitedAccess:h=!1,showTags:f=!1,linked:_=!1,botIconSize:F="md",onClick:b,className:v,openInNewTab:S=!1,showPrivateTag:C=!0}=e,M=(0,s.useFragment)(n(64528),c),{t:y}=(0,i.$G)(),{isDeleted:w}=(0,o.iZ)(M),I=h&&M.limitedAccessType!==u.Z.no_limit&&!M.shouldHideLimitedAccessTag;a=M.isPrivateBot&&!w&&C?y("Private"):I?y("Subscriber access"):M.description;let T=(0,o.dC)(M),x=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{bot:M,size:F,hasBorder:!1}),(0,t.jsxs)("div",{className:m().textContainer,children:[(0,t.jsx)("p",{children:T}),a&&(0,t.jsx)("p",{className:m().subText,children:a}),f&&(0,t.jsx)(l.$,{className:m().tags,children:M.translatedBotTags.map((e,a)=>(0,t.jsx)(l.V,{label:e,className:m().tag},a))})]})]}),B=(0,d.$)(k?m().boldTitle:m().title,v);return(0,t.jsxs)(t.Fragment,{children:[_?(0,t.jsx)(p.Z,{className:B,bot:M,onClick:b,target:S?"_blank":void 0,children:x}):(0,t.jsx)("div",{className:B,onClick:b,children:x}),(0,t.jsx)(r.Z,{node:M})]})}},64869:function(e,a,n){"use strict";var t=n(85893);n(67294);var i=n(22578),s=n(4118),r=n(38033),l=n(9525),o=n.n(l);a.Z=e=>{let{bot:a,showPrivateTag:l=!0}=e,d=(0,i.useFragment)(n(32260),a),{isInReferencedMessage:c}=(0,r.Y)();return(0,t.jsx)("div",{className:o().wrapper,children:(0,t.jsx)(s.Z,{bot:d,botIconSize:"xx-sm",linked:!c,className:c?o().smallSemiboldText:void 0,openInNewTab:!0,showPrivateTag:l})})}},17552:function(e,a,n){"use strict";n.d(a,{B:function(){return getPreviewContentInput}});var t=n(84638),i=n(65604);function getPreviewContentInput(e,a){let n=i.Z.html;return a===t.Z.react?n=i.Z.tsx:a===t.Z.svg?n=i.Z.svg:a===t.Z.html&&(n=i.Z.html),{content:e,contentType:a,language:n}}},96225:function(e,a,n){"use strict";n.d(a,{Ec:function(){return appCreatorEditAppChatCreated},Ji:function(){return appCreatorBuildCanvasAppWithBot},Ne:function(){return scriptCreatorEditScriptBotChatCreated},WI:function(){return scriptCreatorBuildScriptWithBot},og:function(){return botCreated},zn:function(){return botEdited}});var t=n(63758),i=n(1528);let s="editBotInChatCreated",r="buildBotInNewChatWithBot";function botCreated(e,a,n){postMessage({messageName:"botCreated",displayName:e,statusMessage:a,isCanvasOnlyBot:n})}function botEdited(e,a){postMessage({messageName:"botEdited",displayName:e,statusMessage:a})}function postMessage(e){var a,n;let t=window.PoeAndroid,i=null===(n=window.webkit)||void 0===n?void 0:null===(a=n.messageHandlers)||void 0===a?void 0:a.PoeIOS;if(t){let a=JSON.stringify(e);t.postMessage(a)}else i&&i.postMessage(e)}function appCreatorEditAppChatCreated(e,a){postMessage({messageName:"appCreatorEditAppChatCreated",chatId:e,displayName:a}),postMessage({messageName:s,chatId:e,displayName:a})}function appCreatorBuildCanvasAppWithBot(e){let a=e?t.BS:t.Lg,n={messageName:"appCreatorBuildCanvasAppWithBot",botId:a,displayName:t.a};postMessage(n);let i={messageName:r,botId:a,displayName:t.a};postMessage(i)}function scriptCreatorEditScriptBotChatCreated(e,a){postMessage({messageName:"appCreatorEditAppChatCreated",chatId:e,displayName:a}),postMessage({messageName:s,chatId:e,displayName:a})}function scriptCreatorBuildScriptWithBot(){let e={messageName:"appCreatorBuildCanvasAppWithBot",botId:i.sg,displayName:i.Nm};postMessage(e);let a={messageName:r,botId:i.sg,displayName:i.Nm};postMessage(a)}},55206:function(e,a,n){"use strict";n.d(a,{h:function(){return ChatPageColumn}});var t,i,s,r,l,o,d,c,m,u=n(85893),g=n(67294),p=n(22578),k=n(44311),h=n(95578),f=n(97482),_=n(12251),F=n(46297),b=n.n(F);let ChatMessagesScrollWrapper=e=>{let{children:a,startAtTop:n,scrollRootElementProps:t}=e;return(0,u.jsx)("div",{className:b().overflowHiddenWrapper,children:(0,u.jsx)("div",{className:(0,_.$)(b().scrollableContainerWrapper,n&&b().startAtTop),...t,children:a})})};var v=n(31657),S=n(13525),C=n(28937),M=n(52069),y=n(73331);let refetchFn=(e,a)=>{(0,k.fetchQuery)(e,n(82863),{id:a},{fetchPolicy:"network-only"}).toPromise().catch(y.H)},optimisticLastMessageExists=e=>!!(null==e?void 0:e.startsWith("Optimistic-")),useCheckLastMessageAndRefetch=(e,a,t)=>{let i=(0,p.useRelayEnvironment)(),s=(0,g.useCallback)(refetchFn,[t]),r=(0,g.useCallback)((r,l)=>{let{chatId:o,id:d,isOptimistic:c,lastMessage:m}=(0,k.readInlineData)(n(89371),e);if(c)return;let onComplete=e=>{(null==a?void 0:a(null==m?void 0:m.id,e,r))&&(t?t():s(i,d))};if(l){onComplete(l);return}(0,k.fetchQuery)(i,n(10607),{chatId:o}).subscribe({next:e=>{var a;let{chat:n}=e;onComplete(null===(a=n.lastMessage)||void 0===a?void 0:a.id)}})},[e,i,t,s,a]);return[r]};var w=n(53236),I=n(4095),T=n(55757),x=n(9729),B=n(41149),L=n(6940),D=n(86753),P=n(80805),j=n(70554),A=n.n(j),N=n(31910),O=n(22120),R=n(2904),U=n(39752),E=n(41143),Z=n.n(E),H=n(46796),V=n(41578),poeJob_useChatHasActiveJobs=e=>{let a=(0,p.useFragment)(n(50989),e);return a.activeJobs&&a.activeJobs.length>0},G=n(72722),K=n(79740),W=n.n(K),message_useIsViewerMessageCreator=(e,a)=>{var t;let{authorUser:i,isOptimistic:s,responsibleJob:r}=(0,p.useFragment)(n(49953),e),{uid:l}=(0,p.useFragment)(n(4001),a);return(null==i?void 0:i.uid)===l||s||(null==r?void 0:null===(t=r.creator)||void 0===t?void 0:t.uid)===l};let returnsMessageCreateStatus=e=>{let{message:a}=e,t=(0,p.readInlineData)(n(30675),a);return(0,I.Q1)(t)},readMessageCreateStatus=e=>{let{createStatus:a,...t}=(0,p.readInlineData)(n(34798),e);return returnsMessageCreateStatus({message:t})?a:null};var z=n(16527),q=n.n(z),$=n(83193),J=n(69388),Q=n(67172),Y=n(4909),X=n(75014);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var redo=function(e){return g.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=g.createElement("path",{d:"M22.33 9.92a.973.973 0 0 0-.71-.29 1 1 0 0 0-.71.3l-.99 1.01a8.746 8.746 0 0 0-8.68-7.7C6.42 3.25 2.5 7.17 2.5 12s3.92 8.75 8.75 8.75c2.34 0 4.53-.91 6.19-2.56a.99.99 0 0 0 .29-.71.99.99 0 0 0-1-1c-.27 0-.52.1-.71.29a6.736 6.736 0 0 1-4.77 1.98c-3.72 0-6.75-3.03-6.75-6.75s3.03-6.75 6.75-6.75c3.35 0 6.15 2.46 6.66 5.7l-1.05-1.02c-.39-.38-1.03-.38-1.42.02-.38.39-.37 1.03.02 1.41l2.79 2.71c.38.37 1.04.36 1.41-.02l2.68-2.73a.99.99 0 0 0 .29-.71c0-.25-.1-.5-.3-.69Z"})))},ee=n(8583);(t=o||(o={})).success="success",t.no_access="no_access",t.not_bot_message="not_bot_message",t.not_last_message="not_last_message",t.no_prompt_found="no_prompt_found",t.bot_is_down="bot_is_down",t.rate_limit_exceeded="rate_limit_exceeded",t.reached_limit="reached_limit",t.message_points_display_price_mismatch="message_points_display_price_mismatch",t.private_bot_access_denied="private_bot_access_denied",t.command_does_not_exist="command_does_not_exist",t.bad_command_arg="bad_command_arg",t.bad_command_prompt="bad_command_prompt",t.bot_requests_per_message_limit_exceeded="bot_requests_per_message_limit_exceeded",t.mentioned_bot_does_not_exist="mentioned_bot_does_not_exist";var ea=o,en=n(29915),et=n(57403),ei=n(24487),es=n(27664);let regenerateMessage=e=>{let{environment:a,setToast:t,t:i,chat:s,message:r}=e,{id:l}=(0,k.readInlineData)(n(2751),s),{id:o,messageId:d}=(0,k.readInlineData)(n(86102),r);(0,k.commitMutation)(a,{mutation:n(21097),variables:{messageId:d},optimisticUpdater:e=>{let a=e.get(l);Z()(a,"Unable to find chat record with id ".concat(l)),(0,es.T5)(a,o)},updater:(e,n)=>{let t=e.get(l);if(Z()(t,"Unable to find chat record with id ".concat(l)),Z()(n,"Empty data for regenerateMessageMutation"),n.messageRegenerate.status===ea.success){let i=n.messageRegenerate.job;if(i){let handleJobTimeout=(e,n)=>{(0,k.commitLocalUpdate)(a,a=>{(0,et.Z)(a,e,n,()=>{(0,es.Cc)(a,n)})})};(0,ei.QX)(i.jobId.toString(),{source:"regenerateMessage"},()=>handleJobTimeout(i.id,l)),(0,en.Z)(e,i.id,l)}(0,es.T5)(t,o)}},onCompleted:e=>{if(e.messageRegenerate.status!==ea.success){t({type:ee.pC.error,content:e.messageRegenerate.statusMessage});return}},onError:()=>{t({type:ee.pC.error,content:i("Unable to regenerate message")}),(0,k.commitLocalUpdate)(a,e=>{let a=e.get(l);Z()(a,"Unable to find chat record with id ".concat(l))})}})},useRegenerateMessage=(e,a)=>{let n=(0,p.useRelayEnvironment)(),t=(0,ee.ZP)(),{t:i}=(0,O.$G)(),s=(0,g.useCallback)(()=>{regenerateMessage({environment:n,setToast:t,t:i,chat:e,message:a})},[n,t,i,e,a]);return s};var er=n(23738),actionBar_ChatMessageRegenerateActionButton=e=>{let{chat:a,message:t,bot:i,viewer:s,scrollToLastMessageTuple:r}=e,l=(0,p.useFragment)(n(88738),a),o=(0,p.useFragment)(n(3102),t),d=(0,p.useFragment)(n(38577),i),c=(0,p.useFragment)(n(81908),s),{t:m}=(0,O.$G)(),k=useRegenerateMessage(l,o),h=(0,g.useCallback)(()=>{k(),r()},[k,r]),f=(0,X.el)(h,{viewer:c,bot:d,viewObjectType:er.Z.limited_access_bot}),[_,F]=(0,g.useState)(null),b=m("Retry");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Y.oM,{"aria-label":b,ref:F,icon:(0,u.jsx)(redo,{}),onClick:f}),(0,u.jsx)(Q.u,{anchorRef:_,label:b,placement:"top"})]})},el=n(11163),eo=n.n(el),ed=n(81759),actionBar_ChatMessageResendActionButton=e=>{let{bot:a,chat:t,viewer:i,message:s}=e,{isOptimistic:r,...l}=(0,p.useFragment)(n(99697),t),o=(0,p.useFragment)(n(87924),a),d=(0,p.useFragment)(n(212),s),c=(0,p.useFragment)(n(21879),i),{t:m}=(0,O.$G)(),k=(0,el.useRouter)(),h=(0,ed.Us)({bot:o,chat:l,viewer:c,message:d,referencedMessage:d.referencedMessageV2}),f=(0,g.useMemo)(()=>r?e=>{let{messageEdgeCreate:a}=e,n=a.chat;Z()(n,"chat is null"),k.push({pathname:k.pathname,query:{...k.query,chat:n.chatCode,botId:n.defaultBotObject.botId}},"/chat/".concat(n.chatCode),{shallow:!0})}:void 0,[r,k]),_=(0,g.useCallback)(()=>{h({onSuccessfulMessageSend:f})},[h,f]),[F,b]=(0,g.useState)(null),v=m("Retry");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Y.oM,{"aria-label":v,ref:b,icon:(0,u.jsx)(redo,{}),onClick:_}),(0,u.jsx)(Q.u,{anchorRef:F,label:v,placement:"top"})]})};(i=d||(d={})).success="success",i.no_access="no_access",i.not_human_message="not_human_message",i.not_last_message="not_last_message",i.bot_is_down="bot_is_down",i.rate_limit_exceeded="rate_limit_exceeded",i.reached_limit="reached_limit",i.message_points_display_price_mismatch="message_points_display_price_mismatch",i.private_bot_access_denied="private_bot_access_denied";var ec=d,em=n(89188);let createOptimisiticMessage=(e,a,t,i)=>{let s;let{id:r}=(0,p.readInlineData)(n(11806),a),l=(0,p.readInlineData)(n(24505),t),{contentType:o}=(0,p.readInlineData)(n(82128),i);return(0,p.commitLocalUpdate)(e,e=>{let a=e.get(r);Z()(a,"Unable to find chat record with id ".concat(r));let n=(0,em.dS)(e,{contentType:o,bot:l});(0,es.n3)(e,a,n);let t=n.getValue("messageId");t&&(0,ei.OE)(t,{source:"retryMessage",botId:l.botId}),s=n.getDataID()}),s},retryMessage=e=>{let{environment:a,setToast:t,t:i,chat:s,bot:r,message:l}=e,{id:o,messageId:d,...c}=(0,p.readInlineData)(n(319),l),{id:m,...u}=(0,p.readInlineData)(n(72013),s),{...g}=(0,p.readInlineData)(n(55246),r);(0,p.commitLocalUpdate)(a,e=>{let a=e.get(m);a&&(0,es.WL)(a)});let k=createOptimisiticMessage(a,u,g,c);(0,p.commitMutation)(a,{mutation:n(71770),variables:{messageId:d},onCompleted:e=>{if(e.messageRetry.status!==ec.success){t({type:ee.pC.error,content:e.messageRetry.statusMessage});return}},updater:(e,a)=>{if(Z()(a,"Empty data for retryMessageMutation"),a.messageRetry.status===ec.success){let n=e.get(m);Z()(n,"Unable to find chat record with id ".concat(m));let t=(0,es.Ey)(n);(null==t?void 0:t.getDataID())===k&&a.messageRetry.responseMessage&&((0,es.T5)(n,k),(0,es.OJ)(e,n,a.messageRetry.responseMessage))}else{let a=e.get(o);Z()(a,"Unable to find message record with id ".concat(o)),a.setValue(J.Z.error,"state")}},onError:()=>{t({type:ee.pC.error,content:i("Unable retry message")})}})},useRetryMessage=(e,a,n)=>{let t=(0,p.useRelayEnvironment)(),i=(0,ee.ZP)(),{t:s}=(0,O.$G)(),r=(0,g.useCallback)(()=>{retryMessage({environment:t,setToast:i,t:s,chat:e,bot:a,message:n})},[t,i,s,e,a,n]);return r};var actionBar_ChatMessageRetryActionButton=e=>{let{chat:a,message:t,bot:i,viewer:s}=e,r=(0,p.useFragment)(n(41110),t),l=(0,p.useFragment)(n(13585),a),o=(0,p.useFragment)(n(36575),i),d=(0,p.useFragment)(n(36866),s),c=useRetryMessage(l,o,r),m=(0,X.el)(c,{viewer:d,bot:o,viewObjectType:er.Z.limited_access_bot});return(0,u.jsx)(Y.oM,{icon:(0,u.jsx)(redo,{}),onClick:m})},eu=n(52344),eg=n(18462),ep=n(95582),ek=n(30038),actionBar_ChatMessageShareActionButton=e=>{let{message:a}=e,{t}=(0,O.$G)(),{setSelectionMode:i,addSelection:s}=(0,eg.ZP)(),{messageId:r}=(0,p.useFragment)(n(82748),a),l=(0,g.useCallback)(()=>{s(r),i(eg.oW.share),(0,x.Z)("poe/action_log",{action_type:ek.Z.share_button_click,message_id:r,action_metadata:{context:ep.Z.chat_message}})},[s,r,i]);return(0,u.jsx)(Y.oM,{onClick:l,icon:(0,u.jsx)(eu.Z,{}),children:t("Share")})};let useShareButton=e=>{let{state:a,isOptimistic:t,...i}=(0,p.useFragment)(n(97506),e),s=(0,I.OE)(i);return s&&!t&&(a===J.Z.complete||a===J.Z.cancelled)?(0,u.jsx)(actionBar_ChatMessageShareActionButton,{message:i}):null},useRegenerateButton=(e,a,t,i,s)=>{let{state:r,isOptimistic:l,...o}=(0,p.useFragment)(n(85728),e),d=(0,p.useFragment)(n(28380),a),c=(0,p.useFragment)(n(91216),t),m=(0,p.useFragment)(n(98275),i),g=message_useIsViewerMessageCreator(o,m),k=(0,I.OE)(o);return k&&!l&&r!==J.Z.incomplete&&r!==J.Z.error_no_retry&&g&&(0,u.jsx)(actionBar_ChatMessageRegenerateActionButton,{chat:d,message:o,bot:c,viewer:m,scrollToLastMessageTuple:s})},useRetryButton=(e,a,t,i)=>{let{state:s,isOptimistic:r,bot:l,...o}=(0,p.useFragment)(n(44651),e),{isOptimistic:d,...c}=(0,p.useFragment)(n(89659),a),m=(0,p.useFragment)(n(8195),t),g=(0,p.useFragment)(n(59099),i),k=message_useIsViewerMessageCreator(o,m),h=(0,I.OE)(o);return!d&&h&&r&&g&&!g.isOptimistic&&l&&(s===J.Z.error||s===J.Z.error_llm)&&k?(0,u.jsx)(actionBar_ChatMessageRetryActionButton,{chat:c,message:g,bot:l,viewer:m}):null},useResendButton=(e,a,t,i)=>{let s=(0,p.useFragment)(n(24420),e),{isOptimistic:r,state:l,...o}=(0,p.useFragment)(n(80567),a),d=(0,p.useFragment)(n(10617),t),c=(0,p.useFragment)(n(37736),i),m=(0,I.Q1)(o),g=readMessageCreateStatus(o);return m&&r&&g!==$.Z.mentioned_bot_does_not_exist&&(l===J.Z.error||l===J.Z.error_llm)?(0,u.jsx)(actionBar_ChatMessageResendActionButton,{bot:s,message:o,chat:d,viewer:c}):null},useActionBarItems=(e,a,t,i,s,r)=>{let l=(0,p.useFragment)(n(65288),e),o=(0,p.useFragment)(n(31184),a),d=(0,p.useFragment)(n(68422),t),c=(0,p.useFragment)(n(7987),i),m=(0,p.useFragment)(n(2303),s);return g.Children.toArray([useShareButton(l),useRegenerateButton(l,o,d,c,r),useRetryButton(l,o,c,m),useResendButton(d,l,o,c)])};var actionBar_ChatMessageActionBar=e=>{let{chat:a,message:t,bot:i,viewer:s,pairedUserMessage:r,scrollToLastMessageTuple:l}=e,o=(0,p.useFragment)(n(94853),t),d=(0,p.useFragment)(n(9543),a),c=(0,p.useFragment)(n(31069),i),m=(0,p.useFragment)(n(26879),s),g=(0,p.useFragment)(n(34882),r),k=poeJob_useChatHasActiveJobs(d),h=useActionBarItems(o,d,c,m,g,l),f=(0,I.Q1)(o);return!k&&h.length>0?(0,u.jsx)("section",{className:(0,_.$)(q().actionBar,f&&q().reverse),children:h}):null},eh=n(23839);(s=c||(c={}))[s.ACTION_BAR=0]="ACTION_BAR",s[s.ACTION_BAR_AND_FOLLOW_UP_ACTIONS=1]="ACTION_BAR_AND_FOLLOW_UP_ACTIONS";let ChatLastMessageAreaInner=e=>{let{chat:a,defaultBot:t,message:i,pairedUserMessage:s,viewer:r,fileHandlerRef:l,chatInputRef:o,isSelecting:d,scrollToLastMessageTuple:c}=e,m=(0,p.useFragment)(n(62259),r),k=(0,p.useFragment)(n(83451),s),{id:h,isOptimistic:f}=(0,p.useFragment)(n(25986),a),{id:_,isOptimistic:F}=(0,p.useFragment)(n(17203),i),{messageNode:b,chatNode:v}=(0,p.useLazyLoadQuery)(n(71650),{messageNodeId:_,chatNodeId:h},{fetchPolicy:f||F?"store-only":"store-or-network"}),S=(0,p.useFragment)(n(50102),b),C=(0,p.useFragment)(n(23917),v),M=(0,p.useFragment)(n(21506),b),y=(0,g.useCallback)(()=>{(0,x.Z)("poe/statsd_event",{category:"count",key:"poe.web.chat.no_message_data_in_last_message_area",value:1,extra_data:{isOptimistic:f,chatId:h}})},[f,h]);S||(console.log(S),y()),Z()(S,"No message data"),Z()(C,"No chat data"),Z()(M,"No message followup actions data");let w=(0,p.useFragment)(n(29741),S.bot||t),T=(0,H.Z)(C),B=poeJob_useChatHasActiveJobs(C);return(0,u.jsxs)(u.Fragment,{children:[!(0,I.hb)(S)&&!d&&(0,u.jsx)(actionBar_ChatMessageActionBar,{chat:C,message:S,bot:w,viewer:m,pairedUserMessage:k,scrollToLastMessageTuple:c}),!T&&!f&&(0,I.OE)(S)&&!B&&(d?(0,u.jsx)("div",{className:W().suggestedRepliesPlaceholder}):(0,u.jsx)(eh.Z,{message:M,chat:C,viewer:m,fileHandlerRef:l,chatInputRef:o}))]})},ChatLastMessageArea=e=>{let a=(0,G.Z)();return a?(0,u.jsx)(V.Z,{fallback:null,children:(0,u.jsx)(g.Suspense,{fallback:null,children:(0,u.jsx)(ChatLastMessageAreaInner,{...e})})}):null};var message_ChatLastMessageArea=e=>{let a,{placeholderType:n,...t}=e;return 0===n?a=W().actionBarPlaceholder:1===n&&(a=W().actionBarAndFollowUpActionsPlaceholder),(0,u.jsx)("div",{className:a,children:(0,u.jsx)(ChatLastMessageArea,{...t})})},ef=n(65059),e_=n(81045),eF=n(8097),eb=n(95309),message_ChatReferencedMessage=e=>{let{message:a}=e,t=(0,p.useFragment)(n(44883),a);if("DeletedMessage"===t.__typename)return(0,u.jsx)(eb.K,{});if("Message"===t.__typename){let{messageId:e,text:a,bot:n,authorUser:i,attachments:s,isDeleted:r}=t;return r?(0,u.jsx)(eb.K,{}):(0,u.jsx)(eb.Z,{messageId:e,text:a,bot:n,poeUser:i,attachments:s,showPrivateTag:!0})}return null},ev=n(25098),eS=n(66953),eC=n(28473),eM=n(36900);let ey={};setInterval(()=>{let e=Date.now();for(let a in ey)e-ey[a][1]>18e5&&delete ey[a]},3e5);let getFirstCanvasMessageForJob=e=>ey[e]?ey[e][0]:null,setFirstCanvasMessageForJob=(e,a)=>{ey[e]=[a,Date.now()]};var ew=n(29664),eI=n(67824),eT=n(34478),ex=n(80418);function handleResponseStreaming(e){var a,n;let{data:t,frame:i,event:s,_chatId:r,iframeUrl:l}=e,o=null===(a=t.messageEdgeCreate.job)||void 0===a?void 0:a.id,d=(null===(n=t.messageEdgeCreate.chat)||void 0===n?void 0:n.id)||r;if(!o||!d){(0,eT.q$)(i,l,{source:"poeFrame",type:"miniAppAPI",eventType:"jobUpdate",subType:"event",data:{requestId:s.requestId,job:{status:"complete"}}});return}(0,ex.qB)({frame:i,jobId:o,embedApiRequestId:s.requestId,iframeUrl:l})}var eB=n(58143),eL=n(60919),eD=n(51882),eP=n(78410),ej=n(73337),eA=n(76303),eN=n.n(eA),eO=n(77338),eR=n(8968),eU=n(50241),eE=n(28871),eZ=n(71953);function useOnSendUserMessageConfirmed(e,a){let{shouldShowSignupWall:t,openSignupWall:i}=(0,eU.zl)(),s=(0,ee.ZP)(),{t:r}=(0,O.$G)(),l=function(){let e=(0,p.useRelayEnvironment)(),{t:a}=(0,O.$G)(),t=(0,ee.ZP)(),i=(0,g.useCallback)(async i=>{var s;let{event:r,bot:l,chat:o,viewer:d,sourceMetaData:c}=i,m=(0,p.readInlineData)(n(55735),l),u=(0,p.readInlineData)(n(940),d),g=o||await getOptimisticChat(e,m),k=(null===(s=r.data.attachments)||void 0===s?void 0:s.flatMap(e=>e instanceof File?[e]:[]))||[];return new Promise((n,i)=>(0,eE.bG)({environment:e,bot:m,chat:g,viewer:u,prompt:r.data.text,files:k,updateChatHistory:!!o,t:a,source:{sourceType:"preview_triggered",chatInputMetadata:{useVoiceRecord:!1},previewTriggeredMetadata:c},onFailedMessageSend:e=>{i(Error(e.messageEdgeCreate.statusMessage))},onSuccessfulMessageSend(e){n(e)},onError:e=>{i(e)},setToast:t}))},[e,a,t]);return i}(),o=(0,g.useCallback)(async o=>{let{event:d,source:c,clearOverlay:m,setIsLoading:u}=o;try{var g,k,h;if(!e||t||!(null==e?void 0:e.loggedIn)||!e.defaultBot){i(eU.dh.previewTriggeredMessage);return}d.data.stream?m():u(!0),null===(g=e.onSendStart)||void 0===g||g.call(e,d);let s=await l({event:d,bot:e.defaultBot,chat:(h=e.chat,(0,p.readInlineData)(n(40870),h)),viewer:e.viewer,sourceMetaData:e.sourceMetaData});if("success"!==s.messageEdgeCreate.status)throw Error(s.messageEdgeCreate.statusMessage);null===(k=e.onSuccessfulMessageSend)||void 0===k||k.call(e,s,c,d),(0,eD.T)(c,d,{success:!0,hostWillSendResults:e.streamingEnabled},a)}catch(n){(0,eD.T)(c,d,{success:!1,code:"unknown",message:n instanceof Error?n.message:r("Something went wrong.")},a),(null==e?void 0:e.chat)||s({content:n instanceof Error?n.message:r("Something went wrong."),type:ee.pC.error}),console.error("Could not send preview triggered message",n)}finally{m(),u(!1)}},[l,e,t,i,s,r,a]);return o}async function getOptimisticChat(e,a){let t=(0,p.readInlineData)(n(65304),a),i=(0,eZ.tR)({environment:e,bot:t}),s=await (0,p.fetchQuery)(e,n(13746),{optimisticChatId:i},{fetchPolicy:"store-or-network"}).toPromise();return Z()(null==s?void 0:s.optimisticChat,"Optimistic chat ".concat(i," not found in store")),s.optimisticChat}var preview_PreviewRequestedMessageOverlay=e=>{let{logger:a,previewApiContext:n,event:t,source:i,clearOverlay:s,iframeUrl:r}=e,l=useOnSendUserMessageConfirmed(n,r),[o,d]=(0,g.useState)(!1),{t:c}=(0,O.$G)(),m=(0,g.useCallback)(()=>{l({event:t,source:i,setIsLoading:d,clearOverlay:s}),a&&(a.logPreviewInteraction(eO.Z.confirm_preview_triggered_message),a.logAction(ek.Z.confirm_preview_triggered_message))},[a,l,t,i,d,s]),p=(0,g.useCallback)(()=>{s(),(0,eD.T)(i,t,{code:"userRejected",message:c("You cancelled this request."),success:!1},r),a&&(a.logPreviewInteraction(eO.Z.reject_preview_triggered_message),a.logAction(ek.Z.reject_preview_triggered_message))},[a,s,i,t,c,r]);return(0,u.jsx)(eR.Z,{icon:(0,u.jsx)(ej.Z,{linked:!1,className:eN().logo}),text:(0,u.jsx)("p",{children:c("You are about to send a new message.")}),isNarrow:!0,actions:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"button",theme:"primary",isLoading:o,onClick:m,children:c("Confirm")}),(0,u.jsx)(eP.Z,{as:"button",theme:"outline",isDisabled:o,onClick:p,children:c("Cancel")})]})})},eH=n(64468);function MaybeAutoOpenStreamedContentInCanvas(e){return!function(e){let{markdownWasStreaming:a,isFirstCanvasMessageForJob:n,isInsideBlockquote:t,canvasHelpers:i,previewContentType:s,previewLanguage:r,logger:l}=e,o=(0,g.useRef)(i);o.current=i;let d=(0,g.useRef)(!1);(0,g.useEffect)(()=>{o.current&&a&&s&&r&&!t&&!d.current&&(d.current=!0,n&&(o.current.openInCanvas(),l.logPreviewInteraction(eO.Z.auto_open_preview_in_canvas)))},[a,n,s,r,o,l,t])}(e),(0,u.jsxs)(u.Fragment,{children:[e.children," "]})}var eV=n(87973),eG=n(45392),eK=n(22641);let importConfirmationModal=()=>n.e(3323).then(n.bind(n,23323));var hooks_useCanvasTabCloseConfirmationModal=()=>{let[e,a]=(0,g.useState)(!1),[n,t]=(0,g.useState)(null),i=(0,g.useCallback)(e=>{t(()=>e),a(!0)},[]),s=(0,g.useCallback)(()=>{a(!1),t(null)},[]),r=(0,g.useMemo)(()=>({close:s,onConfirm:n||(()=>{})}),[s,n]),l=(0,u.jsx)(eK.Z,{isOpen:e,onRequestClose:s,body:importConfirmationModal,bodyProps:r});return{modal:l,openModal:i}},eW=n(82306),ez=n(21592),eq=n(46245);function useCloseCanvasTab(e){let a=(0,p.useFragment)(n(37976),e),[t,i]=(0,p.useMutation)(n(26500)),s=(0,eW.Qd)(),r=a.id,{modal:l,openModal:o}=hooks_useCanvasTabCloseConfirmationModal(),d=(0,H.Z)(a),c=(0,g.useCallback)(e=>{let{tabNodeId:n,tabToOpenNodeId:i}=e;t({variables:{chatId:a.chatId,tabNodeId:n,tabToOpenNodeId:i,tabInput:{},connections:[(0,ez.N)(r)]},optimisticUpdater(e){let a=e.get(n);if(!a)return null;if((0,eq.aq)(a,eV.Z.closed),(0,eq.kA)(e,r,a),(0,eq.mq)(e,{canvasTab:a,chatNodeId:r})){let a=i?e.get(i):null;a&&((0,eq.Xp)(e,r).forEach(e=>{e&&(0,eq.aq)(e,eV.Z.background)}),(0,eq.aq)(a,eV.Z.foreground)),(0,eq.vf)(e,{canvasTab:a||null,chatNodeId:r}),!a&&s&&s(eW.YU.canvasHidden)}},updater(e,a){var n,t;Z()(a,"Expected data for useCloseCanvasTabMutation mutation");let l=null===(n=a.closeCanvasTab.closedCanvasTab)||void 0===n?void 0:n.id;if(!l)return;let o=e.get(l);if(!o)return;(0,eq.kA)(e,r,o);let d=null===(t=a.closeCanvasTab.openedCanvasTab)||void 0===t?void 0:t.id,c=d?e.get(d):null;(0,eq.aq)(o,eV.Z.closed),c&&i?((0,eq.Gy)(e,r),(0,eq.aq)(c,eV.Z.foreground),(0,eq.vf)(e,{canvasTab:c,chatNodeId:r})):(0,eq.mq)(e,{canvasTab:o,chatNodeId:r})&&((0,eq.vf)(e,{canvasTab:null,chatNodeId:r}),s&&s(eW.YU.canvasHidden))}})},[a.chatId,r,s,t]),m=(0,g.useCallback)(e=>{let{tabNodeId:a,tabToOpenNodeId:n}=e;d?o(()=>{c({tabNodeId:a,tabToOpenNodeId:n})}):c({tabNodeId:a,tabToOpenNodeId:n})},[o,c,d]);return[m,i,d?l:null]}var e$=n(75338),eJ=n(8453);let useOpenCanvasTab=e=>{let a=(0,p.useFragment)(n(69905),e),[t,i]=(0,p.useMutation)(n(69438)),s=a.chatId,r=a.id,{setIsCollapsed:l}=(0,e$.p)(),o=(0,eW.Qd)(),d=(0,g.useCallback)(e=>{let a,{tabInput:n,optimisticData:i}=e;if(!s)return;let d=(0,eJ.Zr)();t({variables:{chatId:s,tabInput:n,openedAt:1e3*Date.now()-1e3,contentObject:i.previewContentObject,connections:[(0,ez.N)(r)]},optimisticUpdater:e=>{if(!n.message)return;l(!0),(0,eq.Gy)(e,r);let t=(0,eq.a$)(e,i,d);a||(a=t.getDataID()),(0,eq.oL)(e,t,n.message.messageId),(0,eq.qo)(e,r,t),(0,eq.aq)(t,eV.Z.foreground),(0,eq.vf)(e,{chatNodeId:r,canvasTab:t}),o&&o(eW.YU.splitPrioritizeCanvas)},updater:(e,n)=>{var t;Z()(n,"Empty data for useOpenCanvasTabMutation");let i=null===(t=n.openCanvasTabInChat.canvasTabEdge)||void 0===t?void 0:t.node;if(!i)return;(0,eq.Gy)(e,r);let s=e.get(i.id);Z()(s,"Cannot find canvas tab record with id ".concat(i.id)),(0,eq.aq)(s,eV.Z.foreground),s.getValue("idWhenWasOptimistic")||s.setValue(a,"idWhenWasOptimistic"),(0,eq.qo)(e,r,s),"number"==typeof i.codeblockIndex&&i.messageId&&(0,eq.oL)(e,s,i.messageId),(0,eq.vf)(e,{chatNodeId:r,canvasTab:s}),o&&o(eW.YU.splitPrioritizeCanvas)}})},[s,r,o,t,l]);return[d,i]};function CanvasEnabledPreviewFrame(e){let{codeblockIdx:a,messageNodeId:t,contentType:i,language:s,content:r,markdownWasStreaming:l,logger:o,showPreviewShareButton:d,showSaveAsFile:c,disableShareButton:m,chatNodeId:k,messageState:h,isFirstCanvasMessageForJob:f,messageId:_,title:F,...b}=e,v=(0,g.useMemo)(()=>({__isNode:"MessageCanvasTab",title:F,clientNonce:(0,w.C)(),codeblockIndex:a,messageId:_,isOptimistic:!0,previewContentObject:{contentType:i,language:s,content:r},message:{id:t,state:h,messageId:_},state:eV.Z.foreground,globalId:Math.floor(9999999*Math.random()),canvasCode:"OPTIMISTIC_CANVAS_CODE"}),[a,_,h,t,i,F,s,r]),S=function(e){let a=(0,p.useLazyLoadQuery)(n(8805),{messageNodeId:e.messageNodeId,chatNodeId:e.chatNodeId});return Z()(a.message,"unable to load message"),Z()(a.chat,"unable to load chat"),function(e,a,t,i){let s=(0,p.useFragment)(n(53281),t),r=(0,p.useFragment)(n(76206),a),[l,o]=useOpenCanvasTab(s),d=(0,g.useCallback)(()=>{l({tabInput:{message:{messageId:r.messageId,codeblockIndex:e}},optimisticData:i})},[l,r.messageId,e,i]),[c,m,u]=useCloseCanvasTab(s),k=(0,g.useCallback)(()=>{c({tabNodeId:btoa("MessageCanvasTab:".concat(r.messageId,":").concat(e))})},[c,r.messageId,e]),h=function(e,a){let t=(0,p.useFragment)(n(90954),e);if(!t.canvasTabs)return null;let i=t.canvasTabs.find(e=>e.codeblockIndex===a);return i||null}(null!=r?r:null,e);return(0,g.useMemo)(()=>{var e,a;return{title:null!==(e=null==h?void 0:h.title)&&void 0!==e?e:"",isOpenedInCanvas:h&&h.state!==eV.Z.closed,openInCanvas:d,closeInCanvas:k,canvasTabState:null!==(a=null==h?void 0:h.state)&&void 0!==a?a:eV.Z.closed,openMutationIsInflight:o||m,closeModal:u}},[h,d,k,o,m,u])}(e.codeblockIndex,a.message,a.chat,e.optimisticData)}({messageNodeId:t,codeblockIndex:a,chatNodeId:k,optimisticData:v}),C=(0,g.useContext)(eG.Y);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(MaybeAutoOpenStreamedContentInCanvas,{isInsideBlockquote:C,messageIsComplete:"complete"===h,isFirstCanvasMessageForJob:f,canvasHelpers:S,previewContentType:i,previewLanguage:s,markdownWasStreaming:l,logger:o,children:(0,u.jsx)(eM.Z,{...b,title:S.title||F,canvasHelpers:S,content:r,contentType:i,language:s,messageNodeId:t,disableShareButton:m,logger:o,codeblockIdx:a,showPreviewShareButton:!!d,showSaveAsFile:!!c})}),S.closeModal]})}function InChatIFrame(e){var a,t,i;let{language:s,content:r,contentType:l,blockIndex:o,blockType:d,markdownWasStreaming:c,messageKey:m,chatKey:k,viewerKey:h,botKey:f,onSuccessfulMessageSend:_}=e,F=(0,p.useFragment)(n(72238),h),b=(0,p.useFragment)(n(12346),f),v=(0,p.useFragment)(n(90871),k),S=(0,p.useFragment)(n(68353),m),C=null===(a=S.responsibleJob)||void 0===a?void 0:a.jobId,M=!0;if(C){let e=getFirstCanvasMessageForJob(C);null===e?setFirstCanvasMessageForJob(C,S.messageId):e!==S.messageId&&(M=!1)}let y=!0===F.enableCanvasAppDebugMode,w=null!==(t=(0,eB.E)())&&void 0!==t?t:ew.Z.unknown,I=(0,g.useMemo)(()=>{let e={message_id:S.messageId,chat_id:v.chatId,share_id:void 0,preview_language:s,page_type:w,..."codeblock"===d?{codeblock_index:o}:{raw_html_index:o}};return e},[v.chatId,S.messageId,s,o,d,w]),T=(0,g.useRef)(I);T.current=I;let x=(0,g.useMemo)(()=>({getData:()=>T.current,logPreviewInteraction:e=>{(0,eL.Z)({entry_type:e,...T.current})},logAction:e=>{(0,eL.T)({action_type:e,...T.current,bot_id:b.botId})}}),[T,b.botId]),B=(0,eH.X)(F),L=(0,g.useMemo)(()=>{var e;return{chat:v,viewer:F,defaultBot:b,streamingEnabled:!0,loggedIn:!!(null===(e=F.poeUser)||void 0===e?void 0:e.id),sourceMetaData:null,onSuccessfulMessageSend(e,a,n){null==_||_(e),handleResponseStreaming({data:e,frame:a,event:n,_chatId:v.id,iframeUrl:B})}}},[F,v,b,_,B]),D=(0,g.useRef)(L);D.current=L;let[P,j]=(0,g.useState)(0),A=(0,g.useCallback)(()=>{j(e=>e+1)},[]),N=function(e,a,t,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:preview_PreviewRequestedMessageOverlay,l=(0,p.useFragment)(n(68418),i),o=(0,eH.X)(l),d=useOnSendUserMessageConfirmed(a,o),[c,m]=(0,g.useState)(null);(0,g.useEffect)(()=>{m(null)},[e]);let k=(0,g.useCallback)(async(e,n)=>{if(c){(0,eD.T)(n,e,{code:"anotherConfirmationIsOpen",message:"Another confirmation is open",success:!1},o);return}if(!a){(0,eD.T)(n,e,{code:"unknown",message:"Not supported on this client",success:!1},o);return}if(s){d({event:e,source:n,setIsLoading:()=>{},clearOverlay:()=>{}});return}m({source:n,event:e})},[a,c,s,d,o]),h=(0,g.useCallback)(()=>{m(null)},[]),f=c&&a?(0,u.jsx)(r,{source:c.source,event:c.event,clearOverlay:h,logger:t,previewApiContext:a,iframeUrl:o}):null;return{onSendUserMessage:k,sendUserMessageOverlay:f}}(P,D.current,x,F);if("rawhtml"===d)return(0,u.jsx)(eC.n,{...N,viewableImpressionType:eI.Z.previews,htmlCode:r,logger:x,showLoadingSpinner:!1,previewLanguage:s,viewer:F});let O={chatNodeId:v.id,canvasHelpers:null,codeblockIdx:o,messageNodeId:S.id,previewContentType:l,previewLanguage:s,previewContent:r,previewApiContext:D.current,markdownWasStreaming:c,content:r,contentType:l,language:s,disableShareButton:"complete"!==S.state,actionLogData:I,showPreviewShareButton:!0,showSaveAsFile:!0,title:"".concat(l),debugMode:y};return(0,u.jsx)(V.Z,{fallback:(0,u.jsx)("p",{children:"Unexpected error while rendering"}),children:(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(eS.p,{}),children:v.isOptimistic||S.isOptimistic?(0,u.jsx)(eM.Z,{initialIsCollapsed:!0,...O,...N,onRefresh:A,showNewTabButton:!0,logger:x,botId:b.botId,codeEditorCanvasBotId:null!==(i=F.codeEditorCanvasBotId)&&void 0!==i?i:void 0,viewer:F}):(0,u.jsx)(CanvasEnabledPreviewFrame,{...O,...N,logger:x,onRefresh:A,canvasHelpers:S.isOptimistic?null:O.canvasHelpers,initialIsCollapsed:!0,showNewTabButton:!1,messageId:S.messageId,messageState:S.state,isFirstCanvasMessageForJob:M,viewer:F})})})}var eQ=n(234),eY=n(4290),eX=n(30965),e0=n(46309),e1=n(61258),e5=n.n(e1),e2=n(39609),message_CitationFooter=e=>{let{message:a}=e,{hasCitations:t,messageId:i,state:s,...r}=(0,p.useFragment)(n(63377),a),{modal:l,openModal:o}=(0,e2.Z)({messageId:i}),d=(0,I.OE)(r)&&t&&s!==J.Z.incomplete,{t:c}=(0,O.$G)();return d?(0,u.jsxs)("div",{className:e5().container,children:[(0,u.jsxs)(Y.PL,{className:e5().sourceButton,onClick:o,children:[c("View sources"),(0,u.jsx)(e0.Z,{size:12})]}),l]}):null},e3=n(12278),e8=n(24353),e9=n(72110),e4=n(11803),e7=n(96744),e6=n(15601),ae=n(67646),aa=n(35715),an=n(99391);let getUserMessageTimeoutCap=e=>{let{attachments:a}=(0,p.readInlineData)(n(2258),e),t=(a||[]).filter(e=>e.isOptimistic).reduce((e,a)=>e+a.file.size,0);return 3+Math.ceil(t/1e6)},useTimeoutLevel=(e,a,t,i,s)=>{var r;let l=(0,p.useFragment)(n(39990),e),o=(0,p.useFragment)(n(68248),a),d=(0,p.useFragment)(n(83712),t),c=(0,p.useFragment)(n(43267),i),m=(0,p.useFragment)(n(94286),s),u=(0,p.useRelayEnvironment)();return(0,g.useEffect)(()=>{if(l.isOptimistic&&l.author===aa.Z.human){var e;let a=getUserMessageTimeoutCap(l);if(null!==(e=l.timeoutLevel)&&void 0!==e?e:0<a){let e=window.setTimeout(()=>{(0,p.commitLocalUpdate)(u,e=>{var n;let t=e.get(l.id);Z()(t,"node is ".concat(t));let i=null!==(n=t.getValue("timeoutLevel"))&&void 0!==n?n:0,s=i+1;t.setValue(s,"timeoutLevel"),s===a&&t.setValue(J.Z.error,"state")})},5e3);return()=>{window.clearTimeout(e)}}}},[l,u]),(0,g.useEffect)(()=>{var e;let a=Math.floor(d.messageTimeoutSecs/5);if(l.state===J.Z.incomplete&&(!l.isOptimistic||l.author!==aa.Z.human)&&(null!==(e=l.timeoutLevel)&&void 0!==e?e:0)<a){let e=window.setTimeout(()=>{(0,p.commitLocalUpdate)(u,e=>{var n,t,i,s,r,u;let g=e.get(l.id);Z()(g,"node is ".concat(g));let p=null!==(u=g.getValue("timeoutLevel"))&&void 0!==u?u:0,k=p+1;g.setValue(k,"timeoutLevel"),(0,an.Si)();let h={message_id:l.messageId,platform:"web",bot_id:d.botId,chat_id:o.chatId,default_bot_nickname:d.nickname,user_agent:window.navigator.userAgent,paired_message_id:null==m?void 0:m.messageId,uid:c.uid,isCurrentlyOnline:window.navigator.onLine,hasBeenOffline:(0,e6.q)(),timeSinceOrigin:window.performance.now(),connection:{downlink:null===(n=window.navigator.connection)||void 0===n?void 0:n.downlink,effectiveType:null===(t=window.navigator.connection)||void 0===t?void 0:t.effectiveType,rtt:null===(i=window.navigator.connection)||void 0===i?void 0:i.rtt,saveData:null===(s=window.navigator.connection)||void 0===s?void 0:s.saveData,type:null===(r=window.navigator.connection)||void 0===r?void 0:r.type},messageLength:l.text.length};k===a?((0,x.Z)("poe/statsd_event",{key:"poe.message.timeout",value:1,category:"count",extra_data:h}),(0,ae.ZP)().then(e=>{var a,n;if(null===(a=e.tchannelData)||void 0===a?void 0:a.channel){let a=null===(n=e.tchannelData)||void 0===n?void 0:n.channel.split("-")[1];(0,x.Z)("poe/statsd_event",{key:"poe.message.timeout_channel.".concat(a),value:1,category:"count",extra_data:h})}})):(0,x.Z)("poe/statsd_event",{key:"poe.message.timeout_level.".concat(k),value:1,category:"count",extra_data:h})})},5e3);return()=>{window.clearTimeout(e)}}},[l,u,o,d,m,c]),null!==(r=l.timeoutLevel)&&void 0!==r?r:0};var at=n(64291),ai=n(48901),as=n(11704),ar=n.n(as),al=n(5152),ao=n.n(al),ad=n(49091),ac=n.n(ad);let am=ao()(()=>Promise.all([n.e(5430),n.e(3345)]).then(n.bind(n,43345)),{loadableGenerated:{webpack:()=>[43345]}}),au=ao()(()=>n.e(5495).then(n.bind(n,45495)),{loadableGenerated:{webpack:()=>[45495]}});var message_ChatMessageContextMenu=e=>{let{message:a,bot:t,chat:i,rootRef:s,viewer:r,fileHandlerRef:l,chatInputRef:o,setIsBranchingLoading:d}=e,c=(0,p.useFragment)(n(68126),a),m=(0,p.useFragment)(n(78033),t),k=(0,p.useFragment)(n(82457),r),h=(0,p.useFragment)(n(41100),i),f=(0,S.Oi)(),_=(0,g.useMemo)(()=>{let e;return(null==f?void 0:f.current)&&(e=f.current),{boundary:e,padding:{left:10,right:10}}},[f]);return(0,I.VQ)(c)?null:(0,u.jsx)(au,{classNames:ac().container,rootRef:s,body:(0,u.jsx)(am,{message:c,bot:m,viewer:k,chat:h,fileHandlerRef:l,chatInputRef:o,setIsBranchingLoading:d}),flipOptions:_,shiftOptions:_,scrollRootRef:f})};let ag=(0,g.createContext)(null);var ap=n(45193),floating_useBorderBoxSize=e=>{let[a,n]=(0,g.useState)();return(0,g.useEffect)(()=>{if(!(null==e?void 0:e.current))return;let a=new ResizeObserver(e=>{if(!e)return;let a=e[0].borderBoxSize;a&&n(e[0].borderBoxSize[0])});return a.observe(e.current),()=>{a.disconnect()}},[e]),a},ak=n(10582),ah=n.n(ak);let af=ao()(()=>Promise.all([n.e(5430),n.e(3345)]).then(n.bind(n,43345)),{loadableGenerated:{webpack:()=>[43345]}});var message_ChatMessageOverflowButton=e=>{let{message:a,bot:t,chat:i,dropdownMenuOpen:s,setDropdownMenuOpen:r,className:l,viewer:o,iconSize:d="md",actionTheme:c="ghost",chatInputRef:m,fileHandlerRef:k,setIsBranchingLoading:h,onClose:f}=e,_=(0,p.useFragment)(n(91781),a),F=(0,p.useFragment)(n(25243),t),b=(0,p.useFragment)(n(12506),o),v=(0,p.useFragment)(n(79111),i),S=(0,g.useContext)(ag),C=floating_useBorderBoxSize(S),M=(0,g.useMemo)(()=>({padding:{left:10,right:10,...C?{bottom:C.blockSize}:{}}}),[C]),y={menuBody:(0,u.jsx)(af,{message:_,bot:F,viewer:b,chat:v,chatInputRef:m,fileHandlerRef:k,setIsBranchingLoading:h,onClose:f}),alignment:(0,I.OE)(_)?"right":"left",menuOpen:s,setMenuOpen:r,wrapperClassName:ah().overflowButtonWrapper};return(0,u.jsx)(ap.Z,{...y,className:l,flipOptions:M,size:d,theme:c})},a_=n(65438),aF=n(98077),ab=n(46932),av=n(87935),aS=n.n(av);let UndoContextClearButton_importConfirmationModal=()=>n.e(8089).then(n.bind(n,78089));var message_UndoContextClearButton=e=>{let{connectionId:a,messageId:n,isDisabled:t}=e,{t:i}=(0,O.$G)(),[s,r]=(0,g.useState)(!1),l=(0,g.useCallback)(()=>{r(!0)},[r]),o=(0,g.useCallback)(()=>{r(!1)},[r]),d=(0,g.useMemo)(()=>({connectionId:a,messageId:n,close:o}),[a,n,o]),c=(0,g.useRef)(null),[m,p]=(0,g.useState)(null),k=(0,g.useMemo)(()=>(0,ab.Z)([c,p]),[c,p]),h=i("Undo");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"button",size:"x-sm",theme:"secondary",className:aS().button,onClick:l,showIconOnly:"always",iconLeft:(0,u.jsx)(aF.WL,{}),"aria-label":h,ref:k,isDisabled:t,"data-button-chat-break":!0}),!s&&(0,u.jsx)(Q.u,{anchorRef:m,label:h}),(0,u.jsx)(eK.Z,{isOpen:s,onRequestClose:o,body:UndoContextClearButton_importConfirmationModal,bodyProps:d,modalHeight:60,useMinHeight:!0})]})},message_useChatLastMessageImpressionTracker=(e,a)=>{let t=(0,g.useRef)(!1),i=(0,g.useRef)(!1),s=(0,g.useRef)(),r=(0,g.useRef)(!0),l=(0,g.useCallback)(()=>t.current&&!i.current&&r.current,[]),[o]=(0,p.useMutation)(n(75807)),{id:d,chatId:c,lastMessage:m}=(0,p.readInlineData)(n(84623),e),u=(0,g.useCallback)(()=>{var e;i.current=!0,o({variables:{chatId:c},optimisticUpdater:e=>{let a=e.getRoot().getLinkedRecord("viewer");if(a){let n=a.getLinkedRecord("badgeInfo");if(n){let a=n.getLinkedRecords("unseenChatInfos")||[];if(!c)return;let t=a.find(e=>e.getValue("chatId")===c)||e.get("UnseenChatInfo:".concat(c));if(t){let a=t.getValue("unseenMessageIds")||[];if(0===a.length)return;let n=a.length>0?Math.max(...a):null;if(t.setValue([],"unseenMessageIds"),n){let a=e.get(d);if(a){let n=a.getLinkedRecord("viewerLastSeenMessage"),t=null==n?void 0:n.getValue("messageId");if(!t||m&&(null==m?void 0:m.messageId)>t){let n=e.get("Message:".concat(null==m?void 0:m.messageId));n&&a.setLinkedRecord(n,"viewerLastSeenMessage")}}}}}}}}),null==s||null===(e=s.current)||void 0===e||e.call(s)},[o,c,d,m]),k=(0,g.useCallback)(()=>{l()&&u()},[l,u]);(0,g.useEffect)(()=>{if(!a)return;let handleFocus=()=>{r.current=!0,k()},handleBlur=()=>{r.current=!1};return r.current=document.hasFocus(),window.addEventListener("focus",handleFocus),window.addEventListener("blur",handleBlur),()=>{window.removeEventListener("focus",handleFocus),window.removeEventListener("blur",handleBlur)}},[k,a]);let h=(0,g.useCallback)(e=>{let[a]=e;t.current=a.isIntersecting,k()},[k]),{refCallback:f,unobserve:_}=(0,T.S1)(h,{rootMargin:"0px",threshold:0});return(s.current=_,a)?f:null};let ChatMessageFooter=e=>{var a;let{message:t,isHumanMessage:i,viewer:s}=e,{state:r,attachments:l,...o}=(0,p.useFragment)(n(32122),t),d=(0,p.useFragment)(n(73147),s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eY.Z,{attachments:l,showMedia:!!d.showInteractiveMedia||!i,messageIsComplete:r!==J.Z.incomplete,showInteractiveMedia:null!==(a=d.showInteractiveMedia)&&void 0!==a&&a}),(0,u.jsx)(message_CitationFooter,{message:o})]})},ChatMessageInner=e=>{var a,t,i,s,r,l,o;let{root:d,chat:c,defaultBotOfChat:m,message:k,viewer:h,isLastMessage:f,pairedUserMessage:F,fileHandlerRef:b,chatInputRef:v,scrollToLastMessageTuple:S,onSuccessfulMessageSend:C,lastMessageAreaPlaceholderTypeForBotMessage:M,hideMessageHeader:y,setIsBranchingLoading:w}=e,{supportedExecutableLanguages:T,...x}=(0,p.useFragment)(n(89975),d),D=(0,p.useFragment)(n(80916),c),P=(0,p.useFragment)(n(92559),k),j=(0,p.useFragment)(n(27268),m),A=(0,p.useFragment)(n(73511),P.bot||j),N=(0,p.useFragment)(n(5619),h),O=(0,p.useFragment)(n(90199),F),R=(0,g.useMemo)(()=>({chat_id:D.chatId,bot_id:A.botId,message_id:P.messageId}),[D.chatId,A.botId,P.messageId]),U=(0,g.useRef)(null),{selectionMode:E,toggleSelection:Z,selectedIds:H,isSelecting:V}=(0,eg.ZP)(),K=(0,g.useMemo)(()=>H.includes(P.messageId),[H,P]),W=null===(a=P.usersCanDelete)||void 0===a?void 0:a.some(e=>e.uid===N.uid),z=W&&!(0,I.VQ)(P),q=(0,g.useCallback)(()=>{(E===eg.oW.share||E===eg.oW.delete&&z)&&Z(P.messageId)},[E,Z,P,z]),$=(0,g.useCallback)(e=>{e.stopPropagation()},[]),{setIsHovered:Q}=(0,e9.q)(),Y=(0,g.useCallback)(()=>{null==Q||Q(!1)},[Q]),X=useTimeoutLevel(P,D,A,N,O),ee=(0,at.Z)(P),ea=message_useChatLastMessageImpressionTracker(D,f&&!P.isOptimistic&&!D.isOptimistic&&(N.badgeAtBotMessageCreationEnabled||P.state!==J.Z.incomplete)),[en,et]=(0,g.useState)(!1),{editingMessageData:ei}=(0,B.m)(),es=!(0,I.VQ)(P)&&P.author===aa.Z.chat_break,er=(0,g.useMemo)(()=>{if((0,I.hb)(P)&&!W||(0,I.VQ)(P))return es?(0,u.jsx)(message_UndoContextClearButton,{connectionId:D.id,messageId:P.messageId,isDisabled:!0}):null;if(V)return null;if(es)return(0,u.jsx)(message_UndoContextClearButton,{connectionId:D.id,messageId:P.messageId});let e=(0,I.hb)(P)?"ghost":N.poeHideLeftSideMessageHeaderIfSameSender?"transparent":"ghost",a=(0,I.hb)(P)?"sm":N.poeHideLeftSideMessageHeaderIfSameSender?"x-sm":"sm";return(0,u.jsx)(message_ChatMessageOverflowButton,{message:P,chat:D,dropdownMenuOpen:en,setDropdownMenuOpen:et,bot:A,className:(0,_.$)(ar().messageOverflowButton,(0,I.hb)(P)&&ar().alwaysVisibleMessageOverflowButton,N.poeHideLeftSideMessageHeaderIfSameSender&&ar().inBubbleButton),viewer:N,setIsBranchingLoading:w,fileHandlerRef:b,chatInputRef:v,iconSize:a,actionTheme:e,onClose:Y})},[V,P,W,en,et,A,N,D,es,v,b,w,Y]),el=(0,g.useMemo)(()=>{var e;return{messageId:P.messageId,botId:(null===(e=P.bot)||void 0===e?void 0:e.botId)||null,messageRef:U}},[P,U]),eo=E!==eg.oW.none,ed=(null===(t=P.command)||void 0===t?void 0:t.commandType)&&P.command.commandType,ec=(0,I.pF)(P),em=(0,I.k0)(P,N),eu=null!==(r=null===(i=P.authorUser)||void 0===i?void 0:i.fullName)&&void 0!==r?r:void 0,ep=(0,ev.Z)({chat:D,message:P,viewer:N});(0,L.XD)(P.messageId);let ek=function(e,a,n,t,i){let s=(0,G.Z)();return(0,g.useCallback)(r=>{let{language:l,contentType:o}=r;return o&&l?s?(0,u.jsx)(InChatIFrame,{...r,onSuccessfulMessageSend:i,messageKey:e,chatKey:a,viewerKey:n,botKey:t}):(0,u.jsx)(eS.p,{}):null},[e,a,n,t,i,s])}(P,D,N,j,C),eh=P.parameters,eb=eh&&JSON.parse(eh),eC=!!eb&&Object.keys(eb).length>0,eM=(0,eQ.f)(x);return(0,u.jsx)(eX.Z.Provider,{value:el,children:(0,u.jsx)(eF.Z,{chat:D,message:P,children:(0,u.jsx)(ef.Z,{message:P,chat:D,fileHandlerRef:b,chatInputRef:v,children:(0,u.jsxs)(e_.Z,{message:P,children:[(0,u.jsxs)("div",{className:ar().chatMessage,"data-complete":P.state!==J.Z.incomplete,id:(0,ai.n)(P.messageId),children:[!em&&!y&&(0,u.jsx)(e3.Z,{author:P.author,authorUser:P.authorUser,bot:A,overflowButton:N.poeHideLeftSideMessageHeaderIfSameSender?null:er}),(0,u.jsxs)("div",{ref:U,className:ar().messageRow,onClick:q,children:[(0,u.jsx)("div",{children:eo&&(0,u.jsx)(e7.Z,{isDisabled:E===eg.oW.delete&&!z,isChecked:K,className:ar().checkbox,onClick:$})}),(0,u.jsxs)("div",{className:(0,_.$)(ar().messageWrapper,em&&!(0,I.hb)(P)&&ar().rightSideMessageWrapper,ec&&ar().commandMessageWrapper,y&&ar().decreasedTopMargin),ref:ea,children:[(0,u.jsx)(e8.Z,{supportedIframeContentTypes:eM,renderIframe:ek,text:P.text,actionLogData:R,author:P.author,sourceType:P.sourceType,messageCreationTime:P.creationTime,messageSeenState:ep,isSentByViewer:em,messageTimeoutSecs:A.messageTimeoutSecs,isOptimistic:null!==(l=P.isOptimistic)&&void 0!==l&&l,timeoutLevel:X,state:P.state,overflowButton:er,viewer:N,bot:A,chat:D,referencedMessage:P.referencedMessageV2&&(0,u.jsx)(message_ChatReferencedMessage,{message:P.referencedMessageV2}),contentType:P.contentType,isCancelled:ee,messageId:P.messageId,footer:(0,u.jsx)(ChatMessageFooter,{message:P,isHumanMessage:(0,I.Q1)(P),viewer:N}),subline:(0,u.jsx)(a_.s,{align:em?"right":"left",messageData:P}),errorMessage:P.errorMessage||void 0,hasAttachments:((null===(s=P.attachments)||void 0===s?void 0:s.length)||0)>0,commandType:ed,messageStateText:null!==(o=P.messageStateText)&&void 0!==o?o:void 0,clientMessageStateText:P.clientMessageStateText||void 0,authorFullName:eu,supportedExecutableLanguages:T,isChatAnnouncement:(0,I.VQ)(P),isEdited:P.isEdited,isEditing:(null==ei?void 0:ei.messageId)===P.messageId,hasParameters:eC,messageCode:P.messageCode}),!em&&ec&&er]})]})]}),(0,u.jsx)(e4.Z,{className:em?ar().rightSideIdAnnotation:void 0,node:P}),f&&!((0,I.Q1)(P)&&![J.Z.error,J.Z.error_llm].includes(P.state))&&(0,u.jsx)(message_ChatLastMessageArea,{chat:D,defaultBot:j,message:P,pairedUserMessage:O,viewer:N,fileHandlerRef:b,chatInputRef:v,isSelecting:V,scrollToLastMessageTuple:S,placeholderType:(0,I.OE)(P)?M:void 0}),(0,u.jsx)(message_ChatMessageContextMenu,{message:P,bot:A,chat:D,rootRef:U,viewer:N,fileHandlerRef:b,chatInputRef:v,setIsBranchingLoading:w})]})})})})};var message_ChatMessage=e=>(0,u.jsx)(e9.F,{children:(0,u.jsx)(ChatMessageInner,{...e})}),aC=n(23282),aM=n(15844),ay=n.n(aM),message_ChatMessageDate=e=>{let{messageCreationTime:a}=e,n=(0,eW.fo)();return(0,u.jsx)(aC.Z,{className:(0,_.$)(n===eW.YU.splitPrioritizeCanvas&&ay().hiddenOnMobile,n===eW.YU.canvasFullWidth&&ay().hidden),messageCreationTime:a})},aw=n(75817),aI=n(84080),aT=n(446);let hasSameAuthorAsPreviousMessage=(e,a,n,t,i,s)=>{var r,l,o,d,c;if(0===a&&0===n&&0===t)return!1;let m=null;if(t>0){let e=i[a][n];m=e[t-1]}else if(n>0){let e=i[a][n-1];m=e[e.length-1]}return!!m&&!(e.creationTime-m.creationTime>36e8)&&((0,I.Q1)(e)&&(0,I.Q1)(m)&&(null===(r=e.authorUser)||void 0===r?void 0:r.uid)&&(null===(l=m.authorUser)||void 0===l?void 0:l.uid)?e.authorUser.uid===m.authorUser.uid:(0,I.Q1)(e)&&(0,I.Q1)(m)&&e.isOptimistic&&(null===(o=m.authorUser)||void 0===o?void 0:o.uid)&&s?s===m.authorUser.uid:!!((0,I.OE)(e)&&(0,I.OE)(m))&&null!==(d=e.bot)&&void 0!==d&&!!d.botId&&null!==(c=m.bot)&&void 0!==c&&!!c.botId&&e.bot.botId===m.bot.botId)};var ax=n(11238),aB=n(95358),aL=n(89582),aD=n(87809),aP=n.n(aD),aj=n(18802),aA=n(41664),aN=n.n(aA),aO=n(32084),aR=n(44223),aU=n.n(aR),aE=n(66335),chat_ContinueLastChat=e=>{let{chats:a}=e,t=(0,p.useFragment)(n(95352),a),{t:i}=(0,O.$G)(),s=(0,aE.K)();if(0===t.length)return null;let{chatCode:r,title:l,hasMultipleUsers:o}=t[0].node;return(0,u.jsx)(aN(),{href:"/chat/".concat(encodeURIComponent(r)),children:(0,u.jsxs)("div",{className:aU().container,children:[(0,u.jsxs)("div",{className:aU().left,children:[(0,u.jsx)("div",{className:aU().title,children:(0,aO.U)(l,o,i)}),(0,u.jsx)("p",{children:i(s?"Continue your last chat with this app":"Continue your last chat with this bot")})]}),(0,u.jsx)(eP.Z,{as:"button",className:aU().chevronButton,iconLeft:(0,u.jsx)(aF.VG,{}),theme:"secondary",showIconOnly:"always",children:i("Continue your last chat")})]})})};let useUnreadMessageHandler=e=>{let{viewerLastSeenMessageId:a,unseenItemCount:n,messageTuples:t,hasMoreMessageToLoad:i,isBotPage:s}=e,{t:r}=(0,O.$G)(),l=(0,ee.ZP)(),o=(0,S.Oi)(),[d,c]=(0,g.useState)(null),[m,u]=(0,g.useState)(!1),[p,k]=(0,g.useState)(!1),[h]=(0,g.useState)(a),[f]=(0,g.useState)(n),_=(0,g.useRef)(null);return(0,g.useEffect)(()=>{if(f&&(null==o?void 0:o.current)&&!m&&p&&!s){if(u(!0),_.current){let e=_.current.offsetTop-o.current.offsetTop-aB.v;o.current.scroll({top:e,behavior:"auto"})}else l({content:r("{{initialUnseenItemCount}} unread messages above",{initialUnseenItemCount:f}),type:ee.pC.base})}},[o,f,m,l,r,u,_,p,s]),(0,g.useEffect)(()=>{if(f&&null===d&&!s){if(h){let e=!1;for(let a=0;a<t.length;a++){let n=t[a];for(let a of n)if(a.messageId===h)e=!0;else if(a.messageId>h&&e){c(a.messageId),k(!0);return}}}else if(t.length>0&&!i){var e;let a=null===(e=t[0])||void 0===e?void 0:e[0];a&&c(a.messageId)}k(!0)}},[f,h,t,i,d,s]),{oldestUnreadMessageRef:_,oldestUnreadMessageId:d}};var aZ=n(41480),aH=n.n(aZ),chat_UnreadMessagesDivider=()=>{let{t:e}=(0,O.$G)();return(0,u.jsxs)("div",{className:aH().divider,children:[(0,u.jsx)("div",{className:aH().line}),(0,u.jsx)("span",{className:aH().text,children:e("Unread messages")}),(0,u.jsx)("div",{className:aH().line})]})};let aV=/^(?:@[A-Za-z0-9_-]+|\/[A-Za-z0-9_-]+)/,useMessageTuples=e=>{let a=(0,p.useFragment)(n(78959),e),[t,i]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{if(!t){let e=[...a].sort((e,a)=>e.creationTime<a.creationTime?-1:1);e.every((e,n)=>!(n>=a.length)&&e===a[n]||((0,x.Z)("poe/statsd_event",{category:"count",key:"poe.web.out_of_order.messages_list.not_ordered_by_creation_time",value:1}),i(!0),!1))}},[t,a]),(0,g.useMemo)(()=>[...a].reduce((e,a)=>{let n=e[e.length-1];return(0,I.OE)(a)&&(null==n?void 0:n.length)>0&&((0,I.Q1)(n[0])||(0,I.pF)(n[0]))?e[e.length-1].push(a):e.push([a]),e},[]),[a])},aG=(0,u.jsx)("div",{className:aP().loaderWrapper,children:(0,u.jsx)(aT.ZP,{withText:!0})},"loader"),ErrorState=e=>{let{clearError:a}=e,{t:n}=(0,O.$G)();return(0,u.jsx)("div",{onClick:a,className:aP().errorState,children:n("Something went wrong while loading more messages. Click here to try again...")},"errorState")},EmptyChat=e=>{var a;let{chats:t=null,bot:i,viewer:s,chat:r}=e,l=(0,p.useFragment)(n(68250),i),o=(0,p.useFragment)(n(61495),null!=r?r:null),d=(0,p.useFragment)(n(33265),s),c=(0,p.useFragment)(n(64834),t);return(0,u.jsxs)("div",{className:aP().emptyView,children:[(!d.shouldHideBotInfoCardWithAutoReplyOff||null===(a=o.shouldBotAutoRespond)||void 0===a||a)&&(0,u.jsx)(R.Z,{bot:l,viewer:d,showFollowerCount:!0,showMonthlyActiveUserCount:!0}),(0,u.jsx)("div",{className:aP().inviteSection,children:(0,u.jsx)(aw.Z,{botId:l.botId,chatId:o.isOptimistic?void 0:o.chatId,viewer:d,inviteFlowEntryType:aj.Z.page_surface,sourcePage:ew.Z.bot_chat})}),c&&(0,u.jsx)(chat_ContinueLastChat,{chats:c})]})},ChatMessagesGroupedByDate=e=>{let{messageTuples:a,root:t,chat:i,defaultBot:s,viewer:r,fileHandlerRef:l,chatInputRef:o,scrollToLastMessageTuple:d,onSuccessfulMessageSend:m,lastMessageTupleDivRef:k,oldestUnreadMessageId:h,oldestUnreadMessageRef:f,isEligibleForBottomSpaceChecksOnLastMessageTuple:F,setIsBranchingLoading:b}=e,v=(0,p.useFragment)(n(4681),t),S=(0,p.useFragment)(n(83011),i),C=(0,p.useFragment)(n(53347),r),M=(0,p.useFragment)(n(61309),s),y=(0,H.Z)(S),w=(0,g.useRef)(new Date),T=(0,g.useRef)(new Map),x=(0,g.useMemo)(()=>(0,ax.x3)(a,w.current,T.current),[a]),B=(0,g.useMemo)(()=>({showMessageOnTopWithSpaceBelow:(e,a)=>{var n,t,i;return"default"===C.poeWebChatNewScrollBehavior||"animate_jump"===C.poeWebChatNewScrollBehavior&&e&&((0,I.Q1)(a[0])||(0,I.OE)(a[0]))&&F&&((null===(t=a[0])||void 0===t?void 0:null===(n=t.authorUser)||void 0===n?void 0:n.uid)===C.uid||(null===(i=a[0])||void 0===i?void 0:i.isOptimistic))&&(S.shouldBotAutoRespond||aV.test(a[0].text))},shouldAnimateMessageJumpOnSpaceChange:()=>"animate_jump"===C.poeWebChatNewScrollBehavior&&F}),[C.poeWebChatNewScrollBehavior,C.uid,S.shouldBotAutoRespond,F]),L=(0,U.X)(S.lastMessage),D=(0,g.useMemo)(()=>{if("animate_jump"===C.poeWebChatNewScrollBehavior&&!F&&!L)return y?c.ACTION_BAR:c.ACTION_BAR_AND_FOLLOW_UP_ACTIONS},[L,C.poeWebChatNewScrollBehavior,F,y]);return(0,u.jsx)(u.Fragment,{children:x.map((e,a)=>{let n=e[0][0],t=(0,ax.MF)(n,w.current,T.current);return(0,u.jsxs)("div",{className:(0,_.$)(aP().tupleGroupContainer,C.poeHideLeftSideMessageHeaderIfSameSender&&aP().largerGap),suppressHydrationWarning:!0,children:[(0,u.jsx)(message_ChatMessageDate,{messageCreationTime:n.creationTime}),e.map((n,t)=>{let i=a===x.length-1&&t===e.length-1,s=B.showMessageOnTopWithSpaceBelow(i,n),r=B.shouldAnimateMessageJumpOnSpaceChange();return(0,u.jsx)("div",{ref:i?k:void 0,className:(0,_.$)(aP().messageTuple,C.poeHideLeftSideMessageHeaderIfSameSender&&aP().largerGap),"data-full-height":s||"animate_jump"===C.poeWebChatNewScrollBehavior&&S.isOptimistic,"data-animate-jump":r,children:n.map((e,s)=>{let r=i&&s===n.length-1,c=h===e.messageId,p=!!C.poeHideLeftSideMessageHeaderIfSameSender&&hasSameAuthorAsPreviousMessage(e,a,t,s,x,C.uid);return(0,u.jsxs)(g.Fragment,{children:[c&&(0,u.jsx)("div",{ref:f,children:(0,u.jsx)(chat_UnreadMessagesDivider,{})}),(0,u.jsx)(message_ChatMessage,{root:v,onSuccessfulMessageSend:m,message:e,pairedUserMessage:s>0?n[0]:null,isLastMessage:r,chat:S,defaultBotOfChat:M,viewer:C,fileHandlerRef:l,chatInputRef:o,scrollToLastMessageTuple:d,setIsBranchingLoading:b,lastMessageAreaPlaceholderTypeForBotMessage:D,hideMessageHeader:p})]},e.id)})},n[0].id)})]},t)})})};var chat_ChatMessagesView=e=>{var a,t,i,s,r,l,o,d,c,m,k,h;let{root:f,chat:_,chats:F=null,defaultBot:b,edges:v,viewer:C,loadPrevious:M,hasPrevious:y,isLoadingPrevious:w,fileHandlerRef:T,chatInputRef:B,onSuccessfulMessageSend:L,setIsBranchingLoading:D}=e,P=(0,p.useFragment)(n(79964),f),j=(0,p.useFragment)(n(91596),_),A=(0,p.useFragment)(n(68207),F),N=(0,p.useFragment)(n(15054),b),O=(0,p.useFragment)(n(1755),v),E=(0,p.useFragment)(n(47579),C),[Z,H]=(0,g.useState)(null),V=(0,S.Oi)(),G=(0,g.useRef)(null),K=(0,g.useCallback)(()=>{M(25,{onComplete:e=>{var a,n;G.current=null!==(n=null==V?void 0:null===(a=V.current)||void 0===a?void 0:a.scrollTop)&&void 0!==n?n:null,requestAnimationFrame(()=>{(null==V?void 0:V.current)&&G.current&&(V.current.scrollTop=G.current)}),e&&H(e)}})},[M,H,V]),W=(0,g.useCallback)(()=>{H(null)},[H]),z=useMessageTuples(O.map(e=>e.node));(0,g.useEffect)(()=>{z.length&&E.lastAtMentionEnabled&&z.flat().map(e=>{var a;if((null===(a=e.authorUser)||void 0===a?void 0:a.uid)===E.uid&&(0,I.Q1)(e)){(0,aL.DU)(e.text,j.chatId,!!E.lastAtMentionEnabled);return}})},[E.uid,z,j.chatId,E.lastAtMentionEnabled]);let q=(0,g.useRef)(null),$=z[z.length-1],J=(null==$?void 0:null===(a=$[0])||void 0===a?void 0:a.clientNonce)||(null==$?void 0:null===(t=$[0])||void 0===t?void 0:t.id),Q=(null==$?void 0:null===(s=$[0])||void 0===s?void 0:null===(i=s.authorUser)||void 0===i?void 0:i.uid)===E.uid||(null==$?void 0:null===(r=$[0])||void 0===r?void 0:r.isOptimistic),Y=(null==$?void 0:null===(o=$[0])||void 0===o?void 0:null===(l=o.authorUser)||void 0===l?void 0:l.uid)&&(null==$?void 0:null===(c=$[0])||void 0===c?void 0:null===(d=c.authorUser)||void 0===d?void 0:d.uid)!==E.uid&&(0,I.OE)(null==$?void 0:$[$.length-1]),X=0===O.length||1===O.length&&(0,I.OE)(O[0].node),{oldestUnreadMessageRef:ee,oldestUnreadMessageId:ea}=useUnreadMessageHandler({viewerLastSeenMessageId:null===(m=j.viewerLastSeenMessage)||void 0===m?void 0:m.messageId,unseenItemCount:j.unseenItemCount,messageTuples:z,hasMoreMessageToLoad:y,isBotPage:X}),en=(0,g.useCallback)(()=>{if(!(null==V?void 0:V.current)||!q.current)return;let e=q.current.offsetTop-V.current.offsetTop-aB.v;V.current.scroll({top:e,behavior:"auto"})},[V]),et=(0,g.useCallback)(()=>{if(!(null==V?void 0:V.current))return;let e=V.current.scrollTop;V.current.scroll({top:e-5,behavior:"auto"})},[V]),ei=j.creationTime/1e3>new Date(Date.now()-5e3).getTime(),es=(0,U.X)(j.lastMessage),er=null!==(k=es&&Q)&&void 0!==k&&k,[el,eo]=(0,g.useState)(ei||er),ed=(0,g.useRef)(null),ec=(0,g.useCallback)(()=>{let e=null==V?void 0:V.current;if(!e)return!1;let a=e.scrollTop,n=e.scrollHeight,t=e.clientHeight,i=(n-t-a)/(n-t)*100;return i>=99&&i<=100},[V]),em=(0,p.useRelayEnvironment)();(0,g.useEffect)(()=>{let e=z[z.length-1],a=null==e?void 0:e[e.length-1],n=null==a?void 0:a.id,t=new Set(z.flatMap(e=>e.map(e=>e.id).filter(Boolean)));if(null!==ed.current&&ed.current!==n){if(n&&!ed.current)eo(!0);else if(n&&ed.current&&ed.current!==n){if(t.has(ed.current))eo(!0);else{let e=em.getStore();if(e){let a=e.getSource().get(ed.current);a&&a.isDeleted&&eo(!1)}}}}a&&!a.isOptimistic&&(ed.current=n||null)},[z,em]),(0,g.useEffect)(()=>{Q&&!X&&("default"===E.poeWebChatNewScrollBehavior||"animate_jump"===E.poeWebChatNewScrollBehavior&&el)&&en()},[Q,J,en,X,E.poeWebChatNewScrollBehavior,el]),(0,g.useEffect)(()=>{"animate_jump"===E.poeWebChatNewScrollBehavior&&Y&&!X&&ec()&&el&&(null==$?void 0:$.length)>1&&et()},[Y,J,et,X,E.poeWebChatNewScrollBehavior,el,null==$?void 0:$.length,ec]);let eu=(0,g.useRef)(null),eg=(0,g.useRef)(performance.now()),ep=(0,g.useRef)(!1);return(0,g.useEffect)(()=>{if(ep.current)return;let e=performance.now(),a=e-eg.current;X||((0,x.Z)("poe/web_chat_messages_view_initial_render_time",{message_count:O.length,render_duration_ms:a}),ep.current=!0)},[]),(0,u.jsxs)(u.Fragment,{children:[0===z.length?(0,u.jsx)(EmptyChat,{chat:j,chats:A,bot:N,viewer:E}):(0,u.jsxs)(aI.Z,{ref:eu,className:aP().infiniteScroll,loadMore:K,hasMore:y,isLoading:w,loadingState:aG,error:!!Z,errorState:(0,u.jsx)(ErrorState,{clearError:W}),threshold:1e3,reverse:!0,children:[!y&&(0,u.jsxs)(u.Fragment,{children:[(!E.shouldHideBotInfoCardWithAutoReplyOff||null===(h=j.shouldBotAutoRespond)||void 0===h||h)&&(0,u.jsx)(R.Z,{bot:N,viewer:E,showFollowerCount:!0,showMonthlyActiveUserCount:!0}),(0,u.jsx)("div",{className:aP().inviteSection,children:(0,u.jsx)(aw.Z,{chatId:j.isOptimistic?void 0:j.chatId,viewer:E,botId:N.botId,inviteFlowEntryType:aj.Z.page_surface,sourcePage:ew.Z.bot_chat})})]}),!!A&&(0,u.jsx)(chat_ContinueLastChat,{chats:A}),(0,u.jsx)(ChatMessagesGroupedByDate,{messageTuples:z,root:P,chat:j,defaultBot:N,viewer:E,fileHandlerRef:T,chatInputRef:B,scrollToLastMessageTuple:en,onSuccessfulMessageSend:L,lastMessageTupleDivRef:q,oldestUnreadMessageId:ea,oldestUnreadMessageRef:ee,isEligibleForBottomSpaceChecksOnLastMessageTuple:el,setIsBranchingLoading:D})]}),(0,u.jsx)(e4.Z,{node:j})]})};let aK=ao()(()=>n.e(6881).then(n.bind(n,46881)),{loadableGenerated:{webpack:()=>[46881]},ssr:!1});var chatModal_ChatModalWrapper=e=>(0,u.jsx)(g.Suspense,{fallback:null,children:(0,u.jsx)(aK,{...e})}),aW=n(74182),az=n(80378),aq=n.n(az),a$=n(75789),aJ=n.n(a$),animatedStopIcon=()=>(0,u.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:[(0,u.jsx)("defs",{children:(0,u.jsxs)("linearGradient",{id:"fadeGradient",gradientTransform:"rotate(100 0 0)",children:[(0,u.jsx)("stop",{offset:"0%",stopColor:"#777777",stopOpacity:"0"}),(0,u.jsx)("stop",{offset:"30%",stopColor:"#777777",stopOpacity:".4"}),(0,u.jsx)("stop",{offset:"100%",stopColor:"#777777",stopOpacity:"1"})]})}),(0,u.jsx)("g",{className:aJ().spinnerCircle,children:(0,u.jsx)("path",{d:"M 50 10 A 40 40 0 1 1 10 50",fill:"none",stroke:"url(#fadeGradient)",strokeWidth:"10",strokeLinecap:"round"})}),(0,u.jsx)("rect",{x:"35",y:"35",width:"30",height:"30",rx:"5",ry:"5"})]}),aQ=n(54135),poeJob_clearViewerActiveJobHeartbeatTimers=(e,a,n)=>{let t=e.get(a);if(!t)return;let i=t.getLinkedRecords("activeJobs")||[];i.forEach(e=>{e.getValue("viewerCanCancel")&&null!==e.getValue("jobId")&&void 0!==e.getValue("jobId")&&(0,ei.vA)(e.getValue("jobId").toString(),{source:n,jobState:String(aQ.Z.cancelled)})})},poeJob_removeCancellableJobsFromActiveJobs=(e,a)=>{let n=e.get(a);if(!n)return;let t=n.getLinkedRecords("activeJobs")||[],i=t.filter(e=>!e.getValue("viewerCanCancel"));n.setLinkedRecords(i,"activeJobs")};let useCancelViewerActiveJobs=e=>{let a=(0,p.useRelayEnvironment)(),t=(0,g.useCallback)(()=>{let t=(0,k.readInlineData)(n(3768),e||null);if(!t)return;let updater=e=>{poeJob_clearViewerActiveJobHeartbeatTimers(e,t.id,"cancelViewerActiveJobs"),poeJob_removeCancellableJobsFromActiveJobs(e,t.id)};(0,k.commitMutation)(a,{mutation:n(8057),variables:{chatId:t.chatId},optimisticUpdater:updater,updater})},[a,e]);return t};var poeJob_useViewerCanCancelJobs=e=>{let a=(0,p.useFragment)(n(97957),e);return a.activeJobs.some(e=>e.viewerCanCancel)},chat_ChatStopMessageButton=e=>{let{chat:a,className:t}=e,{t:i}=(0,O.$G)(),s=(0,p.useFragment)(n(78517),a),r=useCancelViewerActiveJobs(s),l=poeJob_useViewerCanCancelJobs(s);return l?(0,u.jsx)(eP.Z,{as:"button",theme:"outline","aria-label":i("Stop message"),className:t,onClick:r,iconLeft:(0,u.jsx)(animatedStopIcon,{}),style:{background:"var(--pdl-bg-base)",boxShadow:"0 0 8px 1px var(--shadow-black)"},children:i("Stop")}):null},aY=n(78954),aX=n.n(aY),a0=n(76861),a1=n(37457),a5=n.n(a1);function useSwitchToCanvasTab(e){let a=(0,p.useFragment)(n(79699),e.chat),t=(0,p.useFragment)(n(42608),e.canvasTab),[i,s]=(0,p.useMutation)(n(27300)),r=(0,g.useCallback)(()=>{t&&a&&i({variables:{tabNodeId:t.id,chatId:a.chatId},updater:e=>{(0,eq.DG)(e,{canvasTab:t,chat:a})}})},[t,a,i]);return[r,s]}function ShowCanvasFAB(e){var a,t,i;let s=(0,p.useFragment)(n(4618),e.chat),r=s.canvasTabInForeground||(null===(i=s.canvasTabsConnection)||void 0===i?void 0:null===(t=i.edges)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.node);return r?(0,u.jsx)(ShowCanvasFABInner,{canvasTab:r,chat:s,className:e.className,style:e.style}):null}function ShowCanvasFABInner(e){let a=(0,p.useFragment)(n(25682),e.chat),t=(0,p.useFragment)(n(11074),e.canvasTab),[i]=useSwitchToCanvasTab({canvasTab:t,chat:a}),{t:s}=(0,O.$G)(),r=(0,eW.Qd)(),{setIsCollapsed:l}=(0,e$.p)(),o=(0,a0.L)(a,t),d=(0,g.useCallback)(()=>{r&&r(eW.YU.splitPrioritizeCanvas),l(!0),o.logPreviewInteraction(eO.Z.show_canvas_using_fab),o.logAction(ek.Z.show_canvas_using_fab),a.isOptimistic||null==i||i()},[r,i,o,a.isOptimistic,l]),c=(0,eW.fo)();return(0,u.jsx)(eP.Z,{as:"button","aria-label":"Canvas",iconLeft:(0,u.jsx)(aF.C7,{}),showIconOnly:"medium-below",className:(0,_.$)(a5().fab,e.className),size:"md",theme:"outline",onClick:d,style:e.style,"data-canvas-sidebar-state":c,children:s("Canvas")})}var chat_ChatFooterHoveringButtonSection=e=>{let{chat:a}=e,t=(0,p.useFragment)(n(18548),a),i=(0,g.useContext)(ag),s=floating_useBorderBoxSize(i),r=(0,g.useMemo)(()=>({bottom:((null==s?void 0:s.blockSize)||74)+10}),[null==s?void 0:s.blockSize]);return(0,u.jsxs)("div",{className:aX().section,style:r,children:[(0,u.jsx)("span",{className:aX().left}),(0,u.jsx)("span",{className:aX().center}),(0,u.jsx)("span",{className:aX().right}),(0,u.jsx)(chat_ChatStopMessageButton,{chat:t,className:aX().center}),(0,u.jsx)(ShowCanvasFAB,{chat:t,className:aX().right})]})},a2=n(42093),a3=n(22782),a8=n.n(a3),message_ChatPageSuggestedMessage=e=>{let{prompt:a,onClick:n}=e,t=(0,a2.Rj)(a),i=(0,a2.bi)(a);return(0,u.jsx)(eP.Z,{full:!0,as:"button",size:"sm",theme:"outline",justify:"left",onClick:n,iconRight:(0,u.jsx)(aF.Kq,{}),className:a8().suggestedMessage,children:(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:a8().bot,children:t?"@".concat(t," "):""}),i]})})},a9=n(54344),a4=n(23595),a7=n(64516),a6=n(25483),ne=n.n(a6);let ChatPageConversationStarter=e=>{let{conversationStarter:a,bot:t,chat:i,viewer:s,onSuccessfulMessageSend:r}=e,l=(0,p.useFragment)(n(12370),t),o=(0,p.useFragment)(n(76130),i),d=(0,p.useFragment)(n(6477),s),c=(0,eE.$3)({bot:l,chat:o,viewer:d,source:{sourceType:"conversation_starter"}}),m=(0,g.useCallback)(()=>{c({prompt:a,onSuccessfulMessageSend:r})},[r,a,c]),k=(0,X.el)(m,{viewer:d,viewObjectType:er.Z.limited_access_bot,bot:l});return(0,u.jsx)(message_ChatPageSuggestedMessage,{onClick:k,prompt:a})};var chat_ChatPageConversationStarters=e=>{var a;let{chat:t,bot:i,edges:s,chatInputRef:r,viewer:l,onSuccessfulMessageSend:o}=e,d=(0,p.useFragment)(n(40053),t),c=(0,p.useFragment)(n(88249),i),m=(0,p.useFragment)(n(73339),l),k=(0,p.useFragment)(n(16544),s),{isLoggedInUser:h}=(0,a9.b)(),{t:f}=(0,O.$G)(),_=(0,g.useRef)(c.conversationStarters),[F,b]=(0,g.useState)(!1),v=(0,a7.F)(),S=c.introduction?1:0;return((0,g.useEffect)(()=>{if((0,a4.s2)(v)){let e=r.current,setKeyboardOpen=()=>b(!0),setKeyboardClosed=()=>b(!1);return null==e||e.addEventListener("focus",setKeyboardOpen),null==e||e.addEventListener("blur",setKeyboardClosed),()=>{null==e||e.removeEventListener("focus",setKeyboardOpen),null==e||e.removeEventListener("blur",setKeyboardClosed)}}},[v,b,r]),(null===(a=_.current)||void 0===a?void 0:a.length)&&h&&!(k.length-S>0)&&!F)?(0,u.jsxs)("div",{className:ne().conversationStarters,children:[(0,u.jsx)("div",{className:ne().header,children:f("Try saying...")}),(0,u.jsx)("div",{className:ne().container,children:_.current.map(e=>(0,u.jsx)(ChatPageConversationStarter,{conversationStarter:e,bot:c,chat:d,viewer:m,onSuccessfulMessageSend:o},e))})]}):null},na=n(97665),nn=n.n(na),nt=n(79767),ni=n.n(nt),chat_ChatPageFooterSelectedCount=()=>{let{t:e}=(0,O.$G)(),{selectedIds:a}=(0,eg.ZP)(),n=a.length,t=e("footerSelectedCount",{count:n,defaultValue:"{{count}} items selected",defaultValue_one:"{{count}} item selected"});return(0,u.jsx)("div",{className:ni().selectedCountText,children:t})};let ChatPageDeleteFooter_importConfirmationModal=()=>n.e(2967).then(n.bind(n,42967));var chat_ChatPageDeleteFooter=e=>{let{chat:a}=e,{t}=(0,O.$G)(),{chatCode:i}=(0,p.useFragment)(n(24294),a),{selectedIds:s}=(0,eg.ZP)(),[r,l]=(0,g.useState)(!1),o=(0,g.useCallback)(()=>{l(!0)},[l]),d=(0,g.useCallback)(()=>{l(!1)},[l]),c=(0,g.useMemo)(()=>({chatCode:i,close:d}),[i,d]);return(0,u.jsxs)("div",{className:nn().container,children:[(0,u.jsx)(chat_ChatPageFooterSelectedCount,{}),(0,u.jsx)(eP.Z,{as:"button",theme:"danger",onClick:o,className:nn().button,isDisabled:0===s.length,iconLeft:(0,u.jsx)(aF.Fz,{}),full:!0,children:t("Delete")}),(0,u.jsx)(eK.Z,{isOpen:r,onRequestClose:d,body:ChatPageDeleteFooter_importConfirmationModal,bodyProps:c,modalHeight:60,useMinHeight:!0})]})},ns=n(19644),nr=n(96094),nl=n(87095),no=n.n(nl),chat_ChatPageShareFooter=e=>{let{chat:a}=e,{t}=(0,O.$G)(),{chatId:i}=(0,p.useFragment)(n(92013),a),{selectedIds:s}=(0,eg.ZP)(),r=(0,nr.T)({chatId:i,selectedIds:s}),l=(0,g.useMemo)(()=>(0,u.jsx)("div",{className:no().buttonWrapper,children:(0,u.jsxs)(Y.DF,{onClick:r,className:no().button,disabled:0===s.length,children:[(0,u.jsx)(ns.Z,{className:no().linkIcon}),t("Copy share link")]})}),[r,t,s]);return(0,u.jsxs)("div",{className:no().container,children:[(0,u.jsx)(chat_ChatPageFooterSelectedCount,{}),l]})},nd=n(32880),nc=n(21980),nm=n(33952),nu=n.n(nm),ng=n(67280);let useSendChatBreak=e=>{let a=(0,p.useRelayEnvironment)();return(0,g.useCallback)(()=>sendChatBreak({environment:a,chat:e}),[a,e])},sendChatBreak=e=>{let{environment:a,chat:t}=e,{id:i,chatId:s,isOptimistic:r,...l}=(0,k.readInlineData)(n(58343),t),o=(0,w.C)(),{optimisticChatBreakId:d,optimisticIntroMessageId:c}=onChatBreakSend({environment:a,chat:l,clientNonce:o});r||(0,k.commitMutation)(a,{mutation:n(46688),variables:{chatId:s,clientNonce:o},updater:(e,a)=>(Z()(a,"Empty data for sendChatBreakMutation"),mutationUpdater(e,a,{chatNodeId:i,optimisticChatBreakId:d,optimisticIntroMessageId:c})),onError:()=>{(0,k.commitLocalUpdate)(a,e=>{onMutationFailure(e,{chatNodeId:i,optimisticChatBreakId:d,optimisticIntroMessageId:c})})}})},mutationUpdater=(e,a,n)=>{let{chatNodeId:t,optimisticChatBreakId:i,optimisticIntroMessageId:s}=n,r=e.get(t);if(Z()(r,"Cannot find chat record with id ".concat(t)),a.messageBreakEdgeCreate.message){if((0,es.Ci)(e,r,i,a.messageBreakEdgeCreate.message.node),a.messageBreakEdgeCreate.introductionMessage){if(s)(0,es.Ci)(e,r,s,a.messageBreakEdgeCreate.introductionMessage.node);else{let n=e.get(a.messageBreakEdgeCreate.introductionMessage.node.id);Z()(n,"Cannot find introduction message record with id ".concat(a.messageBreakEdgeCreate.introductionMessage.node.id)),(0,es.n3)(e,r,n)}}else s&&((0,es.T5)(r,s),e.delete(s))}else onMutationFailure(e,{chatNodeId:t,optimisticChatBreakId:i,optimisticIntroMessageId:s})},onMutationFailure=(e,a)=>{let{chatNodeId:n,optimisticChatBreakId:t,optimisticIntroMessageId:i}=a,s=e.get(n);Z()(s,"Cannot find chat record with id ".concat(n)),(0,es.T5)(s,t),e.delete(t),i&&((0,es.T5)(s,i),e.delete(i))},onChatBreakSend=e=>{let a,t,{environment:i,chat:s,clientNonce:r}=e,{id:l,defaultBotObject:o}=(0,k.readInlineData)(n(51915),s);return(0,k.commitLocalUpdate)(i,e=>{let n=e.get(l);Z()(n,"Cannot find chat record with id ".concat(l));let i=(0,em.sC)(e,{clientNonce:r});(0,es.n3)(e,n,i),a=i.getDataID();let s=createOptimisticIntroMessage(e,o);s&&((0,es.n3)(e,n,s),t=s.getDataID())}),Z()(a,"Cannot find optimistic chat break id"),{optimisticChatBreakId:a,optimisticIntroMessageId:t}},createOptimisticIntroMessage=(e,a)=>{let{introduction:t,hasMarkdownRendering:i,...s}=(0,k.readInlineData)(n(81333),a);return t?(0,em.dS)(e,{text:t,contentType:i?ng.Z.text_markdown:ng.Z.text_plain,state:J.Z.complete,bot:s}):null};var inputFooter_ChatBreakButton=e=>{let{chat:a,bot:t,lastMessage:i,viewer:s,chatInputRef:r,className:l,disabled:o}=e,d=(0,p.useFragment)(n(4664),a),c=(0,p.useFragment)(n(6582),t),m=(0,p.useFragment)(n(82611),i),k=(0,p.useFragment)(n(58993),s),{t:h}=(0,O.$G)(),f=(0,S.Oi)(),_=useCancelViewerActiveJobs(d),F=useSendChatBreak(d),b=(0,g.useCallback)(()=>{var e;(null==f?void 0:f.current)&&(null===(e=r.current)||void 0===e||e.focus(),f.current.scroll({top:"animate_jump"===k.poeWebChatNewScrollBehavior?0:-aB.v,behavior:"smooth"}))},[r,f,k.poeWebChatNewScrollBehavior]),v=poeJob_useViewerCanCancelJobs(d),C=(0,I.hb)(m),[M]=useCheckLastMessageAndRefetch(d,optimisticLastMessageExists),y=(0,g.useCallback)(()=>{var e;v?(_(),F()):!i||C||d.isOptimistic?b():F(),M(void 0,null==m?void 0:m.id),null===(e=r.current)||void 0===e||e.focus()},[v,i,C,r,b,F,_,M,null==m?void 0:m.id,d.isOptimistic]),[w,T]=(0,g.useState)(null),x=h("Clear context"),B=(0,e6.Z)();return c.allowsClearContext?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"button",size:"sm",theme:"ghost",ref:T,onClick:y,isDisabled:B||o,showIconOnly:"always",iconLeft:(0,u.jsx)(aF.$E,{}),"aria-label":x,className:l,"data-button-chat-break":!0}),(0,u.jsx)(Q.u,{anchorRef:w,label:x,placement:"top"})]}):null},np=n(36809),nk=n(64913);let useSubmitMessage=(e,a,t,i)=>{let{...s}=(0,p.useFragment)(n(28824),e),r=(0,p.useFragment)(n(41257),a),l=(0,p.useFragment)(n(89929),t),o=(0,g.useMemo)(()=>({sourceType:"chat_input",chatInputMetadata:{useVoiceRecord:!1}}),[]),{setInputFooterReferencedMessage:d,inputFooterReferencedMessage:c}=(0,aW._)(),m=(0,g.useCallback)(()=>d(null),[d]),u=(0,p.useFragment)(n(70139),c),k=(0,eE.$3)({bot:s,chat:r,viewer:l,source:o,referencedMessage:u}),{chatContextLoggingValue:h}=(0,nd.t)();return(0,g.useCallback)((e,a,n,t,s,r)=>{var l,o,d;let c=null===(l=e.current)||void 0===l?void 0:l.getValue();if(void 0===c||!c&&0===n.length)return;!s&&t&&(c=(0,nk.yJ)(c,t));let u={sourceType:"chat_input",chatInputMetadata:{useVoiceRecord:(null===(o=a.current)||void 0===o?void 0:o.getVoiceInputUsed())||!1,...h?{newChatContext:h}:{}}};k({prompt:c,parameters:s?t:void 0,files:n,source:u,onSuccessfulMessageSend:i}),null===(d=e.current)||void 0===d||d.setValue(""),null==r||r(),m()},[h,k,i,m])};var nh=(0,g.forwardRef)((e,a)=>{let{chat:t,defaultBot:i,targetedBot:s,edges:r,lastMessage:l,viewer:o,onSuccessfulMessageSend:d,setTargetedBot:c,fileHandlerRef:m}=e,k=(0,p.useFragment)(n(84087),t),{noAccessMessage:h,...f}=(0,p.useFragment)(n(23813),i),{..._}=(0,p.useFragment)(n(35858),s),F=(0,g.useRef)(null),b=(0,g.useCallback)((e,a)=>{let t;if((0,aL.rw)(e))t=e.mentionWithAt;else{let a=(0,p.readInlineData)(n(55023),e);t=(null==a?void 0:a.handle)||null,c(a)}t&&F.current&&(0,U.A)(F,t,a)},[c]),v=(0,p.useFragment)(n(3178),r),S=(0,p.useFragment)(n(27259),l),C=(0,p.useFragment)(n(59948),o),[M,y]=(0,g.useState)(h||null);(0,g.useEffect)(()=>{y(h||null)},[h]);let[w]=useCheckLastMessageAndRefetch(k,optimisticLastMessageExists),I=(0,g.useCallback)(e=>{var a;null==d||d(e),w(void 0,null===(a=e.messageEdgeCreate.message)||void 0===a?void 0:a.id)},[d,w]),T=useSubmitMessage(_,k,C,I),{t:x}=(0,O.$G)(),{editingMessageData:L,cancelEditing:D,initialMessageDraftValue:P}=(0,B.m)(),j=!!L,A=(0,B.tv)(),N=(0,g.useCallback)(()=>{var e;D(),F.current&&F.current.setValue(P),null==m||null===(e=m.current)||void 0===e||e.clearAllFiles()},[D,F,m,P]),R=(0,g.useCallback)((e,a,n,t,i,s)=>{var r;return j&&L?A({messageId:L.messageId,newText:(null===(r=e.current)||void 0===r?void 0:r.getValue())||"",viewer:C,chatInputRef:e,chatId:k.chatId,voiceButtonRef:a,files:n,clearFiles:s,cancelEditing:D,onSuccess:a=>{var n;e.current&&e.current.setValue(P),w(void 0,null===(n=a.messageEdgeEdit.message)||void 0===n?void 0:n.node.id)}}):T(e,a,n,t,i,s)},[j,L,A,T,D,k,w,P,C]),E=(0,U.X)(S),Z=x(j?"Edit message":"Message"),H=(0,g.useCallback)(()=>{h&&y(h)},[h]);(0,g.useEffect)(()=>{"virtualKeyboard"in navigator&&navigator.virtualKeyboard&&(navigator.virtualKeyboard.overlaysContent=!0)});let V=(0,g.useMemo)(()=>(0,ab.Z)([F,a]),[F,a]);return(0,u.jsxs)(u.Fragment,{children:[M&&!1!==k.shouldBotAutoRespond&&(0,u.jsx)("div",{className:nu().warningBannerHolder,children:(0,u.jsx)(nc.Z,{className:nu().invalidMentionedBotWarning,text:M})}),(0,u.jsx)("div",{className:nu().footer,children:(0,u.jsx)(np.Z,{ref:V,edges:v,viewer:C,chat:k,bot:_,onSubmitMessage:R,isBotResponding:E,placeholderText:Z,fileHandlerRef:m,selectBot:b,setTargetedBot:c,setInputErrorMessage:y,onInputCleared:H,handleCancelEdit:N,accessoryChatBreakButton:(0,u.jsx)(inputFooter_ChatBreakButton,{chat:k,bot:f,lastMessage:S,viewer:C,chatInputRef:F,disabled:j})})})]})}),nf=n(57758),n_=n(63318),nF=n.n(n_);let importRemixImageHintsModal=()=>n.e(9867).then(n.bind(n,99867));(r=m||(m={}))[r.remix=0]="remix",r[r.edit=1]="edit";let nb={0:{getText:e=>e("Remix image"),getModal:()=>importRemixImageHintsModal},1:{getText:e=>e("Editing")}};var inputFooter_ChatMessageInputUserHintButton=e=>{let{userHintType:a}=e,{t:n}=(0,O.$G)(),{getText:t,getModal:i}=nb[a],s=t(n),r=i?i():null,[l,o]=(0,g.useState)(!1),d=(0,g.useCallback)(()=>{o(!0)},[o]),c=(0,g.useCallback)(()=>{o(!1)},[o]),m=(0,g.useMemo)(()=>({close:c}),[c]);return(0,u.jsxs)("div",{className:nF().userHintContainer,children:[(0,u.jsx)("div",{className:nF().userHintTypeText,children:s}),r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:nF().userHintSeeTipsText,onClick:d,children:[n("See tips"),(0,u.jsx)(nf.Z,{className:nF().chevronIcon})]}),(0,u.jsx)(eK.Z,{isOpen:l,onRequestClose:c,body:r,bodyProps:m})]})]})},nv=n(38033),nS=n(39620),nC=n(17421),nM=n.n(nC),inputFooter_InputFooterReferencedMessageHeader=()=>{let{setInputFooterReferencedMessage:e,inputFooterReferencedMessage:a}=(0,aW._)(),t=(0,p.useFragment)(n(71472),a),i=(0,g.useCallback)(()=>e(null),[e]);if(!t)return null;let{messageId:s,bot:r,authorUser:l,attachments:o,text:d}=t;return(0,u.jsx)(nv.Z,{isReferencingMessageSentByViewer:!1,isReferencingMessageErrored:!1,isInInputHeader:!0,children:(0,u.jsxs)("div",{className:nM().container,children:[(0,u.jsx)("div",{className:nM().referencedMessage,children:(0,u.jsx)(eb.Z,{messageId:s,bot:r,poeUser:l,attachments:o,text:d,showPrivateTag:!1})}),(0,u.jsx)(Y.t9,{className:nM().closeButton,onClick:i,icon:(0,u.jsx)(nS.Z,{})})]})})},ny=n(19156);let nw=n(75177),useReferencedMessageDraftLoader=()=>{let[e,a]=(0,p.useQueryLoader)(nw),{draft:n}=(0,ny.cX)(),{referencedMessageId:t}=n;return(0,g.useEffect)(()=>{t&&a({referencedMessageId:t})},[a,t]),e};var inputFooter_ReferencedMessageDraftLoader=e=>{let{queryReference:a}=e,{message:n}=(0,p.usePreloadedQuery)(nw,a),{setInputFooterReferencedMessage:t}=(0,aW._)();return(0,g.useEffect)(()=>{t(n)},[n,t]),null},nI=n(47450),nT=(0,g.forwardRef)((e,a)=>{let{chat:t,defaultBot:i,targetedBot:s,edges:r,lastMessage:l,viewer:o,onSuccessfulMessageSend:d,setTargetedBot:c,fileHandlerRef:k,chatInputRef:h}=e,f=(0,p.useFragment)(n(51023),t),_=(0,p.useFragment)(n(56308),i),F=(0,p.useFragment)(n(99205),s),b=(0,p.useFragment)(n(48645),r),v=(0,p.useFragment)(n(25066),l),S=(0,p.useFragment)(n(56530),o),{selectionMode:C}=(0,eg.ZP)(),[M]=(0,nI.cy)(),y=M.mainAttachments,{editingMessageData:w}=(0,B.m)(),{inputFooterReferencedMessage:I}=(0,aW._)(),T=useReferencedMessageDraftLoader(),x=(0,g.useMemo)(()=>C!==eg.oW.none?null:I?(0,u.jsx)(inputFooter_InputFooterReferencedMessageHeader,{}):w?(0,u.jsx)(inputFooter_ChatMessageInputUserHintButton,{userHintType:m.edit}):F.supportsRemix&&y.find(e=>{var a;return null===(a=e.type)||void 0===a?void 0:a.startsWith("image")})?(0,u.jsx)(inputFooter_ChatMessageInputUserHintButton,{userHintType:m.remix}):null,[I,w,C,F,y]);return(0,u.jsxs)("footer",{ref:a,className:aq().footer,children:[T&&(0,u.jsx)(inputFooter_ReferencedMessageDraftLoader,{queryReference:T}),(0,u.jsxs)("div",{className:aq().footerWrapper,children:[(0,u.jsx)(chat_ChatFooterHoveringButtonSection,{chat:f}),(0,u.jsxs)("div",{className:aq().footerInner,children:[(0,u.jsx)(chat_ChatPageConversationStarters,{chat:f,bot:_,edges:b,viewer:S,onSuccessfulMessageSend:d,chatInputRef:h}),x,(0,u.jsx)("div",{className:C===eg.oW.none?void 0:aq().hide,children:(0,u.jsx)(nh,{ref:h,chat:f,defaultBot:_,targetedBot:F,edges:b,lastMessage:v,viewer:S,onSuccessfulMessageSend:d,setTargetedBot:c,fileHandlerRef:k})}),C===eg.oW.share&&(0,u.jsx)(chat_ChatPageShareFooter,{chat:f}),C===eg.oW.delete&&(0,u.jsx)(chat_ChatPageDeleteFooter,{chat:f})]})]})]})});let useTargetedBotState=e=>{let[a,t]=(0,g.useState)(),i=(0,p.useFragment)(n(70107),a||e);return[i,t]},useFilterDuplicateMessageEdges=e=>{let a=(0,p.useFragment)(n(42297),e);if(!a||!e)return[];let t=new Set,i=e.filter((e,n)=>{var i;let s=null===(i=a[n].node)||void 0===i?void 0:i.id;return!(!s||t.has(s))&&(t.add(s),!0)});return i};let ChatPageMainRefetchError=class ChatPageMainRefetchError extends y.IL{static fromError(e){let a=new ChatPageMainRefetchError(e.message,{});return a.stack=e.stack,a}constructor(e,a){super(e),this.metadata=a,this.name="ChatPageMainRefetchError"}};let useRefetchMessageWhenOutOfSync=(e,a)=>{let[n]=useCheckLastMessageAndRefetch(e,(e,a,n)=>{let t=e!==a;return t?(0,x.Z)("poe/statsd_event",{category:"count",key:"poe.web.out_of_sync.last_message_id.mismatched",value:1,extra_data:{elapsedTime:n,path:window.__NEXT_DATA__.page}}):(0,x.Z)("poe/statsd_event",{category:"count",key:"poe.web.out_of_sync.last_message_id.matched",value:1,extra_data:{elapsedTime:n,path:window.__NEXT_DATA__.page}}),t},a);(0,P.q)(n),(0,T.og)(n,18e5,216e5)};var chat_ChatPageMain=e=>{let{root:a,chat:t,chats:i=null,viewer:s,onSuccessfulMessageSend:r,debug_parentHasOptimisticChat:l,debug_parentChatNodeId:o,setIsBranchingLoading:d}=e,c=(0,p.useFragment)(n(33441),a),{id:m,chatId:k,isOptimistic:h,defaultBotObject:f,..._}=(0,p.useFragment)(n(31748),t),F=l!==(null!=h&&h),b=(0,g.useRef)({});b.current.isOptimistic=h,b.current.debug_parentHasOptimisticChat=l,b.current.chatId=k,b.current.chatNodeId=m,b.current.debug_parentChatNodeId=o,(0,g.useEffect)(()=>{F&&(0,x.Z)("poe/statsd_event",{category:"count",key:"poe.web.chat.has_optimistic_mismatch",value:1,extra_data:{...b.current}})},[F]);let{lastMessage:T,...P}=(0,p.useFragment)(n(70447),_),j=(0,p.useRelayEnvironment)(),O=(0,g.useCallback)(()=>{(0,p.fetchQuery)(j,n(63212),{id:m},{fetchPolicy:"network-only"}).toPromise().catch(e=>{(0,y.H)(ChatPageMainRefetchError.fromError(e))})},[m,j]),R=(0,p.useFragment)(n(80082),T),{data:U,loadPrevious:E,hasPrevious:Z,isLoadingPrevious:H}=(0,p.usePaginationFragment)(n(14009),P),V=(0,p.useFragment)(n(14002),i),G=(0,p.useFragment)(n(68311),f),K=(0,p.useFragment)(n(52178),s),W=useFilterDuplicateMessageEdges(U.messagesConnection.edges),z=(0,g.useRef)(null),q=(0,g.useRef)(null),$=(0,g.useRef)(null),{elementProps:J,providerProps:Q}=(0,S.GO)();(0,L.fM)(k),(0,L.B1)(k),(0,L.by)(k),(0,L.o3)(k),(0,L.vI)(k,w.U),(0,L.Gm)(k),(0,L.vY)(k),(0,L.PT)(k,w.U),(0,L.xM)(),(0,L.g6)(_),(0,L.fx)(_),(0,D.V)(()=>{h||O()}),(0,M.e)(),useRefetchMessageWhenOutOfSync(_,O);let Y=(0,g.useCallback)(()=>{window.location.replace("/")},[]);(0,L.z8)(k,Y),(0,L.Wx)(k),(0,L.Z6)(k,Y),(0,L.Ck)(k),(0,L.Y3)(k),(0,L.Rr)(Y);let X=(0,g.useMemo)(()=>({markdownLinkRef:U,chatId:k,botId:G.botId,model:G.model}),[U,k,G.botId,G.model]),ee=G.allowsImageAttachments||G.uploadFileSizeLimit>0,[ea,en]=useTargetedBotState(G),et=0===W.length||1===W.length&&(0,I.OE)(W[0].node);return(0,u.jsx)(B.l7,{children:(0,u.jsx)(v.Z.Provider,{value:X,children:(0,u.jsxs)(C.Z,{bot:G,viewer:K,children:[!h&&(0,u.jsx)(chatModal_ChatModalWrapper,{chat:_,viewer:K}),(0,u.jsxs)(ag.Provider,{value:z,children:[(0,u.jsxs)(S.yp,{...Q,children:[(0,u.jsx)(ChatMessagesScrollWrapper,{startAtTop:et,scrollRootElementProps:J,children:(0,u.jsx)(chat_ChatMessagesView,{root:c,chat:_,chats:V,defaultBot:G,edges:W,viewer:K,loadPrevious:E,hasPrevious:Z,isLoadingPrevious:H,fileHandlerRef:q,chatInputRef:$,onSuccessfulMessageSend:r,setIsBranchingLoading:d},U.id)}),(0,u.jsx)("div",{className:A().flexGrow}),(0,u.jsx)(nI.$8,{children:(0,u.jsx)(nT,{ref:z,chat:_,defaultBot:G,targetedBot:ea,edges:W,lastMessage:R,viewer:K,setTargetedBot:en,onSuccessfulMessageSend:r,fileHandlerRef:q,chatInputRef:$})})]}),ee&&(0,u.jsx)(N.Z,{isInsideRelativeContainer:!0,fileHandlerRef:q})]})]})})})},nx=n(25012),nB=n.n(nx),layout_ChatPageMainColumn=e=>{let{header:a,children:n}=e,t=(0,a7.F)(),i=!(0,a4.k6)(t)&&nB().scrollSectionOverflow;return(0,u.jsxs)(u.Fragment,{children:[a,(0,u.jsx)("div",{className:(0,_.$)(i),children:(0,u.jsx)("div",{className:nB().column,children:n})})]})},nL=n(71258),nD=n(15117),nP=n(4694),nj=n(59657);function HideCanvasButton(e){let{className:a,sideEffect:n,logger:t}=e,i=(0,eW.Qd)(),s=(0,eW.fo)(),{t:r}=(0,O.$G)(),l=(0,g.useCallback)(()=>{null==i||i(eW.YU.canvasHidden),null==n||n(),t.logPreviewInteraction(eO.Z.hide_canvas)},[i,n,t]),o=r("Hide canvas"),[d,c]=(0,g.useState)(null);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"button",iconLeft:(0,u.jsx)(aF.zU,{}),theme:"ghost",size:"sm",showIconOnly:"always","aria-label":o,onClick:l,className:a,ref:c,children:o}),s!==eW.YU.canvasHidden&&(0,u.jsx)(Q.u,{anchorRef:d,label:o})]})}var nA=n(42550),nN=n.n(nA),nO=n(79399),nR=n(99371),nU=n(45570),nE=n.n(nU);function InCanvasToggleMenuButton(e){let a=(0,p.useFragment)(n(67575),e.viewer);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(nO.Z,{viewer:a,className:nE().overlayMenuButton}),(0,u.jsx)(nR.Z,{className:nE().sidebarMenuButton})]})}function CanvasHeader(e){let a=(0,p.useFragment)(n(13272),e.viewer);return(0,u.jsxs)("div",{className:nN().header,children:[(0,u.jsxs)("div",{className:nN().headerGroup,children:[(0,u.jsx)(InCanvasToggleMenuButton,{viewer:a}),(0,u.jsx)("h2",{className:nN().title,children:e.title}),(0,u.jsx)("div",{className:nN().hideMediumBelow,children:e.headerLeftActions})]}),(0,u.jsx)("div",{className:(0,_.$)(nN().headerGroup,nN().headerGroupRight),children:e.headerRightActions})]})}var nZ=n(84669),nH=n.n(nZ);let nV=(0,g.forwardRef)((e,a)=>{let t=(0,p.useFragment)(n(13323),e.viewer);return(0,u.jsxs)("div",{className:nH().container,ref:a,children:[(0,u.jsx)(CanvasHeader,{title:e.title,headerLeftActions:e.headerLeftActions,headerRightActions:e.headerRightActions,viewer:t}),(0,u.jsx)("div",{className:nH().body,children:e.body})]})});function CanvasLoadingPlaceholder(e){let{viewer:a}=e,t=(0,p.useFragment)(n(73394),a),i=(0,g.useMemo)(()=>({getData:()=>({}),logAction:()=>{},logPreviewInteraction:()=>{}}),[]);return(0,u.jsx)(nV,{viewer:t,body:(0,u.jsx)(aT.Sz,{}),headerRightActions:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(HideCanvasButton,{logger:i})})})}nV.displayName="CanvasLayout";var nG=n(83169),nK=n(86363),nW=n.n(nK);function CopyDropdownMenuItem(e){let{content:a}=e,{t:n}=(0,O.$G)(),t=(0,ee.ZP)(),i=(0,g.useCallback)(()=>{navigator.clipboard.writeText(a),t({content:n("Copied to clipboard"),type:ee.pC.success})},[a,t,n]);return(0,u.jsxs)(nG.ZP,{onClick:i,shrink:!0,children:[(0,u.jsx)(aF.vU,{size:"md",className:nW().icon}),(0,u.jsx)("p",{children:n("Copy code")})]})}function useIsCanvasTabOptimistic(e){let a=(0,p.useFragment)(n(94083),e);return!!(null==a?void 0:a.isOptimistic)}var dropdown_BudgetDropdownMenuItem=e=>{let{canvasTab:a}=e,{canvasCode:t,...i}=(0,p.useFragment)(n(10948),a),{t:s}=(0,O.$G)(),r=useIsCanvasTabOptimistic(i);return(0,u.jsxs)(nG.ZP,{href:"/budget/canvas/".concat(encodeURIComponent(t)),isDisabled:r,target:"_blank",shrink:!0,children:[(0,u.jsx)(aF.ik,{size:"md",className:(0,_.$)(nW().icon)}),(0,u.jsx)("p",{children:s("Budget")})]})},nz=n(97057),nq=n(86880),n$=n(17552),nJ=n(96225);let RemixDropdownMenuItem=e=>{let{canvasTab:a,chatId:t,className:i}=e,s=(0,p.useFragment)(n(3525),a),{t:r}=(0,O.$G)(),l=(0,ee.ZP)(),o=(0,a7.F)(),[d,c]=(0,p.useMutation)(n(22946)),m=(0,g.useCallback)(()=>{if(!s||!s.id||!s.bot.canvasContent)return null;let{canvasContent:e,botId:a}=s.bot,{content:n,contentType:i}=e;d({variables:{botId:a,canvasContent:(0,n$.B)(n,i),isRemixFlow:!0},onCompleted:e=>{if(e.continueChatToEditCanvasBot.chat){let n="/chat/".concat(encodeURIComponent(e.continueChatToEditCanvasBot.chat.chatCode),"?left_sidebar_collapsed=1");(0,a4.pE)(o)?(0,nJ.Ec)(e.continueChatToEditCanvasBot.chat.chatId,e.continueChatToEditCanvasBot.chat.defaultBotObject.displayName):(0,a4.G6)(o)?window.location.href=n:window.open(n,"_blank"),(0,x.Z)("poe/action_log",{action_type:ek.Z.remix_button_click,bot_id:a,chat_id:t})}else l({type:ee.pC.warning,content:r("Something went wrong.")})}})},[s,t,d,l,r,o]);return s&&s.id&&s.bot.canvasContent?(0,u.jsxs)(nG.ZP,{className:i,isDisabled:c,onClick:m,shrink:!0,children:[(0,u.jsx)(aF.oO,{size:"md"}),(0,u.jsx)("p",{children:r("Remix")})]}):null};var nQ=n(39170),nY=n(91917),nX=n(45444),n0=n(77546),n1=n(36796),n5=n(39781),n2=n(36383),n3=n(6305),n8=n(58705),n9=n(63266),n4=n(41156),n7=n(12001),n6=n(67209),te=n(65478);let ta={[eO.Z.viewable_impression_10s]:1e4,[eO.Z.viewable_impression_30s]:3e4,[eO.Z.viewable_impression_60s]:6e4,[eO.Z.viewable_impression_300s]:3e5},tn=[eO.Z.viewable_impression_10s,eO.Z.viewable_impression_30s,eO.Z.viewable_impression_60s,eO.Z.viewable_impression_300s];var tt=n(96458),ti=n(66135),ts=n.n(ti);function AbsolutelyPositionedLoadingIndicator(){return(0,u.jsx)("div",{className:ts().wrapper,children:(0,u.jsx)(aT.ZP,{})})}var tr=n(59404),tl=n(37160),to=n(44459),td=n.n(to);function useIsCanvasBotTab(e){let a=(0,p.useFragment)(n(25385),e);return(null==a?void 0:a.__typename)==="BotCanvasTab"}var tc=n(14858),header_getPublishAsNewUrl=e=>"/create_bot?type=canvas&canvas_node_id=".concat(function(e){try{return encodeURIComponent(e)}catch(a){return e}}(e)),tm=n(63758);let ConfirmationModal=()=>n.e(4402).then(n.bind(n,34402));var header_useUpdateCanvasBotConfirmationModal=e=>{let{chat:a,bot:t,canvasTab:i}=e,{chatId:s}=(0,p.useFragment)(n(20660),a),r=(0,p.useFragment)(n(62874),t),l=(0,p.useFragment)(n(90629),i),[o,d]=(0,g.useState)(!1),c=(0,g.useCallback)(()=>{d(!0)},[d]),m=(0,g.useCallback)(()=>{d(!1)},[d]),k=(0,g.useMemo)(()=>r?{botId:r.botId,chatId:s,canvasTabNodeId:l.id,onClose:m}:null,[r,s,l.id,m]),h=k?(0,u.jsx)(eK.Z,{isOpen:o,onRequestClose:m,body:ConfirmationModal,bodyProps:k,useMinHeight:!0}):null;return{modal:h,openModal:c,isOpen:o}},header_CanvasTabShareOrPublishButton=e=>{let{canvasTab:a,chat:t,viewer:i,logger:s}=e,r=(0,p.useFragment)(n(24979),a),l=(0,p.useFragment)(n(84765),t),o=(0,p.useFragment)(n(20154),i),{t:d}=(0,O.$G)(),[c,m]=(0,g.useState)(null),k=(0,tm.ZP)({chat:l}),h=header_useUpdateCanvasBotConfirmationModal({chat:l,bot:l.chatSettingsFieldBotToEdit||null,canvasTab:r}),f=d("Publish"),_=(0,g.useMemo)(()=>({isDisabled:!!r.isOptimistic,iconLeft:(0,u.jsx)(aF.zc,{}),size:"sm",theme:"ghost",showIconOnly:"medium-below","aria-label":f,ref:m,...k||l.chatSettingsFieldBotToEdit?{as:"button",onClick:h.openModal}:{as:"a",href:header_getPublishAsNewUrl(r.id)}}),[r.id,r.isOptimistic,l.chatSettingsFieldBotToEdit,h.openModal,k,f]),F=useIsCanvasBotTab(r);return F?(0,u.jsx)(tc.R,{canvasTab:r,viewer:o,logger:s}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:nN().hideMediumBelow,children:(0,u.jsx)(tc.R,{canvasTab:r,viewer:o,logger:s})}),(0,u.jsxs)("div",{className:nN().showMediumBelow,children:[(0,u.jsx)(eP.Z,{..._,children:f}),(0,u.jsx)(Q.u,{anchorRef:c,label:f})]}),h.modal]})};function EditBotButton(e){let a=(0,p.useFragment)(n(90688),e.tab),{t}=(0,O.$G)(),i=(0,aE.K)();return a.bot?(0,u.jsxs)(nG.ZP,{href:"/edit_bot?bot=".concat(encodeURIComponent(a.bot.handle)),shrink:!0,className:e.className,children:[(0,u.jsx)(aF.U3,{size:"md"}),(0,u.jsx)("p",{children:t(a.bot.isCanvasOnlyBot&&i?"Edit app":"Edit bot")})]},"editBot"):null}function EditButtonInHeader(e){let{canvasTab:a}=e,t=(0,p.useFragment)(n(34366),a),{t:i}=(0,O.$G)(),[s,r]=(0,g.useState)(null);if(!t.bot||!t.bot.viewerIsCreator)return null;let l=i("Edit");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"a",href:"/edit_bot?bot=".concat(encodeURIComponent(t.bot.handle)),size:"sm","aria-label":l,ref:r,iconLeft:(0,u.jsx)(aF.U3,{}),theme:"outline",className:nN().hideMediumBelow,"data-canvas-tab-primary-button-type":"edit",children:l}),(0,u.jsx)(Q.u,{anchorRef:s,label:l})]})}var tu=n(74192),tg=n.n(tu);function ExpandCanvasButton(){let e=(0,eW.Qd)(),{setIsCollapsed:a}=(0,e$.p)(),n=(0,eW.fo)(),t=(0,g.useCallback)(()=>{e&&e(e=>(e!==eW.YU.canvasFullWidth&&a(!0),e===eW.YU.canvasFullWidth?eW.YU.splitPrioritizeCanvas:eW.YU.canvasFullWidth))},[e,a]),{t:i}=(0,O.$G)(),s=i(n===eW.YU.canvasFullWidth?"Collapse":"Expand"),[r,l]=(0,g.useState)(null),o=n===eW.YU.canvasFullWidth?(0,u.jsx)(aF.bt,{}):(0,u.jsx)(aF.qp,{});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"button",iconLeft:o,className:tg().hideCompactBelow,theme:"ghost",size:"sm",showIconOnly:"always","aria-label":s,onClick:t,ref:l,children:s}),(0,u.jsx)(Q.u,{anchorRef:r,label:s})]})}var header_PublishAsNewDropdownMenuItem=e=>{let a=(0,p.useFragment)(n(8525),e.tab),{t}=(0,O.$G)(),i=useIsCanvasBotTab(a);return!a.id||i?null:(0,u.jsxs)(nG.ZP,{className:nN().showMediumBelow,href:header_getPublishAsNewUrl(a.id),shrink:!0,children:[(0,u.jsx)(aF.zc,{size:"md"}),(0,u.jsx)("p",{children:t("Publish as new app")})]},"publishNewBot")};function PublishButton(e){var a;let{canvasTab:t}=e,i=(0,p.useFragment)(n(35939),t),{t:s}=(0,O.$G)(),[r,l]=(0,g.useState)(null),o=s("Publish");return i&&i.id?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eP.Z,{as:"a",isDisabled:null!==(a=i.isOptimistic)&&void 0!==a&&a,iconLeft:(0,u.jsx)(aF.zc,{}),size:"sm",href:header_getPublishAsNewUrl(i.id),"aria-label":o,ref:l,className:nN().hideMediumBelow,children:o}),(0,u.jsx)(Q.u,{anchorRef:r,label:o})]}):null}var tp=n(85832),tk=n(33859),th=n(17663),tf=n(94370),t_=n.n(tf),header_PublishButtonGroup=e=>{let{canvasTab:a,chat:t}=e,i=(0,p.useFragment)(n(50852),a),s=(0,p.useFragment)(n(15837),t),r=header_useUpdateCanvasBotConfirmationModal({chat:s,bot:s.chatSettingsFieldBotToEdit||null,canvasTab:i}),{t:l}=(0,O.$G)(),[o,d]=(0,g.useState)(!1),c=(0,g.useCallback)(()=>{eo().push(header_getPublishAsNewUrl(i.id))},[i.id]),m=(0,g.useRef)(null),[k,h]=(0,g.useState)(null),f=(0,g.useMemo)(()=>(0,ab.Z)([m,h]),[m,h]);return i&&i.id&&r.modal?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(th.h,{children:[(0,u.jsx)(eP.Z,{as:"button",isDisabled:!!i.isOptimistic,iconLeft:(0,u.jsx)(aF.zc,{}),size:"sm",onClick:r.openModal,children:l("Publish")}),(0,u.jsxs)(tk.Z,{isOpen:o,setIsOpen:d,placement:"bottom-start",body:(0,u.jsx)(tp.Z,{children:(0,u.jsxs)(nG.ZP,{onClick:c,shrink:!0,children:[(0,u.jsx)(aF.zc,{size:"md",className:(0,_.$)(t_().icon)}),(0,u.jsx)("p",{children:l("Publish as new app")})]})}),children:[(0,u.jsx)(eP.Z,{as:"button","aria-label":l("More Options"),ref:f,"aria-expanded":o,iconLeft:(0,u.jsx)(aF.C2,{}),showIconOnly:"always",size:"sm",className:t_().secondaryButton,isDisabled:!!i.isOptimistic}),!o&&(0,u.jsx)(Q.u,{anchorRef:k,label:l("More Options")})]})]}),r.modal]}):null};function RemixButton(e){let{canvasTab:a,chatId:t}=e,i=(0,p.useFragment)(n(33370),a),{t:s}=(0,O.$G)(),r=(0,ee.ZP)(),l=(0,a7.F)(),[o,d]=(0,p.useMutation)(n(27269)),c=(0,g.useCallback)(()=>{if(!i||!i.id||!i.bot.canvasContent)return null;let{canvasContent:e,botId:a}=i.bot,{content:n,contentType:d}=e;o({variables:{botId:a,canvasContent:(0,n$.B)(n,d),isRemixFlow:!0},onCompleted:e=>{if(e.continueChatToEditCanvasBot.chat){let n="/chat/".concat(encodeURIComponent(e.continueChatToEditCanvasBot.chat.chatCode),"?left_sidebar_collapsed=1");(0,a4.pE)(l)?(0,nJ.Ec)(e.continueChatToEditCanvasBot.chat.chatId,e.continueChatToEditCanvasBot.chat.defaultBotObject.displayName):(0,a4.G6)(l)?window.location.href=n:window.open(n,"_blank"),(0,x.Z)("poe/action_log",{action_type:ek.Z.remix_button_click,bot_id:a,chat_id:t})}else r({type:ee.pC.warning,content:s("Something went wrong.")})}})},[i,t,o,r,s,l]);return i&&i.id&&i.bot.canvasContent?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(eP.Z,{as:"button",size:"sm",theme:"outline",isLoading:d,onClick:c,iconLeft:(0,u.jsx)(aF.oO,{}),className:nN().hideMediumBelow,children:s("Remix")})}):null}var tF=n(19673),tb=n(27382),header_ShareDropdownMenuItem=e=>{let{canvasTab:a,viewer:t,logger:i}=e,{messageId:s,message:r,codeblockIndex:l,canvasCode:o,...d}=(0,p.useFragment)(n(91952),a),c=(0,p.useFragment)(n(71270),t),{t:m}=(0,O.$G)(),k=(0,ee.ZP)(),h=useIsCanvasBotTab(d),[f]=(0,tF.Z)(),{openModal:_}=(0,tl.Z)(),F=(0,g.useCallback)(()=>{_({canvasCode:o})},[_,o]),b=(0,g.useCallback)(async()=>{if(!s||null==l)return;let e=f({messageId:s,codeblockIdx:l,onCompleted:()=>{i.logPreviewInteraction(eO.Z.share),i.logAction(ek.Z.share_preview)}});await (0,tb.n9)(e)&&k({type:ee.pC.success,content:m("Copied link to clipboard.")})},[l,f,i,s,k,m]),v=c.poeEnableMultiUserInvite&&o?F:b;return!s||h?null:(0,u.jsxs)(nG.ZP,{className:nN().showMediumBelow,onClick:v,isDisabled:(null==r?void 0:r.state)==="incomplete",shrink:!0,children:[(0,u.jsx)(aF.MS,{size:"md"}),(0,u.jsx)("p",{children:m("Share")})]},"share")},header_useHideCanvasTab=e=>{let a=(0,p.useFragment)(n(65545),e.chat),t=(0,p.useFragment)(n(73863),e.canvasTab),[i,s]=(0,p.useMutation)(n(96916)),r=(0,g.useCallback)(()=>{i({variables:{chatId:a.chatId,tabInput:{},tabNodeId:t.id}})},[t,a.chatId,i]);return[r,s]};function ViewBotDetailsButton(e){let a=(0,p.useFragment)(n(96479),e.tab),{t}=(0,O.$G)();return a.bot?(0,u.jsxs)(nG.ZP,{href:"/".concat(a.bot.handle,"?canvas_hidden=1"),target:"_blank",shrink:!0,children:[(0,u.jsx)(aF.aU,{size:"md"}),(0,u.jsx)("p",{children:t("View app details")})]}):null}var tv=n(78714),tS=n.n(tv),tC=n(14380),tM=n.n(tC);function CanvasTabSelectorItemUncontrolled(e){return(0,u.jsxs)("div",{className:tM().container,children:[e.children,(0,u.jsxs)("button",{className:tM().primaryButton,onClick:e.onOpenClick,children:[(0,u.jsx)("span",{className:tM().primaryButtonText,children:e.name}),e.isActive&&(0,u.jsx)("span",{"aria-label":"Active tab",className:tM().activeIndicator})]}),(0,u.jsx)("div",{className:tM().closeButton,children:(0,u.jsx)(eP.Z,{as:"button",onClick:e.onCloseClick,theme:"secondary",size:"sm",children:"Close"})})]})}let CanvasTabSelectorItemDivider=()=>(0,u.jsx)("div",{className:tM().divider});function CanvasTabSelectorItem(e){var a,t;let{canvasTab:i,canvasTabToOpen:s,chat:r,popoverShouldCloseOnCloseClick:l,logger:o}=e,d=(0,p.useFragment)(n(30048),i),c=(0,p.useFragment)(n(47653),s),m=(0,p.useFragment)(n(58501),r),[k]=useSwitchToCanvasTab({canvasTab:d,chat:m}),h=d.id===(null===(a=m.canvasTabInForeground)||void 0===a?void 0:a.id),f=(0,g.useCallback)(()=>{h||(k(),o.logPreviewInteraction(eO.Z.switch_canvas_tab))},[k,o,h]),[_,,F]=useCloseCanvasTab(m),b=(0,g.useCallback)(e=>{l||e.stopPropagation(),_({tabNodeId:d.id,tabToOpenNodeId:null==c?void 0:c.id}),o.logPreviewInteraction(eO.Z.close_canvas_tab)},[o,_,d.id,null==c?void 0:c.id,l]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(CanvasTabSelectorItemUncontrolled,{isActive:h,name:null!==(t=d.title)&&void 0!==t?t:"Unknown",onOpenClick:f,onCloseClick:b,children:(0,u.jsx)(e4.Z,{node:d})}),F]})}function CanvasTabSelector_CanvasTabSelectorItemUncontrolled(e){let{children:a,onClick:n,isOpen:t,setIsOpen:i,iconLeft:s,isDisabled:r}=e,{t:l}=(0,O.$G)(),o=l("See tabs");return(0,u.jsx)(ap.Z,{size:"sm",tooltipLabel:o,onClick:n,setMenuOpen:i,menuOpen:t,isDisabled:r,iconLeft:s||(0,u.jsx)(aF.ky,{}),alignment:"center",menuBody:(0,u.jsx)(tp.Z,{children:a})})}function getIconLeft(e){if("number"!=typeof e)return(0,u.jsx)(aF.n0,{});switch(e){case 0:return(0,u.jsx)(aF.Cm,{});case 1:return(0,u.jsx)(aF.n0,{});case 2:return(0,u.jsx)(aF.$p,{});case 3:return(0,u.jsx)(aF.Bx,{});case 4:return(0,u.jsx)(aF.Vq,{});case 5:return(0,u.jsx)(aF.To,{});case 6:return(0,u.jsx)(aF.WY,{});case 7:return(0,u.jsx)(aF.I6,{});case 8:return(0,u.jsx)(aF.rO,{});case 9:return(0,u.jsx)(aF.aF,{});default:return(0,u.jsx)(aF.oe,{})}}let ty=n(68801);function CanvasTabSelectorInner(e){let{logger:a,queryReference:t}=e,{chat:i}=(0,p.usePreloadedQuery)(ty,t);Z()(i,"chat is required");let{data:s,loadNext:r,hasNext:l,isLoadingNext:o}=(0,p.usePaginationFragment)(n(90684),i),d=(0,g.useCallback)(()=>{r(20)},[r]),c=(0,H.Z)(i);return(0,u.jsx)(aI.Z,{className:tS().infiniteScrollContainer,loadMore:d,hasMore:l,isLoading:o,error:!1,threshold:100,children:s.canvasTabsConnection.edges.map((e,n)=>e.node?(0,u.jsxs)(g.Fragment,{children:[(0,u.jsx)(CanvasTabSelectorItem,{canvasTab:e.node,logger:a,chat:i,popoverShouldCloseOnCloseClick:!c&&1===s.canvasTabsConnection.edges.length,canvasTabToOpen:s.canvasTabsConnection.edges.length<=1||"foreground"!==e.node.state?null:0===n?s.canvasTabsConnection.edges[1].node:s.canvasTabsConnection.edges[0].node}),n!==s.canvasTabsConnection.edges.length-1&&(0,u.jsx)(CanvasTabSelectorItemDivider,{})]},e.node.id):null)})}function CanvasTabSelector(e){let{chat:a,isOpen:t,setIsOpen:i,logger:s}=e,r=(0,p.useFragment)(n(8081),a),l=(0,G.Z)(),[o,d]=(0,p.useQueryLoader)(ty),c=(0,g.useCallback)(()=>{d({id:r.id})},[r.id,d]),m=(0,g.useCallback)(()=>{},[]);return r.isOptimistic||!l?(0,u.jsx)(CanvasTabSelector_CanvasTabSelectorItemUncontrolled,{onClick:c,isOpen:!1,setIsOpen:m,iconLeft:getIconLeft(r.canvasTabsCount),isDisabled:!0,children:(0,u.jsx)(u.Fragment,{})}):(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(CanvasTabSelector_CanvasTabSelectorItemUncontrolled,{onClick:c,isOpen:!1,setIsOpen:i,iconLeft:getIconLeft(r.canvasTabsCount),children:(0,u.jsx)(u.Fragment,{})},"susfb"),children:(0,u.jsx)(CanvasTabSelector_CanvasTabSelectorItemUncontrolled,{onClick:c,isOpen:t,setIsOpen:i,iconLeft:getIconLeft(r.canvasTabsCount),children:o?(0,u.jsx)(CanvasTabSelectorInner,{logger:s,queryReference:o}):(0,u.jsx)(u.Fragment,{})},"inner")})}function useHasTimeInMsPassed(e,a){let[n,t]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t(!1);let e=setTimeout(()=>{t(!0)},a);return()=>clearTimeout(e)},[e,a]),n}var tw=n(20761),tI=n(39558);let importDeleteBotModal=()=>n.e(8358).then(n.bind(n,88358));function CanvasTab(e){var a,t,i,s,r,l;let{viewer:o,canvasTab:d,chat:c,onSuccessfulMessageSend:m}=e,k=(0,p.useFragment)(n(10043),o),h=(0,p.useFragment)(n(9532),d),{t:f}=(0,O.$G)(),F=(0,p.useFragment)(n(48056),c),b=useIsCanvasBotTab(h),v=!!h.bot&&h.bot.deletionState!==tt.Z.not_deleted,S=(0,a7.F)(),C=!0===k.enableCanvasAppDebugMode,M=function(e){let a=(0,p.useFragment)(n(52032),e);return a.isOptimistic?"BotCanvasTab"===a.__typename?{type:"optimisticBotCanvasTab",botId:a.botId,canvasTabNonce:a.clientNonce}:"MessageCanvasTab"===a.__typename?{type:"optimisticMessageCanvasTab",messageId:a.messageId,codeblockIndex:a.codeblockIndex,canvasTabNonce:a.clientNonce}:void 0:{type:"canvasTab",globalId:a.globalId}}(h),y=(0,eH.X)(k),w=(0,n8.Z)(y,h.previewContentObject.content,h.previewContentObject.contentType,{inline:!1,withConsole:!0,allowDownloads:!0,linkInterceptionBehavior:"showConfirmation",interceptCopyEvents:(0,a4.P)(S),debugMode:C,useInFrameCanvasServerRelay:null!==(s=k.useInFrameCanvasServerRelay)&&void 0!==s&&s,datastoreBehavior:k.persistenceAndSyncEnabled?"server_persisted":"disabled",contentSource:M}),I=(0,a0.L)(F,h),T=(0,g.useRef)(null);!function(e,a){let n=(0,g.useRef)(new Set),t=(0,g.useRef)(null),i=(0,g.useRef)(0),s=(0,g.useRef)(null),r=(0,g.useRef)(!1),l=(0,g.useRef)(null),o=(0,g.useCallback)(()=>{if(!r.current)return;t.current&&(clearTimeout(t.current),t.current=null);let a=i.current+(s.current?Date.now()-s.current:0),l=null,d=1/0;for(let e of tn){let t=ta[e];!n.current.has(e)&&t>a&&t<d&&(l=e,d=t)}if(l){let c=d-a;t.current=setTimeout(()=>{r.current&&(e.logPreviewInteraction(l),n.current.add(l),i.current=a+c,s.current=Date.now(),o())},c)}},[e]),d=(0,g.useCallback)(()=>{r.current=!0,s.current=Date.now(),o()},[o]),c=(0,g.useCallback)(()=>{r.current=!1,t.current&&(clearTimeout(t.current),t.current=null),i.current=0,s.current=null,n.current.clear()},[]),m=(0,g.useCallback)(()=>{t.current&&(clearTimeout(t.current),t.current=null),n.current.clear(),i.current=0,r.current?(s.current=Date.now(),o()):s.current=null},[o]),u=(0,g.useCallback)(e=>{l.current&&(l.current.disconnect(),l.current=null),e&&(l.current=new IntersectionObserver(e=>{var a,n;let t=null!==(n=null===(a=e[0])||void 0===a?void 0:a.isIntersecting)&&void 0!==n&&n;t!==r.current&&(t?d():c())},{threshold:.5,root:null}),l.current.observe(e))},[d,c]);(0,g.useEffect)(()=>(a.current&&u(a.current),()=>{l.current&&(l.current.disconnect(),l.current=null)}),[a,u]),(0,g.useEffect)(()=>()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),(0,g.useEffect)(()=>{let handleVisibilityChange=()=>{let e="visible"===document.visibilityState;e?r.current&&(s.current=Date.now(),o()):r.current&&(i.current=0,s.current=null,n.current.clear(),t.current&&(clearTimeout(t.current),t.current=null))};return document.addEventListener("visibilitychange",handleVisibilityChange),()=>{document.removeEventListener("visibilitychange",handleVisibilityChange)}},[o]),(0,g.useMemo)(()=>({...e,resetImpressionTimer:m}),[e,m])}(I,T);let{log:x,clearLog:B,...D}=(0,n9.Z)(void 0!==h.botId&&void 0!==k.codeEditorCanvasBotId&&h.botId===k.codeEditorCanvasBotId),[P,j]=(0,te.J)(B),{safeMode:A,onSecurityPolicyViolation:N,disableSafeMode:R,shouldShowSafeModeOverlay:U,onSafeModeOverlayDismiss:E}=(0,n7.Z)(P),{getFileDownloadInfo:H,...G}=(0,n2.Z)(),{isConsoleOpen:K,toggleConsole:W}=(0,n5.K)(x,{autoOpenOnError:!b}),[z,q]=(0,g.useState)(!1),[$,J]=(0,g.useState)(!1),Q=function(e,a,t,i){let s=(0,p.useFragment)(n(19143),e),r=(0,p.useFragment)(n(1425),t),l=(0,p.useFragment)(n(93578),a),{t:o}=(0,O.$G)(),d=(0,eW.Qd)(),c=(0,g.useRef)(null),m=(0,g.useRef)(s);m.current=s;let u=(0,g.useRef)(r);u.current=r;let k=(0,g.useRef)(l);k.current=l;let h=(0,p.useRelayEnvironment)(),f=(0,eH.X)(l);return(0,g.useCallback)(async(e,a)=>{let args=()=>({environment:h,chat:m.current,bot:m.current.defaultBotObject,viewer:k.current,prompt:e.data.text,source:{sourceType:"preview_triggered",previewTriggeredMetadata:function(e,a){let t=(0,p.readInlineData)(n(81299),e);return t.isOptimistic&&t.botId?{fromBotCanvas:{botId:t.botId},optimisticCanvasTab:t.clientNonce?{optimisticBotCanvasTab:{botId:t.botId,clientNonce:t.clientNonce}}:null}:a?{canvasGlobalId:a,fromBotCanvas:t.botId?{botId:t.botId}:void 0}:{}}(u.current,u.current.globalId),chatInputMetadata:{useVoiceRecord:!1}},files:e.data.attachments||[],parameters:e.data.parameters,setToast:()=>{},onSuccessfulMessageSend:n=>{(0,eD.T)(a,e,{success:!0,hostWillSendResults:!0},f),handleResponseStreaming({data:n,frame:a,event:e,_chatId:m.current.id,iframeUrl:f}),null==i||i(n)},onFailedMessageSend:n=>{(0,eD.T)(a,e,{success:!1,code:"unknown",message:n.messageEdgeCreate.statusMessage||"Something went wrong."},f)},onError:()=>{(0,eD.T)(a,e,{success:!1,code:"unknown",message:"Something went wrong."},f)},t:o});if(!1!==e.data.openChat&&(null==d||d(eW.YU.splitPrioritizeChat)),!c.current){c.current=(async()=>await (0,eE.bG)(args()))();return}if(c.current){await c.current;let e=20;for(;e>0&&m.current.isOptimistic&&u.current.isOptimistic;)await new Promise(e=>setTimeout(e,500)),e-=1}(0,eE.bG)(args())},[h,i,d,o,f])}(F,k,h,m),[Y]=header_useHideCanvasTab({canvasTab:h,chat:F}),[X,ee]=(0,g.useState)(!1),ea=(0,g.useCallback)(()=>{ee(!0)},[]),en=useHasTimeInMsPassed(P,500),et=useHasTimeInMsPassed(P,1e3),{stopTimer:ei}=(0,n6.Z)({language:h.previewContentObject.language,contentType:h.previewContentObject.contentType}),es=(0,g.useCallback)(()=>{ei()},[ei]),er="html"===h.previewContentObject.contentType,el=(0,tm.ZP)({chat:F}),[eo,ed]=(0,g.useState)(!1),ec=(0,g.useCallback)(()=>{ed(!1)},[]),em=(0,g.useCallback)(()=>{ed(!0)},[]),eu=(0,g.useMemo)(()=>h.bot?{bot:h.bot,onRequestClose:ec}:null,[h.bot,ec]),eg=(0,nX.te)(P,I),ep=(0,n3.R)(),ek="".concat(P),eh=b&&(null===(a=h.bot)||void 0===a?void 0:a.isPromptPublic),ef=k.editCanvasTabPrimaryButtonEnabled&&b&&(null===(l=h.bot)||void 0===l?void 0:l.viewerIsCreator)===!0?"edit":!b&&er?"publish":b&&eh?"remix":null,e_=(el||F.chatSettingsFieldBotToEdit)&&(null===(i=F.chatSettingsFieldBotToEdit)||void 0===i?void 0:null===(t=i.creator)||void 0===t?void 0:t.viewerIsUser),eF=function(e,a,t){let i=(0,p.useFragment)(n(80055),a),s=(0,p.useFragment)(n(65554),e),r=(0,p.useFragment)(n(86613),t),l=(0,eH.X)(r),[o]=function(){let[e,a]=(0,p.useMutation)(n(74229));return[e,a]}(),[d]=function(){let[e,a]=(0,p.useMutation)(n(21060));return[e,a]}(),c=useIsCanvasTabOptimistic(s),m=(0,tI.H)();return(0,g.useCallback)((e,a)=>{if(!r.canvasActionsEnabled){(0,eT.q$)(a,l,{source:"poeFrame",type:"panic",message:"Canvas actions are not enabled",requestId:e.requestId});return}if(c||i.isOptimistic){(0,tw.WK)();let t=i.id;o({variables:{actions:e.actions,optimisticCanvasTab:function(e){var a,t,i;let s=(0,p.readInlineData)(n(57089),e),r=s.clientNonce;if(Z()(r,"clientNonce is required"),"BotCanvasTab"===s.__typename){let e=null===(a=s.bot)||void 0===a?void 0:a.botId;return Z()(e,"botId is required"),{optimisticBotCanvasTab:{botId:e,clientNonce:r}}}if("MessageCanvasTab"===s.__typename){let e=null===(t=s.message)||void 0===t?void 0:t.messageId;Z()(e,"messageId is required");let a=s.previewContentObject;Z()(a,"contentObject is required");let n=null!==(i=s.codeblockIndex)&&void 0!==i?i:0;return{optimisticMessageCanvasTab:{messageId:e,clientNonce:r,indexOfCodeblockInMessage:n,contentObject:a}}}throw Error("Invalid canvas tab type")}(s)},updater:(e,a)=>{var n;let i=null==a?void 0:null===(n=a.processActionsFromOptimisticCanvasTab.canvasTab)||void 0===n?void 0:n.chat;i&&(0,eE.j)(e,{chat:i,optimisticChatId:t})},onError:n=>{(0,eT.q$)(a,l,{source:"poeFrame",type:"panic",message:"Error processing canvas actions - "+n.message,requestId:e.requestId})},onCompleted:(n,t)=>{var s;if(t){(0,eT.q$)(a,l,{source:"poeFrame",type:"panic",message:"Error processing canvas actions",requestId:e.requestId});return}(0,eT.q$)(a,l,{source:"poeFrame",type:"canvasActionsResponse",requestId:e.requestId,responses:n.processActionsFromOptimisticCanvasTab.dataForCanvasTab||[]});let r=null===(s=n.processActionsFromOptimisticCanvasTab.canvasTab)||void 0===s?void 0:s.chat;i.isOptimistic&&r&&m(r),(0,tw.U3)(5e3)}})}else d({variables:{actions:e.actions,canvasTabGlobalId:s.globalId},onError:n=>{(0,eT.q$)(a,l,{source:"poeFrame",type:"panic",message:"Error processing canvas actions - "+n.message,requestId:e.requestId})},onCompleted:(n,t)=>{if(t){(0,eT.q$)(a,l,{source:"poeFrame",type:"panic",message:"Error processing canvas actions",requestId:e.requestId});return}(0,eT.q$)(a,l,{source:"poeFrame",type:"canvasActionsResponse",requestId:e.requestId,responses:n.processActionsFromCanvasTab.dataForCanvasTab||[]})}})},[c,d,o,s,i.isOptimistic,i.id,m,r.canvasActionsEnabled,l])}(h,F,k),[eb,ev]=(0,g.useState)(null),eS=(0,g.useCallback)(e=>{ev(e),w(e)},[w]);!function(e,a,t){let i=(0,p.useFragment)(n(94711),t),s=(0,eH.X)(i),r=(0,p.useFragment)(n(72679),a),l=(0,g.useCallback)(a=>{if(!e)return;let n=a.onDataToForwardToCanvasTab.dataForCanvasTab;n&&0!==n.length&&(0,eT.q$)(e,s,{type:"canvasActionsPush",source:"poeFrame",data:[...n]})},[e,s]);(0,L.D4)(r.globalId,l)}(eb,h,k);let eC=(0,n4.B)(I,eI.Z.canvas);return(0,u.jsx)(tl.o,{children:(0,u.jsx)(nV,{ref:T,title:null!==(r=h.title)&&void 0!==r?r:"".concat(h.previewContentObject.contentType),viewer:k,headerLeftActions:"edit"===ef?(0,u.jsx)(EditButtonInHeader,{canvasTab:h}):"publish"===ef?e_?(0,u.jsx)(header_PublishButtonGroup,{canvasTab:h,chat:F}):(0,u.jsx)(PublishButton,{canvasTab:h}):"remix"===ef?(0,u.jsx)(RemixButton,{canvasTab:h,chatId:F.chatId}):null,headerRightActions:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e4.Z,{node:h}),(0,u.jsx)(nz.X,{isOpen:z,setIsOpen:q,menuBody:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(header_PublishAsNewDropdownMenuItem,{tab:h}),(0,u.jsx)(header_ShareDropdownMenuItem,{canvasTab:h,viewer:k,logger:I}),(0,u.jsx)(nq.Z,{onClick:j}),eh&&(0,u.jsx)(RemixDropdownMenuItem,{canvasTab:h,chatId:F.chatId,className:"remix"===ef?nN().showMediumBelow:""}),!b&&(0,u.jsx)(nY.L,{getFileDownloadInfo:H,logger:I}),!b&&h.previewContentObject.contentType&&(0,u.jsx)(CopyDropdownMenuItem,{content:h.previewContentObject.content}),(0,u.jsx)(nQ.D,{isConsoleOpen:K,toggleConsole:W}),(0,u.jsx)(dropdown_BudgetDropdownMenuItem,{canvasTab:h}),(0,u.jsx)(ViewBotDetailsButton,{tab:h}),h.bot&&!v&&h.bot.viewerIsCreator&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(nG.ZP,{type:nG.lY.separator,shrink:!0,children:(0,u.jsx)(u.Fragment,{})},"sectionSeparator"),(0,u.jsx)(EditBotButton,{tab:h,className:"edit"===ef?nN().showMediumBelow:""}),(0,u.jsx)(nG.ZP,{shrink:!0,onClick:em,type:nG.lY.destructive,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(aF.Fz,{size:"md"}),(0,u.jsx)("p",{children:f("Delete app")})]})})]})]})}),(0,u.jsx)(header_CanvasTabShareOrPublishButton,{canvasTab:h,chat:F,viewer:k,logger:I}),(0,u.jsx)(V.Z,{fallback:(0,u.jsx)("div",{children:"Unable to render tab switcher"}),children:(0,u.jsx)(CanvasTabSelector,{chat:F,logger:I,isOpen:$,setIsOpen:J})}),(0,u.jsx)(ExpandCanvasButton,{}),(0,u.jsx)(HideCanvasButton,{logger:I,sideEffect:Y})]}),body:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(tr.Z,{className:td().banner,canvasTab:h}),eu&&(0,u.jsx)(eK.Z,{isOpen:eo,onRequestClose:ec,body:importDeleteBotModal,bodyProps:eu}),(0,u.jsx)(n1.Z,{ref:eC,inline:!1,iframeClickCaptureIsDisabled:$||z,onReady:eS,safeMode:A,...eg,onCanvasActionsRequest:eF,shouldShowSafeModeOverlay:U,onSafeModeOverlayConfirm:R,onSafeModeOverlayDismiss:E,onSecurityPolicyViolation:N,onDomContentLoaded:ea,onLoaded:es,containerClassName:td().iframe,onCopyToClipboardDesktopAppOnly:(0,a4.P)(S)?ep:void 0,className:(0,_.$)(td().iframe,X||et?void 0:td().hideIFrame),onSendUserMessage:Q,sendUserMessageOverlay:void 0,...D,...G,iframeUrl:y},ek),!X&&en&&(0,u.jsx)(AbsolutelyPositionedLoadingIndicator,{}),(0,u.jsx)(n0.Z,{log:x,isOpen:K,toggleConsole:W})]})})})}function Canvas(e){var a,t,i,s,r;let{viewer:l,chat:o,onSuccessfulMessageSend:d}=e,c=(0,p.useFragment)(n(75427),l),m=(0,p.useFragment)(n(56216),o);!function(e){var a;let t=(0,p.useFragment)(n(75641),e),{setIsCollapsed:i}=(0,e$.p)(),s=t.isOptimistic,r=null===(a=t.canvasTabInForeground)||void 0===a?void 0:a.id;(0,g.useEffect)(()=>{s&&r&&i(!0)},[i,s,r])}(m);let k=(0,eW.Qd)(),h=null===(a=m.canvasTabInForeground)||void 0===a?void 0:a.id;if((0,g.useEffect)(()=>{var e;k&&(h||k(eW.YU.canvasHidden),(null===(e=m.canvasTabInForeground)||void 0===e?void 0:e.state)!=="foreground"&&k(eW.YU.canvasHidden))},[h,k,null===(t=m.canvasTabInForeground)||void 0===t?void 0:t.state]),!(null===(i=m.canvasTabInForeground)||void 0===i?void 0:i.id))return(0,u.jsx)(nV,{viewer:c,body:(0,u.jsx)("div",{})});let f=(null===(s=m.canvasTabInForeground)||void 0===s?void 0:s.idWhenWasOptimistic)||(null===(r=m.canvasTabInForeground)||void 0===r?void 0:r.id);return(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(CanvasLoadingPlaceholder,{viewer:c}),children:(0,u.jsx)(CanvasTab,{viewer:c,chat:m,canvasTab:m.canvasTabInForeground,onSuccessfulMessageSend:d},f)})}var tT=n(34389),tx=n(66743),tB=n.n(tx),tL=n(41209),tD=n(45044),tP=n.n(tD);function Sidebar(e){let{children:a}=e;return(0,u.jsx)("div",{className:tB()["canvas-column-wrapper"],children:(0,u.jsx)("aside",{className:tB()["canvas-column"],children:(0,u.jsx)(V.Z,{fallback:nP.StatusCodeErrorFallback,children:(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(aT.Sz,{}),children:a})})})})}let CanvasSidebarLayout=e=>{let{aside:a,center:n}=e,t=(0,eW.fo)(),{onDragStart:i,mainColumnRef:s,isResizing:r}=function(){let e=(0,g.useRef)(null),[a,n]=(0,g.useState)(!1),t=(0,g.useRef)(-1),i=(0,g.useRef)(0),s=(0,g.useCallback)(a=>{e.current&&(t.current=a.clientX,i.current=e.current.clientWidth,n(!0))},[]);(0,g.useEffect)(()=>(a&&document.body.classList.add(tP().isResizing),()=>{document.body.classList.remove(tP().isResizing)}),[a]);let r=(0,g.useCallback)(()=>{n(!1)},[]),l=(0,g.useCallback)(n=>{if(!a||!e.current)return;let s=n.clientX-t.current,r=Math.floor(s+i.current);r%2==0&&document.documentElement.style.setProperty("--resized-chat-column-width","".concat(r,"px"))},[a]);return(0,g.useEffect)(()=>(a&&(window.addEventListener("mousemove",l),window.addEventListener("mouseup",r)),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",r)}),[l,r,a]),{onDragStart:s,mainColumnRef:e,isResizing:a}}(),l=function(){let e=(0,eW.fo)(),[a,n]=(0,g.useState)(e!==eW.YU.canvasHidden);return(0,g.useEffect)(()=>{n(a=>a||e!==eW.YU.canvasHidden)},[e,a]),a}(),o=(0,tL.I)();return(0,u.jsxs)("div",{className:(0,_.$)(tB().container,tB()[t],(o||r)&&tB().disableTransition),"data-canvas-sidebar-state":t,children:[(0,u.jsx)("div",{className:tB()["chat-column"],ref:s,children:(0,u.jsx)(tT._.Provider,{value:t!==eW.YU.canvasHidden,children:(0,u.jsx)(V.Z,{fallback:nP.StatusCodeErrorFallback,children:(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(aT.Sz,{}),children:n})})})}),(0,u.jsx)("div",{className:tB().resizeHandleContainer,children:(0,u.jsx)("div",{className:tB().resizeHandle,onMouseDown:i,children:(0,u.jsx)("div",{className:tB().resizeHandleInner})})}),l?(0,u.jsx)(V.Z,{fallback:nP.StatusCodeErrorFallback,children:(0,u.jsx)(g.Suspense,{fallback:(0,u.jsx)(aT.Sz,{}),children:(0,u.jsx)(Sidebar,{sidebarState:t,children:a})})}):null]})};function SetupCanvasSubscriptions(e){let{chat:a}=e,t=(0,p.useFragment)(n(30564),a);return(0,L.r3)(t.chatId),(0,L.Ad)(t.chatId),(0,L.$l)(t.chatId),function(e){let a=(0,p.useFragment)(n(53598),e),t=(0,g.useCallback)((e,n)=>{Z()(n,"Empty data for message deleted subscription");let t=(0,eq.qH)(e,n.messageDeleted.id);for(let n of t)(0,eq.AM)(e,{chatNodeId:a.id,canvasTabNodeId:n.getDataID()})},[a.id]);(0,L.Lj)(a.chatId,t)}(t),(0,u.jsx)(u.Fragment,{})}function MaybeWithCanvas(e){var a;let{children:t,viewer:i,chat:s,onSuccessfulMessageSend:r}=e,l=(0,p.useFragment)(n(55892),i),o=(0,p.useFragment)(n(13309),s),d=(null===(a=o.canvasTabInForeground)||void 0===a?void 0:a.id)!==null;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(CanvasSidebarLayout,{aside:d?(0,u.jsx)(Canvas,{chat:o,viewer:l,onSuccessfulMessageSend:r}):(0,u.jsx)(u.Fragment,{}),center:(0,u.jsxs)(u.Fragment,{children:[!o.isOptimistic&&(0,u.jsx)(SetupCanvasSubscriptions,{chat:o}),t]})})})}let ChatPageColumn=e=>{var a;let{root:t,chat:i,viewer:s,onSuccessfulMessageSend:r,chats:l}=e,o=(0,p.useFragment)(n(96400),t),d=(0,p.useFragment)(n(37678),i),c=(0,p.useFragment)(n(31120),s),m=(0,a2.dC)(d.defaultBotObject),k=(0,g.useMemo)(()=>(0,nj.p)(d.title||m),[m,d.title]),_=function(e){var a,t,i;let s=(0,p.useFragment)(n(75351),e),r=(0,el.useRouter)(),l=r.query.canvas_hidden,o=useIsCanvasBotTab(null!==(t=null==s?void 0:s.canvasTabInForeground)&&void 0!==t?t:null);if(l)return eW.YU.canvasHidden;let d=null==s?void 0:null===(a=s.canvasTabInForeground)||void 0===a?void 0:a.state;return d===eV.Z.foreground?o?(null===(i=s.lastMessage)||void 0===i?void 0:i.id)?eW.YU.splitPrioritizeCanvas:eW.YU.canvasFullWidth:eW.YU.splitPrioritizeCanvas:eW.YU.canvasHidden}(d),[F,b]=(0,g.useState)(!1);if(d.isDeleted)throw new nP.NotFound;return F?(0,u.jsx)(aT.Sz,{}):(0,u.jsx)(eW._A,{initialSidebarState:_,children:(0,u.jsx)(eg.Br,{children:(0,u.jsxs)(MaybeWithCanvas,{chat:d,viewer:c,onSuccessfulMessageSend:null!=r?r:null,children:[(0,u.jsx)(nL.Z,{title:k}),(0,u.jsx)(ny.KN,{storageKey:d.isOptimistic?d.defaultBotObject.handle:d.id,children:(0,u.jsx)(aW.Z,{children:(0,u.jsx)(nD.E,{children:(0,u.jsx)(layout_ChatPageMainColumn,{header:(0,u.jsx)(f.Z,{bot:d.defaultBotObject,chat:d,viewer:c,useChatTitle:!0,children:(0,u.jsx)(h.Z,{chat:d,viewer:c})}),children:(0,u.jsx)(chat_ChatPageMain,{root:o,chat:d,viewer:c,onSuccessfulMessageSend:r,chats:l,debug_parentHasOptimisticChat:null!==(a=d.isOptimistic)&&void 0!==a&&a,debug_parentChatNodeId:d.id,setIsBranchingLoading:b},d.id)})})})})]})})})}},59404:function(e,a,n){"use strict";n.d(a,{o:function(){return k}});var t=n(85893),i=n(11163),s=n(67294),r=n(22120),l=n(22578),o=n(96948),d=n(8583),c=n(27382),m=n(12251),u=n(38357),g=n(24185),p=n.n(g);let k="app_published_banner";a.Z=e=>{var a,g,h,f,_;let{className:F,canvasTab:b}=e,v=(0,l.useFragment)(n(11784),b),[S,C]=(0,s.useState)(!1),{t:M}=(0,r.$G)(),y=(0,d.ZP)(),w=(0,i.useRouter)();(0,s.useEffect)(()=>{let e=(0,u.CS)(w,k);e&&C(!0)},[w]);let I=(0,s.useCallback)(async()=>{var e;let a="https://poe.com/".concat(null===(e=v.bot)||void 0===e?void 0:e.handle);await (0,c.vQ)(a)&&y({type:d.pC.success,content:M("Copied link to clipboard.")})},[null===(a=v.bot)||void 0===a?void 0:a.handle,y,M]);return(null===(g=v.bot)||void 0===g?void 0:g.handle)&&(null===(h=v.bot)||void 0===h?void 0:h.viewerIsCreator)&&(null===(f=v.bot)||void 0===f||!f.isPrivateBot)&&S?(0,t.jsx)("div",{className:(0,m.$)(F,p().banner),children:(0,t.jsx)(o.Z,{variant:"base",message:(0,t.jsxs)("div",{children:[M("Published. Get 1 or more users to try it for a chance to be recommended on Poe.")," ",(0,t.jsxs)("span",{className:p().underline,onClick:I,children:[M("Share")," ",null===(_=v.bot)||void 0===_?void 0:_.handle]})]})})}):null}},37160:function(e,a,n){"use strict";n.d(a,{Z:function(){return useCanvasShareModal},o:function(){return CanvasShareModalProvider}});var t=n(85893),i=n(67294),s=n(22641);let importCanvasTabShareModal=()=>n.e(7944).then(n.bind(n,67944)),r=(0,i.createContext)(null),useCanvasShareModal=()=>{let e=(0,i.useContext)(r);if(!e)throw Error("useCanvasShareModal must be used within a CanvasShareModalProvider");return e},CanvasShareModalProvider=e=>{let{children:a}=e,[n,l]=(0,i.useState)(!1),[o,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),u=(0,i.useCallback)(e=>{let{canvasCode:a,botId:n}=e;a?d(a):n&&m(n),l(!0)},[l,d]),g=(0,i.useCallback)(()=>{l(!1),d(null),m(null)},[l,d,m]),p=(0,i.useMemo)(()=>o?{canvasCode:o}:c?{botId:c}:null,[o,c]),k=(0,i.useMemo)(()=>({openModal:u}),[u]);return(0,t.jsxs)(r.Provider,{value:k,children:[a,p&&(0,t.jsx)(s.Z,{isOpen:n,onRequestClose:g,body:importCanvasTabShareModal,bodyProps:p,variant:"compact"})]})}},14858:function(e,a,n){"use strict";n.d(a,{R:function(){return CanvasTabShareButton},m:function(){return CanvasBotShareButton}});var t=n(85893),i=n(98077),s=n(67172),r=n(67294),l=n(22120),o=n(22578),d=n(31198),c=n(78410),m=n(37160);function CanvasTabShareButton(e){var a,u,g;let{t:p}=(0,l.$G)(),k=(0,o.useFragment)(n(89766),e.canvasTab),h=(0,o.useFragment)(n(8793),e.viewer),{openModal:f}=(0,m.Z)(),[_,F]=(0,r.useState)(null),b=(0,r.useCallback)(()=>{var e;k.canvasCode?f({canvasCode:k.canvasCode}):(null===(e=k.bot)||void 0===e?void 0:e.botId)&&f({botId:k.bot.botId})},[k.canvasCode,f,null===(a=k.bot)||void 0===a?void 0:a.botId]);if(!k)return null;if(h.poeEnableMultiUserInvite){let a=p("Share");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{as:"button",className:e.className,theme:"ghost",size:"sm",iconLeft:(0,t.jsx)(i.MS,{}),showIconOnly:"always",onClick:b,"aria-label":a,ref:F,children:a}),(0,t.jsx)(s.u,{anchorRef:_,label:a})]})}return(null===(u=k.bot)||void 0===u?void 0:u.handle)?(0,t.jsx)(CanvasBotShareButton,{className:e.className,botHandle:k.bot.handle}):k.messageId&&"number"==typeof k.codeblockIndex?(0,t.jsx)(d.T,{logger:e.logger,codeblockIdx:k.codeblockIndex,messageId:k.messageId,disabled:(null===(g=k.message)||void 0===g?void 0:g.state)==="incomplete",showIconOnly:"always"}):null}function CanvasBotShareButton(e){return(0,t.jsx)(d.v,{className:e.className,showIconOnly:"always",shareUrl:"https://poe.com/".concat(e.botHandle),icon:e.icon,theme:e.theme})}},63758:function(e,a,n){"use strict";n.d(a,{BS:function(){return s},Lg:function(){return i},a:function(){return r}});var t=n(22578);let i=5003,s=6443209,r="App-Creator";a.ZP=e=>{let{chat:a}=e,{chatSettingsFieldBotToEdit:r,defaultBotObject:l}=(0,t.useFragment)(n(65176),a);return!!(null==r?void 0:r.botId)&&(l.botId===i||l.botId===s)}},65059:function(e,a,n){"use strict";n.d(a,{M:function(){return useChatMessageFollowupActionsModal}});var t=n(85893),i=n(67294),s=n(22578),r=n(22641);let importChatMessageFollowupActionsModal=()=>n.e(5136).then(n.bind(n,95136)),l=(0,i.createContext)({setChatMessageFollowupActionsModalVisible:()=>{},chatMessageFollowupActionsModalVisible:!1}),useChatMessageFollowupActionsModal=()=>{let{setChatMessageFollowupActionsModalVisible:e}=(0,i.useContext)(l),a=(0,i.useCallback)(()=>{e(!0)},[e]),n=(0,i.useCallback)(()=>{e(!1)},[e]);return{showChatMessageFollowupActionsModal:a,hideChatMessageFollowupActionsModalIfVisible:n}};a.Z=e=>{let{chat:a,message:o,fileHandlerRef:d,chatInputRef:c,children:m}=e,u=(0,s.useFragment)(n(19701),a),g=(0,s.useFragment)(n(72232),o),[p,k]=(0,i.useState)(!1),h=(0,i.useCallback)(()=>{k(!1)},[]),f=(0,i.useMemo)(()=>({messageId:g.messageId,chatId:u.chatId,fileHandlerRef:d,chatInputRef:c}),[g.messageId,u,c,d]),_=(0,i.useMemo)(()=>({setChatMessageFollowupActionsModalVisible:k,chatMessageFollowupActionsModalVisible:p}),[p]);return(0,t.jsxs)(l.Provider,{value:_,children:[m,p&&(0,t.jsx)(r.Z,{isOpen:!0,onRequestClose:h,body:importChatMessageFollowupActionsModal,bodyProps:f})]})}},81045:function(e,a,n){"use strict";n.d(a,{C:function(){return useChatMessageReactionsContext}});var t=n(85893),i=n(67294),s=n(22578),r=n(22641);let importMessageReactionsModal=()=>n.e(3933).then(n.bind(n,33933)),l=(0,i.createContext)({openReactionsModal:()=>{},reactionCounts:[],viewerReaction:void 0}),useChatMessageReactionsContext=()=>{let{openReactionsModal:e,reactionCounts:a,viewerReaction:n}=(0,i.useContext)(l);return{openReactionsModal:e,reactionCounts:a,viewerReaction:n}};a.Z=e=>{let{message:a,children:o}=e,d=(0,s.useFragment)(n(45692),a),[c,m]=(0,i.useState)(!1),u=(0,i.useCallback)(()=>{m(!0)},[]),g=(0,i.useCallback)(()=>{m(!1)},[]),p=(0,i.useMemo)(()=>({messageId:d.messageId,closeModal:g}),[d,g]),k=(0,i.useMemo)(()=>({openReactionsModal:u,reactionCounts:d.reactionCounts,viewerReaction:d.viewerReaction}),[u,d]);return(0,t.jsxs)(l.Provider,{value:k,children:[o,(0,t.jsx)(r.Z,{isOpen:c,onRequestClose:g,body:importMessageReactionsModal,bodyProps:p,modalHeight:270,useMinHeight:!0})]})}},8097:function(e,a,n){"use strict";n.d(a,{g:function(){return useChatMessageReadByMembersModal}});var t=n(85893),i=n(67294),s=n(22578),r=n(46796),l=n(22641);let importChatMessageReadByMembersModal=()=>n.e(3081).then(n.bind(n,93081)),o=(0,i.createContext)({setChatMessageReadByMembersModalVisible:()=>{},chatMessageReadByMembersModalVisible:!1}),useChatMessageReadByMembersModal=()=>{let{setChatMessageReadByMembersModalVisible:e}=(0,i.useContext)(o),a=(0,i.useCallback)(()=>{e(!0)},[e]);return{showChatMessageReadByMembersModal:a}};a.Z=e=>{let{chat:a,message:d,children:c}=e,m=(0,s.useFragment)(n(4399),a),u=(0,s.useFragment)(n(59586),d),[g,p]=(0,i.useState)(!1),k=(0,i.useCallback)(()=>{p(!1)},[]),h=(0,r.Z)(m),f=(0,i.useMemo)(()=>({messageId:u.messageId,closeModal:k}),[u.messageId,k]),_=(0,i.useMemo)(()=>({setChatMessageReadByMembersModalVisible:p,chatMessageReadByMembersModalVisible:g}),[g]);return(0,t.jsxs)(o.Provider,{value:_,children:[c,h&&g&&(0,t.jsx)(l.Z,{isOpen:!0,onRequestClose:k,body:importChatMessageReadByMembersModal,bodyProps:f,useMinHeight:!0,modalHeight:400})]})}},65438:function(e,a,n){"use strict";n.d(a,{s:function(){return ChatMessageSubline}});var t=n(85893),i=n(22120),s=n(22578),r=n(99929),l=n(12251),o=n(74804),d=n.n(o);function ChatMessageSubline(e){let{messageData:a,align:l}=e,o=(0,s.useFragment)(n(35906),a),{t:d}=(0,i.$G)(),c="",m=null;return(["preview_triggered"].includes(o.sourceType)?c=d("Sent by an application"):!o.isOptimistic&&["continue_conversation","quora_machine_answer_interaction","quora_ask_new_question_interaction"].includes(o.sourceType)&&(m=(0,t.jsx)(r.Z,{}),c=d("Imported")),c)?(0,t.jsx)(SublineBase,{icon:m,text:c,align:l}):null}function SublineBase(e){let{icon:a,text:n,align:i}=e;return(0,t.jsxs)("div",{className:(0,l.$)(d().messageSubline,"left"===i?d().alignLeft:d().alignRight),children:[a,(0,t.jsx)("p",{className:d().messageSublineText,children:n})]})}},88373:function(e,a,n){"use strict";var t=n(85893),i=n(41143),s=n.n(i),r=n(18815);a.Z=e=>{let{reaction:a}=e;return s()(Object.keys(r.i).includes(a),"The provided reaction (".concat(a,") should have a corresponding emoji")),(0,t.jsx)(t.Fragment,{children:r.i[a]})}},23839:function(e,a,n){"use strict";n.d(a,{Z:function(){return followupAction_ChatMessageFollowupActions}});var t,i,s,r=n(85893),l=n(67294),o=n(22578),d=n(78295),c=n.n(d),m=n(65059),u=n(4909),g=n(22641),p=n(75014);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var arrowRight=function(e){return l.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=l.createElement("path",{d:"M4 13h14.09l-6.79 6.79a.996.996 0 1 0 1.41 1.41l8.5-8.5c.06-.06.09-.13.13-.2.03-.04.06-.08.08-.13a.91.91 0 0 0 .08-.37c0-.03-.01-.05-.01-.07-.01-.1-.02-.21-.06-.31a.955.955 0 0 0-.22-.33L12.72 2.8c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.71.29a.996.996 0 0 0 0 1.41L18.08 11H4c-.55 0-1 .45-1 1s.45 1 1 1Z"})))},k=n(41143),h=n.n(k),f=n(22120),_=n(44311),F=n(83193),b=n(69388),v=n(29915),S=n(57403),C=n(53236),M=n(24487),y=n(72210),w=n(27664),I=n(89188);let T=n(99673),sendCommandMessage=e=>{var a,t,i;let{environment:s,chat:r,bot:l,message:o,commandType:d,t:c}=e,{id:m,chatId:u,...g}=(0,_.readInlineData)(n(69105),r),p=(0,_.readInlineData)(n(86574),l),k=(0,_.readInlineData)(n(44704),o),h="@".concat(p.displayName),f="/".concat(d," ").concat(h),b=(0,C.C)(),{optimisticCommandMessageId:v,optimisticCommandMessageEdgeId:S}=onCommandMessageSend({environment:s,chat:g,text:h,clientNonce:b,commandType:d}),M={bot:p.nickname,chatId:u,query:f,referencedMessageId:null==k?void 0:null===(i=k.responsibleJob)||void 0===i?void 0:null===(t=i.trigger)||void 0===t?void 0:null===(a=t.message)||void 0===a?void 0:a.messageId},y=window.navigator.onLine?c("Message failed to send."):c("Unable to send this message. Check your internet connection.");(0,_.commitMutation)(s,{mutation:T,variables:M,updater:(e,a)=>{if(a){let t=a.commandMessageEdgeCreate,i=null==t?void 0:t.message;if((null==t?void 0:t.status)===F.Z.success&&i){var n;onSendSuccessUpdater(e,s,a,{chatNodeId:m,optimisticCommandMessageId:v,optimisticCommandMessageEdgeId:S,errorMessage:null!==(n=null==t?void 0:t.statusMessage)&&void 0!==n?n:y})}else onSendFailureUpdater(e,{chatNodeId:m,optimisticCommandMessageEdgeId:S,errorMessage:null==t?void 0:t.statusMessage})}},onError:()=>{(0,_.commitLocalUpdate)(s,e=>{onSendFailureUpdater(e,{chatNodeId:m,optimisticCommandMessageEdgeId:S,errorMessage:y})})}})},onCommandMessageSend=e=>{let a,t,{environment:i,chat:s,text:r,clientNonce:l,commandType:o}=e,{id:d}=(0,_.readInlineData)(n(55831),s);return(0,_.commitLocalUpdate)(i,e=>{let n=e.get(d);h()(n,"Expected Chat record with id ".concat(d," to exist when sending a message"));let i=(0,I.Xw)(e,{clientNonce:l,text:r,commandType:o}),s=(0,w.n3)(e,n,i);a=s.getDataID(),t=i.getDataID()}),h()(t,"Expected optimistic command message id to exist"),h()(a,"Expected optimistic command message edge id to exist"),{optimisticCommandMessageId:t,optimisticCommandMessageEdgeId:a}},onSendSuccessUpdater=(e,a,n,t)=>{let{chatNodeId:i,optimisticCommandMessageId:s,optimisticCommandMessageEdgeId:r,errorMessage:l}=t,o=e.get(i);h()(o,"Cannot find chat record with id ".concat(i));let d=n.commandMessageEdgeCreate.job;if(d){let handleJobTimeout=(e,n)=>{(0,_.commitLocalUpdate)(a,a=>{(0,S.Z)(a,e,n,()=>{(0,w.Cc)(a,n)})})};(0,M.QX)(d.jobId.toString(),{source:"sendCommandMessage"},()=>handleJobTimeout(d.id,i)),(0,v.Z)(e,d.id,i)}n.commandMessageEdgeCreate.message?(0,w.Ci)(e,o,s,n.commandMessageEdgeCreate.message.node):onSendFailureUpdater(e,{chatNodeId:i,optimisticCommandMessageEdgeId:r,errorMessage:l})},onSendFailureUpdater=(e,a)=>{var n;let{chatNodeId:t,optimisticCommandMessageEdgeId:i,errorMessage:s}=a,r=e.get(t),l=null===(n=e.get(i))||void 0===n?void 0:n.getLinkedRecord("node");h()(r,"Expected Chat record with id ".concat(t," to exist when sending a message")),h()(l,"Expected optimistic command message to exist after sending a message"),(0,y.f3)(l,b.Z.error),l.setValue(s,"errorMessage")},useSendCommandMessage=e=>{let{chat:a,bot:n,message:t,commandType:i}=e,s=(0,o.useRelayEnvironment)(),{t:r}=(0,f.$G)();return(0,l.useCallback)(()=>sendCommandMessage({environment:s,chat:a,bot:n,message:t,commandType:i,t:r}),[s,a,n,i,r,t])};var x=n(12251),B=n(23595),L=n(68374),D=n(64516),P=n(36249),j=n.n(P),A=n(86927),N=n(23738),O=n(93581);function film_extends(){return(film_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var film=function(e){return l.createElement("svg",film_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=l.createElement("path",{d:"M19.5 3.5h-15C2.57 3.5 1 5.07 1 7v10c0 1.93 1.57 3.5 3.5 3.5h15c1.93 0 3.5-1.57 3.5-3.5V7c0-1.93-1.57-3.5-3.5-3.5ZM21 7v1.5h-2v-3h.5c.827 0 1.5.673 1.5 1.5Zm-4 4H7V5.5h10V11ZM5 13.5H3v-3h2v3Zm2-.5h10v5.5H7V13Zm12-2.5h2v3h-2v-3Zm-14.5-5H5v3H3V7c0-.827.673-1.5 1.5-1.5ZM3 17v-1.5h2v3h-.5c-.827 0-1.5-.673-1.5-1.5Zm16.5 1.5H19v-3h2V17c0 .827-.673 1.5-1.5 1.5Z"})))},R=n(57887),U=n.n(R),followupAction_FollowupActionImageSources=e=>{let{imageSources:a}=e,t=(0,o.useFragment)(n(65021),a);return(0,r.jsx)("div",{className:U().imageAttachmentsContainer,children:t.slice(0,5).map(e=>{if("MessageAttachment"==e.__typename){var a;let n=null===(a=e.file)||void 0===a?void 0:a.mimeType;return(null==n?void 0:n.startsWith("video"))?(0,r.jsx)("div",{className:U().attachmentsContainer,children:e.file.thumbnailUrl?(0,r.jsx)("img",{className:U().imageAttachment,src:e.file.thumbnailUrl,alt:e.name}):(0,r.jsx)(film,{className:U().filmIcon})},e.id):(null==n?void 0:n.startsWith("image"))?(0,r.jsx)("div",{className:U().attachmentsContainer,children:(0,r.jsx)("img",{className:U().imageAttachment,src:e.url,alt:e.name})},e.id):null}return"Bot"==e.__typename?(0,r.jsx)("div",{className:U().botPreviewContainer,children:(0,r.jsx)(O.Z,{bot:e,size:"xx-sm"})},e.id):null})})},E=n(58143),Z=n(9729),H=n(12107),V=n(38429),G=n(66050),K=n(6231),W=n(98943),z=n(3468),q=n(67824);let importAddBotToChatModal=()=>n.e(4300).then(n.bind(n,83126));var followupAction_CommandMessageFollowupAction=function(e){let{followupAction:a,chat:t,viewer:i,message:s,chatInputRef:d,actionIndex:c}=e,k=(0,o.useFragment)(n(29043),a),h=(0,o.useFragment)(n(49333),t),f=(0,o.useFragment)(n(51705),i),_=(0,o.useFragment)(n(70196),s),{titleText:F,primaryImageSources:b,commandType:v,bodyText:S}=k,{bot:C}=k.targetBotInfo,{handle:M}=C,{logClick:y,viewableImpressionRef:w}=function(e){let{botId:a,actionIndex:n}=e,t=(0,E.E)(),i=(0,l.useCallback)(()=>({object_component_type:K.Z.in_chat_bot_list_item,object_container:W.Z.in_chat_recommended_bots,page_type:t,object_type:z.Z.bot,bot_id:a,entry_metadata:{object_component_type:K.Z.in_chat_bot_list_item,bot_position_row_index:n,bot_position_column_index:0}}),[t,n,a]);(0,l.useEffect)(()=>{(0,Z.Z)("poe/bot_discovery",{entry_type:G.Z.impression,...i()})},[i]);let s=(0,l.useCallback)(()=>({entry_type:G.Z.viewable_impression,...i()}),[i]),{ref:r}=(0,H.Z)(q.Z.bot_recommendations,{additionalLogData:s}),o=(0,l.useCallback)(()=>{(0,Z.Z)("poe/bot_discovery",{entry_type:G.Z.action,action_type:V.Z.click,...i()})},[i]);return(0,l.useMemo)(()=>({viewableImpressionRef:r,logClick:o}),[r,o])}({botId:C.botId,actionIndex:c}),I=useSendCommandMessage({chat:h,bot:C,message:_,commandType:v}),{hideChatMessageFollowupActionsModalIfVisible:T}=(0,m.M)(),P=(0,D.F)(),O=(0,l.useCallback)(()=>{var e,a;I(),y(),null===(e=d.current)||void 0===e||e.setValue(""),(0,B.s2)(P)||null===(a=d.current)||void 0===a||a.focus()},[I,d,y,P]),[R,U]=(0,l.useState)(!1),$=(0,l.useCallback)(()=>{U(!1)},[U]),J=(0,l.useCallback)(()=>{O(),$()},[O,$]),Q=(0,l.useMemo)(()=>({close:$,botHandle:M,onSubmitAndClose:J}),[M,$,J]),Y=(0,l.useCallback)(()=>{T(),O(),v===A.Z.compare&&(0,L.nL)(L.wy.CompareFollowupActionClicked)},[O,v,T]),X=(0,p.el)(Y,{viewObjectType:N.Z.limited_access_bot,viewer:f,bot:C});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{isOpen:R,onRequestClose:$,body:importAddBotToChatModal,bodyProps:Q,variant:"compact"}),(0,r.jsxs)("div",{ref:w,className:(0,x.$)(j().container,j().newFollowupActionsContainer),onClick:X,children:[!!F&&(0,r.jsx)(u.PL,{className:(0,x.$)(j().left,j().followupButton),children:F}),(0,r.jsxs)(u.oM,{className:(0,x.$)(j().right,j().followupButton,F?j().followupButtonWithTitle:""),children:[(0,r.jsxs)("div",{className:(0,x.$)(j().promptContainer,j().right),children:[b.length>0&&(0,r.jsx)(followupAction_FollowupActionImageSources,{imageSources:b}),(0,r.jsx)("div",{className:j().botAndPromptContainer,children:S&&(0,r.jsx)("div",{className:j().botPromptContainer,children:S})})]}),(0,r.jsx)(arrowRight,{className:j().followUpActionIcon})]})]})]})},$=n(74182);function pen_extends(){return(pen_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var pen=function(e){return l.createElement("svg",pen_extends({viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.493 5.507a3.5 3.5 0 0 0-4.946 0l-11.55 11.55c-.129.128-.222.28-.28.455L4.072 22.47c-.14.42-.035.875.28 1.19.221.222.525.338.828.338.128 0 .245-.023.373-.058l4.947-1.657c.175-.058.327-.151.455-.28l11.55-11.55a3.51 3.51 0 0 0-.012-4.946Zm-1.656 3.301L9.485 20.16l-1.657.548-.548-.548.548-1.657L19.18 7.152a1.176 1.176 0 0 1 1.657 0 1.176 1.176 0 0 1 0 1.656Z"})))},J=n(26246),Q=n(41149),Y=n(47450),followupAction_PrefillMessageFollowupAction=function(e){let{followupAction:a,fileHandlerRef:t,chatInputRef:i}=e,{cancelEditing:s}=(0,Q.m)(),d=(0,o.useFragment)(n(87717),a),{hideChatMessageFollowupActionsModalIfVisible:c}=(0,m.M)(),{setInputFooterReferencedMessage:g}=(0,$._)(),{titleText:p,bodyText:k,prefillText:h,prefillAttachments:f,primaryImageSources:_,secondaryImageSources:F}=d,b=(0,l.useCallback)(async()=>{var e,a,n;c(),(null==t?void 0:t.current)&&(null===(e=i.current)||void 0===e||e.setValue(h),null===(a=i.current)||void 0===a||a.setSelectionRange(h.length,h.length),null===(n=i.current)||void 0===n||n.focus(),(0,Y.IV)(f,t),g(null),f.length&&s())},[t,i,h,f,s,c,g]),{specialSyntax:v,prompt:S}=(0,J.Co)(k||"");return(0,r.jsxs)("div",{className:(0,x.$)(j().container,j().newFollowupActionsContainer),onClick:b,children:[!!p&&(0,r.jsx)(u.PL,{className:(0,x.$)(j().left,j().followupButton),children:p}),(0,r.jsxs)(u.oM,{className:(0,x.$)(j().right,j().followupButton,p?j().followupButtonWithTitle:""),children:[(0,r.jsxs)("div",{className:(0,x.$)(j().promptContainer,j().right),children:[_.length>0&&(0,r.jsx)(followupAction_FollowupActionImageSources,{imageSources:_}),(0,r.jsx)("div",{className:j().botAndPromptContainer,children:(0,r.jsxs)("div",{className:j().prompt,children:[v?(0,r.jsxs)("span",{className:j().specialSyntaxSection,children:[v," "]}):null,S]})})]}),F.length>0&&(0,r.jsx)(followupAction_FollowupActionImageSources,{imageSources:F}),(0,r.jsx)(pen,{className:j().followUpActionIcon})]})]})},X=n(64913),ee=n(28871);let SendMessageFollowupAction_importAddBotToChatModal=()=>n.e(4300).then(n.bind(n,83126)),useFollowupActionMessageSource=e=>{let{messageSource:a}=(0,o.useFragment)(n(32428),e);if(!a)return null;let{sourceType:t,metadata:i}=a;return{sourceType:t,...i?JSON.parse(i):{}}};var followupAction_SendMessageFollowupAction=function(e){let{followupAction:a,chat:t,viewer:i,chatInputRef:s}=e,d=(0,o.useFragment)(n(32815),t),c=(0,o.useFragment)(n(53088),i),k=(0,o.useFragment)(n(65718),a),{bot:h}=k.targetBotInfo,{handle:f}=h,[_,F]=(0,l.useState)(!1),b=(0,l.useCallback)(()=>{F(!1)},[F]),{titleText:v,bodyText:S,bodyTextJson:C,sendText:M,sendTextWhenUsingJsonParams:y,sendParameters:w,sendAttachments:I,primaryImageSources:T,secondaryImageSources:L}=k,P=c.submitMessageParamsAsDict?C:S,A=c.submitMessageParamsAsDict?y:M,O=(0,l.useMemo)(()=>c.submitMessageParamsAsDict&&w?JSON.parse(w):void 0,[w,c.submitMessageParamsAsDict]),R=(0,l.useMemo)(()=>O?(0,X.ci)(O):void 0,[O]),U=useFollowupActionMessageSource(k),{hideChatMessageFollowupActionsModalIfVisible:E}=(0,m.M)(),Z=(0,ee.$3)({source:U,bot:h,chat:d,viewer:c,referencedMessage:null==k?void 0:k.referencedMessage}),H=(0,D.F)(),V=(0,l.useCallback)(()=>{var e,a;Z({prompt:A,existingAttachments:I,parameters:O}),null===(e=s.current)||void 0===e||e.setValue(""),(0,B.s2)(H)||null===(a=s.current)||void 0===a||a.focus()},[Z,A,I,s,H,O]),G=(0,l.useMemo)(()=>({close:b,botHandle:f,onSubmitAndClose:V}),[V,f,b]),K=(0,l.useCallback)(()=>{E(),V()},[V,E]),W=(0,p.el)(K,{viewer:c,viewObjectType:N.Z.limited_access_bot,bot:h}),{specialSyntax:z,prompt:q}=(0,J.Co)(P||"");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{isOpen:_,onRequestClose:b,body:SendMessageFollowupAction_importAddBotToChatModal,bodyProps:G,variant:"compact"}),(0,r.jsxs)("div",{className:j().container,onClick:W,children:[!!v&&(0,r.jsx)(u.PL,{className:(0,x.$)(j().left,j().followupButton),children:v}),(0,r.jsxs)(u.oM,{className:(0,x.$)(v?j().right:j().rightRounded,j().followupButton,v?j().followupButtonWithTitle:""),children:[(0,r.jsxs)("div",{className:(0,x.$)(j().promptContainer,j().right),children:[T.length>0&&(0,r.jsx)(followupAction_FollowupActionImageSources,{imageSources:T}),(0,r.jsx)("div",{className:j().botAndPromptContainer,children:(0,r.jsxs)("div",{className:v?j().prompt:j().truncatedPrompt,children:[z?(0,r.jsxs)("span",{className:j().specialSyntaxSection,children:[z," "]}):null,q,R?(0,r.jsxs)("span",{className:j().parametersSection,children:[" ",R]}):null]})})]}),L.length>0&&(0,r.jsx)(followupAction_FollowupActionImageSources,{imageSources:L}),(0,r.jsx)(arrowRight,{className:j().followUpActionIcon})]})]})]})},followupAction_MessageFollowupActionMain=function(e){let{followupAction:a,chat:t,viewer:i,message:s,fileHandlerRef:l,chatInputRef:d,actionIndex:c}=e,m=(0,o.useFragment)(n(6664),a),u=(0,o.useFragment)(n(51975),t),g=(0,o.useFragment)(n(31137),i),p=(0,o.useFragment)(n(2797),s);switch(m.__typename){case"SendMessageFollowupAction":return(0,r.jsx)(followupAction_SendMessageFollowupAction,{followupAction:m,chat:u,viewer:g,chatInputRef:d});case"PrefillMessageFollowupAction":return(0,r.jsx)(followupAction_PrefillMessageFollowupAction,{followupAction:m,fileHandlerRef:l,chatInputRef:d});case"CommandMessageFollowupAction":return(0,r.jsx)(followupAction_CommandMessageFollowupAction,{actionIndex:c,followupAction:m,chatInputRef:d,chat:u,viewer:g,message:p});default:return null}},followupAction_ChatMessageFollowupActions=e=>{let{chat:a,message:t,viewer:i,fileHandlerRef:s,chatInputRef:l}=e,d=(0,o.useFragment)(n(9977),a),m=(0,o.useFragment)(n(12572),t),u=(0,o.useFragment)(n(70306),i);return(0,r.jsx)("section",{className:c().container,children:m.followupActions.map((e,a)=>(0,r.jsx)(followupAction_MessageFollowupActionMain,{actionIndex:a,followupAction:e,chat:d,viewer:u,message:m,fileHandlerRef:s,chatInputRef:l},a))})}},25098:function(e,a,n){"use strict";n.d(a,{w:function(){return i}});var t,i,s=n(22578),r=n(46796);(t=i||(i={}))[t.seenByAllOtherMembers=1]="seenByAllOtherMembers",t[t.sentToServer=2]="sentToServer",a.Z=e=>{let{chat:a,message:t,viewer:i}=e,l=(0,s.useFragment)(n(48379),a),o=(0,s.useFragment)(n(51457),t),d=(0,s.useFragment)(n(17013),i),c=(0,r.Z)(l),{authorUser:m,messageId:u,isOptimistic:g}=o,{lastMessageSeenByAllOtherMembers:p}=l;return!d.poeEnableMessageReadReceipts||g||(null==m?void 0:m.uid)!==d.uid?void 0:!c||p&&u<=p.messageId?1:2}},234:function(e,a,n){"use strict";n.d(a,{f:function(){return useSupportedPreviewContentTypes}});var t=n(22578);function useSupportedPreviewContentTypes(e){let{supportedPreviewsContentTypes:a}=(0,t.useFragment)(n(50654),e);return a}},75817:function(e,a,n){"use strict";var t=n(85893),i=n(98077),s=n(67294),r=n(22120),l=n(22578),o=n(29154),d=n(80665),c=n(8583),m=n(9729),u=n(15601),g=n(78410),p=n(51466),k=n.n(p),h=n(30038);a.Z=e=>{let{chatId:a,viewer:p,botId:f,inviteFlowEntryType:_,sourcePage:F}=e,b=(0,l.useFragment)(n(25902),p),{t:v}=(0,r.$G)(),S=(0,c.ZP)(),C=(0,u.Z)(),{onInviteLinkClicked:M,isLoading:y}=(0,d.Z)(!0,_,F,a,()=>{},f,void 0),{modal:w,openModal:I}=(0,o.Z)({chatId:null!=a?a:void 0,botId:null!=f?f:void 0,sourcePage:F}),T=(0,s.useCallback)(()=>{if(C){S({content:(0,t.jsx)("p",{children:v("Unable to add people. Check your internet connection.")}),type:c.pC.error});return}(0,m.Z)("poe/action_log",{action_type:h.Z.add_member_button_click,chat_id:a,action_metadata:{entry_type:_,source_page:F}}),I()},[_,I,a,v,S,C,F]);return b.poeEnableMultiUserInvite?(0,t.jsxs)("div",{className:k().inviteSectionContainer,children:[(0,t.jsx)(g.Z,{className:k().inviteSectionButton,size:"sm",theme:"secondary",iconLeft:(0,t.jsx)(i.AF,{}),as:"button",onClick:M,isLoading:y,children:v("Invite link")}),(0,t.jsx)(g.Z,{className:k().inviteSectionButton,size:"sm",theme:"secondary",iconLeft:(0,t.jsx)(i.Po,{}),as:"button",onClick:T,children:v("Add people")}),w]}):null}},4290:function(e,a,n){"use strict";n.d(a,{Z:function(){return message_Attachments}});var t=n(85893),i=n(5152),s=n.n(i),r=n(67294),l=n(22578),o=n(21054),d=n(48675),c=n(36789),m=n(12251),u=n(87953),g=n.n(u),p=n(24503),patterns_VideoPreview=e=>{let{attachment:a,className:i,messageIsComplete:s}=e,d=(0,l.useFragment)(n(3765),a),[u,k]=(0,r.useState)(!0),h=(0,r.useCallback)(()=>{k(!1)},[k]);return d.file.thumbnailUrl?(0,t.jsxs)("div",{className:g().videoContainer,children:[(0,t.jsx)("div",{className:g().buttonOverlay}),(0,t.jsx)(c.Z,{className:g().playIcon}),u&&(0,t.jsx)("img",{suppressHydrationWarning:!0,className:(0,m.$)(g().thumbnail,i),src:d.file.thumbnailUrl,onError:h})]}):s?(0,t.jsx)(o.S1,{file:d,className:i}):(0,t.jsx)("div",{className:g().thumbnailLoader,children:(0,t.jsx)(p.Z,{})})},k=n(23595),h=n(37675),f=n.n(h);let _=s()(()=>Promise.all([n.e(2374),n.e(8020),n.e(1793),n.e(9861)]).then(n.bind(n,19861)),{loadableGenerated:{webpack:()=>[19861]}}),F=s()(()=>Promise.all([n.e(2004),n.e(8971)]).then(n.bind(n,88971)),{loadableGenerated:{webpack:()=>[88971]}}),isPlayableVideo=(e,a,n)=>{if(e.startsWith("video/")){let t=(0,k.au)(navigator.userAgent)||(0,k.eE)(navigator.userAgent);if(t&&(e.includes("avi")||e.includes("mpeg")))return!1;let i=document.createElement("video").canPlayType(e);return""!==i&&a&&n&&a/n>=.5&&a/n<=2.5}return!1};var message_Attachments=e=>{let{attachments:a,showMedia:i,messageIsComplete:s,showInteractiveMedia:c=!1}=e,m=(0,l.useFragment)(n(43181),a),u=(0,r.useMemo)(()=>m.filter(e=>!e.isInline),[m]),[g,p,k]=(0,r.useMemo)(()=>u.reduce((e,a)=>{let[n,t,s]=e;return!i&&a.file.mimeType.startsWith("video/")||i&&isPlayableVideo(a.file.mimeType,a.file.width,a.file.height)?n.push(a):i&&a.file.mimeType.startsWith("audio/")?t.push(a):s.push(a),[n,t,s]},[[],[],[]]),[u,i]);return(0,t.jsxs)(t.Fragment,{children:[(k.length>0||!i&&g.length>0)&&(c?(0,t.jsxs)("div",{className:f().attachments,children:[!i&&g.map(e=>(0,t.jsx)(patterns_VideoPreview,{attachment:e,className:f().attachment,messageIsComplete:s},e.id)),k.map(e=>(0,t.jsx)(o.ZP,{className:f().attachment,file:e,showInteractiveMedia:c},e.id))]}):(0,t.jsxs)(d.Z,{className:f().attachments,children:[!i&&g.map(e=>(0,t.jsx)(patterns_VideoPreview,{attachment:e,className:f().attachment,messageIsComplete:s},e.id)),k.map(e=>(0,t.jsx)(o.ZP,{className:f().attachment,file:e,showInteractiveMedia:c},e.id))]})),i&&p.length>0&&(0,t.jsx)(t.Fragment,{children:p.map(e=>(0,t.jsx)("div",{className:f().audioAttachment,children:(0,t.jsx)(F,{attachment:e,className:f().attachment})},e.id))}),i&&g.length>0&&(0,t.jsx)(t.Fragment,{children:g.map(e=>(0,t.jsx)("div",{className:f().videoAttachment,children:(0,t.jsx)(_,{attachment:e,className:f().attachment})},e.id))})]})}},12278:function(e,a,n){"use strict";var t=n(85893),i=n(22578),s=n(64869),r=n(85972),l=n(4095),o=n(12251),d=n(18462),c=n(50455),m=n.n(c);a.Z=e=>{let a,{bot:c,authorUser:u,author:g,overflowButton:p}=e,k=(0,i.useFragment)(n(90254),c),h=(0,i.useFragment)(n(93142),u),{selectionMode:f}=(0,d.ZP)(),_=f!==d.oW.none,F=(0,o.$)(m().leftSideMessageHeader,_&&m().selectionModeMessageHeader);if((0,l.SX)(g)&&h)a=(0,t.jsx)(r.Z,{poeUser:h,showFollowButton:!0});else{if(!(0,l.y8)(g))return null;a=(0,t.jsx)(s.Z,{bot:k})}return(0,t.jsxs)("div",{className:F,children:[(0,t.jsx)("div",{className:m().headerWrapper,children:a}),p]})}},24353:function(e,a,n){"use strict";n.d(a,{Z:function(){return message_Message}});var t,i,s,r=n(85893),l=n(67294),o=n(22120),d=n(16470),c=n(22578);n(44311);var m=n(72110),u=n(98077),g=n(11163),p=n.n(g),k=n(25098),h=n(53968);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var doubleCheckmark=function(e){return l.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=l.createElement("path",{d:"m11.945 12.928 5.362-7.338a1 1 0 1 0-1.615-1.179l-5.002 6.844 1.255 1.673ZM6.204 18.605a.987.987 0 1 0 1.578-1.185l-4.506-6.027a.987.987 0 1 0-1.578 1.185l4.506 6.027Z"})),i||(i=l.createElement("path",{d:"M12 19a1 1 0 0 1-.8-.4l-4.5-6a.998.998 0 1 1 1.599-1.199l3.689 4.919 8.704-11.91a1 1 0 0 1 1.615 1.179l-9.5 13a1.001 1.001 0 0 1-.802.41L12 19Z"})))},f=n(16729),_=n.n(f);let MessageSeenStateIcon=e=>{let{messageSeenState:a}=e;return a===k.w.seenByAllOtherMembers?(0,r.jsx)(doubleCheckmark,{className:_().messageSeenStateIcon}):a===k.w.sentToServer?(0,r.jsx)(h.Z,{className:_().messageSeenStateIcon}):null};var F=n(46044),b=n(69388),message_MessageMetadata=e=>{let{commandType:a,state:n,messageCreationTime:t,seenState:i,isEdited:s,hasParameters:d,messageCode:c,showSendingIcon:m}=e,{t:g}=(0,o.$G)(),k=(0,l.useCallback)(()=>{p().push("/message/"+c)},[c]);return!a&&n!==b.Z.incomplete&&(t||i||s||d)?(0,r.jsxs)("div",{className:_().messageMetadataContainer,children:[d&&c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("a",{className:_().parametersLink,onClick:k,children:[(0,r.jsx)(u.OP,{size:"x-sm",className:_().messageMetadataText}),(0,r.jsx)("span",{className:_().messageMetadataText,children:g("Parameters")})]}),(0,r.jsx)("span",{className:_().messageMetadataText,children:" \xb7 "})]}),s&&(0,r.jsx)("span",{className:_().messageMetadataText,children:g("Edited")}),s&&t&&(0,r.jsx)("span",{className:_().messageMetadataText,children:" \xb7 "}),t&&(0,r.jsx)(F.ZP,{utime:t,forceSameDayFormat:!0,className:_().messageMetadataText}),m?(0,r.jsx)(u.yp,{size:"x-sm",className:_().sendingIcon}):i&&(0,r.jsx)(MessageSeenStateIcon,{messageSeenState:i})]}):null},v=n(38033),S=n(58143),C=n(78410),M=n(38993);function nosign_extends(){return(nosign_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var nosign=function(e){return l.createElement("svg",nosign_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=l.createElement("path",{d:"M18.364 5.636 5.636 18.364A8.972 8.972 0 0 1 3 12a9 9 0 0 1 9-9 8.972 8.972 0 0 1 6.364 2.636Zm0 0A8.972 8.972 0 0 1 21 12a9 9 0 0 1-9 9 8.972 8.972 0 0 1-6.364-2.636L18.364 5.636Z",className:"nosign_svg__icon_svg-stroke"})))},y=n(26246),w=n(4095),I=n(12251),T=n(35715),x=n(67280),B=n(29664),L=n(86927);let getBotNameFromCompareCommandText=e=>e.split(" ")[0],CompareCommandMessage=e=>{let{botName:a,authorFullName:n,isSentByViewer:t}=e,i=(0,l.useMemo)(()=>({1:(0,r.jsx)("span",{className:_().commandBotName})}),[]),s=(0,l.useMemo)(()=>({botName:a,authorFullName:n}),[a,n]);return t?(0,r.jsx)(o.cC,{components:i,defaults:"You requested another response from <1>{{ botName }}</1>",values:s}):n?(0,r.jsx)(o.cC,{components:i,defaults:"{{ authorFullName }} requested another response from <1>{{ botName }}</1>",values:s}):(0,r.jsx)(o.cC,{components:i,defaults:"A user requested another response from <1>{{ botName }}</1>",values:s})};var message_CommandMessage=e=>{let{commandType:a,text:n,authorFullName:t,isSentByViewer:i}=e;return a===L.Z.compare?(0,r.jsx)(CompareCommandMessage,{botName:getBotNameFromCompareCommandText(n),authorFullName:t,isSentByViewer:i}):null};n(73150);var D=n(99094),P=n(94713),j=n(24087),A=n(47854),N=n(39257),O=n(28473),R=n(45598),U=n(52683),E=n.n(U),Z=n(65604),H=n(90961);let V=new Set(["iframe","html"]),rawHTMLPlugin=e=>()=>a=>{let n=0;(0,H.Vn)(a,"raw",(a,t,i)=>{if(void 0!==t){if(e&&function(e){let a=e.trim();return 0===a.replace(/^\s*<!doctype\s+[^>]*>/i,"").length}(a.value)){i.children[t]={type:"element",tagName:"div",properties:{style:"display: none"},children:[]};return}if(e&&(null==i?void 0:i.type)==="root"&&function(e){let a=function(e){let a=e.match(/<([a-zA-Z][a-zA-Z0-9_-]*)/);return a?a[1]:null}(e);return!!a&&V.has(a.toLowerCase().trim())}(a.value)){var s,r;i.children[t]={type:"element",tagName:"iframe",properties:{positionEndOffset:null===(r=a.position)||void 0===r?void 0:null===(s=r.end)||void 0===s?void 0:s.offset,srcDoc:a.value,rawHTMLIdx:n++},children:[]};return}if((null==i?void 0:i.type)==="root"){i.children[t]={type:"element",tagName:"div",properties:{},children:a.value.split("\n").map(e=>({type:"element",tagName:"p",properties:{},children:[{type:"text",value:e}]}))};return}}})},codeblockPlugin=()=>e=>{let a=0;(0,H.Vn)(e,"element",(e,n)=>{if(void 0!==n&&"pre"===e.tagName){e.properties.codeblockIdx=a++;let n=e.children[0];if(n&&"element"===n.type&&"code"===n.tagName){let a=n.children[0];a&&"text"===a.type&&(e.properties.code=a.value)}}})};var G=n(45392),message_MarkdownBlockquote=e=>{let{children:a,...n}=e;return(0,r.jsx)(G.Y.Provider,{value:!0,children:(0,r.jsx)("blockquote",{...n,children:a})})},K=n(11664),W=n(67172),z=n(31657),q=n(30965),$=n(4909),J=n(53679),Q=n(8583),Y=n(99240),X=n(97341),ee=n(27382),ea=n(3687),en=n(9729),et=n(23595),ei=n(64516),es=n(6103),er=n.n(es),el=n(30038),eo=n(96384);let getSrcSize=e=>{try{if(!e)return null;let a=new URL(e),n=parseInt(a.searchParams.get("w")||""),t=parseInt(a.searchParams.get("h")||"");if(Number.isNaN(n)||Number.isNaN(t))return null;return{width:n,height:t}}catch(e){return null}};var message_MarkdownImage=e=>{let{alt:a,src:n,...t}=e,{t:i}=(0,o.$G)(),s=(0,Q.ZP)(),d=(0,l.useRef)(null),[c,m]=(0,ea.O6)(),u=(0,l.useContext)(z.Z),g=(0,l.useContext)(q.Z),p=(0,l.useCallback)(()=>{n&&(0,ea.km)(n,ea.Jg.image,{botId:null==g?void 0:g.botId,messageId:null==g?void 0:g.messageId,chatId:(null==u?void 0:u.chatId)||null})},[u,g,n]),k=(0,l.useCallback)(async()=>{n&&await c(n,ea.Jg.image,a,p)},[n,a,c,p]),h=(0,l.useCallback)(async e=>{if(!n)return;let a=!1;if(e===el.Z.copy_image_link)await (0,ee.n9)(n)?(s({type:Q.pC.success,content:i("Copied link to clipboard.")}),a=!0):s({type:Q.pC.error,content:i("There was an error copying the image link to your clipboard. Please try again later.")});else if(e===el.Z.copy_image)try{await (0,ee.VP)(n),s({type:Q.pC.success,content:i("Image copied!")}),a=!0}catch(e){s({type:Q.pC.error,content:i("There was an error copying the image. Please try again later.")})}a&&(0,en.Z)("poe/action_log",{action_type:(0,eo.E)(e),bot_id:null==g?void 0:g.botId,message_id:null==g?void 0:g.messageId,chat_id:(null==u?void 0:u.chatId)||null,action_metadata:{image_src:n}})},[n,u,g,i,s]),f=(0,l.useCallback)(()=>{(0,en.Z)("poe/statsd_event",{category:"count",key:"poe.web.markdown_image.load.failure",value:1,extra_data:{}})},[]),[_,F]=(0,l.useState)(!1),b=(0,l.useCallback)(()=>{F(!0),(0,en.Z)("poe/statsd_event",{category:"count",key:"poe.web.markdown_image.load.success",value:1,extra_data:{}})},[F]);(0,l.useEffect)(()=>{var e;(null===(e=d.current)||void 0===e?void 0:e.complete)&&F(!0)},[b]);let v=getSrcSize(n),{openImageViewer:S}=(0,J.z)(),C=(0,l.useCallback)(()=>{n&&S({src:n,alt:a,onDownload:p,onCopy:h})},[n,a,S,p,h]),[M,y]=(0,l.useState)(null),w=i("Download image"),T=(0,et.pE)((0,ei.F)());return(0,r.jsxs)("span",{className:er().imageContainer,children:[v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:(0,I.$)(er().image,er().withPlaceholder),ref:d,src:n,alt:a,...t,onLoad:b,onError:f,onClick:C}),(0,r.jsx)("canvas",{height:v.height,width:v.width,className:er().placeholder})]}):(0,r.jsx)("img",{className:er().image,ref:d,src:n,alt:a,...t,onLoad:b,onError:f,onClick:C}),_&&n&&"server_inject_icon"!=a&&!T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.Xd,{ref:y,className:er().downloadImageButton,"data-downloading":m,disabled:m,onClick:m?void 0:k,icon:m?(0,r.jsx)(X.Z,{}):(0,r.jsx)(Y.Z,{})}),(0,r.jsx)(W.u,{anchorRef:M,label:w,placement:"top"})]})]})},ed=n(16593),ec=n(8044),em=n.n(ec),eu=n(39609);let parseInlineCitationInfo=e=>{let a="poe.com"===e.hostname,n=(0,ed.Zw)(e.pathname),t=1===n.length&&"citation"===n[0],i=e.searchParams.get("message_id"),s=e.searchParams.get("citation"),r=parseInt(i||""),l=parseInt(s||""),o=a&&t&&Number.isInteger(r)&&Number.isInteger(l);return o?{messageId:r,citationIndex:l}:null},MarkdownLinkCitationInner=e=>{let{messageId:a,citationIndex:n,className:t,...i}=e,{modal:s,openModal:l}=(0,eu.Z)({messageId:a,citationIndex:n});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{...i,className:(0,I.$)(t,em().linkifiedLink),onClick:l,href:void 0}),s]})};var message_MarkdownLink=e=>{let{...a}=e,n=(0,l.useContext)(z.Z),t=(0,l.useContext)(q.Z);try{let e=a.href;if(e){let i=new URL(e),s=parseInlineCitationInfo(i);if("poe:"===i.protocol)return(0,r.jsx)(r.Fragment,{children:a.children});if(s){let e=(null==t?void 0:t.messageId)===s.messageId;if(!n||!e)return(0,r.jsx)(r.Fragment,{children:a.children});return(0,r.jsx)(MarkdownLinkCitationInner,{...a,messageId:s.messageId,citationIndex:s.citationIndex})}}return(0,r.jsx)("a",{...a,target:"_blank"})}catch(e){return(0,r.jsx)(r.Fragment,{children:a.children})}},eg=n(79568),ep=n.n(eg),message_MarkdownTable=e=>{let{children:a,...n}=e;return(0,r.jsx)("div",{role:"region",tabIndex:0,className:ep().tableContainer,children:(0,r.jsx)("table",{...n,children:a})})};let getImageSrc=(e,a)=>{if(!e)return"";try{let n=new URL(e);if(["qph.fs.quoracdn.net","qph.cf2.quoracdn.net","qph.cf2.poecdn.net"].includes(n.hostname))return e;if(void 0!==a&&!a.includes(n.hostname))return"";return e}catch(e){return""}},ek=[j.Z,A.Z],eh=l.createContext(null),useMarkdownProps=()=>{let e=(0,l.useContext)(eh);if(!e)throw Error("useMarkdownProps must be called inside ComponentsMapContext");return e},ef={a:e=>{let{node:a,...n}=e;return(0,r.jsx)(message_MarkdownLink,{className:E().link,...n})},img:e=>{let{node:a,...n}=e;return(0,r.jsx)(message_MarkdownImage,{...n})},pre:e=>{var a,n,t,i,s;let{node:l,code:o,codeblockIdx:d,className:c}=e,{isPartial:m,text:u,actionLogData:g,supportedExecutableLanguages:p,supportedIframeContentTypes:k,renderIframe:h,codeblockPreviewIsEnabled:f,markdownWasStreaming:_,enableScriptingCodeReference:F,enableScriptBotCreation:b,messageId:v,chatData:S}=useMarkdownProps(),C=!m,M=function(e,a,n){var t,i;if(e)return!0;let s=null===(t=a.position)||void 0===t?void 0:t.start.offset,r=null===(i=a.position)||void 0===i?void 0:i.end.offset;return void 0!==s&&void 0!==r&&(n.length>r+10||"```"===n.substring(s,s+3)&&"\n```"===n.substring(r-4,r)||"~~~"===n.substring(s,s+3)&&"\n~~~"===n.substring(r-4,r))}(C,l,u),y=null===(a=l.children)||void 0===a?void 0:a[0],w=null!==(i=null===(n=y.properties)||void 0===n?void 0:n.className)&&void 0!==i?i:"",T=null!==(s=null===(t=y.data)||void 0===t?void 0:t.meta)&&void 0!==s?s:void 0,x=(0,K.t)(w);return(0,r.jsx)(K.Z,{className:(0,I.$)(c,w),code:o||"",markdownWasStreaming:_,codeblockIdx:d||0,codeblockHeaderLanguage:x||void 0,codeblockHeaderMetadata:T,actionLogData:g,codeblockIsComplete:M,enableExecutableCodeblock:!0,supportedExecutableLanguages:p,messageIsComplete:C,supportedIframeContentTypes:k,renderIframe:h,codeblockPreviewIsEnabled:f,enableScriptingCodeReference:F,enableScriptBotCreation:b,messageId:v,chat:null!=S?S:null})},table:e=>(0,r.jsx)(message_MarkdownTable,{...e}),blockquote:e=>(0,r.jsx)(message_MarkdownBlockquote,{...e}),iframe:e=>{let{srcDoc:a,rawHTMLIdx:n,positionEndOffset:t}=e,{text:i,isPartial:s,rawHtmlPreviewIsEnabled:l,renderIframe:o}=useMarkdownProps(),d=null==a?void 0:a.trim();if(!d||!o||!l)return null;let c=!s||(0,R.h)(t)&&t<i.trimEnd().length;return void 0===n?null:c?o({language:Z.Z.html,blockIndex:n,blockType:"rawhtml",content:d,contentType:"html",markdownWasStreaming:!1}):(0,r.jsx)(O.z,{})}},e_=(0,l.memo)(function(e){let{text:a,theme:t,enableMath:i=!1,promptBotImageDomainWhiteList:s,isPartial:o=!1,rawHtmlPreviewIsEnabled:m,chat:u}=e,g=n(17878),p=(0,c.useFragment)(g,u),k=(0,l.useCallback)(e=>getImageSrc(e,s),[s]),h=a.replace("\n\nHuman","").trim(),f=(0,l.useMemo)(()=>({...e,text:h,chatData:p}),[e,h,p]),_=(0,l.useMemo)(()=>[...ek,...i?[[N.Z,{singleDollarTextMath:!1}]]:[]],[i]),F=(0,l.useMemo)(()=>[...i?[P.Z]:[],codeblockPlugin,rawHTMLPlugin(m)],[i,m]);return(0,r.jsx)("div",{className:(0,I.$)(E().markdownContainer,o&&"notranslate"),...o?{translate:"no"}:{},children:(0,r.jsx)(eh.Provider,{value:f,children:(0,r.jsx)(D.M,{asChild:!0,theme:t,children:(0,r.jsx)(d.D,{components:ef,remarkPlugins:_,rehypePlugins:F,transformImageUri:k,children:h})})})})});var eF=n(63605),eb=n.n(eF);let MessageOverflowActions=e=>{let{children:a,isMessageHovered:n,theme:t}=e,i=(0,I.$)(eb().overflowActionsWrapper,n?eb().visible:eb().hidden,"error"===t?eb().errorContainer:"accent"===t?eb().accentContainer:eb().neutralContainer);return(0,r.jsx)("div",{className:i,children:a})};var ev=n(81045),eS=n(88373),eC=n(56199),eM=n.n(eC);let MessageReactionCount=e=>{let{reactionCount:a,onClickReaction:n,viewerReaction:t}=e,{reaction:i,count:s}=a;return(0,r.jsxs)("div",{onClick:n,className:(0,I.$)(eM().reactionCount,t===i&&eM().viewerReaction),children:[(0,r.jsx)(eS.Z,{reaction:i}),s>1&&(0,r.jsx)("div",{children:s})]})};var message_MessageReactionCounts=e=>{let{hidden:a}=e,{reactionCounts:n,openReactionsModal:t,viewerReaction:i}=(0,ev.C)();if(!(null==n?void 0:n.length))return null;let s=n.map(e=>(0,r.jsx)(MessageReactionCount,{reactionCount:e,onClickReaction:t,viewerReaction:i},e.reaction));return a?(0,r.jsx)("div",{className:eM().hiddenReactionCounts,children:s}):(0,r.jsx)("div",{className:eM().reactionCounts,children:(0,r.jsx)("div",{className:eM().reactionCountsInner,children:s})})};let MessageBubble=e=>{let{text:a,actionLogData:t,isSentByViewer:i,messageTimeoutSecs:s=15,isBot:d,isHuman:u,isCancelled:g=!1,isOptimistic:p,timeoutLevel:k,overflowButton:h,state:f,contentType:F=x.Z.text_markdown,promptBotImageDomainWhiteList:y,enableMath:T=!1,enableLongUserMessageTruncation:L=!1,footer:D,errorMessage:P,subline:j,hasAttachments:A,commandType:N,messageStateText:O,clientMessageStateText:R,markdownCharacterLimit:U=2e4,authorFullName:E,messageCreationTime:Z,messageSeenState:H,supportedExecutableLanguages:V,supportedIframeContentTypes:G,renderIframe:K,referencedMessage:W,isEdited:z,isEditing:q,enableScriptingCodeReference:$,hasParameters:J,messageCode:Q,useMessageSendingIcon:Y,enableScriptBotCreation:X,messageId:ee,showOverflowButtonInBubble:ea,chat:en}=e,{t:et}=(0,o.$G)(),ei=(0,l.useRef)(null),{isHovered:es,setIsHovered:er}=(0,m.q)(),el=(0,l.useCallback)(()=>{null==er||er(!0)},[er]),eo=(0,l.useCallback)(()=>{null==er||er(!1)},[er]),ed=(0,l.useRef)(null),[ec,em]=(0,l.useState)(L?"initial":"not-truncated"),eu=(0,l.useMemo)(()=>{if(L&&"not-truncated"!==ec)return{overflow:"hidden",maxHeight:"60vh"}},[L,ec]),eg=(0,S.E)(),ep=ea&&eg!==B.Z.share,ek=(0,c.useFragment)(n(73884),en);(0,l.useEffect)(()=>{if(L&&ei.current&&ed.current){let e=ei.current.getBoundingClientRect().height,a=ed.current.getBoundingClientRect().height;e>a?em("truncated"):em("not-truncated")}},[L,ei,ed]);let eh=null,ef=Math.floor(s/5),eF=!1;R?eh=R:O?eh=O:f===b.Z.error?eh=d?et("Message timed out."):P||et(k<3?"Message failed to send.":"Unable to reach Poe."):g||!p||d||(Y?eF=!0:eh=et(k?A?"Still uploading...":"Still sending...":A?"Uploading...":"Sending..."));let eb=(0,I.$)(_().row,i&&_().rightSideMessageRow,N&&_().commandRow,N&&(i?_().rightSideCommandRow:_().leftSideCommandRow)),ev=(0,w.DN)(f),eS=ev||!d&&k===ef,eC=N?"":(0,I.$)(i?_().rightSideMessageBubble:_().leftSideMessageBubble,eS&&_().errorBubble),eM=(0,I.$)(_().messageBubbleWrapper,q&&_().editing),ey=eS?"on-error":i?"on-accent":"hi-contrast",ew=f==b.Z.output_truncated,[eI,eT]=(0,l.useState)(f===b.Z.incomplete);(0,l.useEffect)(()=>{f===b.Z.incomplete&&eT(!0)},[f]);let ex=l.useCallback(()=>{em("not-truncated")},[]),eB=l.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),eL=N&&eS?_().commandErrorFooter:i?_().rightSideOptimisticFooter:_().leftSideOptimisticFooter;return(0,r.jsxs)("div",{className:_().rowWithFooter,children:[(0,r.jsxs)("div",{className:eb,children:[i&&!ep?h:null,(0,r.jsxs)("div",{className:eM,onMouseEnter:el,onMouseLeave:eo,children:[(0,r.jsxs)("div",{className:(0,I.$)(eC,ep&&_().positionRelative),children:[ep&&h&&!p?(0,r.jsx)(MessageOverflowActions,{theme:eS?"error":i?"accent":"neutral",isMessageHovered:es,children:h}):null,!d||a||A?N?(0,r.jsx)(message_CommandMessage,{commandType:N,text:a,isSentByViewer:i,authorFullName:E}):(0,r.jsxs)("div",{ref:ed,className:_().messageTextContainer,style:eu,children:[(0,r.jsx)(v.Z,{isReferencingMessageErrored:eS,isReferencingMessageSentByViewer:i,children:W}),(0,r.jsx)("div",{ref:ei,onTouchStart:eB,className:_().selectableText,children:F===x.Z.text_markdown&&a.length<U?(0,r.jsx)(e_,{theme:ey,markdownWasStreaming:eI,text:getText(a,u),actionLogData:t,enableMath:T,rawHtmlPreviewIsEnabled:!u,codeblockPreviewIsEnabled:!0,promptBotImageDomainWhiteList:y,isPartial:f===b.Z.incomplete||f===b.Z.cancelled,supportedExecutableLanguages:V,supportedIframeContentTypes:G,renderIframe:K,enableScriptingCodeReference:null!=$?$:void 0,enableScriptBotCreation:null!=X&&X,messageId:ee,chat:ek}):(0,r.jsx)("p",{className:_().plaintext,children:a})}),"truncated"===ec&&(!p||p&&f!==b.Z.complete)?(0,r.jsx)("div",{className:(0,I.$)(_().viewMoreButtonContainer,eS?_().viewMoreButtonContainerBackgroundErrorFade:i?_().viewMoreButtonContainerBackgroundPurpleFade:_().viewMoreButtonContainerBackgroundNeutralFade),children:(0,r.jsx)(C.Z,{as:"button",size:"sm",theme:"secondary",iconLeft:(0,r.jsx)(M.Z,{}),className:_().viewMoreButton,onClick:ex,children:et("View more")})}):null]}):f===b.Z.incomplete?(0,r.jsx)("p",{className:_().plaintext,children:"..."}):(0,r.jsx)(nosign,{className:_().noSignIcon}),D,(0,r.jsx)(message_MessageMetadata,{state:f,messageCreationTime:Z,seenState:H,isEdited:z,hasParameters:J,messageCode:Q,showSendingIcon:eF}),(0,r.jsx)(message_MessageReactionCounts,{hidden:!0})]}),(0,r.jsx)(message_MessageReactionCounts,{})]})]}),j,eh&&(0,r.jsx)("div",{"data-visible":p||k>=ef||ev||ew||void 0,"data-error":eS||void 0,"data-warning":ew||void 0,className:eL,children:eh})]})},getText=(e,a)=>{if(!a)return e;let{specialSyntax:n,specialSyntaxTrailingSpaces:t,prompt:i}=(0,y.Co)(e);return 0===n.length?e:"**".concat(n.trim(),"**").concat(t).concat(i)},BreakLine=()=>(0,r.jsx)("div",{className:_().breakLine}),ChatBreak=e=>{let{isSentByViewer:a,authorFullName:n,overflowButton:t}=e,{t:i}=(0,o.$G)(),s=(0,w.rw)(i,a,n);return(0,r.jsxs)("div",{className:_().chatBreak,children:[(0,r.jsx)(BreakLine,{}),(0,r.jsx)("span",{className:(0,I.$)(_().chatBreakLabel,!!t&&_().chatBreakLabelWithOverflowButton),children:s}),t,(0,r.jsx)(BreakLine,{})]})},ChatAnnouncement=e=>{let{chatAnnouncementText:a}=e;return(0,r.jsx)("div",{className:_().chatAnnouncement,children:(0,r.jsx)("span",{className:(0,I.$)(_().chatAnnouncementLabel),children:(0,r.jsx)(d.D,{linkTarget:"_blank",children:a})})})};var message_Message=e=>{let{text:a,actionLogData:t,author:i,sourceType:s,isSentByViewer:o,messageTimeoutSecs:d,viewer:m,bot:u,chat:g,referencedMessage:p,isCancelled:k=!1,isOptimistic:h=!1,timeoutLevel:f=0,state:_=b.Z.complete,contentType:F=x.Z.text_markdown,footer:v,errorMessage:S,hasAttachments:C=!1,commandType:M,overflowButton:y,messageStateText:I,clientMessageStateText:B,messageCreationTime:L,messageSeenState:D,authorFullName:P,supportedExecutableLanguages:j,supportedIframeContentTypes:A,renderIframe:N,subline:O,isChatAnnouncement:R,isEdited:U,isEditing:E,hasParameters:Z,messageId:H,messageCode:V}=e,G=(0,l.useDeferredValue)(a),K=_===b.Z.incomplete?G:a,{markdownCharacterLimit:W,botMarkdownCharacterLimit:z,promptBotImageDomainWhitelist:q,enableScriptingCodeReference:$,enableScriptBotCreation:J,useMessageSendingIcon:Q,poeHideLeftSideMessageHeaderIfSameSender:Y}=(0,c.useFragment)(n(52224),m),{isApiBot:X}=(0,c.useFragment)(n(2395),u),ee=(0,c.useFragment)(n(43396),g);if(R)return(0,r.jsx)(ChatAnnouncement,{chatAnnouncementText:K});if(i===T.Z.chat_break)return(0,r.jsx)(ChatBreak,{isSentByViewer:o,authorFullName:P,overflowButton:y});{let e=(0,w.y8)(i)&&!X||(0,w.SX)(i)&&s&&"preview_triggered"===s;return(0,r.jsx)(MessageBubble,{supportedIframeContentTypes:A,renderIframe:N,actionLogData:t,isSentByViewer:o,text:K,overflowButton:y,messageTimeoutSecs:d,isBot:(0,w.y8)(i),isHuman:(0,w.SX)(i),isCancelled:k,isOptimistic:h,timeoutLevel:f,markdownCharacterLimit:(0,w.y8)(i)?null!=z?z:2e5:null!=W?W:5e4,state:_,contentType:F,promptBotImageDomainWhiteList:e?q:void 0,enableMath:!0,footer:v,subline:O,errorMessage:S,hasAttachments:C,commandType:M,messageStateText:I,clientMessageStateText:B,authorFullName:P,messageCreationTime:L,messageSeenState:D,supportedExecutableLanguages:j,enableLongUserMessageTruncation:(0,w.SX)(i),referencedMessage:p,isEdited:U,isEditing:E,enableScriptingCodeReference:null!=$?$:void 0,enableScriptBotCreation:null!=J&&J,hasParameters:Z,messageCode:V,useMessageSendingIcon:null!=Q?Q:void 0,messageId:H,showOverflowButtonInBubble:null!=Y?Y:void 0,chat:ee})}}},23282:function(e,a,n){"use strict";var t=n(85893),i=n(41143),s=n.n(i),r=n(22120),l=n(46044),o=n(12251),d=n(32524),c=n.n(d);let getMessageDateString=(e,a)=>{let n=new Date,t=e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear(),i=e.getDay(),s=new Date;s.setHours(0,0,0,0);let r=new Date(s.getTime()-864e5),o=e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear(),d=new Date(s.getTime()-5184e5),c=e.getTime()>d.getTime();return t?a("Today"):o?a("Yesterday"):c?getDayOfWeekString(i,a):(0,l.tF)({date:e,t:a})},getDayOfWeekString=(e,a)=>{switch(e){case 0:return a("Sunday");case 1:return a("Monday");case 2:return a("Tuesday");case 3:return a("Wednesday");case 4:return a("Thursday");case 5:return a("Friday");case 6:return a("Saturday");default:s()(!1,"Unexpected day of week ".concat(e))}};a.Z=e=>{let{messageCreationTime:a,className:n}=e,{t:i}=(0,r.$G)(),s=new Date(a/1e3);return(0,t.jsx)("p",{className:(0,o.$)(c().container,n),suppressHydrationWarning:!0,children:getMessageDateString(s,i)})}},72110:function(e,a,n){"use strict";n.d(a,{F:function(){return MessageHoverProvider},q:function(){return useMessageHover}});var t=n(85893),i=n(67294);let s=(0,i.createContext)({isHovered:!1,setIsHovered:void 0}),MessageHoverProvider=e=>{let{children:a}=e,[n,r]=(0,i.useState)(!1),l=(0,i.useMemo)(()=>({isHovered:n,setIsHovered:r}),[n,r]);return(0,t.jsx)(s.Provider,{value:l,children:a})},useMessageHover=()=>{let e=(0,i.useContext)(s);return e}},95309:function(e,a,n){"use strict";n.d(a,{K:function(){return DeletedReferencedMessage},Z:function(){return message_ReferencedMessage}});var t=n(85893),i=n(98077),s=n(41143),r=n.n(s),l=n(67294),o=n(22120),d=n(22578);n(44311);var c=n(64869),m=n(38033),u=n(8583),g=n(85972);let isAudio=e=>e.startsWith("audio/"),isVideo=e=>e.startsWith("video/"),isImage=e=>e.startsWith("image/");var p=n(12251),k=n(9729),h=n(48901),f=n(59068),_=n.n(f);let DeletedReferencedMessage=()=>{let{t:e}=(0,o.$G)(),a=useTextColorStyle();return(0,t.jsx)(ReferencedMessageStylingWrapper,{className:(0,p.$)(_().text,_().leftSection,a),children:e("Deleted message")})},useScrollToMessage=e=>{let a=(0,u.ZP)(),{t:n}=(0,o.$G)(),t=(0,l.useCallback)(()=>{let t=document.getElementById((0,h.n)(e));t?t.scrollIntoView({behavior:"smooth",block:"start"}):((0,k.Z)("poe/statsd_event",{category:"count",key:"poe.web.not_found.messages_list.referenced_message",value:1}),a({type:u.pC.warning,content:n("Unable to access the original message.")}))},[e,a,n]);return t},useBackgroundColorStyle=()=>{let{isReferencingMessageErrored:e,isReferencingMessageSentByViewer:a,isInInputHeader:n}=(0,m.Y)();return n?void 0:e||a?_().dimDark20:_().backgroundMuted},useTextColorStyle=()=>{let{isReferencingMessageErrored:e,isReferencingMessageSentByViewer:a,isInInputHeader:n}=(0,m.Y)();return n?_().foregroundMuted:e||a?_().accentOnAccentWithOpacity:_().foregroundMuted},ReferencedMessageStylingWrapper=e=>{let{children:a,onClick:n,className:i}=e,{isInInputHeader:s}=(0,m.Y)(),r=useBackgroundColorStyle();return(0,t.jsx)("div",{className:(0,p.$)(i,_().container,r,!s&&_().containerVerticalMargin),onClick:n,children:a})};var message_ReferencedMessage=e=>{let{messageId:a,bot:s,poeUser:u,attachments:k,text:h,showPrivateTag:f}=e;r()(s||u,"One of user or bot data should be passed in");let F=(0,d.useFragment)(n(14151),s),b=(0,d.useFragment)(n(38369),u),v=(0,d.useFragment)(n(98422),k),{t:S}=(0,o.$G)(),C=useScrollToMessage(a),M=useTextColorStyle(),{isInInputHeader:y}=(0,m.Y)(),w=v.length,I=0===w,T=1===w,x=w>1,B=(0,l.useMemo)(()=>{if(I||x)return null;if(T){let e=v[0].file.mimeType,a=y?_().inputHeaderAttachmentSection:void 0;if(isImage(e))return(0,t.jsx)("img",{className:(0,p.$)(_().attachmentSection,_().imageAttachment,a),src:v[0].url});if(isVideo(e))return(0,t.jsx)("div",{className:(0,p.$)(_().attachmentSection,a),children:(0,t.jsx)(i.JF,{})});if(isAudio(e))return(0,t.jsx)("div",{className:(0,p.$)(_().attachmentSection,a),children:(0,t.jsx)(i.d2,{})})}return null},[I,x,T,v,y]),L=(0,l.useMemo)(()=>{if(I)return h;if(x)return S("Multiple attachments");if(T){let e=v[0].file.mimeType;return isImage(e)?S("Image"):isVideo(e)?S("Video"):isAudio(e)?S("Audio"):v[0].name}return h},[I,x,T,v,h,S]);return(0,t.jsxs)(ReferencedMessageStylingWrapper,{className:_().cursorPointer,onClick:C,children:[(0,t.jsxs)("div",{className:(0,p.$)(_().leftSection,B&&_().leftSectionWithAttachment),children:[b&&(0,t.jsx)(g.Z,{poeUser:b}),F&&(0,t.jsx)(c.Z,{bot:F,showPrivateTag:f}),(0,t.jsx)("div",{className:(0,p.$)(_().text,M),children:L})]}),B]})}},38033:function(e,a,n){"use strict";n.d(a,{Y:function(){return useReferencedMessageContext}});var t=n(85893),i=n(67294);let s=(0,i.createContext)({isInReferencedMessage:!1,isReferencingMessageSentByViewer:!1,isReferencingMessageErrored:!1,isInInputHeader:!1}),useReferencedMessageContext=()=>(0,i.useContext)(s);a.Z=e=>{let{children:a,isReferencingMessageSentByViewer:n,isReferencingMessageErrored:r,isInInputHeader:l=!1}=e,o=(0,i.useMemo)(()=>({isInReferencedMessage:!0,isReferencingMessageSentByViewer:n,isReferencingMessageErrored:r,isInInputHeader:l}),[n,r,l]);return(0,t.jsx)(s.Provider,{value:o,children:a})}},45392:function(e,a,n){"use strict";n.d(a,{Y:function(){return i}});var t=n(67294);let i=(0,t.createContext)(!1)},39609:function(e,a,n){"use strict";var t=n(85893),i=n(67294),s=n(22641);let importMessageCitationSourceModal=()=>n.e(1372).then(n.bind(n,21372));a.Z=e=>{let{messageId:a,citationIndex:n}=e,[r,l]=(0,i.useState)(!1),o=(0,i.useCallback)(()=>{l(!0)},[]),d=(0,i.useCallback)(()=>{l(!1)},[]),c=(0,i.useMemo)(()=>({messageId:a,citationIndex:n}),[n,a]),m=(0,t.jsx)(s.Z,{isOpen:r,onRequestClose:d,body:importMessageCitationSourceModal,bodyProps:c,modalHeight:400,useMinHeight:!0,useIncreasedHeightInCompactScreen:!0});return{modal:m,openModal:o}}},84080:function(e,a,n){"use strict";n.d(a,{C:function(){return usePagingTriggerRef}});var t=n(85893),i=n(67294),s=n(12251),r=n(56782),l=n.n(r),o=n(13525);let usePagingTriggerRef=e=>{let{loadMore:a,canLoadMore:n,rootMargin:t,scrollRootRef:s}=e,r=i.useRef(null),l=(0,o.Oi)(),d=void 0!==s?s:l;return(0,i.useEffect)(()=>{var e;if(!r.current||!n)return;let i=new IntersectionObserver(e=>{e[0].isIntersecting&&a()},{root:null!==(e=null==d?void 0:d.current)&&void 0!==e?e:null,threshold:0,rootMargin:t});return i.observe(r.current),()=>{i.disconnect()}},[a,n,t,d]),r},calcRootMargin=(e,a,n)=>"".concat(!a&&n?e:0,"px ").concat(a&&!n?e:0,"px ")+"".concat(a||n?0:e,"px ").concat(a&&n?e:0,"px"),d=i.forwardRef(function(e,a){let{children:n,className:i,loadMore:r,hasMore:o,isLoading:d,loadingState:c=null,error:m,errorState:u=null,threshold:g,horizontal:p=!1,reverse:k=!1,scrollRootRef:h,as:f="div"}=e,_=usePagingTriggerRef({loadMore:r,canLoadMore:o&&!d&&!m,rootMargin:calcRootMargin(g,p,k),scrollRootRef:h}),F=m?u:(0,t.jsx)("div",{ref:_,className:l().pagingTrigger,children:d&&c});return(0,t.jsxs)(f,{ref:a,className:(0,s.$)(l().container,p&&l().horizontal,i),children:[k&&F,n,!k&&F]})});a.Z=d},17663:function(e,a,n){"use strict";n.d(a,{h:function(){return ButtonGroup}});var t=n(85893);n(67294);var i=n(12251),s=n(95474),r=n.n(s);let ButtonGroup=e=>{let{children:a,className:n,...s}=e;return(0,t.jsx)("div",{role:"group",className:(0,i.$)(r().root,n),...s,children:a})}},96744:function(e,a,n){"use strict";var t=n(85893);n(67294);var i=n(53968),s=n(12251),r=n(91613),l=n.n(r),o=n(24113),d=n.n(o);let Checkbox=e=>{let{className:a,children:n,isChecked:r=!1,isDisabled:o=!1,...c}=e,m=(0,s.$)(l().label,o?l().isDisabled:null,r?d().isChecked:null,o?d().isDisabled:null,a),u=(0,s.$)(l().inputImage,d().inputImage);return(0,t.jsxs)("label",{className:m,children:[(0,t.jsx)("input",{className:l().input,type:"checkbox",disabled:o,checked:r,...c}),(0,t.jsx)("div",{className:u,children:r&&(0,t.jsx)(i.Z,{})}),n&&(0,t.jsx)("div",{className:d().text,children:n})]})};Checkbox.displayName="Checkbox",a.Z=Checkbox},28473:function(e,a,n){"use strict";n.d(a,{n:function(){return BarePreviewFrameWithIndicator},z:function(){return BarePreviewFrameIndicator}});var t=n(85893),i=n(22578);n(44311);var s=n(12251),r=n(23595),l=n(64516),o=n(61302),d=n.n(o),c=n(65604),m=n(24503),u=n(45444),g=n(36796),p=n(6305),k=n(4895),h=n(58705),f=n(41156),_=n(64468),F=n(12001),b=n(67209);let BarePreviewFrame=e=>{let{htmlCode:a,sendUserMessageOverlay:o,onSendUserMessage:m,overlayClassName:v,className:S,containerClassName:C,logger:M,viewableImpressionType:y,viewer:w}=e,I=(0,i.useFragment)(n(44593),w),T=(0,l.F)(),x=(0,_.X)(I),B=(0,h.Z)(x,a,"html",{inline:!0,allowDownloads:!0,linkInterceptionBehavior:"showConfirmation",interceptCopyEvents:(0,r.P)(T)}),{stopTimer:L}=(0,b.Z)({language:c.Z.html,contentType:"html"}),D=(0,k.Z)({onLoad:L}),{disableSafeMode:P,shouldShowSafeModeOverlay:j,onSafeModeOverlayDismiss:A,onSecurityPolicyViolation:N,safeMode:O}=(0,F.Z)(),R=(0,u.Os)(0,M),U=(0,p.R)(),E=(0,f.B)(M,y);return(0,t.jsx)(g.Z,{ref:E,inline:!0,overlayClassName:(0,s.$)(d().mainContainer,v),className:(0,s.$)(d().mainContainer,S),containerClassName:(0,s.$)(d().container,C),onReady:B,safeMode:O,shouldShowSafeModeOverlay:j,onCopyToClipboardDesktopAppOnly:(0,r.P)(T)?U:void 0,onSafeModeOverlayConfirm:P,onSafeModeOverlayDismiss:A,onSecurityPolicyViolation:N,sendUserMessageOverlay:o,onSendUserMessage:m,...D,...R,iframeUrl:x})};function BarePreviewFrameIndicator(){return(0,t.jsx)("div",{className:d().loadingContainer,children:(0,t.jsx)(m.Z,{color:"accent",size:"sm"})})}function BarePreviewFrameWithIndicator(e){return e.showLoadingSpinner?(0,t.jsx)("div",{className:d().loadingContainer,children:(0,t.jsx)(m.Z,{color:"accent",size:"sm"})}):(0,t.jsx)(BarePreviewFrame,{...e})}},77546:function(e,a,n){"use strict";var t=n(85893),i=n(98077),s=n(22120),r=n(78410),l=n(56505),o=n.n(l);a.Z=e=>{let{log:a,isOpen:n,toggleConsole:l}=e,{t:d}=(0,s.$G)();return(0,t.jsxs)("div",{className:o().console,"aria-expanded":n,children:[(0,t.jsxs)("div",{className:o().consoleHeader,children:[(0,t.jsx)("p",{className:o().consoleHeaderText,children:d("Console")}),(0,t.jsx)(r.Z,{iconLeft:(0,t.jsx)(i.bM,{}),showIconOnly:"always",onClick:l,theme:"ghost",as:"button",size:"sm",children:d("Close console")})]}),(0,t.jsx)("div",{className:o().entries,children:a.map((e,a)=>{let{type:n,message:i}=e;return(0,t.jsx)("div",{className:o()[n],children:"error"===n?(0,t.jsx)("span",{className:o().errorLabel,children:i}):"warning"===n?(0,t.jsx)("span",{className:o().warningLabel,children:i}):i},a)})})]})}},36900:function(e,a,n){"use strict";n.d(a,{Z:function(){return preview_PreviewFrame}});var t=n(85893),i=n(67294),s=n(22578);n(44311);var r=n(23595),l=n(64516),o=n(67824),d=n(45444),c=n(77546),m=n(66953),u=n(30965),g=n(58775),p=n(97057),k=n(86880),h=n(39170),f=n(98077),_=n(22120),F=n(78410),b=n(30038),v=n(77338),S=n(34389);function OpenInCanvasButton(e){let{canvasHelpers:a,logger:n}=e,s=(0,S.C)(),r=a.openInCanvas,l=(0,i.useCallback)(()=>{r(),n.logPreviewInteraction(v.Z.open_preview_in_canvas),n.logAction(b.Z.open_preview_in_canvas)},[n,r]),{t:o}=(0,_.$G)();return(0,t.jsx)(F.Z,{as:"button",size:"sm",theme:"ghost",onClick:l,isDisabled:a.openMutationIsInflight,showIconOnly:s?"always":"compact-below","aria-label":"Open on canvas",iconLeft:(0,t.jsx)(f.C7,{}),children:o("Open on canvas")})}var C=n(86023),M=n(83169);let useOnPopoutButtonClick=e=>{let{content:a,contentType:n,codeblockIdx:t,logger:s,messageNodeId:r,allowShare:l}=e,o=(0,i.useCallback)(()=>{(0,C.E)({contentType:n,rawPreviewContent:a,shareInformation:l&&"number"==typeof t?{nodeId:r,codeblockIndex:t}:void 0}),s.logPreviewInteraction(v.Z.open_in_new_tab),s.logAction(b.Z.open_preview_in_new_tab)},[t,r,a,n,l,s]);return o},PopoutButtonDropdownMenuItem=e=>{let a=useOnPopoutButtonClick(e),{t:n}=(0,_.$G)();return(0,t.jsxs)(M.ZP,{onClick:a,children:[(0,t.jsx)(f.Tq,{size:"md"}),n("New tab")]})};var y=n(51667),w=n(91917),I=n(31198),preview_PreviewHeader=e=>{var a,n,s;let{showPreviewShareButton:r,codeblockIdx:l,disableShareButton:o,logger:d}=e,c=null===(a=(0,i.useContext)(u.Z))||void 0===a?void 0:a.messageId;return(0,t.jsx)(y.r,{title:e.title,rightChildren:(0,t.jsxs)(t.Fragment,{children:[!(null===(n=e.canvasHelpers)||void 0===n?void 0:n.isOpenedInCanvas)&&!e.isCollapsed&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.X,{isOpen:e.moreOptionsIsOpen,setIsOpen:e.setMoreOptionsIsOpen,menuBody:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{onClick:e.refresh}),(0,t.jsx)(h.D,{isConsoleOpen:e.isConsoleOpen,toggleConsole:e.toggleConsole}),e.showSaveAsFile&&(0,t.jsx)(w.L,{logger:d,getFileDownloadInfo:e.getFileDownloadInfo}),e.showNewTabButton&&(0,t.jsx)(PopoutButtonDropdownMenuItem,{allowShare:r,...e})]})}),r&&"number"==typeof l&&"number"==typeof c&&(0,t.jsx)(I.T,{codeblockIdx:l,messageId:c,disabled:o,logger:d,showIconOnly:"always"})]}),e.canvasHelpers&&(0,t.jsx)(OpenInCanvasButton,{logger:d,canvasHelpers:e.canvasHelpers}),(0,t.jsx)(g.n,{isCollapsed:e.isCollapsed,isInCanvas:(null===(s=e.canvasHelpers)||void 0===s?void 0:s.isOpenedInCanvas)||!1,setIsCollapsed:e.setIsCollapsed})]})})},T=n(36796),x=n(6560),B=n.n(x),L=n(8968),preview_PreviewOpenHereInsteadConfirmation=e=>{let{canvasHelpers:a,className:n}=e,{t:i}=(0,_.$G)();return(0,t.jsx)(L.Z,{forceDark:!0,className:n,icon:(0,t.jsx)(f.C7,{size:"x-lg"}),text:(0,t.jsx)("p",{children:i("This is already open on a canvas tab.")}),actions:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(F.Z,{as:"button",theme:"outline",isLoading:a.openMutationIsInflight,onClick:a.closeInCanvas,className:B().openHereButton,children:i("Open here instead")})})})},D=n(39781),P=n(36383),j=n(6305),A=n(4895),N=n(58705),O=n(63266),R=n(41156),U=n(64468),E=n(12001),Z=n(67209),H=n(65478),preview_PreviewFrame=e=>{let{content:a,contentType:u,language:g,showSaveAsFile:p,disableShareButton:k,initialIsCollapsed:h,codeblockIdx:f,messageNodeId:_,onSendUserMessage:F,sendUserMessageOverlay:b,showPreviewShareButton:v,canvasHelpers:S,title:C,showNewTabButton:M,logger:y,onRefresh:w,botId:I,codeEditorCanvasBotId:x,canvasDataStoreBehavior:B,debugMode:L,viewer:V}=e,G=(0,s.useFragment)(n(97453),V),K=(0,U.X)(G),{stopTimer:W}=(0,Z.Z)({contentType:u,language:g}),z=(0,A.Z)({onLoad:W}),{log:q,clearLog:$,...J}=(0,O.Z)(void 0!==I&&void 0!==x&&I===x),{getFileDownloadInfo:Q,...Y}=(0,P.Z)(),X=(0,l.F)(),ee=(0,N.Z)(K,a,u,{inline:!0,allowDownloads:!0,debugMode:L,linkInterceptionBehavior:"showConfirmation",interceptCopyEvents:(0,r.P)(X),datastoreBehavior:null!=B?B:"disabled"}),ea=(0,i.useCallback)(()=>{null==w||w(),$()},[w,$]),[en,et]=(0,H.J)(ea),{isConsoleOpen:ei,toggleConsole:es}=(0,D.K)(q),{disableSafeMode:er,shouldShowSafeModeOverlay:el,onSafeModeOverlayDismiss:eo,onSecurityPolicyViolation:ed,safeMode:ec}=(0,E.Z)(en,y),[em,eu]=(0,i.useState)(h),eg=(0,d.Os)(en,y),[ep,ek]=(0,i.useState)(!1),eh=(0,j.R)(),ef=(0,R.B)(y,o.Z.previews);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.M,{children:[(0,t.jsx)(preview_PreviewHeader,{title:C,showNewTabButton:M,moreOptionsIsOpen:ep,setMoreOptionsIsOpen:ek,canvasHelpers:S,isCollapsed:em,setIsCollapsed:eu,logger:y,refresh:et,messageNodeId:_,isConsoleOpen:ei,toggleConsole:es,content:a,contentType:u,getFileDownloadInfo:Q,showSaveAsFile:p,codeblockIdx:f,showPreviewShareButton:v,disableShareButton:k}),!em&&(null==S?void 0:S.isOpenedInCanvas)&&(0,t.jsx)(preview_PreviewOpenHereInsteadConfirmation,{canvasHelpers:S}),!em&&!(null==S?void 0:S.isOpenedInCanvas)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Z,{ref:ef,iframeUrl:K,inline:!0,iframeClickCaptureIsDisabled:ep,safeMode:ec,onCopyToClipboardDesktopAppOnly:(0,r.P)(X)?eh:void 0,shouldShowSafeModeOverlay:el,onSafeModeOverlayConfirm:er,onSafeModeOverlayDismiss:eo,onReady:ee,onSecurityPolicyViolation:ed,onSendUserMessage:null!=F?F:void 0,sendUserMessageOverlay:b,...z,...J,...Y,...eg},en),(0,t.jsx)(c.Z,{log:q,isOpen:ei,toggleConsole:es})]})]}),null==S?void 0:S.closeModal]})}},66953:function(e,a,n){"use strict";n.d(a,{M:function(){return PreviewFrameContainer},p:function(){return PreviewFrameLoadingPlaceholder}});var t=n(85893),i=n(28456),s=n.n(i),r=n(58775),l=n(51667);function PreviewFrameContainer(e){return(0,t.jsx)("div",{className:s().container,...e})}function PreviewFrameLoadingPlaceholder(){return(0,t.jsx)(PreviewFrameContainer,{children:(0,t.jsx)(l.r,{title:"\xa0",rightChildren:(0,t.jsx)(r.g,{isCollapsed:!0,isDisabled:!0})})})}},36796:function(e,a,n){"use strict";n.d(a,{Z:function(){return F}});var t=n(85893),i=n(67294),s=n(12251),r=n(46932),l=n(72722),o=n(92635),d=n.n(o);let c=!1,m=new Map,u=new Map,onMessageEvent=e=>{if(!e.source||"poeFrame"!==e.data.source)return;let a=e.source,n=m.get(a);if(n)n(a,e);else{let n=u.get(a);n?n.push(e):u.set(a,[e])}},startListening=()=>{c||(window.addEventListener("message",onMessageEvent),c=!0)},registerPreviewCb=(e,a)=>{startListening(),m.set(e,a);let n=u.get(e);n&&(n.forEach(n=>a(e,n)),u.delete(e))},unregisterPreviewCb=(e,a)=>{m.get(e)===a&&m.delete(e)};var g=n(98077),p=n(22120),k=n(78410),h=n(8968),preview_PreviewSafeModeOverlay=e=>{let{onClose:a,onConfirm:n,className:i}=e,{t:s}=(0,p.$G)();return(0,t.jsx)(h.Z,{className:i,icon:(0,t.jsx)(g.au,{size:"x-lg"}),text:(0,t.jsx)("p",{children:s("We blocked this application from accessing untrusted external resources. Allowing all access for this application could share some of your information with third parties, like messages in this conversation and your IP address.")}),actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{as:"button",theme:"outline",onClick:n,children:s("Allow all")}),(0,t.jsx)(k.Z,{as:"button",theme:"outline",onClick:a,children:s("Keep blocked")})]})})},f=n(51882);let useIFrameListener=e=>{let[a,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let n=null==a?void 0:a.contentWindow;if(n)return registerPreviewCb(n,e),()=>{unregisterPreviewCb(n,e)}},[a,e]),n},getPreviewToHostClientMessage=e=>{if("poeFrame"!==e.data.source)return null;let a=e.data;return a},usePreviewIFrameListener=e=>{let{onReady:a,onLoaded:n,onResize:t,onLog:s,onWarn:r,onError:l,onUncaughtError:o,onFileContentsForDownload:d,onSendUserMessage:c,onSecurityPolicyViolation:m,onDomContentLoaded:u,onOpenUrl:g,onDownloadNativeAppOnly:p,onCanvasActionsRequest:k,onCopyToClipboardDesktopAppOnly:h,iframeUrl:_}=e,F=(0,i.useCallback)((e,a)=>{let n=e.requestName;"sendMessage"===n?null==c||c(e,a):"registerHandler"===n?(0,f.T)(a,e,{code:"unknown",message:"Not supported on this client",success:!1},_):(0,f.T)(a,e,{code:"unknown",message:"Unknown request",success:!1},_)},[c,_]),b=(0,i.useCallback)((e,i)=>{let c=getPreviewToHostClientMessage(i);if(c)switch(c.type){case"ready":null==a||a(e);break;case"loaded":null==n||n(c);break;case"resize":null==t||t(c);break;case"log":null==s||s(c);break;case"warn":null==r||r(c);break;case"error":null==l||l(c);break;case"uncaughtError":null==o||o(c);break;case"fileContentsForDownload":null==d||d(c);break;case"miniAppAPI":F(c,e);break;case"canvasActionsRequest":null==k||k(c,e);break;case"securityPolicyViolation":null==m||m(c);break;case"DOMContentLoaded":null==u||u(c);break;case"openUrl":null==g||g(c);break;case"copyToClipboardDesktopAppOnly":null==h||h(c);break;case"downloadNativeAppOnly":null==p||p(c);break;default:console.error("Unknown preview message type",c.type)}},[a,n,t,s,r,l,o,d,F,u,p,m,g,h,k]);return useIFrameListener(b)},getPreviewSrc=(e,a)=>a?e:e+"?safemode=false",_=(0,i.forwardRef)((e,a)=>{let{className:n,style:o,safeMode:c=!0,shouldShowSafeModeOverlay:m=!1,onSafeModeOverlayConfirm:u,onSafeModeOverlayDismiss:g,containerClassName:p,overlayClassName:k,sendUserMessageOverlay:h,openUrlOverlay:f,iframeClickCaptureIsDisabled:_,inline:F,iframeUrl:b,...v}=e,S=(0,l.Z)(),C=usePreviewIFrameListener({...v,iframeUrl:b}),M=(0,i.useMemo)(()=>(0,r.Z)([C,a]),[C,a]);return S?(0,t.jsxs)("div",{className:(0,s.$)(d().container,_?d().disableClickCapture:null,p),children:[(0,t.jsx)("iframe",{className:(0,s.$)(d().frame,d().stackedChild,F&&d().inline,n),style:o,ref:M,sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms allow-downloads",allow:"clipboard-write; web-share",allowFullScreen:!0,src:getPreviewSrc(b,c)}),f,h,m&&(0,t.jsx)(preview_PreviewSafeModeOverlay,{className:(0,s.$)(k,d().stackedChild),onClose:g,onConfirm:u})]}):null});_.displayName="PreviewIFrame";var F=_},8968:function(e,a,n){"use strict";var t=n(85893),i=n(12251),s=n(9485),r=n.n(s);a.Z=function(e){let{children:a,icon:n,text:s,actions:l,className:o,forceDark:d,isNarrow:c}=e;return(0,t.jsx)("div",{className:(0,i.$)(r().wrapper,d&&r().forceDark,o),children:(0,t.jsxs)("div",{className:(0,i.$)(r().wrapperInner,c&&r().isNarrow),children:[n,s,(0,t.jsx)("div",{className:r().actions,children:l}),a]})})}},58775:function(e,a,n){"use strict";n.d(a,{g:function(){return CollapseButtonBase},n:function(){return CollapseButton}});var t=n(85893),i=n(98077),s=n(67294),r=n(86363),l=n.n(r),o=n(78410);function CollapseButton(e){let{isCollapsed:a,isInCanvas:n,setIsCollapsed:i}=e;(0,s.useEffect)(()=>{n&&i(n)},[n,i]);let r=(0,s.useCallback)(()=>{i(!a)},[a,i]);return(0,t.jsx)(CollapseButtonBase,{isCollapsed:a,onClick:r})}let CollapseButtonBase=e=>{let{isCollapsed:a,onClick:n,isDisabled:s}=e;return(0,t.jsx)(o.Z,{as:"button",theme:"ghost",size:"sm","aria-label":a?"Expand preview":"Collapse preview",showIconOnly:"always",iconLeft:a?(0,t.jsx)(i.ed,{className:l().rotate270}):(0,t.jsx)(i.ed,{className:l().rotate90}),onClick:n,isDisabled:s})}},51667:function(e,a,n){"use strict";n.d(a,{r:function(){return PreviewHeaderBase}});var t=n(85893),i=n(86363),s=n.n(i);let PreviewHeaderBase=e=>(0,t.jsxs)("div",{className:s().header,children:[(0,t.jsx)("div",{className:s().headerLeft,children:(0,t.jsx)("p",{className:s().headerLeftTitle,children:e.title})}),(0,t.jsx)("div",{className:s().headerRight,children:e.rightChildren})]})},91917:function(e,a,n){"use strict";n.d(a,{L:function(){return SaveAsFileDropdownMenuItem}});var t=n(85893),i=n(98077),s=n(67294),r=n(22120),l=n(86363),o=n.n(l),d=n(30038),c=n(77338),m=n(83169);function SaveAsFileDropdownMenuItem(e){let{getFileDownloadInfo:a,logger:n}=e,{t:l}=(0,r.$G)(),u=(0,s.useCallback)(()=>{let e=a();if(!e){console.error("Preview not ready...");return}setTimeout(()=>{!function(e){let a=new Blob([e.fileContents],{type:e.mimeType}),n=URL.createObjectURL(a),t=document.createElement("a");t.href=n,t.download=e.fileNameWithExtension,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}(e),n.logPreviewInteraction(c.Z.save_as_file),n.logAction(d.Z.save_preview)},0)},[a,n]);return(0,t.jsxs)(m.ZP,{onClick:u,shrink:!0,children:[(0,t.jsx)(i.Dj,{size:"md",className:o().icon}),(0,t.jsx)("p",{children:l("Save as file")})]})}},31198:function(e,a,n){"use strict";n.d(a,{T:function(){return ShareButton},v:function(){return ShareButtonBase}});var t=n(85893),i=n(98077),s=n(67172),r=n(67294),l=n(22120),o=n(78410),d=n(8583),c=n(27382),m=n(30038),u=n(77338),g=n(34389),p=n(19673);function ShareButton(e){let{className:a,logger:n,disabled:i,messageId:s,codeblockIdx:l,showIconOnly:o="compact-below",icon:d,theme:c}=e,[g,k]=(0,p.Z)(),h=(0,r.useCallback)(()=>g({messageId:s,codeblockIdx:l,onCompleted:()=>{n.logPreviewInteraction(u.Z.share),n.logAction(m.Z.share_preview)}}),[l,g,n,s]);return(0,t.jsx)(ShareButtonBase,{className:a,shareUrl:h,isDisabled:k||i,showIconOnly:o,icon:d,theme:c})}function ShareButtonBase(e){let{className:a,shareUrl:n,isDisabled:m,showIconOnly:u,icon:p,theme:k}=e,h=(0,d.ZP)(),{t:f}=(0,l.$G)(),_=(0,r.useCallback)(async()=>{let e="function"==typeof n?n():n;await (0,c.vQ)(e)&&h({type:d.pC.success,content:f("Copied link to clipboard.")})},[n,h,f]),F=(0,g.C)(),b=f("Share"),[v,S]=(0,r.useState)(null);return(0,t.jsxs)("div",{className:a,children:[(0,t.jsx)(o.Z,{as:"button",theme:k||"ghost",size:"sm",iconLeft:p||(0,t.jsx)(i.MS,{}),showIconOnly:F?"always":u,"aria-label":b,isDisabled:m,onClick:_,ref:S,children:b}),(0,t.jsx)(s.u,{anchorRef:v,label:b})]})}},97057:function(e,a,n){"use strict";n.d(a,{X:function(){return PreviewDropdownButton}});var t=n(85893),i=n(22120),s=n(85832),r=n(45193);function PreviewDropdownButton(e){let{menuBody:a,isOpen:n,setIsOpen:l}=e,{t:o}=(0,i.$G)(),d=o("More options");return(0,t.jsx)(r.Z,{size:"sm",tooltipLabel:d,setMenuOpen:l,menuOpen:n,alignment:"left",menuBody:(0,t.jsx)(s.Z,{children:a})})}},86880:function(e,a,n){"use strict";n.d(a,{Z:function(){return RefreshDropdownMenuItem}});var t=n(85893),i=n(98077),s=n(22120),r=n(12251),l=n(86363),o=n.n(l),d=n(83169);function RefreshDropdownMenuItem(e){let{onClick:a}=e,{t:n}=(0,s.$G)();return(0,t.jsxs)(d.ZP,{onClick:a,shrink:!0,children:[(0,t.jsx)(i.tr,{size:"md",className:(0,r.$)(o().icon)}),(0,t.jsx)("p",{children:n("Refresh")})]})}},39170:function(e,a,n){"use strict";n.d(a,{D:function(){return ToggleConsoleDropdownMenuItem}});var t=n(85893),i=n(98077),s=n(22120),r=n(12251),l=n(86363),o=n.n(l),d=n(83169);function ToggleConsoleDropdownMenuItem(e){let{isConsoleOpen:a,toggleConsole:n}=e,{t:l}=(0,s.$G)();return(0,t.jsxs)(d.ZP,{onClick:n,shrink:!0,children:[(0,t.jsx)(i.tq,{size:"md",className:(0,r.$)(o().icon)}),(0,t.jsx)("p",{children:l(a?"Hide console":"Show console")})]})}},19673:function(e,a,n){"use strict";var t=n(67294),i=n(22120),s=n(22578),r=n(8583);a.Z=()=>{let[e,a]=(0,s.useMutation)(n(64773)),{t:l}=(0,i.$G)(),o=(0,r.ZP)(),d=(0,t.useCallback)(async a=>{let{messageId:n,codeblockIdx:t,onCompleted:i}=a,s=new Promise((a,s)=>{e({variables:{messageId:n,index:t},onCompleted:e=>{var n;let t=null===(n=e.sharePreviewFromMessage.sharedPreview)||void 0===n?void 0:n.shareUrl;if(!t){s(),o({type:r.pC.warning,content:l("Something went wrong.")});return}a(t),null==i||i()}})});return s},[o,e,l]);return[d,a]}},60919:function(e,a,n){"use strict";n.d(a,{T:function(){return logToActionLogUsingPreviewInteraction}});var t=n(9729),i=n(40258);let logToActionLogUsingPreviewInteraction=e=>{let a=e.preview_language;(0,t.Z)("poe/action_log",{...e,action_metadata:{preview_language:a,preview_type:Object.hasOwn(e,"codeblock_index")?i.Z.codeblock:i.Z.raw_html}})};a.Z=e=>(0,t.Z)("poe/poe_preview_interaction",e)},45444:function(e,a,n){"use strict";n.d(a,{Os:function(){return useOpenUrlBaseProps},te:function(){return useOpenUrlProps}});var t=n(85893),i=n(98077),s=n(67294),r=n(22120),l=n(78410),o=n(73337),d=n(12251),c=n(57069),m=n(77338),u=n(8968),g=n(58595),p=n.n(g),useColoreScheme=function(){let[e,a]=(0,s.useState)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");return(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),handleChange=e=>{a(e.matches?"dark":"light")};return handleChange(e),e.addEventListener("change",handleChange),()=>{e.removeEventListener("change",handleChange)}},[]),e};let useOnVisible=(e,a)=>{let n=(0,s.useRef)(!1),t=(0,s.useRef)(a);t.current=a,(0,s.useEffect)(()=>{let a=new IntersectionObserver(e=>{e[0].isIntersecting&&!n.current&&(t.current(),n.current=!0)});return e.current&&a.observe(e.current),()=>a.disconnect()},[e])},useIsScrollable=e=>{let[a,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let a=e.current;a&&n(a.scrollHeight>a.clientHeight)},[e]),a},useIsAtTopOfScrollView=e=>{let[a,n]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let onScroll=()=>{let a=e.current;a&&n(a.scrollTop<=15)},a=e.current;return a&&(a.addEventListener("scroll",onScroll),onScroll()),()=>null==a?void 0:a.removeEventListener("scroll",onScroll)},[e]),a},useForceInvertedColorSchemeClassName=()=>{let e=(0,c.Fg)(),a=null==e?void 0:e.theme,n=useColoreScheme();return"dark"===a?p().forceLight:"light"===a?p().forceDark:"dark"===n?p().forceLight:p().forceDark},OpenUrlOverlay=e=>{let{url:a,onConfirmOpenUrl:n,onCancel:c,logger:g}=e,{t:k}=(0,r.$G)(),h=(0,s.useRef)(null),f=useIsScrollable(h),_=useIsAtTopOfScrollView(h),F=useForceInvertedColorSchemeClassName(),b=(0,s.useCallback)(()=>{h.current&&h.current.scrollTo({top:h.current.scrollHeight,behavior:"smooth"})},[]),v=(0,s.useCallback)(()=>{g.logPreviewInteraction(m.Z.open_external_link_modal_impression)},[g]);return useOnVisible(h,v),(0,t.jsx)(u.Z,{icon:(0,t.jsx)(o.Z,{linked:!1,className:p().logo}),text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:p().title,children:k("Opening an external link")}),(0,t.jsx)("p",{className:p().description,children:k("This application is taking you to the following URL.")}),(0,t.jsxs)("div",{className:p().scrollContainerWrapper,children:[(0,t.jsx)("div",{className:p().borderContainer,children:(0,t.jsx)("div",{className:p().scrollContainer,ref:h,children:(0,t.jsx)("p",{className:p().link,children:a})})}),f&&_&&(0,t.jsx)("div",{className:p().scrollIndicator,children:(0,t.jsx)(l.Z,{as:"button",theme:"secondary",className:(0,d.$)(p().scrollDownButton,F),iconLeft:(0,t.jsx)(i.BD,{}),onClick:b,size:"sm",children:k("Scroll down to see more")})})]})]}),actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{as:"button",theme:"primary",onClick:n,children:k("Open link")}),(0,t.jsx)(l.Z,{as:"button",theme:"outline",onClick:c,children:k("Cancel")})]})})};function useOpenUrlProps(e,a){return useOpenUrlBaseProps(e,a)}function useOpenUrlBaseProps(e,a){let[n,i]=(0,s.useState)(null),r=(0,s.useCallback)(e=>{var a;if(a=e.url,!["http","https","mailto","tel","sms"].some(e=>a.startsWith(e+":"))){console.error("Invalid URL scheme",e.url);return}if(function(e){try{let a=new URL(e),n=["http://poe.com","https://poe.com"].includes(a.origin);return n}catch(e){return console.error("Unable to parse url"),!1}}(e.url)){window.open(e.url,"_blank");return}i(e.url)},[]),l=(0,s.useCallback)(()=>{n&&(window.open(n,"_blank"),i(null),a.logPreviewInteraction(m.Z.accept_open_external_link))},[n,a]),o=(0,s.useCallback)(()=>{i(null),a.logPreviewInteraction(m.Z.reject_open_external_link)},[a]);(0,s.useEffect)(()=>{i(null)},[e]);let d=n?(0,t.jsx)(OpenUrlOverlay,{url:n,onConfirmOpenUrl:l,onCancel:o,logger:a}):null;return{openUrlOverlay:d,onOpenUrl:r}}},86023:function(e,a,n){"use strict";n.d(a,{E:function(){return openPreviewInNewTab},d:function(){return useNewTabPreviewInfo}});var t=n(11163),i=n(67294),s=n(4694);let r=function(){try{return new BroadcastChannel("preview_new_tab_communication")}catch(e){return console.error("Failed to create broadcast channel",e),null}}(),l=new Map,o=new Map,d=new Map;function openPreviewInNewTab(e){let a=Math.floor(1e3*Math.random())+"";l.set(a,e),window.open("/preview/new_tab?local=".concat(a),"_blank")}function useNewTabPreviewInfo(){let[e,a]=(0,i.useState)("loading"),{query:n}=(0,t.useRouter)(),l=n.local;if(!l)throw new s.NotFound;return(0,i.useEffect)(()=>{let e=d.get(l);if(e){a(e);return}let n=setTimeout(()=>{a("does_not_exist")},3e3);if(o.set(l,e=>{clearTimeout(n),a(e)}),!r)throw Error("Broadcast channel should be defined in browser environment");return r.postMessage({type:"ready",fromTabId:l}),()=>{o.delete(l),clearTimeout(n)}},[l]),e}r&&(r.onmessage=e=>{if("ready"===e.data.type){let a=e.data,n=l.get(a.fromTabId);if(!n)return;let t={type:"preview_data",previewData:n,forTabId:a.fromTabId};r.postMessage(t)}else if("preview_data"===e.data.type){var a;let n=e.data;null===(a=o.get(n.forTabId))||void 0===a||a(e.data.previewData),d.set(n.forTabId,n.previewData)}})},39781:function(e,a,n){"use strict";n.d(a,{K:function(){return useConsoleToggle}});var t=n(67294);let useConsoleToggle=function(e){let{autoOpenOnError:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{autoOpenOnError:!0},[n,i]=(0,t.useState)(void 0),s=void 0===n?e.some(e=>{let{type:a}=e;return"error"===a})&&a:n,r=(0,t.useCallback)(()=>{i(!s)},[s]);return{isConsoleOpen:s,toggleConsole:r}}},36383:function(e,a,n){"use strict";var t=n(67294);a.Z=()=>{let e=(0,t.useRef)(null),a=(0,t.useCallback)(a=>{let{fileContents:n,fileExtension:t}=a;e.current={fileContents:n,fileNameWithExtension:"poe-preview."+t,mimeType:"text/html"}},[]),n=(0,t.useCallback)(()=>e.current,[]);return{onFileContentsForDownload:a,getFileDownloadInfo:n}}},6305:function(e,a,n){"use strict";n.d(a,{R:function(){return useHandleCopyToClipboardOnDesktopApp}});var t=n(67294),i=n(23595),s=n(64516);let useHandleCopyToClipboardOnDesktopApp=()=>{let e=(0,s.F)(),a=(0,t.useCallback)(a=>{(0,i.P)(e)&&navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(a.text)},[e]);return a}},4895:function(e,a,n){"use strict";var t=n(67294);a.Z=e=>{let{onLoad:a}=e,[n,i]=(0,t.useState)(void 0),s=(0,t.useCallback)(e=>{let{height:a}=e;i(a)},[]),r=(0,t.useCallback)(e=>{let{height:n}=e;null==a||a(),s({height:n})},[s,a]),l=(0,t.useMemo)(()=>n?{height:n}:void 0,[n]);return{style:l,onLoaded:r,onResize:s}}},51882:function(e,a,n){"use strict";n.d(a,{T:function(){return sendResponse}});var t=n(34478);function sendResponse(e,a,n,i){return(0,t.q$)(e,i,{source:"poeFrame",type:"miniAppAPI",subType:"response",requestName:a.requestName,requestId:a.requestId,data:n})}},58705:function(e,a,n){"use strict";var t=n(67294),i=n(34478);a.Z=function(e,a,n){let{inline:s=!0,withConsole:r=!0,withDomContentLoadedEvent:l=!0,allowDownloads:o=!1,interceptCopyEvents:d=!1,useInFrameCanvasServerRelay:c=!1,linkInterceptionBehavior:m="csp",debugMode:u=!1,datastoreBehavior:g="disabled",contentSource:p}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},k=(0,t.useCallback)(t=>{(0,i.q$)(t,e,{source:"poeFrame",type:"content",content:a,contentType:n,inline:s,miniApp:!0,withConsole:r,withDomContentLoadedEvent:l,allowDownloads:o,linkInterceptionBehavior:m,interceptCopyEvents:d,relayEnabled:c,debugMode:u,datastoreBehavior:g,contentSource:p})},[e,a,n,s,r,l,o,m,d,u,g,p,c]);return k}},63266:function(e,a,n){"use strict";var t=n(67294),i=n(73331);a.Z=e=>{let[a,n]=(0,t.useState)([]),s=(0,t.useCallback)(()=>{n([])},[]),r=(0,t.useCallback)(e=>{let{args:a}=e;n(e=>[...e,{type:"info",message:a.join(" ")}])},[]),l=(0,t.useCallback)(e=>{let{args:a}=e;n(e=>[...e,{type:"warning",message:a.join(" ")}])},[]),o=(0,t.useCallback)(a=>{let{args:t}=a,s=t.join(" ");if(e){let e=Error(s);e.name="CanvasIframeConsoleError",(0,i.H)(e)}n(e=>[...e,{type:"error",message:s}])},[e]),d=(0,t.useCallback)(a=>{let{message:t}=a;if(e){let e=Error(t);e.name="CanvasIframeUncaughtError",(0,i.H)(e)}n(e=>[...e,{type:"error",message:t}])},[e]);return{log:a,clearLog:s,onLog:r,onWarn:l,onError:o,onUncaughtError:d}}},41156:function(e,a,n){"use strict";n.d(a,{B:function(){return usePreviewIframeImpressionLogger}});var t=n(67294),i=n(12107),s=n(77338);let usePreviewIframeImpressionLogger=(e,a)=>{let{ref:n}=(0,i.Z)(a,{additionalLogData:()=>e?{...e.getData(),entry_type:s.Z.viewable_impression}:{}});return(0,t.useEffect)(()=>{e&&e.logPreviewInteraction(s.Z.impression)},[e]),n}},64468:function(e,a,n){"use strict";n.d(a,{X:function(){return usePreviewIframeUrl}});var t=n(22578);function usePreviewIframeUrl(e){let a=(0,t.useFragment)(n(54599),e);return a.canvasPreviewUrlOverride||"https://puc.poecdn.net/preview.69a3eca84a6dd594f38a.html"}n(44311)},12001:function(e,a,n){"use strict";var t=n(67294),i=n(9729),s=n(77338);a.Z=(e,a)=>{let[n,r]=(0,t.useState)(!0),[l,o]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),m=(0,t.useCallback)(()=>{r(!1),a&&a.logPreviewInteraction(s.Z.disable_safemode)},[a]),u=(0,t.useCallback)(e=>{let{blockedURI:a,disposition:n,documentURI:t,effectiveDirective:s,originalPolicy:r,referrer:l,statusCode:d,violatedDirective:c}=e;(0,i.Z)("poe/preview_csp_violation_report",{"blocked-uri":a,disposition:n,"document-uri":t,"effective-directive":s,"original-policy":r,referrer:l,"status-code":d,"violated-directive":c}),o(!0)},[]),g=(0,t.useCallback)(()=>{c(!0)},[]);return(0,t.useEffect)(()=>{d&&c(!1),l&&o(!1)},[e]),{safeMode:n,securityPolicyViolated:l,shouldShowSafeModeOverlay:n&&l&&!d,disableSafeMode:m,onSecurityPolicyViolation:u,onSafeModeOverlayDismiss:g}}},67209:function(e,a,n){"use strict";var t=n(67294),i=n(58143),s=n(9729);a.Z=e=>{let{language:a,contentType:n}=e,r=(0,t.useRef)(0),l=(0,i.E)();(0,t.useEffect)(()=>{r.current=new Date().getTime()},[]);let o=(0,t.useCallback)(()=>{let e=new Date().getTime()-r.current;(0,s.Z)("poe/preview_speed",{page_type:l,preview_language:a,preview_content_type:n,timing:e})},[a,n,l]);return{stopTimer:o}}},65478:function(e,a,n){"use strict";n.d(a,{J:function(){return useRefresh}});var t=n(67294);let useRefresh=e=>{let[a,n]=(0,t.useState)(0),i=(0,t.useCallback)(()=>{e(),n(e=>e+1)},[e]);return[a,i]}},52344:function(e,a,n){"use strict";n.d(a,{Z:function(){return share_ShareIcon}});var t,i,s,r=n(85893),l=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var share=function(e){return l.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=l.createElement("path",{d:"M7.5 8c.24 0 .47-.08.66-.25L11 5.23v9.52c0 .55.45 1 1 1s1-.45 1-1V5.23l2.84 2.52c.19.17.42.25.66.25.28 0 .55-.11.75-.34a.998.998 0 0 0-.08-1.41l-4.5-4c-.04-.03-.08-.04-.12-.07-.05-.03-.08-.07-.13-.09-.02-.01-.04-.01-.06-.02-.05-.02-.11-.03-.17-.04-.05-.01-.1-.03-.16-.03-.01.01-.02 0-.03 0-.01 0-.02.01-.03.01-.05 0-.1.02-.16.03-.06.01-.11.02-.17.04-.02.01-.04.01-.06.02-.05.02-.09.06-.13.09-.04.03-.09.04-.12.07l-4.5 4c-.41.37-.45 1-.08 1.41.2.22.47.33.75.33Z"})),i||(i=l.createElement("path",{d:"M18.5 9H16c-.55 0-1 .45-1 1s.45 1 1 1h1.5v8h-11v-8H8c.55 0 1-.45 1-1s-.45-1-1-1H5.5c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h13c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1Z"})))};function shareAndroid_extends(){return(shareAndroid_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var shareAndroid=function(e){return l.createElement("svg",shareAndroid_extends({viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.25 5.25a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5ZM15.167 7a4.083 4.083 0 1 1 1.33 3.022l-4.947 2.963c.17.666.17 1.364 0 2.03l4.958 2.975a4.083 4.083 0 1 1-1.201 1.995l-4.959-2.975a4.083 4.083 0 1 1 0-6.02l4.959-2.975A4.08 4.08 0 0 1 15.167 7Zm-7.584 5.25a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm11.667 7a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z"})))},o=n(23595),d=n(64516),share_ShareIcon=e=>{let{className:a}=e,n=(0,d.F)(),t=(0,o.I6)(n)?shareAndroid:share;return(0,r.jsx)(t,{className:a})}},85972:function(e,a,n){"use strict";var t=n(85893),i=n(41664),s=n.n(i),r=n(67294),l=n(22120),o=n(22578),d=n(38033),c=n(35542),m=n(11803),u=n(8583),g=n(6537),p=n(12251),k=n(6940),h=n(41730),f=n.n(h),_=n(77434);a.Z=e=>{let{poeUser:a,showFollowButton:i}=e,h=(0,o.useFragment)(n(30679),a),{t:F}=(0,l.$G)(),{id:b,uid:v,handle:S,fullName:C,viewerIsFollowing:M,isDeleted:y}=h,{isInReferencedMessage:w}=(0,d.Y)();(0,k.Zo)(v);let I=(0,u.ZP)(),[T]=(0,o.useMutation)(n(15708)),x=(0,r.useCallback)(()=>{T({variables:{targetUid:v,entryType:_.Z.chat_page},optimisticUpdater:e=>{var a;null===(a=e.get(b))||void 0===a||a.setValue(!M,"viewerIsFollowing")},onCompleted:()=>{I({type:u.pC.success,content:F("You followed {{fullName}}",{fullName:C})})},onError:()=>{I({type:u.pC.error,content:F("Unable to follow this user")})}})},[T,v,b,M,I,F,C]),B=i&&!M&&!y&&(0,t.jsxs)(t.Fragment,{children:["•",(0,t.jsx)(c.j,{onClick:x,className:f().followButton,children:F("Follow")})]}),L=(0,t.jsxs)("div",{className:(0,p.$)(f().userInfoContainer,w&&f().smallSemiboldText),children:[(0,t.jsx)(g.Z,{user:h,size:"xx-sm"}),C,(0,t.jsx)(m.Z,{node:h})]});return(0,t.jsxs)("div",{className:f().container,children:[!w&&S?(0,t.jsx)(s(),{href:"/".concat(S),children:L}):L,B]})}},76861:function(e,a,n){"use strict";n.d(a,{L:function(){return useCanvasInteractionLogger}});var t,i,s=n(67294),r=n(22578),l=n(58143);(t=i||(i={})).message_codeblock="message_codeblock",t.canvas_bot="canvas_bot";var o=i,d=n(29664),c=n(9729);function useCanvasInteractionLogger(e,a){let t=(0,r.useFragment)(n(66646),e),i=(0,l.E)(),m=(0,r.useFragment)(n(78573),a),u=(0,s.useMemo)(()=>{let e=String(t.chatId),a=e.startsWith("OPTIMISTIC_CHAT_"),n={chat_id:a?null:t.chatId,canvas_language:m.previewContentObject.language,canvas_content_type:m.previewContentObject.contentType,page_type:i||d.Z.unknown,canvas_tracking_id:m.id,entry_metadata:a?{optimistic_chat_id:e}:{}};if(m.messageId){var s;return{...n,canvas_source_type:o.message_codeblock,codeblock_index:null!==(s=m.codeblockIndex)&&void 0!==s?s:0,message_id:m.messageId}}return m.botId?{...n,canvas_source_type:o.canvas_bot,bot_id:m.botId}:null},[m,i,t.chatId]),g=(0,s.useRef)(u);g.current=u;let p=(0,s.useMemo)(()=>({logPreviewInteraction:e=>{var a;if(!g.current){console.error("Something went wrong. No interaction data found.");return}a=g.current,(0,c.Z)("poe/poe_canvas_interaction",{...a,entry_type:e})},logAction:e=>{(0,c.Z)("poe/action_log",{...g.current,action_type:e})},getData:()=>{var e;return null!==(e=g.current)&&void 0!==e?e:{}}}),[g]);return p}},11238:function(e,a,n){"use strict";n.d(a,{MF:function(){return getDateStringForMessageWithCache},x3:function(){return getSameDayMessageTupleGroups}});let getDateStringForMessageWithCache=(e,a,n)=>{let t=n.get(e.messageId);return t||(a.setTime(e.creationTime/1e3),t=a.toDateString(),n.set(e.messageId,t)),t},splitTupleByDate=(e,a,n)=>{if(1===e.length)return[e];let t=new Map;for(let i of e){let e=getDateStringForMessageWithCache(i,a,n);t.has(e)||t.set(e,[]),t.get(e).push(i)}if(1===t.size)return[e];let i=[];return Array.from(t.values()).forEach(e=>{if(e.length>0){let a=[e[0]];for(let n=1;n<e.length;n++)a.push(e[n]);i.push(a)}}),i},groupTuplesByDay=(e,a,n)=>{if(0===e.length)return[];let t=new Map;for(let i of e){let e=getDateStringForMessageWithCache(i[0],a,n);t.has(e)||t.set(e,[]),t.get(e).push(i)}return Array.from(t.values())},getSameDayMessageTupleGroups=(e,a,n)=>{if(0===e.length)return[];let t=[];for(let i of e){let e=splitTupleByDate(i,a,n);t.push(...e)}return groupTuplesByDay(t,a,n)}},95358:function(e,a,n){"use strict";n.d(a,{K:function(){return t},v:function(){return i}});let t="p-lat",i=30},18815:function(e,a,n){"use strict";n.d(a,{i:function(){return i}});var t=n(82168);let i={[t.Z.like]:"\uD83D\uDC4D",[t.Z.dislike]:"\uD83D\uDC4E",[t.Z.heart]:"❤️",[t.Z.laughing]:"\uD83D\uDE02",[t.Z.surprised]:"\uD83D\uDE2E",[t.Z.sad]:"\uD83D\uDE22"}},48901:function(e,a,n){"use strict";n.d(a,{n:function(){return getMessageElementId}});let getMessageElementId=e=>"message-".concat(e)},96094:function(e,a,n){"use strict";n.d(a,{T:function(){return useShareMessages}});var t,i,s=n(85893),r=n(41143),l=n.n(r),o=n(67294),d=n(22120),c=n(22578),m=n(8583),u=n(27382),g=n(18462),p=n(38357);(t=i||(i={})).success="success",t.success_user_reached_message_limit_for_share_all="success_user_reached_message_limit_for_share_all",t.cannot_include_hard_deleted_bot_messages="cannot_include_hard_deleted_bot_messages";var k=i;let useShareMessages=e=>{let{chatId:a,selectedIds:t,isShareAllRecentMessages:i,setIsShareMessagesInProgress:r=()=>{}}=e,{setSelectionMode:h,clearSelection:f}=(0,g.ZP)(),_=(0,m.ZP)(),{t:F}=(0,d.$G)(),[b,v]=(0,c.useMutation)(n(33866));(0,o.useEffect)(()=>{r(v)},[v,r]);let S=(0,o.useCallback)(async()=>{if(a||l()(!1,"chatId is required. chatId would be undefined if we somehow got here in an optimistic chat but that should be blocked"),t&&i?l()(!1,"selectedIds and isShareAllRecentMessages cannot both be true"):t||i||l()(!1,"selectedIds and isShareAllRecentMessages cannot both be false"),t&&0===t.length){_({content:(0,s.jsx)("p",{children:F("You must select at least one message to share.")}),type:m.pC.error});return}let e="",n=new Promise((n,s)=>{b({variables:{chatId:a,messageIds:t,isShareAllRecentMessages:i},onCompleted:a=>{var t,i,r,l;((null==a?void 0:null===(t=a.messagesShare)||void 0===t?void 0:t.status)==k.success||(null==a?void 0:null===(i=a.messagesShare)||void 0===i?void 0:i.status)==k.success_user_reached_message_limit_for_share_all||a.messagesShare.shareCode)&&n((0,p.qm)("/s/".concat(a.messagesShare.shareCode))),s(null==a?void 0:null===(r=a.messagesShare)||void 0===r?void 0:r.status),e=null==a?void 0:null===(l=a.messagesShare)||void 0===l?void 0:l.statusMessage},onError:a=>{s(a),e=F("There was an error generating the share URL.")}})});t&&(h(g.oW.none),f()),await (0,u.n9)(n,!0,()=>_({content:(0,s.jsx)("p",{children:e||F("There was an error copying the share URL to your clipboard. Please try again later.")}),type:m.pC.error}))&&_({content:(0,s.jsx)("p",{children:e||F("Copied link to clipboard.")}),type:m.pC.success})},[h,f,t,b,i,_,F,a]);return S}},86927:function(e,a){"use strict";var n;(n||(n={})).compare="compare",a.Z=n},82168:function(e,a){"use strict";var n,t;(t=n||(n={})).like="like",t.dislike="dislike",t.heart="heart",t.laughing="laughing",t.surprised="surprised",t.sad="sad",a.Z=n},52612:function(e,a){"use strict";var n,t;(t=n||(n={})).no_limit="no_limit",t.soft_limit="soft_limit",t.hard_limit="hard_limit",t.subscriber_access="subscriber_access",a.Z=n},77434:function(e,a){"use strict";var n,t;(t=n||(n={})).chat_page="chat_page",t.user_profile_page="user_profile_page",t.follower_list="follower_list",t.following_list="following_list",t.NUX_find_people_page="NUX_find_people_page",t.profile_find_people_page="profile_find_people_page",a.Z=n},84638:function(e,a){"use strict";var n,t;(t=n||(n={})).html="html",t.react="react",t.svg="svg",a.Z=n},77338:function(e,a){"use strict";var n,t;(t=n||(n={})).impression="impression",t.viewable_impression="viewable_impression",t.disable_safemode="disable_safemode",t.share="share",t.save_as_file="save_as_file",t.open_in_new_tab="open_in_new_tab",t.confirm_preview_triggered_message="confirm_preview_triggered_message",t.reject_preview_triggered_message="reject_preview_triggered_message",t.open_preview_in_canvas="open_preview_in_canvas",t.auto_open_preview_in_canvas="auto_open_preview_in_canvas",t.viewable_impression_10s="viewable_impression_10s",t.viewable_impression_30s="viewable_impression_30s",t.viewable_impression_60s="viewable_impression_60s",t.viewable_impression_300s="viewable_impression_300s",t.open_external_link_modal_impression="open_external_link_modal_impression",t.accept_open_external_link="accept_open_external_link",t.reject_open_external_link="reject_open_external_link",t.show_canvas_using_fab="show_canvas_using_fab",t.hide_canvas="hide_canvas",t.close_canvas_tab="close_canvas_tab",t.switch_canvas_tab="switch_canvas_tab",a.Z=n},40258:function(e,a){"use strict";var n,t;(t=n||(n={})).codeblock="codeblock",t.raw_html="raw_html",a.Z=n},66135:function(e){e.exports={wrapper:"AbsolutelyPositionedLoadingIndicator_wrapper__ZcNVT"}},24185:function(e){e.exports={banner:"AppPublishedBanner_banner__ltpxY",underline:"AppPublishedBanner_underline__UzsUx"}},44459:function(e){e.exports={"medium-below":"only screen and (max-width : 999px)",hideMediumBelow:"CanvasTab_hideMediumBelow__wj31D",container:"CanvasTab_container__cwK2N",iframe:"CanvasTab_iframe__KHPEV",hideIFrame:"CanvasTab_hideIFrame__f2ejd",banner:"CanvasTab_banner__hXGc_"}},37457:function(e){e.exports={"medium-below":"only screen and (max-width : 999px)",fab:"ShowCanvasFAB_fab__fW_xQ"}},42550:function(e){e.exports={hideMediumBelow:"CanvasHeader_hideMediumBelow__aBL_P",showMediumBelow:"CanvasHeader_showMediumBelow__jSTU9",hideCompactBelow:"CanvasHeader_hideCompactBelow__gpfDB",title:"CanvasHeader_title__8955n",sidebar:"CanvasHeader_sidebar__pYQlu",container:"CanvasHeader_container__bsC1J",iframe:"CanvasHeader_iframe__2pXYQ",header:"CanvasHeader_header__m3nlt",headerGroup:"CanvasHeader_headerGroup__VJZle",headerGroupRight:"CanvasHeader_headerGroupRight___XUAa"}},74192:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)",hideCompactBelow:"ExpandCanvasButton_hideCompactBelow__FfUS1"}},45570:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)","medium-below":"only screen and (max-width : 999px)",sidebarMenuButton:"InCanvasToggleMenuButton_sidebarMenuButton__5kR3l",overlayMenuButton:"InCanvasToggleMenuButton_overlayMenuButton__ZlA9X"}},84669:function(e){e.exports={container:"CanvasLayout_container__jfgF_",body:"CanvasLayout_body__DRdsM"}},66743:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)","medium-below":"only screen and (max-width : 999px)",resizeHandleContainer:"CanvasSidebarLayout_resizeHandleContainer__Uyxbc","split-prioritize-canvas":"CanvasSidebarLayout_split-prioritize-canvas__odWxW","split-prioritize-chat":"CanvasSidebarLayout_split-prioritize-chat__exl_F",resizeHandle:"CanvasSidebarLayout_resizeHandle__hj9xO",resizeHandleInner:"CanvasSidebarLayout_resizeHandleInner__MnxkN",container:"CanvasSidebarLayout_container___UeKJ","canvas-full-width":"CanvasSidebarLayout_canvas-full-width__KN_uA","canvas-column":"CanvasSidebarLayout_canvas-column__nq0Pd","chat-column":"CanvasSidebarLayout_chat-column__h7mVE","canvas-column-wrapper":"CanvasSidebarLayout_canvas-column-wrapper__fOy34",disableTransition:"CanvasSidebarLayout_disableTransition__kWZaK"}},45044:function(e){e.exports={isResizing:"useResizeHandle_isResizing__LabyR"}},78714:function(e){e.exports={infiniteScrollContainer:"CanvasTabSelector_infiniteScrollContainer__o7lPf"}},14380:function(e){e.exports={container:"CanvasTabSelectorItem_container__6TRSl",primaryButton:"CanvasTabSelectorItem_primaryButton___CDXC",primaryButtonText:"CanvasTabSelectorItem_primaryButtonText__UcB57",closeButton:"CanvasTabSelectorItem_closeButton__QqRyN",divider:"CanvasTabSelectorItem_divider__2ePvL",activeIndicator:"CanvasTabSelectorItem_activeIndicator__PO60t"}},74804:function(e){e.exports={messageSubline:"ChatMessageSubline_messageSubline__NBdq4",messageSublineText:"ChatMessageSubline_messageSublineText__V1slg",alignLeft:"ChatMessageSubline_alignLeft__UCFra",alignRight:"ChatMessageSubline_alignRight__hcwE_"}},95474:function(e){e.exports={root:"ButtonGroup_root__jthB1"}},24113:function(e){e.exports={text:"checkbox_text__PtYHd",inputImage:"checkbox_inputImage__LWAWc",isChecked:"checkbox_isChecked__Bl3pv",isDisabled:"checkbox_isDisabled__bOKCs"}},91613:function(e){e.exports={label:"checkbox-and-radio_label__4Tf7Q",input:"checkbox-and-radio_input__X_Vcu",isDisabled:"checkbox-and-radio_isDisabled__jN6IM",inputImage:"checkbox-and-radio_inputImage__ennkz"}},58595:function(e){e.exports={logo:"OpenUrlOverlay_logo__Exq65",title:"OpenUrlOverlay_title__o__hy",description:"OpenUrlOverlay_description__tL6fG",link:"OpenUrlOverlay_link__qYP_w",forceLight:"OpenUrlOverlay_forceLight__IOIhu force-light",forceDark:"OpenUrlOverlay_forceDark__onBvc force-dark",scrollContainerWrapper:"OpenUrlOverlay_scrollContainerWrapper__Awe9U",scrollDownButton:"OpenUrlOverlay_scrollDownButton__u80ra",borderContainer:"OpenUrlOverlay_borderContainer__EIFGh",scrollContainer:"OpenUrlOverlay_scrollContainer___J98W",scrollIndicator:"OpenUrlOverlay_scrollIndicator__J7Ccv"}},25917:function(e){e.exports={title:"BotHeader_title__cURS_",boldTitle:"BotHeader_boldTitle__KgfYh",textContainer:"BotHeader_textContainer__kVf_I",tags:"BotHeader_tags___EL30",tag:"BotHeader_tag__SXTr9",subText:"BotHeader_subText__0Nkxq"}},9525:function(e){e.exports={wrapper:"BotMessageHeader_wrapper__gvvdw",clickableHeader:"BotMessageHeader_clickableHeader__PX8o7",smallSemiboldText:"BotMessageHeader_smallSemiboldText__Nr00p"}},78954:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)","medium-below":"only screen and (max-width : 999px)",section:"ChatFooterHoveringButtonSection_section__6i4Bc",left:"ChatFooterHoveringButtonSection_left__Lt5yM",center:"ChatFooterHoveringButtonSection_center__KuhMd",right:"ChatFooterHoveringButtonSection_right__Qbc1p"}},46297:function(e){e.exports={overflowHiddenWrapper:"ChatMessagesScrollWrapper_overflowHiddenWrapper__sCxq9",scrollableContainerWrapper:"ChatMessagesScrollWrapper_scrollableContainerWrapper__x8H60",startAtTop:"ChatMessagesScrollWrapper_startAtTop__Nwi73"}},87809:function(e){e.exports={emptyView:"ChatMessagesView_emptyView__HqDf7",infiniteScroll:"ChatMessagesView_infiniteScroll__vk3VX",messageTuple:"ChatMessagesView_messageTuple__Jh5lQ",tupleGroupContainer:"ChatMessagesView_tupleGroupContainer__LSCLm",largerGap:"ChatMessagesView_largerGap__hMKSc",loaderWrapper:"ChatMessagesView_loaderWrapper__XPhVQ",errorState:"ChatMessagesView_errorState__xXPE4",inviteSection:"ChatMessagesView_inviteSection__O3uzM"}},97665:function(e){e.exports={container:"ChatPageDeleteFooter_container__wvCLk"}},79767:function(e){e.exports={selectedCountText:"ChatPageFooterSelectedCount_selectedCountText__ajSLG"}},70554:function(e){e.exports={flexGrow:"ChatPageMain_flexGrow__UnM8q",dragDropTarget:"ChatPageMain_dragDropTarget__ToX_G"}},80378:function(e){e.exports={footer:"ChatPageMainFooter_footer__HBGcX",footerWrapper:"ChatPageMainFooter_footerWrapper__RH5Dq",footerInner:"ChatPageMainFooter_footerInner__BEj26",botAccessExplanation:"ChatPageMainFooter_botAccessExplanation__xCIbg",hide:"ChatPageMainFooter_hide__jkzYS"}},87095:function(e){e.exports={linkIcon:"ChatPageShareFooter_linkIcon__TMpqm",button:"ChatPageShareFooter_button__MkAyd",buttonWrapper:"ChatPageShareFooter_buttonWrapper__HSrZL",container:"ChatPageShareFooter_container__EKERG"}},44223:function(e){e.exports={container:"ContinueLastChat_container__ZS_3r",left:"ContinueLastChat_left___0Rco",title:"ContinueLastChat_title___Zftf",oldButton:"ContinueLastChat_oldButton__Lkuld",chevronButton:"ContinueLastChat_chevronButton__XzbBI"}},41480:function(e){e.exports={divider:"UnreadMessagesDivider_divider__D_Ez4",line:"UnreadMessagesDivider_line__6YaXw",text:"UnreadMessagesDivider_text__Hm1q2"}},94370:function(e){e.exports={icon:"PublishButtonGroup_icon__fpSZr",secondaryButton:"PublishButtonGroup_secondaryButton__2HTSd",dropdownMenuItem:"PublishButtonGroup_dropdownMenuItem__V5kOv"}},33952:function(e){e.exports={footer:"ChatMessageInputFooter_footer__v4dFF",warningBannerHolder:"ChatMessageInputFooter_warningBannerHolder__ue9r3",invalidMentionedBotWarning:"ChatMessageInputFooter_invalidMentionedBotWarning__h0xGh"}},63318:function(e){e.exports={userHintContainer:"ChatMessageInputUserHintButton_userHintContainer__TnOz4",userHintTypeText:"ChatMessageInputUserHintButton_userHintTypeText__NC1m9",userHintSeeTipsText:"ChatMessageInputUserHintButton_userHintSeeTipsText__m7aUd",chevronIcon:"ChatMessageInputUserHintButton_chevronIcon__L3ilu"}},17421:function(e){e.exports={container:"InputFooterReferencedMessageHeader_container__EkEXx",referencedMessage:"InputFooterReferencedMessageHeader_referencedMessage__L93Se",closeButton:"InputFooterReferencedMessageHeader_closeButton__1oVt_"}},79740:function(e){e.exports={suggestedRepliesPlaceholder:"ChatLastMessageArea_suggestedRepliesPlaceholder__tiEvU",actionBarPlaceholder:"ChatLastMessageArea_actionBarPlaceholder__DpYPO",actionBarAndFollowUpActionsPlaceholder:"ChatLastMessageArea_actionBarAndFollowUpActionsPlaceholder__VwsiG"}},11704:function(e){e.exports={chatMessage:"ChatMessage_chatMessage__xkgHx",messageOverflowButton:"ChatMessage_messageOverflowButton__8PaKN",alwaysVisibleMessageOverflowButton:"ChatMessage_alwaysVisibleMessageOverflowButton___SsuX",inBubbleButton:"ChatMessage_inBubbleButton__lvXY_",messageRow:"ChatMessage_messageRow__DHlnq",messageWrapper:"ChatMessage_messageWrapper__4Ugd6",messageSubline:"ChatMessage_messageSubline__qNToA",messageSublineRightSideMessage:"ChatMessage_messageSublineRightSideMessage__uRllC",messageSublineLeftSideMessage:"ChatMessage_messageSublineLeftSideMessage__2aPH9",rightSideMessageWrapper:"ChatMessage_rightSideMessageWrapper__r0roB",rightSideIdAnnotation:"ChatMessage_rightSideIdAnnotation__JBFma",commandMessageWrapper:"ChatMessage_commandMessageWrapper__zI76e",checkbox:"ChatMessage_checkbox__j0ClW",chatWelcomeViewWrapper:"ChatMessage_chatWelcomeViewWrapper__SWPtL",decreasedTopMargin:"ChatMessage_decreasedTopMargin__AsRz0"}},49091:function(e){e.exports={container:"ChatMessageContextMenu_container__zVl2O"}},15844:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)",hiddenOnMobile:"ChatMessageDate_hiddenOnMobile__wnFxf",hidden:"ChatMessageDate_hidden__vizVe"}},10582:function(e){e.exports={overflowButton:"ChatMessageOverflowButton_overflowButton__VGVM_",overflowButtonWrapper:"ChatMessageOverflowButton_overflowButtonWrapper__gzb2s"}},25483:function(e){e.exports={header:"ChatPageConversationStarters_header__h_x2j",conversationStarters:"ChatPageConversationStarters_conversationStarters__m5sHy",container:"ChatPageConversationStarters_container___D920"}},22782:function(e){e.exports={suggestedMessage:"ChatPageSuggestedMessage_suggestedMessage__NC0N9",bot:"ChatPageSuggestedMessage_bot__kjpfw"}},87935:function(e){e.exports={button:"UndoContextClearButton_button__Z0B1a"}},16527:function(e){e.exports={actionBar:"ChatMessageActionBar_actionBar__gyeEs",reverse:"ChatMessageActionBar_reverse__Nl_6_"}},78295:function(e){e.exports={container:"ChatMessageFollowupActions_container__0Mrhg"}},57887:function(e){e.exports={imageAttachmentsContainer:"FollowupActionImageSources_imageAttachmentsContainer__oENKO",imageAttachment:"FollowupActionImageSources_imageAttachment__e2vzz",botHandleContainer:"FollowupActionImageSources_botHandleContainer__jgD14",botHandle:"FollowupActionImageSources_botHandle__ZALv9",botPreviewContainer:"FollowupActionImageSources_botPreviewContainer__W0qs2"}},36249:function(e){e.exports={container:"ResendRemixFollowupButton_container__J48ou",promptContainer:"ResendRemixFollowupButton_promptContainer__8vM_4",followupButton:"ResendRemixFollowupButton_followupButton__FF081",followupButtonWithTitle:"ResendRemixFollowupButton_followupButtonWithTitle__Ev__0",left:"ResendRemixFollowupButton_left__dS_FL",right:"ResendRemixFollowupButton_right__du4Gd",rightRounded:"ResendRemixFollowupButton_rightRounded__W3o65",prompt:"ResendRemixFollowupButton_prompt__nje8B",truncatedPrompt:"ResendRemixFollowupButton_truncatedPrompt__Pr6qw",icon:"ResendRemixFollowupButton_icon__gPKAa",followUpActionIcon:"ResendRemixFollowupButton_followUpActionIcon__1tLQl",imageAttachment:"ResendRemixFollowupButton_imageAttachment__CAjOJ",attachmentsContainer:"ResendRemixFollowupButton_attachmentsContainer__8TUef",recommendedBotButton:"ResendRemixFollowupButton_recommendedBotButton__qKm24",botPromptContainer:"ResendRemixFollowupButton_botPromptContainer__jvtsq",mentionedBot:"ResendRemixFollowupButton_mentionedBot__TxQH_",specialSyntaxSection:"ResendRemixFollowupButton_specialSyntaxSection__nX_nw",parametersSection:"ResendRemixFollowupButton_parametersSection__zuLoS",spacingRight:"ResendRemixFollowupButton_spacingRight__4OjLb",botAndPromptContainer:"ResendRemixFollowupButton_botAndPromptContainer__2Ywgf"}},75789:function(e){e.exports={spinnerCircle:"AnimatedStopIcon_spinnerCircle__nkJKC",rotate:"AnimatedStopIcon_rotate__9Oq9M"}},51466:function(e){e.exports={"compact-below":"only screen and (max-width : 683px)",inviteSectionContainer:"ChatInviteSection_inviteSectionContainer__dKCIt",inviteSectionButton:"ChatInviteSection_inviteSectionButton__qqcUG"}},25012:function(e){e.exports={scrollSectionOverflow:"ChatPageMainColumn_scrollSectionOverflow__owAoH",column:"ChatPageMainColumn_column__ZWl1P"}},37675:function(e){e.exports={attachments:"Attachments_attachments__x_H2Q",attachment:"Attachments_attachment___L7ZA",audioAttachment:"Attachments_audioAttachment__ulliK",videoAttachment:"Attachments_videoAttachment__Oy67V"}},61258:function(e){e.exports={container:"CitationFooter_container__8djxJ",sourceButton:"CitationFooter_sourceButton__rdsOx"}},50455:function(e){e.exports={leftSideMessageHeader:"LeftSideMessageHeader_leftSideMessageHeader__5CfdD",clickableBotHeader:"LeftSideMessageHeader_clickableBotHeader__xzxSR",selectionModeMessageHeader:"LeftSideMessageHeader_selectionModeMessageHeader__Szoa_",headerWrapper:"LeftSideMessageHeader_headerWrapper__EpVkV"}},52683:function(e){e.exports={downloadImageButton:"Markdown_downloadImageButton__RCbDB",markdownContainer:"Markdown_markdownContainer__Tz3HQ"}},6103:function(e){e.exports={imageContainer:"MarkdownImage_imageContainer__rAeth",image:"MarkdownImage_image__3dBzJ",withPlaceholder:"MarkdownImage_withPlaceholder__SCN0A",placeholder:"MarkdownImage_placeholder__ZmySQ",downloadImageButton:"MarkdownImage_downloadImageButton__G4i1S",spin:"MarkdownImage_spin__izCcd"}},8044:function(e){e.exports={linkifiedLink:"MarkdownLink_linkifiedLink__BepcK"}},79568:function(e){e.exports={tableContainer:"MarkdownTable_tableContainer__2k5Kh"}},16729:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",rightSideMessageBubble:"Message_rightSideMessageBubble__ioa_i",positionRelative:"Message_positionRelative__rhTwC",leftSideMessageBubble:"Message_leftSideMessageBubble__VPdk6",errorBubble:"Message_errorBubble__Bl92G",breakLine:"Message_breakLine__Szhtx",chatBreak:"Message_chatBreak__WMd1Y",chatBreakLabel:"Message_chatBreakLabel___Nxrm",chatAnnouncementLabel:"Message_chatAnnouncementLabel__aaf2T",chatBreakLabelWithOverflowButton:"Message_chatBreakLabelWithOverflowButton__vLDgM",chatAnnouncement:"Message_chatAnnouncement__53BDu",rightSideOptimisticFooter:"Message_rightSideOptimisticFooter__PMqPL",leftSideOptimisticFooter:"Message_leftSideOptimisticFooter__3sP0D",row:"Message_row__ug_UU",rightSideMessageRow:"Message_rightSideMessageRow__23wdY",expander:"Message_expander__5gU_H",noSignIcon:"Message_noSignIcon__11Dy5",plaintext:"Message_plaintext__sTseT",rowWithFooter:"Message_rowWithFooter__FShU6",commandRow:"Message_commandRow__iyHMF",rightSideCommandRow:"Message_rightSideCommandRow__bh3dY",leftSideCommandRow:"Message_leftSideCommandRow__5ukfM",commandBotName:"Message_commandBotName__Va_LG",commandErrorFooter:"Message_commandErrorFooter__rXh54",messageMetadataContainer:"Message_messageMetadataContainer__nBPq7",messageMetadataText:"Message_messageMetadataText__FxY5_",messageSeenStateIcon:"Message_messageSeenStateIcon__Cl_ov",sendingIcon:"Message_sendingIcon__s_2X7",messageBubbleWrapper:"Message_messageBubbleWrapper__sEq8z",messageTextContainer:"Message_messageTextContainer__w64Sc",viewMoreButton:"Message_viewMoreButton__hixhw",viewMoreButtonContainer:"Message_viewMoreButtonContainer__QTl_p",viewMoreButtonContainerBackgroundPurpleFade:"Message_viewMoreButtonContainerBackgroundPurpleFade__AunR9",viewMoreButtonContainerBackgroundNeutralFade:"Message_viewMoreButtonContainerBackgroundNeutralFade__8mDKM",viewMoreButtonContainerBackgroundErrorFade:"Message_viewMoreButtonContainerBackgroundErrorFade__fSPCj",editing:"Message_editing__IVHG5",selectableText:"Message_selectableText__SQ8WH",spin:"Message_spin__3YP2l",parametersLink:"Message_parametersLink__9AUkI"}},32524:function(e){e.exports={container:"MessageDate_container__HJE_V"}},63605:function(e){e.exports={overflowActionsWrapper:"MessageOverflowActions_overflowActionsWrapper__uC5oj",accentContainer:"MessageOverflowActions_accentContainer__kl4s4",neutralContainer:"MessageOverflowActions_neutralContainer__RAZX6",errorContainer:"MessageOverflowActions_errorContainer___A_nD",hidden:"MessageOverflowActions_hidden__8x_8Y",visible:"MessageOverflowActions_visible__eGaI4"}},56199:function(e){e.exports={hiddenReactionCounts:"MessageReactionCounts_hiddenReactionCounts__YsZmk",reactionCounts:"MessageReactionCounts_reactionCounts__qjnjp",reactionCountsInner:"MessageReactionCounts_reactionCountsInner__VklXL",reactionCount:"MessageReactionCounts_reactionCount__e53fG",viewerReaction:"MessageReactionCounts_viewerReaction__NxG_w"}},59068:function(e){e.exports={container:"ReferencedMessage_container__TAeNk",containerVerticalMargin:"ReferencedMessage_containerVerticalMargin__iZPWf",cursorPointer:"ReferencedMessage_cursorPointer__oeh8F",leftSection:"ReferencedMessage_leftSection__SP26l",leftSectionWithAttachment:"ReferencedMessage_leftSectionWithAttachment__OkHkj",dimDark20:"ReferencedMessage_dimDark20__Obne4",backgroundMuted:"ReferencedMessage_backgroundMuted__e1Rlu",text:"ReferencedMessage_text__WuLdI",accentOnAccentWithOpacity:"ReferencedMessage_accentOnAccentWithOpacity__ZYQWw",foregroundMuted:"ReferencedMessage_foregroundMuted__4bH6W",attachmentSection:"ReferencedMessage_attachmentSection__lElPQ",inputHeaderAttachmentSection:"ReferencedMessage_inputHeaderAttachmentSection__VX2wm",imageAttachment:"ReferencedMessage_imageAttachment__mR3gB"}},56782:function(e){e.exports={container:"InfiniteScroll_container__PHsd4",horizontal:"InfiniteScroll_horizontal__i7SXE",pagingTrigger:"InfiniteScroll_pagingTrigger__cdz9I"}},87953:function(e){e.exports={videoContainer:"VideoPreview_videoContainer__9XliL",thumbnail:"VideoPreview_thumbnail__aZ9WZ",thumbnailLoader:"VideoPreview_thumbnailLoader__77vRv",buttonOverlay:"VideoPreview_buttonOverlay___Y5_f",playIcon:"VideoPreview_playIcon__16kYP"}},61302:function(e){e.exports={loadingContainer:"BarePreviewFrame_loadingContainer__QhIba"}},56505:function(e){e.exports={console:"PreviewConsole_console__uxLBu force-dark",consoleHeader:"PreviewConsole_consoleHeader__XWZnp",consoleHeaderText:"PreviewConsole_consoleHeaderText__aJAZ_",errorLabel:"PreviewConsole_errorLabel__VM27j",warningLabel:"PreviewConsole_warningLabel__mWehX",entries:"PreviewConsole_entries__mVMkb"}},28456:function(e){e.exports={container:"PreviewFrameContainer_container__DJX94"}},86363:function(e){e.exports={icon:"PreviewHeader_icon__T1QdC",header:"PreviewHeader_header__uch2J force-dark",headerLeftTitle:"PreviewHeader_headerLeftTitle__BoCF1",headerLeft:"PreviewHeader_headerLeft__aU8Mz",headerRight:"PreviewHeader_headerRight__GSGUL",openedInCanvasText:"PreviewHeader_openedInCanvasText__zceTx force-dark",rotate90:"PreviewHeader_rotate90__xpEGM",rotate270:"PreviewHeader_rotate270__n4LkD"}},92635:function(e){e.exports={frame:"PreviewIFrame_frame__J9ynf",disableClickCapture:"PreviewIFrame_disableClickCapture__iupC_",loadingDots:"PreviewIFrame_loadingDots__bR1tH",inline:"PreviewIFrame_inline__R9ONc",container:"PreviewIFrame_container__LZzCY",stackedChild:"PreviewIFrame_stackedChild__Fe_To"}},6560:function(e){e.exports={openHereButton:"PreviewOpenHereInsteadConfirmation_openHereButton__ZBGtg"}},9485:function(e){e.exports={wrapper:"PreviewOverlayLayout_wrapper__zxNOk",forceDark:"PreviewOverlayLayout_forceDark__jWZAU force-dark",wrapperInner:"PreviewOverlayLayout_wrapperInner__hm10d",isNarrow:"PreviewOverlayLayout_isNarrow__SPaJT",actions:"PreviewOverlayLayout_actions__mLNT7"}},76303:function(e){e.exports={logo:"PreviewRequestedMessageOverlay_logo__6YSq_"}},41730:function(e){e.exports={container:"UserMessageHeader_container__il_6D",userInfoContainer:"UserMessageHeader_userInfoContainer__N4Ca_",smallSemiboldText:"UserMessageHeader_smallSemiboldText__tGlPb",followButton:"UserMessageHeader_followButton__QF9cL"}}}]);