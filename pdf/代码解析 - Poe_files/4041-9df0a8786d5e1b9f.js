(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4041],{74214:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_GenericFileInfo_attachment",selections:[{kind:"FragmentSpread",name:"FileInfo_useName_attachment"},{kind:"FragmentSpread",name:"FileInfo_useMimeType_attachment"},{kind:"FragmentSpread",name:"FileInfo_useUrl_attachment"},{kind:"FragmentSpread",name:"FileInfo_useSize_attachment"},{kind:"FragmentSpread",name:"FileInfo_useIsLoading_messageAttachment"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="86cf4a30ad884b1eaada9fdb947967f4",t.default=a},40849:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_ImageInfo_attachment",selections:[{kind:"FragmentSpread",name:"FileInfo_useName_attachment"},{kind:"FragmentSpread",name:"FileInfo_useDisplayUrl_attachment"},{kind:"ScalarField",name:"url"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="13105856d51381b5a0cae8d80bc4d0a2",t.default=a},97702:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_attachment",selections:[{kind:"FragmentSpread",name:"FileInfo_useMimeType_attachment"},{kind:"FragmentSpread",name:"FileInfo_GenericFileInfo_attachment"},{kind:"FragmentSpread",name:"FileInfo_ImageInfo_attachment"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="b929cc33574e7123fb2b38376f100621",t.default=a},76810:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useDisplayUrl_attachment",selections:[{kind:"FragmentSpread",name:"FileInfo_useUrl_attachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="f4666f1ed84fa76ff32cdea3cf17fb0d",t.default=a},80874:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useIsLoading_messageAttachment",selections:[{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"};a.hash="6098b79cd856b6e809188cbe96e59d11",t.default=a},21558:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useMimeType_attachment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"}]}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="72c9f77a03b034ddde99b734afc3570f",t.default=a},8205:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useName_attachment",selections:[{kind:"ScalarField",name:"name"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="3d7c6e009705079c358a3fe4ae27e326",t.default=a},32515:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useSize_attachment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"size"}]}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="bb68e0a5ab9e1b762d5adf7c3ba2c952",t.default=a},49778:function(e,t,r){"use strict";r.r(t);let a={argumentDefinitions:[],kind:"Fragment",name:"FileInfo_useUrl_attachment",selections:[{kind:"ScalarField",name:"url"}],type:"Attachment",abstractKey:"__isAttachment"};a.hash="d96d0e0cb3c06b0a75db717b2ee05226",t.default=a},41012:function(e,t,r){"use strict";r.d(t,{WF:function(){return CustomUIMenu},qo:function(){return PopoverContextProvider},ZP:function(){return inputFooter_ChatMessageCustomUIButton}});var a=r(85893),n=r(98077),o=r(67172),l=r(67294),i=r(22120),s=r(49460),d=r(38401),c=r(13239),u=r.n(c),aspectRatio_AspectRatioControl=e=>{let{value:t,defaultValue:r,aspectRatios:n,onValueChange:o}=e,i=l.useMemo(()=>n.sort((e,t)=>t.width/t.height-e.width/e.height),[n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:u().container,children:(0,a.jsxs)(d.UG,{value:t,defaultValue:r,onValueChange:o,type:"radio",className:u().toggleGroup,children:[i.map((e,t)=>(0,a.jsxs)(d.GB,{value:e.value||"".concat(e.width,":").concat(e.height),className:u().toggleGroupButton,children:[(0,a.jsx)(AspectRatioPreview,{width:e.width,height:e.height}),e.width,":",e.height]},t)),i.length%3!=0&&(0,a.jsx)("div",{className:u().toggleGroupSpacer})]})})})};let AspectRatioPreview=e=>{let{width:t,height:r}=e,n=l.useMemo(()=>({width:t>=r?"100%":"".concat(t/r*100,"%"),height:t>=r?"".concat(r/t*100,"%"):"100%"}),[t,r]);return(0,a.jsx)("div",{className:u().aspectRatioPreviewContainer,children:(0,a.jsx)("div",{className:u().aspectRatioPreview,style:n})})};var p=r(67265),m=r(21054),_=r(78410),h=r(12251),f=r(61936),g=r(97554),v=r.n(g),x=r(65858),b=r.n(x);let AttachmentBubble=e=>{let{file:t,index:r,onDismiss:n}=e,o=(0,l.useCallback)(()=>{n(r)},[n,r]);return(0,a.jsx)(p.Z,{className:b().attachment,onDismiss:o,children:(0,a.jsx)(m.ZP,{file:t})})};var filePicker_FilePickerControl=e=>{let{attachedFiles:t,allowMultipleFiles:r,addFile:o,removeFile:d}=e,{t:c}=(0,i.$G)(),u=t.length>0,p=(0,s.ac)(v()["compact-only"]),m=!u||r,g=(0,l.useCallback)(e=>{var t;if(e.preventDefault(),!m)return;let r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;if(r&&r.length>0){let e=r[0];o(e)}},[o,m]),x=(0,l.useRef)(null),{isDropTargetDraggingOver:C,isDocumentDraggingOver:w}=(0,f.Y)(x,g),y=(0,l.useCallback)(e=>{let t=e.target.files;if(t&&t.length>0){let r=t[0];e.target.value="",o(r)}},[o]),j=(0,l.useRef)(null),I=(0,l.useCallback)(()=>{var e;null==j||null===(e=j.current)||void 0===e||e.click()},[]),F=m&&w,S=m&&C,k=u&&r,N=!u||F,D=c(w||u?"Drop a file here":p?"Add a file":"Add or drop a file");return(0,a.jsxs)("div",{ref:x,className:(0,h.$)(b().dropZone,u?b().dropZoneWithFiles:b().dropZoneEmpty),"data-visible":F,"data-active":S,onClick:u?void 0:I,role:"button",tabIndex:0,children:[(0,a.jsx)("input",{className:b().fileInput,ref:j,type:"file",onChange:y}),u?(0,a.jsxs)("div",{className:b().attachmentsBar,children:[t.map((e,t)=>(0,a.jsx)(AttachmentBubble,{index:t,file:e,onDismiss:d},t)),k&&!w?(0,a.jsx)(_.Z,{as:"button",size:"md",theme:"secondary",showIconOnly:"always",iconLeft:(0,a.jsx)(n.SC,{}),onClick:I,"data-button-file-input":!0}):null]}):null,(0,a.jsxs)("div",{"data-visible":N,className:u?b().instructionBar:b().instructionBarEmpty,children:[(0,a.jsx)(n.SC,{size:"sm"}),D]})]})},C=r(92087),w=r(53919),y=r(19897),j=r(79132),I=r(21186),F=r(17371),S=r(46272),k=r(21900),N=r(1261),D=r(84684),P=r(75241),R=r(30204),T=r(94257),U=r.n(T);let defaultValueForControl=(e,t)=>{"condition"==e.control?e.controls.forEach(e=>{defaultValueForControl(e,t)}):"text_field"==e.control?t[e.parameter_name]=e.default_value||"":"text_area"==e.control?t[e.parameter_name]=e.default_value||"":"number_field"==e.control?t[e.parameter_name]="number"==typeof e.default_value?e.default_value.toString():"":"drop_down"==e.control?t[e.parameter_name]=e.default_value||"":"slider"==e.control?t[e.parameter_name]="number"==typeof e.default_value?e.default_value:e.min_value:"toggle_switch"==e.control?t[e.parameter_name]=!!e.default_value:"aspect_ratio"==e.control?t[e.parameter_name]=e.default_value||"":"file_picker"==e.control&&(t[e.parameter_name]=0)},defaultValuesForTab=(e,t)=>{e.controls.forEach(e=>{defaultValueForControl(e,t)})},defaultValuesForSection=(e,t)=>{let r=e.controls||[],a=e.tabs||[];r.forEach(e=>{defaultValueForControl(e,t)}),a.forEach(e=>{defaultValuesForTab(e,t)})},defaultValuesForDefinition=e=>{let t={};return e.sections.forEach(e=>{defaultValuesForSection(e,t)}),t};let IdCounter=class IdCounter{count(){return this.counter++,this.counter.toString()}constructor(){this.counter=-1}};let assignIdentifiersToBaseControl=(e,t)=>({...e,id:t.count()}),assignIdentifiersToControl=(e,t)=>{if("condition"!=e.control)return assignIdentifiersToBaseControl(e,t);{let r=[];return e.controls.forEach(e=>{r.push(assignIdentifiersToBaseControl(e,t))}),{...e,controls:r}}},assignIdentifiersToTab=(e,t)=>{let r=[];return e.controls.forEach(e=>{r.push(assignIdentifiersToControl(e,t))}),{...e,controls:r}},assignIdentifiersToSection=(e,t)=>{if(e.controls){let r=[];return e.controls.forEach(e=>{r.push(assignIdentifiersToControl(e,t))}),{...e,controls:r}}{let r=[];return e.tabs.forEach(e=>{r.push(assignIdentifiersToTab(e,t))}),{...e,tabs:r}}},assignIdentifiersToDefinition=e=>{let t=new IdCounter,r=[];return e.sections.forEach(e=>{r.push(assignIdentifiersToSection(e,t))}),{...e,sections:r}},CustomUITextField=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d=t.placeholder||"",c=t.description?t.description:void 0,u=(0,l.useCallback)(e=>{n(i,e.target.value,t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:c,children:t.label}),(0,a.jsx)(P.Z,{value:s&&"string"==typeof s?s:"",onChange:u,placeholder:d})]})},CustomUINumberField=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d=t.placeholder||"",c=t.description?t.description:void 0,u=(0,l.useCallback)(e=>{n(i,e.target.value,t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:c,children:t.label}),(0,a.jsx)(P.Z,{value:s&&"string"==typeof s?s:"",onChange:u,placeholder:d})]})},CustomUITextArea=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d=t.placeholder||"",c=t.description?t.description:void 0,u=(0,l.useCallback)(e=>{n(i,e.target.value,t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:c,children:t.label}),(0,a.jsx)(D.Z,{value:s&&"string"==typeof s?s:"",onChange:u,placeholder:d})]})},CustomUIDropDown=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,{t:s}=(0,i.$G)(),d=t.parameter_name,c=r[d],u=t.default_value,p=(0,l.useCallback)(e=>{n(d,e.target.value,t.id)},[n,d,t.id]),m=t.description?t.description:void 0;return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:m,children:t.label}),(0,a.jsx)(j.Z,{value:c&&"string"==typeof c?c:"",onChange:p,placeholder:u?void 0:s("None"),children:t.options.map(e=>(0,a.jsx)("option",{value:e.value,children:e.name},e.value))})]})},CustomUIToggleSwitch=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d=t.description?t.description:void 0,c=(0,l.useCallback)(e=>{n(i,e.target.checked,t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().toggleSwitch,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:d,children:t.label}),(0,a.jsx)(k.Z,{isChecked:!!s&&"boolean"==typeof s&&s,onChange:c})]})},CustomUISlider=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d="number"==typeof s?s:t.min_value,c=t.description?t.description:void 0,u=(0,l.useMemo)(()=>[d],[d]),p=(0,l.useCallback)(e=>{n(i,e[0],t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:c,children:t.label}),(0,a.jsx)(S.i,{value:u,min:t.min_value,max:t.max_value,step:t.step,output:"thumb",onValueChange:p})]})},CustomUIAspectRatio=e=>{let{control:t,formState:r,updateParameterValue:n,isConditionallyRendered:o}=e,i=t.parameter_name,s=r[i],d=t.description?t.description:void 0,c=(0,l.useCallback)(e=>{n(i,e,t.id)},[n,i,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,o?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:d,children:t.label}),(0,a.jsx)(aspectRatio_AspectRatioControl,{aspectRatios:t.options,value:s&&"string"==typeof s?s:"",onValueChange:c})]})},CustomUIFilePicker=e=>{let{control:t,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:i}=e,s=t.parameter_name,d=r[s],c=d&&"number"==typeof d?d:0,u=t.description?t.description:void 0,p=n.attachments[s]||[],m=(0,l.useCallback)(e=>{n.addAttachments(s,[e]),o(s,c+1,t.id)},[n,o,s,c,t.id]),_=(0,l.useCallback)(e=>{n.removeAttachment(s,e),o(s,c-1,t.id)},[n,s,c,o,t.id]);return(0,a.jsxs)("div",{className:(0,h.$)(U().component,i?U().conditionallyRendered:null),children:[(0,a.jsx)(I.Z,{className:U().componentLabel,description:u,children:t.label}),(0,a.jsx)(filePicker_FilePickerControl,{attachedFiles:p,allowMultipleFiles:t.allow_multiple_files,addFile:m,removeFile:_})]})},evaluateValueLookup=(e,t)=>"literal"in e?e.literal:"parameter_name"in e?t[e.parameter_name]:void 0,removeNullAndUndefined=e=>void 0===e?0:null===e?0:e,evaluateCondition=(e,t)=>{let r=removeNullAndUndefined(evaluateValueLookup(e.left,t)),a=removeNullAndUndefined(evaluateValueLookup(e.right,t));switch(e.comparator){case"equals":case"eq":return r===a;case"ne":return r!==a;case"gt":return r>a;case"ge":return r>=a;case"lt":return r<a;case"le":return r<=a}},CustomConditionallyRenderedControls=e=>{let{control:t,formState:r,messageContext:n,updateParameterValue:o}=e,i=(0,l.useMemo)(()=>evaluateCondition(t.condition,r),[t,r]),s=l.useRef(i);return(l.useEffect(()=>{s.current=i},[i]),i)?(0,a.jsx)(a.Fragment,{children:t.controls.map((e,t)=>(0,a.jsx)(CustomUIControl,{control:e,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:i&&!1===s.current},t))}):null},CustomUIControl=e=>{let{control:t,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:l}=e;switch(t.control){case"divider":return(0,a.jsx)(w.Z,{});case"text_field":return(0,a.jsx)(CustomUITextField,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"text_area":return(0,a.jsx)(CustomUITextArea,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"number_field":return(0,a.jsx)(CustomUINumberField,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"drop_down":return(0,a.jsx)(CustomUIDropDown,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"toggle_switch":return(0,a.jsx)(CustomUIToggleSwitch,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"slider":return(0,a.jsx)(CustomUISlider,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"condition":return(0,a.jsx)(CustomConditionallyRenderedControls,{control:t,formState:r,messageContext:n,updateParameterValue:o});case"aspect_ratio":return(0,a.jsx)(CustomUIAspectRatio,{control:t,formState:r,updateParameterValue:o,isConditionallyRendered:l});case"file_picker":return n.featureFlags.attachments?(0,a.jsx)(CustomUIFilePicker,{control:t,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:l}):null;default:return null}},CustomUITab=e=>{let{tab:t,formState:r,messageContext:n,updateParameterValue:o}=e;return(0,a.jsx)("div",{className:U().controlsContainer,children:t.controls.map((e,t)=>(0,a.jsx)(CustomUIControl,{control:e,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:!1},t))})},CustomUISectionWithControls=e=>{let{section:t,formState:r,messageContext:n,updateParameterValue:o}=e;return(0,a.jsx)(a.Fragment,{children:t.controls.map((e,t)=>(0,a.jsx)(CustomUIControl,{control:e,formState:r,messageContext:n,updateParameterValue:o,isConditionallyRendered:!1},t))})},CustomUITabButton=e=>{let{isActive:t,tabIndex:r,name:n,updateCurrentTab:o}=e,i=(0,l.useCallback)(()=>{o(r)},[o,r]);return(0,a.jsx)(N.O,{isActive:t,onClick:i,children:n})},CustomUISectionWithTabs=e=>{let{section:t,formState:r,messageContext:n,updateParameterValue:o}=e,[i,s]=(0,l.useState)(0),d=(0,l.useCallback)(e=>{s(e)},[s]),c=t.tabs[i];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.m,{className:U().tabsHeader,children:t.tabs.map((e,t)=>(0,a.jsx)(CustomUITabButton,{name:e.name,isActive:t==i,tabIndex:t,updateCurrentTab:d},t))}),(0,a.jsx)(CustomUITab,{tab:c,formState:r,messageContext:n,updateParameterValue:o})]})},CustomUISection=e=>{let{section:t,formState:r,messageContext:n,updateParameterValue:o}=e,l=!t.collapsed_by_default;return(0,a.jsxs)(C.MV,{className:(0,h.$)("max-w-md",l?null:U().collapsibleCard),defaultOpen:l,open:!!l||void 0,scrollIntoView:!0,children:[(0,a.jsxs)(C.yM,{className:l?U().headerNotInteractive:void 0,children:[(0,a.jsx)(R.Ac,{fontWeight:"bold",children:t.name}),l?null:(0,a.jsx)(C.e2,{})]}),(0,a.jsx)(C.et,{children:(0,a.jsx)("div",{className:U().controlsContainer,children:t.controls?(0,a.jsx)(CustomUISectionWithControls,{section:t,formState:r,messageContext:n,updateParameterValue:o}):(0,a.jsx)(CustomUISectionWithTabs,{section:t,formState:r,messageContext:n,updateParameterValue:o})})})]})},CustomUITopLevel=e=>{let{customUI:t,formState:r,messageContext:o,updateParameterValue:l,clearMenuState:d}=e,{t:c}=(0,i.$G)(),u=(0,s.ac)("(min-width: 769px)"),p=u&&t.sections.length>1;return(0,a.jsxs)("div",{className:U().customUITopLevelContainer,children:[p?(0,a.jsxs)("div",{className:U().columnsContainer,children:[(0,a.jsx)("div",{className:U().topLevelContainerColumnLeft,children:t.sections.filter((e,t)=>t%2==0).map((e,t)=>(0,a.jsx)(CustomUISection,{section:e,formState:r,messageContext:o,updateParameterValue:l},2*t))}),(0,a.jsx)("div",{className:U().topLevelContainerColumnRight,children:t.sections.filter((e,t)=>t%2==1).map((e,t)=>(0,a.jsx)(CustomUISection,{section:e,formState:r,messageContext:o,updateParameterValue:l},2*t+1))})]}):t.sections.map((e,t)=>(0,a.jsx)(CustomUISection,{section:e,formState:r,messageContext:o,updateParameterValue:l},t)),(0,a.jsx)(_.Z,{className:U().resetButton,as:"button",theme:"ghost",size:"sm",onClick:d,iconLeft:(0,a.jsx)(n.tr,{}),children:c("Reset all")})]})},allVisibleControls=(e,t,r)=>{"condition"==r.control?evaluateCondition(r.condition,e)&&r.controls.forEach(r=>{allVisibleControls(e,t,r)}):"parameter_name"in r&&(t[r.id]=!0)},allVisibleControlsForTab=(e,t,r)=>{r.controls.forEach(r=>{allVisibleControls(e,t,r)})},allVisibleControlsForSection=(e,t,r)=>{let a=r.controls||[],n=r.tabs||[];a.forEach(r=>{allVisibleControls(e,t,r)}),n.forEach(r=>{allVisibleControlsForTab(e,t,r)})},allVisibleControlsForDefinition=(e,t)=>{let r={};return e.sections.forEach(e=>{allVisibleControlsForSection(t,r,e)}),r},filterNonVisibleBoundControlsFromState=(e,t,r,a)=>{let n=Object.keys(t);n.forEach(n=>{if(!r[n]){let r=t[n];delete e[r],delete t[n],a(r)}})},removeMenuStateForHiddenControls=(e,t,r,a,n)=>{let o,l;do{o=Object.keys(t);let i={...a,...e},s=allVisibleControlsForDefinition(r,i);filterNonVisibleBoundControlsFromState(e,t,s,n),l=Object.keys(t)}while(l.length<o.length)},CustomUIMenu=e=>{let{customUIDefinition:t,customUIMenuState:r,messageContext:n,updateCustomUIMenuState:o}=e,i=(0,l.useMemo)(()=>JSON.parse(t),[t]),s=(0,l.useMemo)(()=>defaultValuesForDefinition(i),[i]),d=(0,l.useMemo)(()=>assignIdentifiersToDefinition(i),[i]),c=r.parameters,u=r.bindings,p=(0,l.useMemo)(()=>({...s,...c}),[s,c]),m=(0,l.useCallback)((e,t,r)=>{let a={...c},l={...u};void 0===t?(delete a[e],delete l[r]):t===s[e]?(delete a[e],delete l[r]):(a[e]=t,l[r]=e),removeMenuStateForHiddenControls(a,l,d,s,n.removeParamAttachments),o({parameters:a,bindings:l})},[d,s,c,o,u,n.removeParamAttachments]),_=(0,l.useCallback)(()=>{o({parameters:{},bindings:{}}),n.clearAttachments()},[n,o]),h=(0,l.useCallback)(e=>{e.stopPropagation()},[]);return(0,a.jsx)("div",{onClick:h,children:(0,a.jsx)(CustomUITopLevel,{customUI:d,formState:p,messageContext:n,updateParameterValue:m,clearMenuState:_})})},CustomUIMenuOverlay=e=>{let{children:t,customUIDefinition:r,customUIMenuState:n,messageContext:o,updateCustomUIMenuState:i,logOpen:d}=e,c=(0,s.ac)("(min-width: 769px)"),[u,p]=l.useState(!1),m=l.useContext(E),_=(0,l.useCallback)(e=>{p(e),e&&d()},[p,d]),h=null==m?void 0:m.anchorRef,f=null==m?void 0:m.dismissAction;return(l.useEffect(()=>{f&&u&&(f.current=()=>p(!1))},[f,p,u]),c)?(0,a.jsxs)(F.Pg,{open:u,onOpenChange:_,anchorRef:h,modal:!1,distance:2,children:[(0,a.jsx)(F.xo,{children:t}),(0,a.jsx)(F.jl,{size:"reference",arrow:!1,children:(0,a.jsx)(F.yk,{inset:"sm",children:(0,a.jsx)(F.b,{children:(0,a.jsx)(CustomUIMenu,{customUIDefinition:r,customUIMenuState:n,messageContext:o,updateCustomUIMenuState:i})})})})]}):(0,a.jsxs)(y.jz,{open:u,onOpenChange:p,children:[(0,a.jsx)(y.Qz,{children:t}),(0,a.jsxs)(y.P1,{children:[(0,a.jsx)(y.sc,{children:(0,a.jsx)(y.Ng,{children:(0,a.jsx)(CustomUIMenu,{customUIDefinition:r,customUIMenuState:n,messageContext:o,updateCustomUIMenuState:i})})}),(0,a.jsx)(y.uh,{})]})]})},E=l.createContext(null),PopoverContextProvider=e=>{let{children:t,anchorRef:r,dismissAction:n}=e,o=(0,l.useMemo)(()=>({dismissAction:n,anchorRef:r}),[r,n]);return(0,a.jsx)(E.Provider,{value:o,children:t})};var inputFooter_ChatMessageCustomUIButton=e=>{let{customUIDefinition:t,customUIMenuState:r,messageContext:s,updateCustomUIMenuState:d,logOpen:c,displayLabel:u}=e,[p,m]=(0,l.useState)(null),{t:h}=(0,i.$G)(),f=h("Additional input"),g=0===Object.keys(r.parameters).length;return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(CustomUIMenuOverlay,{customUIDefinition:t,customUIMenuState:r,messageContext:s,updateCustomUIMenuState:d,logOpen:c,children:(0,a.jsx)(_.Z,{as:"button",ref:m,className:U().button,size:"sm",theme:u?"secondary":"ghost",showIconOnly:u?void 0:"always",iconLeft:(0,a.jsx)(n.OP,{}),"aria-label":f,"data-button-custom-ui":!0,"data-custom-menu-state-empty":g,children:u&&h("Parameters")})}),(0,a.jsx)(o.u,{anchorRef:p,label:f,placement:"top"})]}):null}},67265:function(e,t,r){"use strict";var a=r(85893),n=r(67294),o=r(39620),l=r(12251),i=r(99460),s=r.n(i);t.Z=e=>{let{children:t,onDismiss:r,className:i}=e,d=(0,n.useCallback)(e=>{e.stopPropagation(),r()},[r]);return(0,a.jsxs)("div",{className:(0,l.$)(s().dismissableContainer,i),children:[t,(0,a.jsx)("button",{className:s().dismissButton,onClick:d,children:(0,a.jsx)(o.Z,{className:s().icon})})]})}},21054:function(e,t,r){"use strict";r.d(t,{S1:function(){return GenericFileInfo},xD:function(){return useDisplayFileType}});var a=r(85893),n=r(98077),o=r(67294),l=r(22120);r(22578);var i=r(31657),s=r(30965),d=r(53679),c=r(94282),u=r(12251),p=r(3687),m=r(14813),_=r(93105),h=r(27311),f=r.n(h),g=r(24503);let useMimeType=e=>{let t=(0,m.J$)(r(21558),e);return(0,m.zE)(t)?t.type:t.file.mimeType},useName=e=>{let t=(0,m.J$)(r(8205),e);return t.name},useSize=e=>{let t=(0,m.J$)(r(32515),e);return(0,m.zE)(t)?t.size:t.file.size},useUrl=e=>{let t=(0,m.J$)(r(49778),e),a=(0,o.useMemo)(()=>(0,m.zE)(t)?URL.createObjectURL(t):t.url,[t]);return a},useDisplayUrl=e=>{let t=(0,m.J$)(r(76810),e),a=useUrl(t);return!(0,m.zE)(t)&&t.localUrl||a},useIsLoading=e=>{let t=(0,m.J$)(r(80874),e);return"isOptimistic"in t&&t.isOptimistic},useDisplayFileType=e=>{let{t}=(0,l.$G)(),r=(0,_.uy)(e);if(r){let[e,a]=r;if("text"===e){if("plain"===a)return t("text");if(["csv","html"].includes(a))return a}if("application"===e){if("pdf"===a)return"pdf";if("vnd.openxmlformats-officedocument.wordprocessingml.document"===a)return"docx"}if("image"===e)return["jpeg","png"].includes(a)?a:t("image");if("video"===e)return t("video");if("audio"===e)return t("audio")}return t("file")},useDisplaySize=e=>{let{t}=(0,l.$G)(),[r,a]=(0,c.w)(e);return t("{{displaySize, number}}",{displaySize:r,unit:a,style:"unit",unitDisplay:"short"})},v={};function isLocalUrl(e){return e.startsWith("blob:")}let canRenderAsImage=e=>{if(!e.startsWith("image/"))return!1;if(e.startsWith("image/jpeg")||e.startsWith("image/png")||e.startsWith("image/bmp")||e.startsWith("image/svg"))return!0;if(void 0===v[e])try{let t=document.createElement("canvas");t.getContext&&t.getContext("2d")?v[e]=0==t.toDataURL(e).indexOf("data:".concat(e)):v[e]=!1}catch(t){v[e]=!1}return v[e]},GenericFileInfo=e=>{let{file:t,className:l}=e,i=(0,m.J$)(r(74214),t),s=useName(i),d=useMimeType(i),c=d.startsWith("video/"),_=d.startsWith("audio/"),h=useUrl(i),g=useSize(i),v=useIsLoading(i),x=h&&!isLocalUrl(h)?"a":"div",b=useDisplaySize(g),C=useDisplayFileType(d),[w]=(0,p.O6)(),y=(0,o.useCallback)(e=>{e.preventDefault(),w(h,p.Jg.other,s,()=>{(0,p.km)(h,p.Jg.other,{})})},[w,h,s]);return s&&b&&C?(0,a.jsxs)(x,{className:(0,u.$)(f().fileInfo,v&&f().loading,l),...h?{href:h,target:"_blank",alt:s,onClick:y}:{},children:[c?(0,a.jsx)(n.Gn,{size:"lg"}):_?(0,a.jsx)(n.d2,{size:"lg"}):(0,a.jsx)(n.Xh,{size:"lg"}),(0,a.jsxs)("div",{className:f().textPane,children:[(0,a.jsx)("div",{className:f().title,children:s}),(0,a.jsxs)("div",{className:f().metadata,children:[(0,a.jsx)("span",{className:f().fileType,children:C})," \xb7 ",b]})]})]}):null},ImageInfo=e=>{let{file:t,className:n,showInteractiveMedia:l=!1}=e,c=(0,m.J$)(r(40849),t),_=(0,m.zE)(c)?void 0:c.url,h=useName(c),v=useDisplayUrl(c),x=(0,o.useContext)(i.Z),b=(0,o.useContext)(s.Z),{openImageViewer:C}=(0,d.z)(),w=(0,o.useCallback)(()=>{v&&(0,p.km)(v,p.Jg.image,{botId:null==x?void 0:x.botId,messageId:null==b?void 0:b.messageId,chatId:(null==x?void 0:x.chatId)||null})},[x,b,v]),y=(0,o.useCallback)(()=>{v&&C({src:_||v,alt:h,onDownload:w})},[v,_,h,C,w]);return v?(0,a.jsx)("img",{suppressHydrationWarning:!0,className:(0,u.$)(l?f().interactiveImage:f().image,n),src:v,alt:h,"data-cdn-url":isLocalUrl(v)?_:void 0,onClick:y}):(0,a.jsx)("div",{className:f().imageLoader,children:(0,a.jsx)(g.Z,{})})};t.ZP=e=>{let{file:t,className:n,showInteractiveMedia:o=!1}=e,l=(0,m.J$)(r(97702),t),i=useMimeType(l),s=canRenderAsImage(i)?ImageInfo:GenericFileInfo;return(0,a.jsx)(s,{file:l,className:n,showInteractiveMedia:o})}},24503:function(e,t,r){"use strict";r.d(t,{Z:function(){return patterns_LoadingSpinner}});var a,n=r(85893),o=r(74908),l=r(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}var loadingSpinner=function(e){return l.createElement("svg",_extends({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.6a7.4 7.4 0 1 0 7.4 7.4 1 1 0 1 1 2 0A9.4 9.4 0 1 1 .6 10 9.4 9.4 0 0 1 10 .6a1 1 0 1 1 0 2Z"})))},i=r(12251),s=r(7849),d=r.n(s),patterns_LoadingSpinner=e=>{let{color:t="base",size:r}=e;return(0,n.jsx)(loadingSpinner,{className:(0,i.$)(d().loadingSpinner,d()[t],r?(0,o.MQ)(r):d().defaultSize)})}},92087:function(e,t,r){"use strict";r.d(t,{MV:function(){return CollapsibleCardRoot},e2:function(){return CollapsibleCardCaretChevron},et:function(){return CollapsibleCardContent},yM:function(){return CollapsibleCardHeader}});var a=r(85893),n=r(98077);r(67294);var o=r(12251),l=r(24350),i=r(69606),s=r.n(i);let CollapsibleCardRoot=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)(l.Kq,{"data-pdl-child":"collapsible-card-root",className:(0,o.$)(s().card,r),...n,children:t})},CollapsibleCardHeader=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)(l.wy,{"data-pdl-child":"collapsible-card-header",className:(0,o.$)(s().card_header,r),...n,children:(0,a.jsx)("button",{children:t})})},CollapsibleCardCaret=e=>{let{children:t,className:r}=e,{open:n}=(0,l.x8)();return(0,a.jsx)("div",{"data-pdl-child":"collapsible-card-caret","data-state":n?"open":"closed",className:(0,o.$)(s().card_caret,r),children:t})},CollapsibleCardCaretChevron=e=>{let{className:t}=e;return(0,a.jsx)(CollapsibleCardCaret,{className:(0,o.$)(s().card_caret_chevron,t),children:(0,a.jsx)(n.C2,{size:"x-sm"})})},CollapsibleCardContent=e=>{let{children:t,className:r}=e;return(0,a.jsx)(l.Fw,{"data-pdl-child":"collapsible-card-content",className:(0,o.$)(s().card_content,r),children:t})}},24350:function(e,t,r){"use strict";r.d(t,{Fw:function(){return CollapsibleContent},Kq:function(){return CollapsibleRoot},wy:function(){return CollapsibleTrigger},x8:function(){return useCollapsibleContext}});var a=r(85893),n=r(61465),o=r(67294),l=r(49460);let useTransitionStatus=e=>{let{ref:t,onStart:r,onEnd:a}=e,[n,i]=o.useState("idle");return(0,l.LI)(()=>{let e=t.current;if(!e)return;let handleTransitionStart=e=>{e.target===t.current&&(i("active"),null==r||r())},handleTransitionEnd=e=>{e.target===t.current&&(i("idle"),null==a||a())};return e.addEventListener("transitionstart",handleTransitionStart),e.addEventListener("transitionend",handleTransitionEnd),()=>{e.removeEventListener("transitionstart",handleTransitionStart),e.removeEventListener("transitionend",handleTransitionEnd)}},[r,a]),n};var i=r(12251),s=r(91320),d=r.n(s);let c=o.createContext({id:"",open:!1,toggleCollapsible:()=>null,defaultOpen:!1}),CollapsibleRoot=e=>{var t;let{id:r,open:l,defaultOpen:i,onOpenChange:s,scrollIntoView:d,asChild:u,children:p,...m}=e,_=o.useRef(null),[h,f]=o.useState(null!=i&&i),[g,v]=o.useState(null!==(t=null!=l?l:i)&&void 0!==t&&t),x=void 0!==l,b=x?l:h,C=o.useId(),w=null!=r?r:C,y=o.useCallback(()=>{let e=!b;g&&v(!1),x||f(e),s&&s(e,w)},[b,x,s,w,g]);o.useEffect(()=>{d&&b&&!g&&setTimeout(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},250)},[d,b,g]);let j=o.useMemo(()=>({id:w,open:b,toggleCollapsible:y,defaultOpen:g}),[w,b,y,g]),I=u?n.g7:"div";return(0,a.jsx)(c.Provider,{value:j,children:(0,a.jsx)(I,{ref:_,"data-state":b?"open":"closed","data-pdl-child":"collapsible",...m,children:p})})},CollapsibleTrigger=e=>{let{children:t,...r}=e,{id:l,open:i,toggleCollapsible:s}=o.useContext(c);return(0,a.jsx)(n.g7,{"data-pdl-child":"collapsible-trigger","aria-expanded":i,"aria-controls":l,"data-state":i?"open":"closed",onClick:s,...r,children:t})},CollapsibleContent=e=>{let{children:t,className:r,...n}=e,{id:s,open:u,defaultOpen:p}=o.useContext(c),m=o.useRef(null),_=o.useRef(null),[h,f]=o.useState(u);o.useEffect(()=>{u&&f(!0)},[u]);let updateContentHeight=()=>{var e,t;let r=null===(e=_.current)||void 0===e?void 0:e.scrollHeight;null===(t=m.current)||void 0===t||t.style.setProperty("--pdl-collapsible-content-height",r?"".concat(r,"px"):"auto")},setTransitionStatus=e=>{m.current&&(m.current.dataset.transition=e)},g=(0,l.yU)({ref:_});return useTransitionStatus({ref:m,onStart:()=>{setTransitionStatus("active")},onEnd:()=>{setTransitionStatus("idle"),u||f(!1)}}),o.useEffect(()=>{h&&updateContentHeight()},[h,g]),(0,a.jsx)("div",{id:s,ref:m,className:(0,i.$)(d().collapsible_content,r),"data-pdl-child":"collapsible-content","data-default-open":p,"data-state":u?"open":"closed","data-transition":"idle",...n,children:(0,a.jsx)("div",{ref:_,children:h&&t})})},useCollapsibleContext=()=>{let e=o.useContext(c);if(null==e)throw Error("Collapsible components must be wrapped in <CollapsibleRoot />");return e}},53919:function(e,t,r){"use strict";var a=r(85893);r(67294);var n=r(12251),o=r(79850),l=r.n(o);t.Z=e=>{let{theme:t="base",className:r}=e,o=(0,n.$)(l().root,l()[t],r);return(0,a.jsx)("hr",{className:o})}},36047:function(e,t,r){"use strict";r.d(t,{Jq:function(){return g},Ng:function(){return DrawerBody},OX:function(){return DrawerHeader},P1:function(){return f},Qz:function(){return h},jz:function(){return DrawerRoot},sc:function(){return DrawerContent},uh:function(){return v},ze:function(){return DrawerFooter}});var a=r(85893),n=r(93075),o=r(24750),l=r(1371),i=r(98077),s=r(61465),d=r(67294),c=r(78410),u=r(12251),p=r(75407),m=r.n(p);let useDrawer=e=>{let{id:t,modal:r=!0,placement:a="bottom",align:i="start",defaultOpen:s=!1,open:c,onOpenChange:u}=e,[p,m]=d.useState(s),_=null!=c?c:p,h=null!=u?u:m,f=d.useId(),g=null!=t?t:f,v=(0,n.YF)({placement:a,open:_,onOpenChange:h,whileElementsMounted:o.Me,middleware:[(0,l.dp)({apply(e){var t,r,a,n;let{elements:o}=e,l=(null===(t=o.floating.parentElement)||void 0===t?void 0:t.parentElement)===document.body?document.documentElement:null===(r=o.floating.parentElement)||void 0===r?void 0:r.parentElement,i=window.visualViewport?window.visualViewport.height:window.innerHeight,s=window.visualViewport?window.visualViewport.width:window.innerWidth,d=null!==(a=null==l?void 0:l.clientHeight)&&void 0!==a?a:i,c=null!==(n=null==l?void 0:l.clientWidth)&&void 0!==n?n:s;o.floating.dataset.availableHeight=d.toString(),o.floating.dataset.availableWidth=c.toString(),o.floating.style.setProperty("--pdl-drawer-available-height",d.toString()+"px"),o.floating.style.setProperty("--pdl-drawer-available-width",c.toString()+"px")}})],strategy:"fixed"}),x=v.context,b=(0,n.eS)(x),C=(0,n.bQ)(x,{outsidePressEvent:"mousedown"}),w=(0,n.qs)(x),y=(0,n.NI)([b,C,w]),j=d.useMemo(()=>({id:g,open:_,setOpen:h,...y,...v,align:i,modal:r,placement:a}),[g,_,h,y,v,i,r,a]);return j},_=d.createContext(null),useDrawerContext=()=>{let e=d.useContext(_);if(null==e)throw Error("Drawer components must be wrapped in <Drawer />");return e},DrawerRoot=e=>{let{children:t,...r}=e,n=useDrawer({...r});return(0,a.jsx)(_.Provider,{value:n,children:t})},h=d.forwardRef((e,t)=>{let{action:r="open",children:o,...l}=e,i=useDrawerContext(),c=(0,n.qq)([t,i.refs.setReference]),u={};return d.isValidElement(o)?(u="open"===r?i.getReferenceProps({ref:c,...l,"data-state":i.open?"open":"closed","data-action":r,"data-pdl-child":"drawer-trigger"}):{...l,onClick:()=>i.setOpen(!1),"data-action":r,"data-pdl-child":"drawer-trigger"},(0,a.jsx)(s.g7,{...u,children:o})):null});h.displayName="DrawerTrigger";let f=d.forwardRef((e,t)=>{let{theme:r="base",size:o="full",rootRef:l,rootId:i,className:s,children:d,...c}=e,{modal:p,align:_,placement:h,context:f,...g}=useDrawerContext(),{isMounted:v,status:x}=(0,n.hU)(f,{duration:400}),b=l||i?"absolute":"fixed",C=(0,n.qq)([t,g.refs.setFloating]);return v?(0,a.jsxs)(n.ll,{root:l,id:i,children:[p&&(0,a.jsx)(n.y0,{"data-position":b,"data-status":x,className:m().backdrop,lockScroll:!0,"data-pdl-child":"drawer-backdrop"}),(0,a.jsx)(n.wD,{context:f,modal:p,children:(0,a.jsx)("div",{ref:C,"data-pdl-child":"drawer-overlay","data-status":x,"data-placement":h,"data-align":_,"data-theme":r,"data-modal":p,"data-size":o,"data-position":b,className:(0,u.$)(s,m().drawer_overlay),...g.getFloatingProps(),...c,children:(0,a.jsx)("div",{"data-pdl-child":"drawer-scroll-container",className:m().scroll_container,children:d})})})]}):null});f.displayName="DrawerOverlay";let DrawerContent=e=>{let{inset:t=!0,asChild:r,children:n,className:o,style:l,...i}=e,d=r?s.g7:"div";return(0,a.jsx)(d,{"data-pdl-child":"drawer-content","data-inset":t,className:(0,u.$)(m().drawer_content,o),style:l,...i,children:n})},DrawerHeader=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)("div",{"data-pdl-child":"drawer-header",className:(0,u.$)(m().drawer_header,r),...n,children:t})},DrawerBody=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)("div",{"data-pdl-child":"drawer-body",className:(0,u.$)(m().drawer_body,r),...n,children:t})},DrawerFooter=e=>{let{sticky:t,children:r,className:n,...o}=e;return(0,a.jsx)("div",{"data-pdl-child":"drawer-footer","data-sticky":t,className:(0,u.$)(m().drawer_footer,n),...o,children:r})},g=d.forwardRef((e,t)=>{let{srOnly:r,asChild:n,className:o,...l}=e,{id:i}=useDrawerContext(),d=n?s.g7:"span";return(0,a.jsx)(d,{...l,ref:t,tabIndex:0,className:(0,u.$)(m().drawer_heading,o),"data-pdl-child":"drawer-heading","data-sr-only":r,id:"drawer-heading-".concat(i)})});g.displayName="DrawerHeading";let v=d.forwardRef((e,t)=>{let{position:r="absolute",className:n,...o}=e;return(0,a.jsx)(h,{ref:t,action:"close","data-position":r,className:(0,u.$)(m().drawer_close,n),...o,"data-pdl-child":"drawer-close",children:(0,a.jsx)(c.Z,{as:"button",theme:"ghost",size:"sm",showIconOnly:"always",iconLeft:(0,a.jsx)(i.bM,{}),children:"Close"})})});v.displayName="DrawerClose"},19897:function(e,t,r){"use strict";r.d(t,{Jq:function(){return a.Jq},Ng:function(){return a.Ng},OX:function(){return a.OX},P1:function(){return a.P1},Qz:function(){return a.Qz},jz:function(){return a.jz},sc:function(){return a.sc},uh:function(){return a.uh},ze:function(){return a.ze}});var a=r(36047)},79132:function(e,t,r){"use strict";var a=r(85893),n=r(67294),o=r(12251),l=r(36188),i=r.n(l);let s=(0,n.forwardRef)((e,t)=>{let{placeholder:r,hasError:l=!1,isDisabled:s=!1,children:d,className:c,full:u=!1,...p}=e,m=(0,o.$)(i().root,u&&i().full,l&&i().hasError,s&&i().isDisabled,c),_=n.Children.toArray(d).some(e=>n.isValidElement(e)&&e.props.selected);return(0,a.jsxs)("div",{className:m,children:[(0,a.jsxs)("select",{ref:t,className:i().select,disabled:s,...p,children:[r&&(0,a.jsx)("option",{value:"",selected:!_,"data-placeholder":"",children:r}),d]}),(0,a.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:i().caret,stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})});s.displayName="Dropdown",t.Z=s},21186:function(e,t,r){"use strict";var a=r(85893);r(67294);var n=r(12251),o=r(74110),l=r.n(o);t.Z=e=>{let{state:t="default",description:r,isOptional:o=!1,isRequired:i=!1,children:s,className:d}=e,c=(0,n.$)(l().label,l()[t]);return(0,a.jsxs)("div",{className:(0,n.$)(l().wrapper,d),children:[(0,a.jsxs)("label",{className:c,children:[(0,a.jsx)("span",{children:s}),o&&(0,a.jsx)("span",{className:l().optional,children:"(optional)"}),i&&(0,a.jsx)("span",{className:l().required,children:"*"})]}),r&&(0,a.jsx)("p",{className:l().description,children:r})]})}},17371:function(e,t,r){"use strict";r.d(t,{tW:function(){return h},b:function(){return PopoverBody},xp:function(){return PopoverClose},yk:function(){return PopoverContent},DT:function(){return PopoverFooter},Yt:function(){return PopoverHeader},bj:function(){return g},jl:function(){return PopoverOverlay},Pg:function(){return PopoverRoot},xo:function(){return f}});var a=r(85893),n=r(93075),o=r(24750),l=r(1371),i=r(98077),s=r(61465),d=r(67294),c=r(78410),u=r(12251),p=r(36876),m=r.n(p);let _=(0,d.createContext)(null),usePopover=e=>{let{id:t,placement:r="bottom",anchorRef:a,distance:i=10,align:s="center",modal:c=!0,flipMainAxis:u=!0,flipCrossAxis:p=!1,defaultOpen:m=!1,open:_,onOpenChange:h}=e,[f,g]=(0,d.useState)(m),[v,x]=(0,d.useState)(void 0!==a),b=null!=_?_:f,C=null!=h?h:g,w=(0,d.useId)(),y=null!=t?t:w,j=(0,d.useRef)(null),I=(0,n.YF)({open:b,placement:r,onOpenChange:C,whileElementsMounted:o.Me,elements:{reference:null==a?void 0:a.current},middleware:[(0,l.cv)(e=>{let{placement:t,rects:r}=e,a=t.startsWith("top")||t.startsWith("bottom")?"center"===s?0:"end"===s?-1*(r.floating.width/2-r.reference.width):r.floating.width/2-r.reference.width:"center"===s?0:"end"===s?-1*(r.floating.height/2-r.reference.height):r.floating.height/2-r.reference.height;return{mainAxis:i+8,crossAxis:a}},[i,s]),(0,l.uY)({limiter:(0,l.dr)({offset:e=>{let{rects:t,placement:r}=e;return{mainAxis:"left"===r||"right"===r?t.reference.height:0,crossAxis:"left"===r||"right"===r?t.floating.width:0}}})}),(0,l.RR)({mainAxis:u,crossAxis:p,fallbackAxisSideDirection:"none"}),(0,l.dp)({apply(e){var t;let{availableHeight:r,availableWidth:a,elements:n}=e,o=null===(t=n.reference)||void 0===t?void 0:t.getBoundingClientRect().width;n.floating.dataset.maxHeight=r.toString(),n.floating.dataset.maxWidth=a.toString(),n.floating.dataset.referenceWidth=o.toString(),n.floating.style.setProperty("--pdl-popover-available-height",r+"px"),n.floating.style.setProperty("--pdl-popover-available-width",a+"px"),n.floating.style.setProperty("--pdl-popover-reference-width",o+"px")}}),(0,l.x7)({element:j,padding:12})],strategy:"absolute"}),F=I.context,S=(0,n.eS)(F),k=(0,n.bQ)(F,{outsidePressEvent:"mousedown"}),N=(0,n.qs)(F),D=(0,n.NI)([S,k,N]);return(0,d.useMemo)(()=>({id:y,distance:i,align:s,open:b,modal:c,setOpen:C,arrowRef:j,anchorRef:a,hasCustomAnchor:v,setHasCustomAnchor:x,...D,...I}),[y,b,C,D,I,i,s,c,a,v,x])},PopoverRoot=e=>{let{children:t,...r}=e,n=usePopover({...r});return(0,a.jsx)(_.Provider,{value:n,children:t})},h=d.forwardRef((e,t)=>{let{_internalTriggerAnchor:r,...o}=e,{refs:l,setHasCustomAnchor:i}=usePopoverContext(),c=(0,n.qq)([t,l.setReference]);return d.useEffect(()=>{r||i(!0)},[r,i]),(0,a.jsx)(s.g7,{...o,ref:c,children:e.children})});h.displayName="PopoverAnchor";let f=d.forwardRef((e,t)=>{let{action:r="open",children:n,...o}=e,l=usePopoverContext(),i={};return d.isValidElement(n)?(i="open"===r?l.getReferenceProps({...o,ref:t,"data-state":l.open?"open":"closed","data-action":r,"data-pdl-child":"popover-trigger"}):{...o,ref:t,onClick:()=>l.setOpen(!1),"data-action":r,"data-pdl-child":"popover-trigger"},"open"!==r||l.hasCustomAnchor?(0,a.jsx)(s.g7,{...i,children:n}):(0,a.jsx)(h,{...i,_internalTriggerAnchor:!0,children:n})):null});f.displayName="PopoverTrigger";let PopoverOverlay=e=>{var t,r,o;let{theme:l="base",size:i="md",arrow:s=!0,children:d,className:c,style:p,..._}=e,{id:h,context:f,placement:g,modal:v,arrowRef:x,refs:b,...C}=usePopoverContext(),{isMounted:w,status:y}=(0,n.hU)(f,{duration:300}),j=null===(t=C.floatingStyles.transform)||void 0===t?void 0:t.match(/translate\((-?\d+(?:\.\d+)?)px,\s*(-?\d+(?:\.\d+)?)px\)/),I=j?[j[1]+"px",j[2]+"px"]:["0px","0px"];return w?(0,a.jsx)(n.ll,{id:h,children:(0,a.jsxs)(n.wD,{context:f,modal:v,closeOnFocusOut:!v,children:[v&&(0,a.jsx)(n.y0,{"data-status":y,lockScroll:!0,"data-pdl-child":"popover-backdrop"}),(0,a.jsxs)("div",{ref:b.setFloating,"aria-labelledby":"popover-heading-".concat(h),"data-status":y,"data-placement":g,"data-size":i,"data-theme":l,className:(0,u.$)(c,m().popover_overlay),style:{"--pdl-popover-pos-x":I[0],"--pdl-popover-pos-y":I[1],...p},..._,"data-pdl-child":"popover-overlay",...C.getFloatingProps(),children:[s&&(0,a.jsx)("div",{ref:x,"data-status":y,"data-placement":g,"data-pdl-child":"popover-arrow",className:m().popover_arrow,style:{left:null===(r=C.middlewareData.arrow)||void 0===r?void 0:r.x,top:null===(o=C.middlewareData.arrow)||void 0===o?void 0:o.y},children:(0,a.jsx)("div",{})}),(0,a.jsx)("div",{"data-pdl-child":"popover-scroll-container",className:m().popover_scroll_container,children:d})]})]})}):null},PopoverContent=e=>{let{inset:t="auto",asChild:r,children:n,className:o,style:l,...i}=e,d=r?s.g7:"div";return(0,a.jsx)(d,{"data-pdl-child":"popover-content","data-inset":t,className:(0,u.$)(m().popover_content,o),style:l,...i,children:n})},PopoverHeader=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)("div",{"data-pdl-child":"popover-header",className:(0,u.$)(m().popover_header,r),...n,children:t})},PopoverBody=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)("div",{"data-pdl-child":"popover-body",className:(0,u.$)(m().popover_body,r),...n,children:t})},PopoverFooter=e=>{let{sticky:t,children:r,className:n,...o}=e;return(0,a.jsx)("div",{"data-pdl-child":"popover-footer","data-sticky":t,className:(0,u.$)(m().popover_footer,n),...o,children:r})},PopoverClose=e=>{let{position:t="absolute",className:r,...n}=e;return(0,a.jsx)(f,{action:"close","data-position":t,className:(0,u.$)(m().popover_close,r),...n,"data-pdl-child":"popover-close",children:(0,a.jsx)(c.Z,{as:"button",theme:"ghost",size:"sm",showIconOnly:"always",iconLeft:(0,a.jsx)(i.bM,{}),children:"Close"})})},g=d.forwardRef((e,t)=>{let{srOnly:r,asChild:n,className:o,...l}=e,{id:i}=usePopoverContext(),d=n?s.g7:"span";return(0,a.jsx)(d,{...l,ref:t,tabIndex:0,className:(0,u.$)(m().popover_heading,o),"data-pdl-child":"popover-heading","data-sr-only":r,id:"popover-heading-".concat(i)})});g.displayName="PopoverHeading";let usePopoverContext=()=>{let e=(0,d.useContext)(_);if(null==e)throw Error("Popover components must be wrapped in <Popover />");return e}},46272:function(e,t,r){"use strict";r.d(t,{i:function(){return s}});var a=r(85893),n=r(67294),o=r(12251),l=r(9972),i=r.n(l);let getDecimalCount=e=>(String(e).split(".")[1]||"").length,roundValue=(e,t)=>{let r=Math.pow(10,t);return Math.round(e*r)/r},s=n.forwardRef((e,t)=>{let{name:r,min:l=0,max:s=100,step:d=1,disabled:c=!1,value:u,defaultValue:p=[l],onValueChange:m,onValueCommit:_,output:h="none",showSteps:f=!1,stepsInterval:g=1,showMinMax:v=!1,thumbLabels:x,form:b,className:C,...w}=e,y=void 0!==u,[j,I]=n.useState(p),F=y?u:j,S=n.useRef(null),k=n.useRef(!1),N=n.useRef(0),D=Array.from({length:s-l+1},(e,t)=>l+t),P=n.useCallback(e=>{if(!S.current)return l;let t=S.current.getBoundingClientRect(),r=t.width,a=t.left,n=(s-l)*Math.max(0,Math.min(100,(e-a)/r*100))/100+l,o=getDecimalCount(d),i=roundValue(Math.round((n-l)/d)*d+l,o);return Math.max(l,Math.min(s,i))},[s,l,d]),R=n.useCallback((e,t)=>{let r=[...F];r[t]=e,r.sort((e,t)=>e-t),y||I(r),null==m||m(r)},[F,y,m]),T=n.useCallback(e=>{if(c)return;let t=e.target,r=t.hasAttribute("data-slider-thumb");if(k.current=!0,r)N.current=parseInt(t.getAttribute("data-index")||"0",10),t.setPointerCapture(e.pointerId);else{let t=P(e.clientX),r=F.reduce((e,r,a)=>Math.abs(r-t)<Math.abs(F[e]-t)?a:e,0);N.current=r,R(t,r)}},[c,P,F,R]),U=n.useCallback(e=>{if(!k.current||c)return;let t=P(e.clientX);R(t,N.current)},[c,P,R]),E=n.useCallback(e=>{if(k.current){k.current=!1,null==_||_(F);let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId)}},[F,_]),M=n.useCallback(e=>{k.current&&E(e)},[E]),A=n.useCallback(e=>{if(c)return;let t=d||1,r=[...F];switch(e.key){case"ArrowLeft":case"ArrowDown":r[0]=Math.max(l,r[0]-t);break;case"ArrowRight":case"ArrowUp":r[0]=Math.min(s,r[0]+t);break;default:return}null==m||m(r)},[c,d,F,l,s,m]),getThumbStyle=e=>{let t=(e-l)/(s-l)*100;return{left:"calc(".concat(t,"% - ").concat(24*(t/100),"px)")}};return(0,a.jsxs)("div",{ref:t,"data-pdl-child":"slider","data-has-minmax":v,"data-has-output":"thumb"===h,className:(0,o.$)(i().slider_root,C),onPointerDown:T,onPointerMove:U,onPointerUp:E,onPointerLeave:M,onKeyDown:A,"aria-disabled":c,...w,children:[(0,a.jsxs)("div",{ref:S,className:i().slider_track,children:[F.length>=1&&(0,a.jsx)("div",{"data-pdl-child":"slider-range",className:i().slider_range,style:(()=>{if(1===F.length){let[e]=F,t=(e-l)/(s-l)*100;return{position:"absolute",left:"0%",width:"calc(".concat(t,"% + ").concat(t>50?-12*(t/100):12,"px)")}}let[e,t]=F,r=(e-l)/(s-l)*100,a=(t-l)/(s-l)*100;return{left:r,right:100-a}})()}),f&&(0,a.jsx)("div",{className:i().slider_steps,children:D.filter((e,t)=>t%g==0).map(e=>(0,a.jsx)("div",{className:i().slider_step,"data-step-index":e,"data-pdl-child":"slider-step slider-step-".concat(e),"data-step-inrange":F.length>1?e<=F[1]-F[0]:e<=F[0],"data-slider-step":e},e))}),F.map((e,t)=>{var n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{"data-slider-thumb":!0,"data-pdl-child":"slider-thumb slider-thumb-".concat(t),"data-index":t,style:getThumbStyle(e),role:"slider","aria-valuemin":l,"aria-valuemax":s,"aria-valuenow":e,"aria-orientation":"horizontal",className:i().slider_thumb,tabIndex:c?void 0:0,"aria-label":null==x?void 0:x[t],children:[(0,a.jsx)("div",{className:i().slider_thumb_dot}),"thumb"===h&&(0,a.jsx)("div",{className:i().slider_thumb_output,children:F[t]})]},null!==(n=null==x?void 0:x[t])&&void 0!==n?n:"thumb-".concat(t)),(0,a.jsx)(BubbleInput,{name:null==r?void 0:r[t],form:b,value:e},t)]})})]}),v&&(0,a.jsxs)("div",{className:i().slider_minmax,children:[(0,a.jsx)("span",{children:l}),(0,a.jsx)("span",{children:s})]})]})});s.displayName="Slider";let BubbleInput=e=>{let{value:t,...r}=e,o=n.useRef(null);return n.useEffect(()=>{let e=o.current,r=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(r,"value"),n=a.set;if(n){let r=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[t]),(0,a.jsx)("input",{style:{display:"none"},...r,ref:o,defaultValue:t})}},21900:function(e,t,r){"use strict";var a=r(85893),n=r(67294),o=r(12251),l=r(38719),i=r.n(l);let s=n.forwardRef((e,t)=>{let{className:r,isChecked:n,isDisabled:l,children:s,...d}=e,c=(0,o.$)(i().root,r,l&&i().isDisabled);return(0,a.jsxs)("label",{className:c,children:[(0,a.jsx)("div",{className:i().text,children:s}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",className:i().input,disabled:l,checked:n,ref:t,...d}),(0,a.jsx)("span",{className:i().uiElement})]})]})});s.displayName="Switch",t.Z=s},1261:function(e,t,r){"use strict";r.d(t,{O:function(){return Tab},m:function(){return Tabs}});var a=r(85893),n=r(67294),o=r(12251),l=r(42764),i=r.n(l);let Tab=e=>{let{className:t,children:r,isActive:n=!1,...l}=e,s=(0,o.$)(i().tab,n&&i().isActive,t);return(0,a.jsx)("button",{className:s,type:"button",role:"tab",...l,children:(0,a.jsx)("span",{className:i().inner,children:r})})},Tabs=e=>{let{className:t,children:r,...l}=e,s=(0,o.$)(i().tabs,t);return(0,a.jsx)("ol",{className:s,role:"tablist",...l,children:n.Children.map(r,e=>(0,a.jsx)("li",{className:i().tabsItem,children:e}))})}},84684:function(e,t,r){"use strict";var a=r(85893),n=r(67294),o=r(12251),l=r(53213),i=r.n(l);let s=(0,n.forwardRef)((e,t)=>{let{className:r,value:n,hasError:l=!1,isDisabled:s=!1,...d}=e,c=(0,o.$)(i().root,l&&i().hasError,s&&i().isDisabled,r);return(0,a.jsx)("textarea",{ref:t,className:c,value:n,disabled:s,...d})});s.displayName="TextArea",t.Z=s},75241:function(e,t,r){"use strict";var a=r(85893),n=r(67294),o=r(12251),l=r(81516),i=r.n(l);let s=(0,n.forwardRef)((e,t)=>{let{className:r,hasError:n=!1,isDisabled:l=!1,action:s,...d}=e,c=(0,o.$)(i().root,n&&i().hasError,l&&i().isDisabled,!!s&&i().withAction,r);return(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("input",{className:i().input,disabled:l,ref:t,...d}),(0,a.jsx)("div",{className:i().actionWrapper,children:s}),(0,a.jsx)("div",{className:i().wrapper})]})});s.displayName="TextInput",t.Z=s},38401:function(e,t,r){"use strict";r.d(t,{iA:function(){return c},GB:function(){return m},Wt:function(){return f},GX:function(){return i},UG:function(){return ToggleGroupRoot}});var a=r(85893),n=r(61465),o=r(67294);let useRovingIndex=e=>{let{selector:t="button"}=e,r=o.useRef([]),a=o.useRef(null),n=o.useRef(0),l=o.useCallback(e=>{let t=n.current;if("Home"===e.key)t=0;else if("End"===e.key)t=r.current.length-1;else if("ArrowLeft"===e.key)t=n.current-1;else if("ArrowUp"===e.key)t=n.current-1;else if("ArrowDown"===e.key)t=n.current+1;else{if("ArrowRight"!==e.key)return;t=n.current+1}t=t<0?r.current.length-1:t>r.current.length-1?0:t,n.current=t;let a=r.current[t];null==a||a.focus()},[]),i=o.useCallback(e=>{n.current=r.current.findIndex(t=>t===e.target)},[]);return o.useEffect(()=>{var e,o;r.current=Array.from(null!==(o=null===(e=a.current)||void 0===e?void 0:e.querySelectorAll(t))&&void 0!==o?o:[]),n.current=r.current.findIndex(e=>"on"===e.dataset.state)},[t]),o.useEffect(()=>{let e=a.current;return null==e||e.addEventListener("keydown",l),null==e||e.addEventListener("pointerdown",i,!0),()=>{null==e||e.removeEventListener("keydown",l),null==e||e.removeEventListener("pointerdown",i,!0)}},[a,l,i]),a},l=o.createContext({value:"",onToggleSelected:()=>{},type:"checkbox"});function ToggleGroupRoot(e){let{type:t="radio",required:r=!1,value:n,defaultValue:i,onValueChange:s,children:d,...c}=e;r&&void 0===i&&void 0===n&&console.warn("ToggleGroupRoot: When required is true, defaultValue or value is required");let[u,p]=(0,o.useState)(i),m=void 0!==n,_=m?n:u,h=useRovingIndex({selector:"[data-pdl-toggle-group-item]"}),f=o.useCallback(e=>{(!r||void 0!==e&&0!==e.length)&&(m||p(e),s&&s(e))},[r,s,p,m,t]),g=o.useCallback(e=>{if("radio"===t){let t=_===e?void 0:e;f(t)}else if("checkbox"===t){let t=null!=_?_:[],r=t.includes(e),a=r?t.filter(t=>t!==e):[...t,e];f(a)}},[_,t,f]),v=o.useMemo(()=>({value:_,onToggleSelected:g,type:t}),[g,t,_]);return(0,a.jsx)(l.Provider,{value:v,children:(0,a.jsx)("div",{ref:h,role:"group","data-pdl-toggle-group":"",...c,children:d})})}let i=o.forwardRef((e,t)=>{let{value:r,children:i,onClick:s,...d}=e,{value:c,onToggleSelected:u,type:p}=o.useContext(l),m="radio"===p?c===r:Array.isArray(c)&&c.includes(r),_=o.useCallback(e=>{s&&s(e),u(r)},[s,u,r]),h="radio"===p?{role:"radio","aria-checked":m}:{"aria-pressed":m};return(0,a.jsx)(n.g7,{...d,...h,ref:t,role:"button","data-pdl-toggle-group-item":"","data-value":r,"data-state":m?"on":"off",tabIndex:m?0:-1,onClick:_,children:i})});i.displayName="ToggleGroupItem";var s=r(51052),d=r.n(s);let c=o.forwardRef((e,t)=>{let{avatar:r,children:n,...o}=e;return(0,a.jsx)(i,{...o,ref:t,children:(0,a.jsxs)("button",{className:d().toggle_group_bot_selector,children:[r,n]})})});c.displayName="ToggleGroupBotSelector";var u=r(92850),p=r.n(u);let m=o.forwardRef((e,t)=>{let{children:r,...n}=e;return(0,a.jsx)(i,{...n,ref:t,children:(0,a.jsx)("button",{className:p().toggle_group_button,children:r})})});m.displayName="ToggleGroupButton";var _=r(45020),h=r.n(_);let f=o.forwardRef((e,t)=>{let{children:r,...n}=e;return(0,a.jsx)(i,{...n,ref:t,children:(0,a.jsx)("button",{className:h().toggle_group_filter_chip,children:r})})});f.displayName="ToggleGroupFilterChip"},30204:function(e,t,r){"use strict";r.d(t,{Ac:function(){return BodyText},X6:function(){return Heading}});var a=r(85893);r(67294);var n=r(12251),o=r(11967),l=r.n(o),i=r(63930),s=r.n(i);let BodyText=e=>{let{as:t="p",fontWeight:r="normal",size:o="base",theme:i="base",className:s,...d}=e,c=(0,n.$)(l().root,l()["size-".concat(o)],l()["theme-".concat(i)],l()[r],s);return(0,a.jsx)(t,{className:c,...d})},Heading=e=>{let{as:t="div",size:r="base",className:o,...l}=e,i=(0,n.$)(s().root,s()["size-".concat(r)],o);return(0,a.jsx)(t,{className:i,...l})}},94282:function(e,t,r){"use strict";r.d(t,{w:function(){return convertBytesUnit}});let a=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"],convertBytesUnit=e=>{if(0===e)return[0,"byte"];let t=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),a.length-1);return[Math.round(e/Math.pow(1e3,t)),a[t]]}},3687:function(e,t,r){"use strict";r.d(t,{Jg:function(){return n},O6:function(){return useDownloadFile},km:function(){return logDownload}});var a,n,o=r(41143),l=r.n(o),i=r(67294),s=r(22120),d=r(8583),c=r(9729),u=r(30038),p=r(96384),m=r(73331),_=r(23595),h=r(64516);let generateRandomString=e=>[...Array(e)].map(()=>(26*Math.random()|0).toString(36)).join("");(a=n||(n={})).image="image",a.video="video",a.audio="audio",a.other="other";let f={mpeg:"mp3","x-ms-wma":"wma","x-m4a":"m4a","x-ms-asf":"asf"},g={"x-msvideo":"avi","x-matroska":"mkv",ogg:"ogv",quicktime:"mov","x-flv":"flv","x-ms-wmv":"wmv","x-sgi-movie":"movie","x-mpeg":"mpeg"},v={"svg+xml":"svg","x-icon":"ico"},x={"text/plain":"txt","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx"};let DownloadError=class DownloadError extends Error{};let getObjectUrl=async(e,t)=>{if(e.startsWith("blob:"))return[e,""];let r=await fetch(e);if(200!==r.status)throw new DownloadError("Failed to download ".concat(t," (").concat(e,"). Status code: ").concat(r.status,"."));let a=await r.blob(),n=null==a?void 0:a.type.split("/"),o=n[0].toLowerCase()!==t&&"other"!==t;if(!a||o)throw new DownloadError("Failed to download ".concat(t," (").concat(e,"). Invalid ").concat(t," type: ").concat(null==a?void 0:a.type,"."));return[URL.createObjectURL(a),a.type,!0]},logDownload=(e,t,r)=>{let a;let n={};switch(t){case"image":a=u.Z.save_image,n={image_src:e};break;case"video":a=u.Z.save_video;break;case"audio":a=u.Z.save_audio;break;case"other":a=u.Z.save_file_other_type;break;default:l()(a,"Unsupported fileType: ".concat(t))}a&&("image"===t?(0,c.Z)("poe/action_log",{action_type:(0,p.E)(a),bot_id:r.botId,chat_id:r.chatId,message_id:r.messageId,action_metadata:n}):(0,c.Z)("poe/attachment_action_log",{action_type:(0,p.E)(a),attachment_id:r.attachmentId}))},useDownloadFile=()=>{let[e,t]=(0,i.useState)(!1),{t:r}=(0,s.$G)(),a=(0,d.ZP)(),n=(0,i.useCallback)(e=>{let t="";switch(e){case"image":t=r("Failed to download image.");break;case"video":t=r("Failed to download video.");break;case"audio":t=r("Failed to download audio.");break;case"other":t=r("Failed to download file.")}a({type:d.pC.error,content:t})},[a,r]),o=(0,h.F)(),l=(0,_.au)(o),c=(0,_.G6)(o),u="";return[async(e,r,a,o)=>{if(e){o&&o();try{var i;t(!0);let[n,o,s]=await getObjectUrl(e,r);u=n;let d=null!==(i=o.split("/")[1])&&void 0!==i?i:"",p="";"audio"===r?d in f&&(p=f[d]):"video"===r?d in g&&(p=g[d]):"image"===r?d in v&&(p=v[d]):"other"===r&&o in x&&(p=x[o]);let m=document.createElement("a");if(m.href=u,!p&&a){let e=a.match(/\.([a-z0-9]+)$/i);e&&e.length>1&&(p=e[1])}if(c&&!p&&(p=d),a&&p&&a.endsWith("."+p)){let e=a.indexOf("."+p);a=a.substring(0,e)}a=(a=null==a?void 0:a.replaceAll(/[^a-zA-Z0-9]+/g,"_").substring(0,250))+"."+p;let _=a||"poe_"+generateRandomString(6)+"."+p;m.download=_,m.target="_blank",m.rel="noopener noreferrer",document.body.appendChild(m),m.click(),document.body.removeChild(m);let h="audio"===r&&l;s&&!h&&URL.revokeObjectURL(u)}catch(e){e instanceof Error&&(0,m.H)(e),n(r)}finally{t(!1)}}},e]}},61936:function(e,t,r){"use strict";r.d(t,{Y:function(){return useDragAndDrop},w:function(){return getDirectoriesFromDragEvent}});var a=r(67294);let dragContainsNonFileData=e=>{var t;let r=(null===(t=e.dataTransfer)||void 0===t?void 0:t.types)||[];return r.some(e=>"Files"!==e)},useDragEventListener=(e,t,r)=>{(0,a.useEffect)(()=>{let a=e.current;return a&&r?(a.addEventListener(t,r),()=>{a.removeEventListener(t,r)}):()=>{}},[e,t,r])},onDropTargetDragOver=e=>{e.preventDefault()},useDragState=e=>{let[t,r]=(0,a.useState)(!1),n=(0,a.useRef)(0),o=(0,a.useCallback)(()=>{r(!1),n.current=0},[]),l=(0,a.useCallback)(e=>{e.preventDefault(),n.current++,dragContainsNonFileData(e)||r(!0)},[]),i=(0,a.useCallback)(e=>{e.preventDefault(),n.current--,n.current<=0&&r(!1)},[]);return useDragEventListener(e,"dragenter",l),useDragEventListener(e,"dragleave",i),useDragEventListener(e,"dragover",onDropTargetDragOver),{isDraggingOver:t,clearState:o}};function getDirectoriesFromDragEvent(e){var t;let r=Array.from((null===(t=e.dataTransfer)||void 0===t?void 0:t.items)||[]);return r.filter(e=>{var t,r;let a;return!(a=(null==e?void 0:null===(t=e.webkitGetAsEntry)||void 0===t?void 0:t.call(e))||null)&&"getAsEntry"in e&&"function"==typeof e.getAsEntry&&(a=(null===(r=e.getAsEntry)||void 0===r?void 0:r.call(e))||null),null==a?void 0:a.isDirectory})}let useDragAndDrop=(e,t)=>{let r=(0,a.useRef)(document),{isDraggingOver:n,clearState:o}=useDragState(r),{isDraggingOver:l,clearState:i}=useDragState(e),s=(0,a.useCallback)(()=>{o(),i()},[o,i]),d=(0,a.useCallback)(e=>{e.preventDefault(),s(),dragContainsNonFileData(e)||t(e)},[s,t]);return useDragEventListener(r,"drop",s),useDragEventListener(e,"drop",d),{isDropTargetDraggingOver:l,isDocumentDraggingOver:n}}},14813:function(e,t,r){"use strict";r.d(t,{J$:function(){return useFileFragment},mj:function(){return useFilesFragment},zE:function(){return isFile}});var a=r(41143),n=r.n(a),o=r(22578);let isFile=e=>e instanceof File,useFileFragment=(e,t)=>{let r=(0,o.useFragment)(e,isFile(t)?null:t);return isFile(t)?t:r||n()(!1,"Attachment file is undefined")},zipperMerge=(e,t)=>{let r=[],a=0,n=0;for(;a<e.length||n<t.length;)a>=e.length?r.push(t[n++][1]):n>=t.length?r.push(e[a++][1]):e[a][0]<t[n][0]?r.push(e[a++][1]):r.push(t[n++][1]);return r},useFilesFragment=(e,t)=>{let r=t.map((e,t)=>[t,e]),a=r.filter(e=>isFile(e[1])),n=r.filter(e=>!isFile(e[1])),l=(0,o.useFragment)(e,n.map(e=>{let[,t]=e;return t}))||[],i=l.map((e,t)=>[n[t][0],e]);return zipperMerge(a,i)}},93105:function(e,t,r){"use strict";r.d(t,{K9:function(){return getFileSizeErrorMessage},Mj:function(){return checkIfFileIsOverLimit},VX:function(){return parseMessageAttachmentFileSizeLimits},rG:function(){return validateFileSizes},sv:function(){return getTotalFileSize},uy:function(){return parseMimeType}});var a=r(94282);let parseMimeType=e=>{let t=e.split(";")[0],[r,a]=t.split("/");return r&&a?[r,a]:null},parseMessageAttachmentFileSizeLimits=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},getFileSizeErrorMessage=(e,t,r,n)=>{let[o,l]=(0,a.w)(r);return e?n("Attachments of type {{typeDisplayName, string}} must be {{limit, number}} or smaller.",{typeDisplayName:t,limit:o,style:"unit",unit:l,unitDisplay:"short"}):n("The combined size of all attachments must be {{limit, number}} or smaller.",{limit:o,style:"unit",unit:l,unitDisplay:"short"})},getFileTypeDisplayName=(e,t)=>{let r=parseMimeType(e);if(r){let[e,a]=r;if("text"===e){if("plain"===a)return t("text");if(["csv","html"].includes(a))return a}if("application"===e){if("pdf"===a)return"pdf";if("vnd.openxmlformats-officedocument.wordprocessingml.document"===a)return"docx"}if("image"===e)return["jpeg","png"].includes(a)?a:t("image");if("video"===e)return t("video");if("audio"===e)return t("audio")}return t("file")},getFileTypeSizeLimit=(e,t)=>{let r=t.total,a=parseMimeType(e);if(a){let[e,n]=a;"application"===e&&(r=t.application),"audio"===e&&(r=t.audio),"image"===e&&(r=t.image),"text"===e&&(r=t.text),"video"===e&&(r=t.video),"octet-stream"===n&&(r=t.total)}return r},getTotalFileSize=e=>{let t=0;for(let r of e)t+=r.size;return t},checkIfFileIsOverLimit=(e,t)=>{if(!t)return{isFileOverLimit:!1,fileTypeOverLimit:"",fileTypeSizeLimit:0};let r="",a=!1,n=t.total;return e.forEach(e=>{!a&&(n=getFileTypeSizeLimit(e.type,t),e.size>n&&(r=e.type,a=!0))}),{isFileOverLimit:a,fileTypeOverLimit:r,fileTypeSizeLimit:n}},validateFileSizes=e=>{let{files:t,limits:r,t:a}=e;if(!t.length)return null;let n=0;for(let e of t){n+=e.size;let t=getFileTypeSizeLimit(e.type,r);if(e.size>t)return getFileSizeErrorMessage(!0,getFileTypeDisplayName(e.type,a),t,a)}return n>r.total?getFileSizeErrorMessage(!1,getFileTypeDisplayName("",a),r.total,a):null}},13239:function(e){e.exports={container:"AspectRatioControl_container__TN0Oe",aspectRatioPreview:"AspectRatioControl_aspectRatioPreview__rDHik",aspectRatioPreviewContainer:"AspectRatioControl_aspectRatioPreviewContainer__HsQSt",toggleGroup:"AspectRatioControl_toggleGroup___D1gz",toggleGroupButton:"AspectRatioControl_toggleGroupButton__V0Flu",toggleGroupSpacer:"AspectRatioControl_toggleGroupSpacer__9uPBK"}},65858:function(e){e.exports={dropZone:"FilePickerControl_dropZone__jLcQ7",dropZoneWithFiles:"FilePickerControl_dropZoneWithFiles__ny0xg",dropZoneEmpty:"FilePickerControl_dropZoneEmpty__ozkBa",fileInput:"FilePickerControl_fileInput__wGGSV",attachmentsBar:"FilePickerControl_attachmentsBar__sal9r",attachment:"FilePickerControl_attachment__XglyM",instructionBarEmpty:"FilePickerControl_instructionBarEmpty__x9Rvx",instructionBar:"FilePickerControl_instructionBar__AJ8a3"}},69606:function(e){e.exports={card:"CollapsibleCard_card__6YqZz",card_header:"CollapsibleCard_card_header__kHwdI",card_caret:"CollapsibleCard_card_caret___vv4v",card_trigger:"CollapsibleCard_card_trigger__NV_pi",card_caret_chevron:"CollapsibleCard_card_caret_chevron__gMSsM",card_caret_cross:"CollapsibleCard_card_caret_cross__GlpQn",card_content:"CollapsibleCard_card_content__PTVcQ"}},91320:function(e){e.exports={collapsible_content:"Collapsible_collapsible_content__ktNGt"}},79850:function(e){e.exports={root:"divider_root__cw1qp",base:"divider_base__HMwuM",emphasis:"divider_emphasis__mOgrk"}},75407:function(e){e.exports={backdrop:"Drawer_backdrop__p9Xng",drawer_overlay:"Drawer_drawer_overlay__U2ias","drawer-slide-in":"Drawer_drawer-slide-in__5WpZz","drawer-slide-out":"Drawer_drawer-slide-out__RCt1W",scroll_container:"Drawer_scroll_container__hQk6U",drawer_content:"Drawer_drawer_content__z_Oe4",drawer_footer:"Drawer_drawer_footer__6uY5S",drawer_header:"Drawer_drawer_header__nxC2u",drawer_body:"Drawer_drawer_body__J5bIG",drawer_close:"Drawer_drawer_close__6QZk9",drawer_heading:"Drawer_drawer_heading__6qL_F"}},36188:function(e){e.exports={root:"dropdown_root__2_WSm",full:"dropdown_full__bDjY7",select:"dropdown_select__fee24",caret:"dropdown_caret____mQ3",hasError:"dropdown_hasError__EWuOO",isDisabled:"dropdown_isDisabled__DnGDv"}},74110:function(e){e.exports={label:"label_label__nVwM5",description:"label_description__5PwcV",wrapper:"label_wrapper__qvdO_",default:"label_default__MN8Kg",disabled:"label_disabled__STjrN",error:"label_error__J5tO4",optional:"label_optional___xgjU",required:"label_required__Tgc6_"}},36876:function(e){e.exports={popover_overlay:"Popover_popover_overlay__mzPQQ",popover_heading:"Popover_popover_heading__MB2fp",popover_arrow:"Popover_popover_arrow__l40a9",popover_scroll_container:"Popover_popover_scroll_container__YHR5S",popover_content:"Popover_popover_content__aZiOP",popover_footer:"Popover_popover_footer__yvKPd",popover_close:"Popover_popover_close__eOJGT",popover_header:"Popover_popover_header__kOc7M",popover_body:"Popover_popover_body__eeTvV"}},9972:function(e){e.exports={slider_root:"Slider_slider_root__6SHms",slider_track:"Slider_slider_track__uHH7a",slider_range:"Slider_slider_range__u_V7v",slider_steps:"Slider_slider_steps__4aKnP",slider_step:"Slider_slider_step__bScUF",slider_minmax:"Slider_slider_minmax__KKiuw",slider_thumb:"Slider_slider_thumb__n92a5",slider_thumb_dot:"Slider_slider_thumb_dot__iSWXP",slider_thumb_output:"Slider_slider_thumb_output__NAN7s"}},38719:function(e){e.exports={root:"switch_root___vZBZ",isDisabled:"switch_isDisabled__5vwaF",input:"switch_input__8I5Oq",uiElement:"switch_uiElement__Yu93b",text:"switch_text__OKPsR",isChecked:"switch_isChecked__T9bSp"}},42764:function(e){e.exports={reset:"button_reset__UkH98",tabs:"tab_tabs__fbjCM",tabsItem:"tab_tabsItem__MVYvW",tab:"tab_tab__380dY button_reset__UkH98",inner:"tab_inner__lR6r6",isActive:"tab_isActive__rSDRV"}},53213:function(e){e.exports={root:"textArea_root__HPeK1",hasError:"textArea_hasError__iC4wN",isDisabled:"textArea_isDisabled__4XBQP"}},81516:function(e){e.exports={root:"textInput_root__vXWK0",input:"textInput_input__9YpqY",wrapper:"textInput_wrapper__p6IWz",hasError:"textInput_hasError__nkiMW",isDisabled:"textInput_isDisabled__F1eTN",withAction:"textInput_withAction__f9lsI",actionWrapper:"textInput_actionWrapper__NOEMH"}},51052:function(e){e.exports={toggle_group_bot_selector:"ToggleGroupBotSelector_toggle_group_bot_selector__t_yr7"}},92850:function(e){e.exports={toggle_group_button:"ToggleGroupButton_toggle_group_button__7uUzh"}},45020:function(e){e.exports={toggle_group_filter_chip:"ToggleGroupFilterChip_toggle_group_filter_chip__KAL6r"}},11967:function(e){e.exports={root:"bodyText_root__h5UoB","theme-base":"bodyText_theme-base__wQsgf","theme-muted":"bodyText_theme-muted__WXmM_","size-base":"bodyText_size-base__RxKww",normal:"bodyText_normal__4recy",semibold:"bodyText_semibold__hpoPW",bold:"bodyText_bold__54UFa","size-sm":"bodyText_size-sm__dqRT3","size-x-sm":"bodyText_size-x-sm__RygY8"}},63930:function(e){e.exports={root:"heading_root__58aDJ","size-base":"heading_size-base__8X1GH","size-md":"heading_size-md__VdS_L"}},94257:function(e){e.exports={tabsHeader:"ChatMessageCustomUIButton_tabsHeader__YxUou",component:"ChatMessageCustomUIButton_component__Jtyyv",toggleSwitch:"ChatMessageCustomUIButton_toggleSwitch__fZdYH",controlsContainer:"ChatMessageCustomUIButton_controlsContainer__tCKl6",customUITopLevelContainer:"ChatMessageCustomUIButton_customUITopLevelContainer__BFywP",columnsContainer:"ChatMessageCustomUIButton_columnsContainer__tMzsr",topLevelContainerColumnLeft:"ChatMessageCustomUIButton_topLevelContainerColumnLeft__vJajc",topLevelContainerColumnRight:"ChatMessageCustomUIButton_topLevelContainerColumnRight__z8PI7",collapsibleCard:"ChatMessageCustomUIButton_collapsibleCard__hR6KW",resetButton:"ChatMessageCustomUIButton_resetButton__uRH8A",button:"ChatMessageCustomUIButton_button__xgsBN",headerNotInteractive:"ChatMessageCustomUIButton_headerNotInteractive__CBZ2L",conditionallyRendered:"ChatMessageCustomUIButton_conditionallyRendered__S9otC",fadeIn:"ChatMessageCustomUIButton_fadeIn___Wvj8"}},97554:function(e){e.exports={expanded:"only screen and (min-width : 1400px)",large:"only screen and (min-width : 1000px)","large-only":"only screen and (min-width : 1000px) and (max-width : 1399px)","large-below":"only screen and (max-width : 1399px)",medium:"only screen and (min-width : 685px)","medium-only":"only screen and (min-width : 685px) and (max-width : 999px)","medium-below":"only screen and (max-width : 999px)","compact-only":"only screen and (max-width : 684px)","compact-below":"only screen and (max-width : 683px)"}},99460:function(e){e.exports={dismissableContainer:"Dismissable_dismissableContainer__4Q5Jv",dismissButton:"Dismissable_dismissButton__faL3Y",icon:"Dismissable_icon__nU8Xb"}},27311:function(e){e.exports={fileInfo:"FileInfo_fileInfo__5ZvMO",loading:"FileInfo_loading__XwVJt",textPane:"FileInfo_textPane__d9VVB",title:"FileInfo_title__sUM2l",metadata:"FileInfo_metadata__Wu4uZ",fileType:"FileInfo_fileType__KZDVV",image:"FileInfo_image__M_cAh",imageLoader:"FileInfo_imageLoader__czDR_",interactiveImage:"FileInfo_interactiveImage__AHKat"}},7849:function(e){e.exports={loadingSpinner:"LoadingSpinner_loadingSpinner__vCqHc",spin:"LoadingSpinner_spin__DgELP",defaultSize:"LoadingSpinner_defaultSize__ekQCH",accent:"LoadingSpinner_accent__7GqPF",base:"LoadingSpinner_base__bJwcP"}}}]);