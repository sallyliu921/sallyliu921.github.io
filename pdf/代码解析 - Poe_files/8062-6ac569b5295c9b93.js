"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8062],{38062:function(e,n,i){i.d(n,{DZ:function(){return getValidatedRedirectUrlFromQueryParams},Dl:function(){return redirectToLoginPageForSocialSignupAttemptMissingBirthday},Ho:function(){return redirectToLoginPageForSocialSignupAttemptMissingEmail},SN:function(){return setRedirectUrlQueryParamForCurrentUrl},Sh:function(){return useOnLoginSuccess},W3:function(){return getDefaultGoogleSignupLoginErrorMessage},X0:function(){return redirectToLoginPage},YL:function(){return isShowSubscriptionWallParamPresent},_q:function(){return redirectToLoginPageForSocialSignupAttemptMissingAgreements},b8:function(){return redirectToLoggedInHomePage},bl:function(){return o},dh:function(){return removeRedirectUrlQueryParamFromCurrentUrl},gA:function(){return getRedirectUrlFromSignupLoginResponse},gS:function(){return getDefaultUserVerificationErrorMessage},gW:function(){return getDesktopAppOpenPageUrl},gf:function(){return useHandleGoogleSignupLoginMutationStatusForGoogleOneTap},h2:function(){return hasUserStartedSignupFlow},k9:function(){return setRedirectUrlToHomeWithSubscriptionWall},kC:function(){return v},n$:function(){return a},o1:function(){return maybeGetRedirectUrl},pT:function(){return redirectToLoginPageForSocialSignupAttemptMissingPhoneNumber},q2:function(){return C},yn:function(){return getDefaultLoginErrorMessage}});var t,r,o,a,u=i(19692),s=i(11163),l=i(67294),_=i(22120),c=i(8583),d=i(6740),g=i(9729),p=i(87301),m=i(67646),f=i(74285),S=i(6940),h=i(99391),b=i(45598),y=i(64183),w=i(94316),P=i(96182);let getDefaultUserVerificationErrorMessage=e=>e("Something went wrong. Please wait a moment and try again."),getDefaultLoginErrorMessage=e=>e("An error occurred, please try again."),v="/login",k="missing_email",R="login_success",A="signup_method",U="redirect_url",L="show_subscription_wall",redirectToLoginPageForSocialSignupAttemptMissingBirthday=(e,n,i)=>{redirectToLoginPage(e,i,{missing_birthday:"1",[A]:n})},redirectToLoginPageForSocialSignupAttemptMissingAgreements=(e,n,i,t)=>{redirectToLoginPage(e,i,{...t||{},missing_agreements:"1",[A]:n})},redirectToLoginPageForSocialSignupAttemptMissingPhoneNumber=(e,n,i)=>{redirectToLoginPage(e,i,{missing_phone_number:"1",[A]:n})},hasUserStartedSignupFlow=e=>{let{isLoginPage:n,queryParams:i}=e;return n&&("1"===i[k]||!!i[A])},redirectToLoginPageForSocialSignupAttemptMissingEmail=(e,n)=>{redirectToLoginPage(e,n,{[k]:"1"})},isShowSubscriptionWallParamPresent=e=>"1"===e[L],setRedirectUrlToHomeWithSubscriptionWall=e=>{setRedirectUrlQueryParamForCurrentUrl(e,"/?".concat(L,"=1"))},redirectToLoginPage=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.replace({pathname:v,query:{...i,[U]:null!=n?n:"/"}})},redirectToDesktopAppOpenPage=(e,n)=>{let i=getDesktopAppOpenPageUrl(n);e.replace(i)},maybeGetDesktopAppLoginRequestCode=e=>{let n=e.query.desktop_app_login_request_code;if((0,b.H)(n)&&n.length>0)return n},getValidatedRedirectUrlFromQueryParams=e=>{let n=e[U];if(n&&isValidRedirectUrl(String(n)))return String(n)},setRedirectUrlQueryParamForCurrentUrl=(e,n)=>{e.replace({query:{...e.query,[U]:isValidRedirectUrl(n)?n:void 0}})},removeRedirectUrlQueryParamFromCurrentUrl=e=>{let n={...e.query};delete n[U],e.replace({query:n})},getDesktopAppOpenPageUrl=e=>"/desktop_app_open?desktop_app_login_request_code=".concat(encodeURIComponent(e)),redirectToLoggedInHomePage=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n?"/?".concat(R,"=1"):"/";e.replace(i)},maybeGetRedirectUrl=e=>{let n=getValidatedRedirectUrlFromQueryParams(e.query);if(n)return n},getRedirectUrlFromSignupLoginResponse=e=>{let{redirectChatCode:n,redirectUrl:i}=e;if(n)return"/chat/".concat(n);if(i){let e=i.split("?")[1];if(e){let n=new URLSearchParams(e).get(U);if(n&&isValidRedirectUrl(n))return n}}if(i&&isValidRedirectUrl(i))return i},isValidRedirectUrl=e=>e&&e.length>0&&e.startsWith("/")&&!e.includes(":"),useOnLoginSuccess=()=>{let{t:e}=(0,_.$G)(),n=(0,s.useRouter)(),i=(0,S.AO)(),t=(0,c.ZP)(),r=(0,p.q)(),o=(0,l.useCallback)(n=>t({content:n?e("You have successfully signed up"):e("You have successfully logged in"),type:c.pC.success}),[t,e]);return(0,l.useCallback)(async e=>{let{isSignUp:t,isEligibleForRedirectToLoggedInHomePage:a=!0,showLoginSuccessToastAfterRedirectingToDifferentPage:s=!1,redirectUrl:l=maybeGetRedirectUrl(n),loginRequestCode:_=maybeGetDesktopAppLoginRequestCode(n),googleTagManagerEnhancedConversionProperties:c="{}",shouldSendGTMEvent:g=!0}=e;if(t){if(await (0,f.hP)("sng_complete_registration"),g){let e=JSON.parse(c);(0,u.sendGTMEvent)({event:w.Z.CompleteRegistration,...e})}}else await (0,f.hP)("sng_login");if((null==l?void 0:l.startsWith("/chat/"))||(await (0,m.sr)(),await (0,h.FV)()),_){o(!1),redirectToDesktopAppOpenPage(n,_);return}if(l&&isValidRedirectUrl(l))(l===n.asPath||s)&&o(t),window.location.replace(l);else if(a){let e=s?"/?".concat(R,"=1"):"/";window.location.replace(e)}else r(),o(t);(0,d.E)(),i(!0)},[n,i,r,o])},getDefaultGoogleSignupLoginErrorMessage=e=>e("Failed to complete Google login. Please wait a moment and try again."),useHandleGoogleSignupLoginMutationStatusForGoogleOneTap=()=>{let e=useOnLoginSuccess(),n=(0,c.ZP)(),i=(0,s.useRouter)(),{t}=(0,_.$G)(),r=getDefaultGoogleSignupLoginErrorMessage(t);return(0,l.useCallback)(t=>{let{status:o,redirectUrl:a,errorMessage:u,errorRedirectUrl:s,showLoginSuccessToastAfterRedirectingToDifferentPage:l,googleTagManagerEnhancedConversionProperties:_="{}"}=t;o===y.Z.success||o===y.Z.success_signup?e({isSignUp:o===y.Z.success_signup,redirectUrl:a,showLoginSuccessToastAfterRedirectingToDifferentPage:l,googleTagManagerEnhancedConversionProperties:_}):o===y.Z.recently_verified_phone_number_not_found?redirectToLoginPageForSocialSignupAttemptMissingPhoneNumber(i,P.Z.google,a):o===y.Z.birthday_not_found?redirectToLoginPageForSocialSignupAttemptMissingBirthday(i,P.Z.google,a):o===y.Z.agreement_acceptance_incomplete?redirectToLoginPageForSocialSignupAttemptMissingAgreements(i,P.Z.google,a):(n({content:null!=u?u:r,type:c.pC.error}),u||(0,g.Z)("poe/signup_login_client_side_error",{status:o,signup_method:P.Z.google}),s&&i.replace({pathname:s}))},[r,e,i,n])};(t=o||(o={}))[t.loginStarted=1]="loginStarted",t[t.signupStarted=2]="signupStarted",t[t.signupContinued=3]="signupContinued",t[t.signupContinuedCodeSent=4]="signupContinuedCodeSent",t[t.signupContinuedBirthdayRequired=5]="signupContinuedBirthdayRequired",t[t.signupContinuedAgreementAcceptanceRequired=6]="signupContinuedAgreementAcceptanceRequired",(r=a||(a={}))[r.emailAddress=0]="emailAddress",r[r.phoneNumber=1]="phoneNumber";let C=/^[0-9]{6,}$/i},74285:function(e,n,i){let t;i.d(n,{Rz:function(){return useInitSingular},h0:function(){return getSingularDeviceId},hP:function(){return singularEvent}});var r=i(67294);let o="quora_b_46ba1291c98480d9dde6fed2b16c7cae__90053357",a="aff4cbc69cc3fee7a3b851fb6c40fed3",u="com.poe",initSingular=async()=>{await loadAndInitSingularSdk()},useInitSingular=()=>{(0,r.useEffect)(()=>{initSingular()},[])},loadAndInitSingularSdk=async()=>(t||(t=_loadAndInitSingularSdk()),await t),_loadAndInitSingularSdk=async()=>{let e=await i.e(7362).then(i.t.bind(i,58961,23)),{singularSdk:n,SingularConfig:t}=e;return await new Promise(e=>{if(n&&t&&o&&a&&u){let i=new t(o,a,u);i.withInitFinishedCallback(()=>e()),n.init(i)}}),e},singularEvent=async e=>{let n=await loadAndInitSingularSdk();return n.singularSdk.event(e)},getSingularDeviceId=async()=>{let e=await loadAndInitSingularSdk();return e.singularSdk.getSingularDeviceId()}},64183:function(e,n){var i,t;(t=i||(i={})).success="success",t.success_signup="success_signup",t.bad_actor="bad_actor",t.rate_limit_exceeded_ip="rate_limit_exceeded_ip",t.suspicious_name_email="suspicious_name_email",t.no_external_account_info="no_external_account_info",t.rate_limit_exceeded_browser_id="rate_limit_exceeded_browser_id",t.banned_browser_id="banned_browser_id",t.other="other",t.email_unconfirmed="email_unconfirmed",t.email_not_found="email_not_found",t.bad_email="bad_email",t.bad_name="bad_name",t.bad_password="bad_password",t.too_many_attempts="too_many_attempts",t.banned_user="banned_user",t.incorrect_password="incorrect_password",t.two_factor_authentication="two_factor_authentication",t.password_leaked="password_leaked",t.force_password_reset="force_password_reset",t.account_delete="account_delete",t.invalid_token="invalid_token",t.blocked_ip="blocked_ip",t.bad_token="bad_token",t.missing_fb_info="missing_fb_info",t.obfuscated_email="obfuscated_email",t.failed_captcha="failed_captcha",t.already_logged_in="already_logged_in",t.account_already_exists="account_already_exists",t.invite_code_needed="invite_code_needed",t.password_needed="password_needed",t.no_google_name="no_google_name",t.unconfirmed_account_exists="unconfirmed_account_exists",t.bad_authentication_token="bad_authentication_token",t.unverified_social_login_for_existing_account="unverified_social_login_for_existing_account",t.invalid_google_data="invalid_google_data",t.no_email="no_email",t.refused="refused",t.failed="failed",t.invalid_verification_code="invalid_verification_code",t.user_with_confirmed_email_not_found="user_with_confirmed_email_not_found",t.user_with_confirmed_phone_number_not_found="user_with_confirmed_phone_number_not_found",t.recently_verified_phone_number_not_found="recently_verified_phone_number_not_found",t.recently_verified_email_not_found="recently_verified_email_not_found",t.rate_limit_exceeded_default="rate_limit_exceeded_default",t.no_verification_in_progress="no_verification_in_progress",t.birthday_not_found="birthday_not_found",t.user_not_old_enough_to_signup="user_not_old_enough_to_signup",t.invalid_birthday="invalid_birthday",t.too_many_user_not_old_enough_to_signup_errors_recently="too_many_user_not_old_enough_to_signup_errors_recently",t.agreement_acceptance_incomplete="agreement_acceptance_incomplete",t.pending_deletion_for_missing_email="pending_deletion_for_missing_email",t.invalid_auth_code="invalid_auth_code",t.invalid_desktop_app_login_request_code="invalid_desktop_app_login_request_code",t.invalid_desktop_app_auth_token="invalid_desktop_app_auth_token",n.Z=i},94316:function(e,n){var i,t;(t=i||(i={})).CompleteRegistration="CompleteRegistration",t.Subscribe="Subscribe",t.MonthlySubscribe="MonthlySubscribe",t.YearlySubscribe="YearlySubscribe",n.Z=i},96182:function(e,n){var i,t;(t=i||(i={})).google="google",t.facebook="facebook",t.twitter="twitter",t.email="email",t.apple="apple",t.quora="quora",n.Z=i}}]);