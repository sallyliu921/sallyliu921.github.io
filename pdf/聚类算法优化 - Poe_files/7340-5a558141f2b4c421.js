(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7340],{8787:function(e,n,t){"use strict";var a,i=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=i.createElement("path",{d:"M4 13h14.09l-6.79 6.79a.996.996 0 1 0 1.41 1.41l8.5-8.5c.06-.06.09-.13.13-.2.03-.04.06-.08.08-.13a.91.91 0 0 0 .08-.37c0-.03-.01-.05-.01-.07-.01-.1-.02-.21-.06-.31a.955.955 0 0 0-.22-.33L12.72 2.8c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.71.29a.996.996 0 0 0 0 1.41L18.08 11H4c-.55 0-1 .45-1 1s.45 1 1 1Z"})))}},57758:function(e,n,t){"use strict";var a,i=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=i.createElement("path",{d:"M2.5 8.38c0 .26.1.51.29.71l8.5 8.5c.39.39 1.02.39 1.41 0l8.5-8.5a.996.996 0 1 0-1.41-1.41L12 15.46 4.2 7.67a.996.996 0 0 0-1.41 0c-.19.2-.29.45-.29.71Z"})))}},89846:function(e,n,t){"use strict";var a,i=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}n.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2Zm0 4a1 1 0 0 1 1 1v4h4a1 1 0 1 1 0 2h-4v4a1 1 0 1 1-2 0v-4H7a1 1 0 1 1 0-2h4V7a1 1 0 0 1 1-1Z"})))}},71745:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment",selections:[{kind:"FragmentSpread",name:"FileInfo_attachment"}],type:"MessageAttachment"};a.hash="5c1de64091b0951dc9cce2f9eac236f1",n.default=a},76862:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer",selections:[{kind:"FragmentSpread",name:"FileInfo_viewer"}],type:"Viewer"};a.hash="d9c9bd2d1160ffd2047b73ad589df9bb",n.default=a},79315:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputAttachments_messageAttachments",selections:[{kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment"}],type:"MessageAttachment"};a.hash="eeaee6404e1a35d10e11dfb47510ff60",n.default=a},30702:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer"}],type:"Viewer"};a.hash="cecc4cb7b08e0fc64f11ecf14a181d25",n.default=a},80752:function(e,n,t){"use strict";var a,i;t.r(n);let r={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"FragmentSpread",name:"ChatMessageSendButton_bot"},{kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{kind:"FragmentSpread",name:"useFileUpload_bot"},i={kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},a={concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"numRemainingMessages"}]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_bot",selections:[a],argumentDefinitions:[]},i],argumentDefinitions:[]}],type:"Bot"};r.hash="fe29d7da9f8240a71498295fbddcc530",n.default=r},91305:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_chat",selections:[{kind:"ScalarField",name:"chatCode"},{kind:"FragmentSpread",name:"ChatMessageInputBotSelector_chat"},{kind:"FragmentSpread",name:"useMultibotAtMention_chat"},{kind:"InlineDataFragmentSpread",name:"useFileUpload_chat",selections:[{kind:"ScalarField",name:"chatId"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useIsMultiUserChat_chat"}],type:"Chat"};a.hash="92800ee3102b4fb59fa2d6986bccc321",n.default=a},52103:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputContainer_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_messageEdges"}],type:"MessageEdge"};a.hash="3763d1e0a57ccedfde9ee810abab3e3b",n.default=a},4027:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageSendButton_viewer"},{kind:"FragmentSpread",name:"ChatMessageInputAttachments_viewer"},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]},{alias:"useChatModalPaywalls",args:[{kind:"Literal",name:"gateName",value:"poe_pay_by_context_chat_modal_paywalls"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pay_by_context_chat_modal_paywalls")'}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useFileUpload_viewer"},{kind:"FragmentSpread",name:"useIsMultiUserChat_viewer"},{alias:"enableFileSizeLimitsByFileType",args:[{kind:"Literal",name:"gateName",value:"poe_enable_file_size_limits_by_file_type"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_file_size_limits_by_file_type")'},{kind:"ScalarField",name:"fileUploadSizeLimits"}],type:"Viewer"};a.hash="827b9bd22bcf0fb02f62cb2278ee9b96",n.default=a},83530:function(e,n,t){"use strict";var a,i,r,s,l,o;t.r(n);let u={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{args:i=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[r={kind:"ScalarField",name:"balanceTooltipText"},s={kind:"ScalarField",name:"numRemainingMessages"},l={kind:"ScalarField",name:"balanceTooltipType"}]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{args:i,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[r,s,l,o={kind:"ScalarField",name:"id"}]},o]}]},params:{id:"75a11bd9f1bf79d7c57e2d6bc2decf7acf0818fd51b19bfaaaa1bd69c78c7713",metadata:{},name:"ChatMessageLimitTooltipBotRefetchQuery",operationKind:"query",text:null}};u.hash="314a0e419e698efc6a45f0db4b881fbf",n.default=u},3306:function(e,n,t){"use strict";var a,i,r;t.r(n);let s=(r={kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[i={kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[a={kind:"ScalarField",name:"numRemainingMessages"}]}],argumentDefinitions:[]},{argumentDefinitions:[],kind:"Fragment",name:"ChatMessageLimitTooltip_bot",selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"balanceTooltipText"},a,{kind:"ScalarField",name:"balanceTooltipType"}]},i,r,{kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[r,{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]}],type:"Bot"});s.hash="e405af93361e3060bb0b89bb03e47e18",n.default=s},64964:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageLimitTooltip_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{alias:"showPointsWarningBanner",args:[{kind:"Literal",name:"gateName",value:"poe_enable_out_of_points_warnings"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_out_of_points_warnings")'}],type:"Viewer"};a.hash="0016686a78ee24a1e7853479341b0b6f",n.default=a},15157:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageSendButton_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageLimitTooltip_bot"}],type:"Bot"};a.hash="82fbd2e64529b601ae67251cfcd5e239",n.default=a},78353:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageSendButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageLimitTooltip_viewer"}],type:"Viewer"};a.hash="ed14f72231a4384c345c485904951c2a",n.default=a},33848:function(e,n,t){"use strict";t.r(n);let a={kind:"InlineDataFragment",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge"};a.hash="a01c79c1084fa7fcca797236c2cf1604",n.default=a},28159:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_useOnKeyDown_messageEdges"}],type:"MessageEdge"};a.hash="adef175ef9e8eb0b392205c0b7ec1e41",n.default=a},45830:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_useOnKeyDown_messageEdges",selections:[{kind:"InlineDataFragmentSpread",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge",selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"text"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]}]}],argumentDefinitions:[]}],type:"MessageEdge"};a.hash="326ac8a25d146f97c1aab77fcfc8ef9b",n.default=a},96035:function(e,n,t){"use strict";var a,i,r;t.r(n);let s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"dismissibleType"}],kind:"Fragment",name:"MwebAndroidSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i=[{kind:"Variable",name:"dismissibleType",variableName:"dismissibleType"}],concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r={kind:"ScalarField",name:"shouldSeeAndroidSubscriptionAnnouncement"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MwebAndroidSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i,concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{kind:"ScalarField",name:"id"}]}]}]},params:{id:"d783c7564e85e14dac870e5ca01c325a98a237375f2e4f332f2a3b9bcf082833",metadata:{},name:"MwebAndroidSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",operationKind:"mutation",text:null}};s.hash="8a0b27f1765a46901355248281b1eedb",n.default=s},11989:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"MwebAndroidSubscriptionAnnouncementModalOpener_viewer",selections:[{kind:"ScalarField",name:"shouldSeeAndroidSubscriptionAnnouncement"}],type:"Viewer"};a.hash="773789ae4f752092e075c3efd8b5dd4c",n.default=a},45815:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"PaywallContextWrapper_bot",selections:[{kind:"FragmentSpread",name:"WebSubscriptionAnnouncementModalOpener_bot"}],type:"Bot"};a.hash="8bdd078b81c5b18516a17bb7c66e0525",n.default=a},56848:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"PaywallContextWrapper_viewer",selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"__typename"}]},{kind:"FragmentSpread",name:"WebSubscriptionAnnouncementModalOpener_viewer"},{kind:"FragmentSpread",name:"MwebAndroidSubscriptionAnnouncementModalOpener_viewer"},{kind:"FragmentSpread",name:"WebSubscriptionSuccessMessage_useWebSubscriptionSuccessMessage_viewer"},{kind:"FragmentSpread",name:"PaywallOpener_viewer"}],type:"Viewer"};a.hash="ffa118409239423247ec506e443eac66",n.default=a},1828:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"PaywallOpener_bot",selections:[{kind:"ScalarField",name:"botId"}],type:"Bot"};a.hash="054da9770fdcbc9651c2250b3e9e1380",n.default=a},90665:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"PaywallOpener_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],type:"Viewer"};a.hash="53765bb3e6b970ee48746b1e762a581e",n.default=a},10962:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"}],type:"Bot"};a.hash="7419bc47e1519b00c927f4085fb4b0dc",n.default=a},74969:function(e,n,t){"use strict";var a,i,r;t.r(n);let s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"dismissibleType"}],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i=[{kind:"Variable",name:"dismissibleType",variableName:"dismissibleType"}],concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r={kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i,concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{kind:"ScalarField",name:"id"}]}]}]},params:{id:"4a5844dcd7e79cd6b2c0bcadebbbf593e85a167b1cab854d5527e6be12c8b468",metadata:{},name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",operationKind:"mutation",text:null}};s.hash="5ef690b09af14848d43e2c77b76aeaad",n.default=s},34932:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"creationTime"}]}],type:"Viewer"};a.hash="2f5b19f143369a7a724a2c3712f4c1b4",n.default=a},51689:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"WebSubscriptionSuccessMessage_useWebSubscriptionSuccessMessage_viewer",selections:[{kind:"ScalarField",name:"uid"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},{kind:"ScalarField",name:"expiresTime"},{kind:"ScalarField",name:"willCancelAtPeriodEnd"},{kind:"ScalarField",name:"purchaseRevocationReason"},{kind:"ScalarField",name:"planType"}]},{alias:"subscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"Subscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"Subscribe")'},{alias:"monthlySubscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"MonthlySubscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"MonthlySubscribe")'},{alias:"yearlySubscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"YearlySubscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"YearlySubscribe")'},{alias:"enableGTMEventSending",args:[{kind:"Literal",name:"gateName",value:"poe_enable_event_sending_through_google_tag_manager"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_event_sending_through_google_tag_manager")'}],type:"Viewer"};a.hash="62b402caf05e7223cf664f1428474300",n.default=a},58441:function(e,n,t){"use strict";var a,i,r,s,l,o,u,c,d,m,p,g;t.r(n);let b=(a={defaultValue:null,kind:"LocalArgument",name:"chatCode"},i={defaultValue:null,kind:"LocalArgument",name:"handle"},r={defaultValue:null,kind:"LocalArgument",name:"hasChat"},s=[{kind:"Variable",name:"name",variableName:"handle"}],l={kind:"ScalarField",name:"canUserAccessBot"},o={kind:"ScalarField",name:"handle"},c={condition:"hasChat",kind:"Condition",passingValue:!0,selections:[{args:[u={kind:"Variable",name:"chatCode",variableName:"chatCode"}],kind:"ScalarField",name:"isInChat"}]},d=[u,{kind:"Variable",name:"hasChat",variableName:"hasChat"}],m=[a,r],{fragment:{argumentDefinitions:[a,i,r],kind:"Fragment",name:"useMultibotAtMentionSelectBotQuery",selections:[{args:s,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l,{kind:"InlineDataFragmentSpread",name:"useMultibotAtMention_selectBot",selections:[o,{kind:"InlineDataFragmentSpread",name:"ChatMessageInputFooter_selectBot",selections:[o,c,{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],args:d,argumentDefinitions:m},{kind:"InlineDataFragmentSpread",name:"ChatHomeMain_selectBot",selections:[p={kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"PaywallContextWrapper_bot"},{kind:"FragmentSpread",name:"ChatHomeMainInputContainer_bot"},{kind:"InlineDataFragmentSpread",name:"useHomeBotSelector_selectBot",selections:[p,{kind:"FragmentSpread",name:"BotSelectorHomeMain_bots"}],argumentDefinitions:[]}],argumentDefinitions:[]}],args:d,argumentDefinitions:m}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[i,a,r],kind:"Operation",name:"useMultibotAtMentionSelectBotQuery",selections:[{args:s,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l,o,{kind:"ScalarField",name:"supportsRemix"},{kind:"ScalarField",name:"shouldConfirmBeforeAddingAsMember"},p,{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"balanceTooltipText"},{kind:"ScalarField",name:"numRemainingMessages"},{kind:"ScalarField",name:"balanceTooltipType"},p,{kind:"ScalarField",name:"displayMessagePointPrice"},{kind:"ScalarField",name:"remainingMessagesLimitReason"},{kind:"ScalarField",name:"shouldShowReminderBanner"}]},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"LinkedField",name:"picture",plural:!1,selections:g=[{kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{kind:"ScalarField",name:"isPrivateBot"},{alias:"tinyPicture",args:[{kind:"Literal",name:"size",value:"tiny"}],kind:"LinkedField",name:"picture",plural:!1,selections:g,storageKey:'picture(size:"tiny")'},c,{kind:"TypeDiscriminator",abstractKey:"__isNode"}]}]},params:{id:"20791d5f0cfcee7898867e170b98b9481138860e3f75fbd32a71136fec43c2a9",metadata:{},name:"useMultibotAtMentionSelectBotQuery",operationKind:"query",text:null}});b.hash="d598aaa2e4ffeb0d25b4ad7018b4b1aa",n.default=b},23072:function(e,n,t){"use strict";t.r(n);let a={argumentDefinitions:[],kind:"Fragment",name:"useMultibotAtMention_chat",selections:[{kind:"ScalarField",name:"chatCode"}],type:"Chat"};a.hash="87c684b4cdea96c44e6ac6ae00edd137",n.default=a},23840:function(e,n,t){"use strict";t.r(n);let a={kind:"InlineDataFragment",name:"useMultibotAtMention_selectBot"};a.hash="f5d5b41d8c2bd79b557d23c20debac76",n.default=a},31910:function(e,n,t){"use strict";var a=t(85893),i=t(67294),r=t(22120),s=t(61936),l=t(15901),o=t.n(l);n.Z=e=>{let{fileHandlerRef:n}=e,t=(0,i.useRef)(null),l=(0,i.useCallback)(e=>{var t;if(!n.current)return;let a=Array.from((null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||[]);a.length&&n.current.handleFiles(a)},[n]),{isDropTargetDraggingOver:u,isDocumentDraggingOver:c}=(0,s.Y)(t,l),{t:d}=(0,r.$G)();return(0,a.jsx)("div",{ref:t,className:o().dropTarget,"data-visible":c,"data-active":u,children:d("Drop files here")})}},30619:function(e,n,t){"use strict";t.d(n,{Z:function(){return ew}});var a,i,r,s,l,o=t(85893),u=t(5152),c=t.n(u),d=t(67294),m=t(22578),p=t(46796),g=t(54344),b=t(22641),f=t(8583),h=t(75014),v=t(42093),_=t(46932),k=t(68374),S=t(48556),F=t.n(S),y=t(23738),C=t(22120),M=t(4909),w=t(98521),x=t(89846),T=t(41248),A=t.n(T),D=t(23408),E=t.n(D);let L=(0,d.forwardRef)((e,n)=>{let[t,a]=(0,d.useState)(null),[i,r]=(0,d.useState)(0),s=(0,d.useRef)(null);return(0,d.useImperativeHandle)(n,()=>({setTooltip:e=>{a(e),r(e=>e+1),null!==s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>{a(null)},5e3)}}),[]),t?(0,o.jsx)("div",{className:E().tooltip,children:t},i):null});L.displayName="Tooltip";let I=(0,d.forwardRef)((e,n)=>{let{onFileUpload:t,...a}=e,i=(0,d.useRef)(null),{t:r}=(0,C.$G)(),s=(0,d.useCallback)(()=>{var e;null==i||null===(e=i.current)||void 0===e||e.click()},[]),l=(0,d.useCallback)(e=>{if(e.target.files){let n=Array.from(e.target.files);e.target.value="",t(n)}},[t]),u=(0,d.useRef)(null);(0,d.useImperativeHandle)(n,()=>({setTooltip:e=>{var n;return null===(n=u.current)||void 0===n?void 0:n.setTooltip(e)}}));let[c,m]=(0,d.useState)(null),p=r("Select attachment");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(M.t9,{className:A().button,onClick:s,ref:m,...a,children:(0,o.jsx)(x.Z,{})}),(0,o.jsx)(L,{ref:u}),(0,o.jsx)(w.Z,{anchorRef:c,label:p,placement:"top"})]}),(0,o.jsx)("input",{className:A().input,ref:i,type:"file",multiple:!0,onChange:l})]})});I.displayName="ChatMessageFileInputButton";var P=t(39620),R=t(12251),B=t(99460),N=t.n(B),patterns_Dismissable=e=>{let{children:n,onDismiss:t,className:a}=e,i=(0,d.useCallback)(e=>{e.stopPropagation(),t()},[t]);return(0,o.jsxs)("div",{className:(0,R.$)(N().dismissableContainer,a),children:[n,(0,o.jsx)("button",{className:N().dismissButton,onClick:i,children:(0,o.jsx)(P.Z,{className:N().icon})})]})},j=t(21054),O=t(48675),V=t(14813),Z=t(96522),W=t.n(Z);let ChatMessageInputAttachment=e=>{let{file:n,viewer:a,index:i,onDismiss:r}=e,s=(0,d.useCallback)(()=>{r(i)},[r,i]),l=(0,m.useFragment)(t(76862),a),u=(0,V.J$)(t(71745),n);return(0,o.jsx)(patterns_Dismissable,{className:W().attachment,onDismiss:s,children:(0,o.jsx)(j.ZP,{file:u,viewer:l})})};var inputFooter_ChatMessageInputAttachments=e=>{let{files:n,viewer:a,onFileRemoved:i}=e,r=(0,d.useCallback)(e=>{i(e)},[i]),s=(0,m.useFragment)(t(30702),a),l=(0,V.mj)(t(79315),n),u=function(){let e=(0,d.useRef)(0),n=(0,d.useRef)(new WeakMap),t=(0,d.useCallback)(t=>(n.current.has(t)||n.current.set(t,e.current++),n.current.get(t)),[]);return t}();return n.length?(0,o.jsx)(O.Z,{className:W().container,children:l.map((e,n)=>(0,o.jsx)(ChatMessageInputAttachment,{file:e,viewer:s,index:n,onDismiss:r},u(e)))}):null},H=t(44311),G=t(8787),U=t(70797),K=t.n(U),q=t(34756),z=t(74991),Y=t(84931),Q=t(57758),$=t(95634),J=t(12107),X=t(80606),ee=t.n(X);(a=r||(r={})).base="base",a.warning="warning";var en=r,et=t(67824),inputFooter_ChatMessageLimitTooltip=e=>{let{bot:n,viewer:a}=e,i=(0,m.useFragment)(t(3306),n),{subscription:r,isEligibleForWebSubscriptions:s,showPointsWarningBanner:l}=(0,m.useFragment)(t(64964),a),{messagePointLimit:u,botId:c}=i,{setBotId:p}=(0,d.useContext)(q.J),{isLoggedInUser:b}=(0,g.b)(),f=(0,m.useRelayEnvironment)(),h=(0,d.useRef)(null),v=(0,d.useCallback)(()=>{b&&null==h.current&&(h.current=c,(0,m.fetchQuery)(f,t(83530),{botId:c},{fetchPolicy:"network-only"}).subscribe({complete:()=>{h.current=null},error:()=>{h.current=null}}))},[c,f,b,h]);(0,$.zw)(v);let _=b?u.balanceTooltipText:null,k=!l&&!!_,{openPaywall:S}=(0,Y.r)(),F=y.Z.pill_tooltip,C=(0,z.qb)(),{ref:w}=(0,J.Z)(et.Z.web_subscriptions,{additionalLogData:(0,z.Gj)(F,C,i)}),x=b&&0===u.numRemainingMessages&&!(null==r?void 0:r.isActive)&&s;(0,d.useEffect)(()=>{k&&x&&(0,z.vP)({viewObjectType:F,subscriptionFunnelId:C,bot:i})},[k,x,F,C,i]);let T=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),x?S({viewObjectType:F,bot:i,subscriptionFunnelId:C}):p(c)},[S,i,F,c,x,p,C]),A=u.balanceTooltipType==en.warning?ee().tooltipNotMuted:ee().tooltipMuted;return k?(0,o.jsxs)(M.t9,{className:(0,R.$)(ee().noFreeMessageTooltip,A,b?ee().tooltipClickable:ee().tooltipNonClickable),onClick:T,ref:x?w:void 0,children:[_,b&&(0,o.jsx)(Q.Z,{className:ee().chevronIcon})]}):null},inputFooter_ChatMessageSendButton=e=>{let{bot:n,viewer:a,className:i,...r}=e,{t:s}=(0,C.$G)(),l=(0,m.useFragment)(t(15157),n),u=(0,m.useFragment)(t(78353),a),[c,p]=(0,d.useState)(null),g=s("Send message");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(M.DF,{ref:p,className:(0,R.$)(K().sendButton,i),...r,children:(0,o.jsx)(G.Z,{})}),(0,o.jsx)(w.Z,{anchorRef:c,label:g,placement:"top"}),(0,o.jsx)(inputFooter_ChatMessageLimitTooltip,{bot:l,viewer:u})]})},ea=t(23595),ei=t(64516),er=t(96265),es=t.n(er);let useValueChangeListeners=e=>{let n=(0,d.useRef)([]),t=(0,d.useCallback)(e=>{n.current.forEach(n=>n(e))},[]),a=(0,d.useCallback)(e=>{t(e.target.value)},[t]),i=(0,d.useCallback)(t=>{if(n.current.push(t),1===n.current.length){var i;null===(i=e.current)||void 0===i||i.addEventListener("input",a)}},[e,a]),r=(0,d.useCallback)(t=>{if(n.current=n.current.filter(e=>e!==t),0===n.current.length){var i;null===(i=e.current)||void 0===i||i.removeEventListener("input",a)}},[e,a]);return(0,d.useEffect)(()=>()=>{var n;null===(n=e.current)||void 0===n||n.removeEventListener("input",a)},[e,a]),{addValueChangedListener:i,removeValueChangedListener:r,onValueChange:t}},usePlaceholderOverflow=(e,n)=>{let t=(0,d.useRef)(null),a=(0,d.useRef)(null),i=(0,d.useRef)([]),r=(0,d.useCallback)(e=>{i.current.forEach(n=>n(e))},[]),s=(0,d.useCallback)(e=>{i.current.push(e)},[]),l=(0,d.useCallback)(e=>{i.current=i.current.filter(n=>n!==e)},[]);(0,d.useEffect)(()=>{if(!n.current||!e.current)return;let i=new ResizeObserver(e=>{t.current=null==e?void 0:e[0].borderBoxSize[0].inlineSize,r(e)}),s=new ResizeObserver(e=>{var n;a.current=null==e?void 0:null===(n=e[0].contentBoxSize)||void 0===n?void 0:n[0].inlineSize,r(e)});return i.observe(e.current),s.observe(n.current),()=>{i.disconnect(),s.disconnect()}},[e,n,r]);let o=(0,d.useCallback)(e=>null!==a.current&&null!==t.current&&!!n.current&&(n.current.textContent=e,a.current>t.current),[n]);return{addPlaceholderResizeListener:s,removePlaceholderResizeListener:l,getPlaceholderOverflow:o}},el=(0,d.forwardRef)((e,n)=>{let{className:t,onInput:a,onChange:i,footer:r,placeholder:s,...l}=e,u=(0,d.useRef)(null),c=(0,d.useRef)(null),m=(0,d.useRef)(null),p=(0,ea.G6)((0,ei.F)()),g=(0,d.useCallback)(()=>{if(u.current&&c.current){var e;u.current.dataset.replicatedValue=c.current.value,p&&((e=c.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&requestAnimationFrame(()=>{u.current&&(u.current.style.transform="translateY(0)",u.current.style.transform="unset")})}},[p]),b=(0,d.useCallback)(e=>{null==a||a(e),g()},[a,g]),{addValueChangedListener:f,removeValueChangedListener:h,onValueChange:v}=useValueChangeListeners(c),{getPlaceholderOverflow:_,addPlaceholderResizeListener:k,removePlaceholderResizeListener:S}=usePlaceholderOverflow(c,m);return(0,d.useImperativeHandle)(n,()=>({focus:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.blur()},addEventListener:(e,n,t)=>{var a;return null===(a=c.current)||void 0===a?void 0:a.addEventListener(e,n,t)},removeEventListener:(e,n,t)=>{var a;return null===(a=c.current)||void 0===a?void 0:a.removeEventListener(e,n,t)},getValue:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.value},setValue:(e,n)=>{if(!c.current)return;let t=c.current.selectionStart,a=c.current.selectionEnd;c.current.value=e,c.current.scrollTo(0,c.current.scrollHeight),g(),n&&c.current.setSelectionRange(...n(t,a)),v(e)},addValueChangedListener:f,removeValueChangedListener:h,getSelectionStart:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.selectionStart},getSelectionEnd:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.selectionEnd},setSelectionRange:(e,n,t)=>{var a;return null===(a=c.current)||void 0===a?void 0:a.setSelectionRange(e,n,null!=t?t:"none")},getPlaceholderOverflow:_,addPlaceholderResizeListener:k,removePlaceholderResizeListener:S}),[g,f,h,v,_,k,S]),(0,o.jsxs)("div",{className:(0,R.$)(es().growWrap,t),ref:u,children:[(0,o.jsx)("textarea",{className:es().textArea,ref:c,rows:1,onInput:b,onChange:i,placeholder:s,...l}),(0,o.jsx)("div",{className:es().hidden,ref:m}),r]})});el.displayName="GrowingTextArea";var eo=t(4095);(i=s||(s={}))[i.BACKSPACE=8]="BACKSPACE",i[i.TAB=9]="TAB",i[i.ENTER=13]="ENTER",i[i.SPACE=32]="SPACE",i[i.ESC=27]="ESC",i[i.UP=38]="UP",i[i.DOWN=40]="DOWN",i[i.PAGE_UP=33]="PAGE_UP",i[i.PAGE_DOWN=34]="PAGE_DOWN",i[i.HOME=36]="HOME",i[i.END=35]="END";var eu=s;let getLastHumanMessageText=e=>{if(!e)return null;for(let n=e.length-1;n>=0;n--){let{node:a}=(0,m.readInlineData)(t(33848),e[n]);if((0,eo.Q1)(a))return a.text}return null},useOnKeyDown=(e,n,a,i)=>{let r=(0,m.useFragment)(t(45830),e),s=(0,d.useCallback)(e=>{e.preventDefault(),a()},[a]),l=(0,d.useCallback)(e=>{var t,a;if(!(null===(t=n.current)||void 0===t?void 0:t.getValue())){e.preventDefault();let t=getLastHumanMessageText(r);t&&(null===(a=n.current)||void 0===a||a.setValue(t),i())}},[r,n,i]);return(0,d.useCallback)(e=>{e.shiftKey||e.keyCode!=eu.ENTER?e.keyCode==eu.UP&&l(e):s(e)},[s,l])},ec=(0,d.forwardRef)((e,n)=>{let{edges:a,className:i,submitMessage:r,onChange:s,disabled:l,footer:u,placeholderText:c,onPaste:p}=e,g=(0,m.useFragment)(t(28159),a),b=(0,d.useRef)(null),f=useOnKeyDown(g,b,r,s),h=(0,d.useMemo)(()=>(0,_.Z)([b,n]),[b,n]);return(0,o.jsx)(el,{ref:h,className:i,placeholder:c,onChange:s,onKeyDown:f,onPaste:p,disabled:l,footer:u})});ec.displayName="ChatMessageTextArea";var ed=t(41143),em=t.n(ed),ep=t(31657);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var microphone=function(e){return d.createElement("svg",_extends({viewBox:"0 0 16 27",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=d.createElement("path",{clipRule:"evenodd",d:"M4.235 1.803C4.848.823 6.013 0 8 0c1.986 0 3.152.824 3.765 1.803a3.826 3.826 0 0 1 .568 1.836V3.664s0 .003-1 .003h1v10.666h-1 1v.028a1.823 1.823 0 0 1-.01.176 3.827 3.827 0 0 1-.558 1.66C11.152 17.177 9.986 18 8 18c-1.987 0-3.152-.824-3.765-1.803a3.828 3.828 0 0 1-.568-1.836V14.336s0-.003 1-.003h-1V3.667h1-1v-.028a2.004 2.004 0 0 1 .01-.176 3.827 3.827 0 0 1 .558-1.66Zm1.432 1.874.002-.036a1.828 1.828 0 0 1 .262-.778C6.152 2.51 6.653 2 8 2s1.848.51 2.069.863a1.83 1.83 0 0 1 .264.814v10.646l-.002.036a1.83 1.83 0 0 1-.262.778c-.221.353-.722.863-2.07.863-1.346 0-1.847-.51-2.068-.863a1.828 1.828 0 0 1-.264-.814V3.677Zm-4.334 4.99a1 1 0 0 1 1 1v4.666l.001.03a5.657 5.657 0 0 0 .087.725c.09.49.27 1.13.62 1.76a4.464 4.464 0 0 0 1.62 1.69c.76.457 1.827.795 3.339.795s2.579-.338 3.34-.795a4.464 4.464 0 0 0 1.62-1.69c.349-.63.528-1.27.62-1.76a5.642 5.642 0 0 0 .086-.724V9.667a1 1 0 1 1 2 0v4.666h-1 1v.035a3.958 3.958 0 0 1-.016.302 7.653 7.653 0 0 1-.104.783 7.85 7.85 0 0 1-.839 2.366 6.464 6.464 0 0 1-2.338 2.434c-.902.541-2.013.914-3.37 1.037v3.377h4.334a1 1 0 0 1 0 2H2.667a1 1 0 1 1 0-2H7v-3.378c-1.356-.122-2.467-.495-3.369-1.036a6.463 6.463 0 0 1-2.339-2.434 7.852 7.852 0 0 1-.838-2.366 7.66 7.66 0 0 1-.118-1.015 3.637 3.637 0 0 1-.002-.07v-.032s0-.003 1-.003h-1V9.667a1 1 0 0 1 1-1Z"})))},eg=t(73331),eb=t(9729),ef=t(6269),eh=t.n(ef),ev=t(30038),e_=t(96384);let getSpeechRecognition=()=>{let{userAgent:e}=window.navigator;return(0,ea.P)(e)?null:"undefined"!=typeof SpeechRecognition?SpeechRecognition:"undefined"!=typeof webkitSpeechRecognition?webkitSpeechRecognition:null},getMessageFromErrorEvent=(e,n)=>{switch(n.error){case"no-speech":return e("No speech was detected. Try again.");case"audio-capture":return e("No microphone was found. Ensure that a microphone is installed and that microphone settings are configured correctly.");case"not-allowed":return e("Permission to use microphone was denied. Update your browser permission settings and try again.");case"network":return e("A network error occurred. Check your internet connection and try again.");case"language-not-supported":return e("The language {{language}} is not supported by your browser.",{language:(null==n?void 0:n.target)&&"lang"in n.target&&n.target.lang||"en"});case"aborted":if("No speech detected"===n.message)return e("No speech was detected. Try again.");return null;default:return e("An error occurred: {{error}}",{error:n.error})}};let SpeechRecognitionError=class SpeechRecognitionError extends eg.n9{constructor(e){let n=[e.error,e.message].filter(Boolean).join(": ");super(n),this.name="SpeechRecognitionError"}};let logErrorEvent=e=>{("aborted"!==e.error||"No speech detected"===e.message)&&(0,eg.H)(new SpeechRecognitionError(e))},createRecognition=e=>{let{onStart:n,onEnd:t,onError:a,onResult:i}=e,r=getSpeechRecognition();em()(r,"SpeechRecognition is not supported");let s=new r;return s.continuous=!0,s.interimResults=!0,s.onstart=n,s.onspeechend=()=>{s.stop()},s.onend=t,s.onerror=a,s.onresult=i,s},useSpeechRecognition=(e,n,t)=>{let{t:a}=(0,C.$G)(),[i,r]=(0,d.useState)(!1),s=(0,d.useRef)(!1),l=(0,d.useCallback)(()=>s.current,[]),o=(0,d.useContext)(ep.Z),u=(0,d.useRef)(null),c=(0,d.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.stop(),u.current=null},[]),m=(0,d.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.abort(),u.current=null},[]),p=(0,d.useCallback)(()=>{var i;let l=(null===(i=e.current)||void 0===i?void 0:i.getValue())||"",d=null==o?void 0:o.botId,m=null==o?void 0:o.model,p=null==o?void 0:o.chatId,g=createRecognition({onStart:()=>{var n,t;null===(n=e.current)||void 0===n||n.blur(),null===(t=e.current)||void 0===t||t.addEventListener("focus",c),r(!0),(0,eb.Z)("poe/action_log",{action_type:(0,e_.E)(ev.Z.start_voice_record),bot_id:d,chat_id:p,model_name:m})},onEnd:()=>{var n,t;r(!1),null===(n=e.current)||void 0===n||n.focus(),null===(t=e.current)||void 0===t||t.removeEventListener("focus",c),(0,eb.Z)("poe/action_log",{action_type:(0,e_.E)(ev.Z.finish_voice_record),bot_id:d,chat_id:p,model_name:m})},onError:e=>{logErrorEvent(e);let n=getMessageFromErrorEvent(a,e);if(n){var i;null===(i=t.current)||void 0===i||i.setTooltip(n)}},onResult:t=>{let{results:a}=t;if(u.current===g){let t=Array.from(a).filter(e=>e[0].confidence>0).map(e=>e[0].transcript).join("");if(t){var i;s.current=!0,null===(i=e.current)||void 0===i||i.setValue(l+t),n()}}}});u.current=g,g.start()},[e,n,r,t,c,a,o]);return(0,d.useEffect)(()=>{let n=e.current,resetVoiceInputWhenClearInput=e=>{""==e&&(s.current=!1)};return null==n||n.addValueChangedListener(resetVoiceInputWhenClearInput),()=>{null==n||n.removeValueChangedListener(resetVoiceInputWhenClearInput)}},[e]),(0,d.useEffect)(()=>()=>{m()},[m]),{isRunning:i,startRecognition:p,stopRecognition:c,abortRecognition:m,getVoiceInputUsed:l}},ek=(0,d.forwardRef)((e,n)=>{let{className:t,chatInputRef:a,onInputChange:i,...r}=e,s=(0,d.useRef)(null),{t:l}=(0,C.$G)(),{isRunning:u,startRecognition:c,stopRecognition:m,abortRecognition:p,getVoiceInputUsed:g}=useSpeechRecognition(a,i,s);(0,d.useImperativeHandle)(n,()=>({startRecognition:c,stopRecognition:m,abortRecognition:p,getVoiceInputUsed:g}),[c,m,p,g]);let[b,f]=(0,d.useState)(null),h=l("Use microphone");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(M.t9,{className:(0,R.$)(eh().button,t),onClick:u?m:c,ref:f,"aria-selected":!!u,...r,children:[(0,o.jsx)(L,{ref:s}),(0,o.jsx)(microphone,{})]}),(0,o.jsx)(w.Z,{anchorRef:b,label:h,placement:"top"})]})});ek.displayName="ChatMessageVoiceInputButtonInner";let eS=(0,d.forwardRef)((e,n)=>{let[t,a]=(0,d.useState)(!1),i=(0,ei.F)();return(0,d.useEffect)(()=>{a(!!getSpeechRecognition()&&!(0,ea.Ev)(i))},[i]),t?(0,o.jsx)(ek,{ref:n,...e}):null});eS.displayName="ChatMessageVoiceInputButton";var eF=t(61134),ey=t(38693);let getInvalidMentiontedBotMessage=(e,n)=>n("The bot {{handle}} does not exist. Check for typos.",{handle:e});var inputFooter_useMultibotAtMention=e=>{let{chat:n,selectBot:a,setInputErrorMessage:i,chatInputRef:r,botSelectorRef:s}=e,l=(0,m.useFragment)(t(23072),n),o=(0,d.useRef)(null),u=(0,m.useRelayEnvironment)(),{t:c}=(0,C.$G)(),p=(0,d.useCallback)(e=>{let n=(0,H.readInlineData)(t(23840),e);if(o.current=(null==n?void 0:n.handle)||null,a(n),e){var i;null===(i=r.current)||void 0===i||i.focus()}},[r,a]),g=(0,d.useCallback)(async e=>{if(o.current===e)return;if(o.current=e,e.length<4){p(null),i(getInvalidMentiontedBotMessage(e,c));return}i(null);let n=await (0,H.fetchQuery)(u,t(58441),{handle:e,chatCode:(null==l?void 0:l.chatCode)||"",hasChat:!!l},{fetchPolicy:"store-or-network"}).toPromise();if(o.current===e){var a;p((null==n?void 0:null===(a=n.bot)||void 0===a?void 0:a.canUserAccessBot)?null==n?void 0:n.bot:null),(null==n?void 0:n.bot)&&n.bot.canUserAccessBot||i(getInvalidMentiontedBotMessage(e,c))}},[l,u,p,i,c]),b=(0,d.useCallback)(()=>{var e,n,t,a,l,o,u,c,d;let m=(null===(e=r.current)||void 0===e?void 0:e.getValue())||"",b=ey.z.exec(m),f=null==b?void 0:null===(n=b.groups)||void 0===n?void 0:n.handle;void 0!==f?((null===(t=r.current)||void 0===t?void 0:t.getSelectionStart())||0)<=f.length+1+m.indexOf("@")?(null===(l=s.current)||void 0===l||null===(a=l.setInput)||void 0===a||a.call(l,f.toLowerCase()),i(null)):(null===(u=s.current)||void 0===u||null===(o=u.setInput)||void 0===o||o.call(u,null),g(f)):(null===(d=s.current)||void 0===d||null===(c=d.setInput)||void 0===c||c.call(d,null),p(null),i(null))},[s,r,p,g,i]);return{onInputChange:b,selectBot:p}};let importAddBotToChatModal=()=>t.e(3126).then(t.bind(t,83126)),eC=c()(()=>t.e(4800).then(t.bind(t,4800)),{loadableGenerated:{webpack:()=>[4800]},ssr:!1}),eM=(0,d.forwardRef)((e,n)=>{let{bot:a,viewer:i,edges:r,chat:s,disableSend:l,onSubmitMessage:u,placeholderText:c,isBotResponding:S,fileHandlerRef:C,shouldShowNewMemberWarningModal:M,selectBot:w,setInputErrorMessage:x,onInputCleared:T}=e,A=(0,m.useFragment)(t(80752),a),D=(0,m.useFragment)(t(52103),r),{fileUploadSizeLimits:E,enableFileSizeLimitsByFileType:L,...P}=(0,m.useFragment)(t(4027),i),R=(0,m.useFragment)(t(91305),s),B=(0,d.useRef)(null),{isLoggedInUser:N}=(0,g.b)(),j=JSON.parse(E),O=L?j.total:A.uploadFileSizeLimit,V=(0,d.useCallback)(e=>{var n,t;X((null===(t=Y.current)||void 0===t?void 0:null===(n=t.getValue())||void 0===n?void 0:n.trim())===""&&0===e.length)},[]),Z=(0,f.ZP)(),W=(0,d.useCallback)(e=>{if(L)Z({type:f.pC.error,content:e});else{var n;null===(n=B.current)||void 0===n||n.setTooltip(e)}},[L,Z]),{files:H,handleFileUpload:G,handleFileRemove:U,clearFiles:K,isFileOverLimit:q,totalFileSize:z}=(0,eF.ZP)({bot:A,chat:R||null,viewer:P,onFileChange:V,onError:W});(0,d.useImperativeHandle)(C,()=>({handleFiles:G,clearAllFiles:K}),[G,K]);let Y=(0,d.useRef)(null),Q=(0,d.useRef)(null),$=(0,d.useMemo)(()=>(0,_.Z)([Y,n]),[Y,n]),[J,X]=(0,d.useState)(!0),[ee,en]=(0,d.useState)(!1),et=0!==H.length,ea=(0,d.useRef)(null),{selectBot:ei,onInputChange:er}=inputFooter_useMultibotAtMention({chat:R||null,selectBot:w,setInputErrorMessage:x,chatInputRef:Y,botSelectorRef:ea}),es=(0,d.useCallback)(()=>{var e;let n=(null===(e=Y.current)||void 0===e?void 0:e.getValue())||"",t=(null==n?void 0:n.trim())===""&&!et;X(t),er(),t&&(null==T||T())},[et,er,T]),{isDeleted:el}=(0,v.iZ)(A),eo=(0,p.Z)(P,R),eu=l||S&&!eo||J||z>O||ee||!!L&&q,ed=(0,d.useCallback)(()=>{var e,n;if(null===(e=Q.current)||void 0===e||e.abortRecognition(),navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&(null===(n=Y.current)||void 0===n||n.blur()),!eu)return u(Y,Q,H,K)},[Y,Q,H,K,eu,u]),em=(0,d.useCallback)(()=>{var e;null===(e=Y.current)||void 0===e||e.focus()},[Y]),ep=(0,d.useRef)(!1);(0,d.useEffect)(()=>{var e;!N&&!0===ep.current||navigator.maxTouchPoints&&navigator.maxTouchPoints>0||(null===(e=Y.current)||void 0===e||e.focus(),ep.current=!0)},[A.id,N]),(0,d.useEffect)(()=>{let e=Y.current;return null==e||e.addValueChangedListener(es),()=>{null==e||e.removeValueChangedListener(es)}},[es]);let eg=el||!A.allowsImageAttachments&&z>O,eb=function(e){let{handleFileUpload:n,isFileInputDisabled:t}=e;return(0,d.useCallback)(e=>{if(t)return;let a=function(e){var n,t;let a=Array.from((null===(n=e.clipboardData)||void 0===n?void 0:n.files)||[]);if(0===a.length)return[];let i=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/html");return i&&!function(e){try{var n;let t=new DOMParser().parseFromString(e,"text/html");return 1===t.body.childElementCount&&(null===(n=t.body.firstElementChild)||void 0===n?void 0:n.tagName)==="IMG"}catch(e){return console.error("there was an issue parsing pasted html"),!1}}(i)?[]:a}(e);0!==a.length&&(n(a),e.preventDefault())},[n,t])}({isFileInputDisabled:eg,handleFileUpload:G}),[ef,eh]=(0,d.useState)(!1),ev=(0,d.useCallback)(()=>{if(navigator.maxTouchPoints&&navigator.maxTouchPoints>0){var e;null===(e=Y.current)||void 0===e||e.blur()}eh(!0)},[eh]),e_=(0,d.useCallback)(()=>{eh(!1),ed()},[eh,ed]),ek=(0,d.useCallback)(()=>{eh(!1)},[eh]),ey=(0,d.useMemo)(()=>({close:ek,botHandle:A.handle,onSubmitAndClose:e_}),[A.handle,ek,e_]),eM=(0,d.useRef)(!1),ew=(0,d.useCallback)(()=>{if(M){ev();return}ed(),eM.current||((0,k.nL)(k.wy.SendChatClicked),eM.current=!0)},[ed,ev,M]),ex=(0,h.el)(ew,{viewer:P,viewObjectType:y.Z.limited_access_bot,bot:A}),eT=(0,d.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Z,{isOpen:ef,onRequestClose:ek,body:importAddBotToChatModal,bodyProps:ey,variant:"compact"}),(0,o.jsxs)("div",{ref:eT,className:F().inputContainer,onClickCapture:em,children:[(0,o.jsx)(eC,{className:F().botSelector,selectorRef:ea,anchorRef:eT,chatInputRef:Y,chat:R,selectBot:ei,onIsActiveChange:en}),(0,o.jsx)(ec,{ref:$,edges:D,className:F().textArea,submitMessage:ex,onChange:es,placeholderText:c,onPaste:eb,footer:(0,o.jsx)(inputFooter_ChatMessageInputAttachments,{files:H,viewer:P,onFileRemoved:U})}),(0,o.jsx)(I,{disabled:eg,onFileUpload:G,ref:B}),(0,o.jsx)(eS,{ref:Q,className:F().voiceInputButton,chatInputRef:Y,onInputChange:es,disabled:el}),(0,o.jsx)(inputFooter_ChatMessageSendButton,{className:F().sendButton,bot:A,viewer:P,onClick:ex,disabled:eu})]})]})});eM.displayName="ChatMessageInputContainer";var ew=eM},38693:function(e,n,t){"use strict";t.d(n,{z:function(){return a}});let a=RegExp("^(?<mention>\\s*@(?<handle>\\S*)\\s?)")},61252:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});let a={year:"numeric",month:"short",day:"numeric"}},21980:function(e,n,t){"use strict";var a=t(85893),i=t(27460),r=t(12251),s=t(40327),l=t.n(s);n.Z=e=>{let{className:n,text:t}=e;return(0,a.jsxs)("div",{className:(0,r.$)(l().banner,n),children:[(0,a.jsx)("div",{className:l().iconContainer,children:(0,a.jsx)(i.au,{size:"sm"})}),t]})}},16797:function(e,n,t){"use strict";t.d(n,{Z:function(){return subscription_PaywallContextWrapper}});var a,i,r=t(85893),s=t(67294),l=t(22578);t(44311);var o=t(22641);(a=i||(i={})).web_subs_announcement="web_subs_announcement",a.response_speed_upsell="response_speed_upsell",a.subs_onboarding_flow="subs_onboarding_flow",a.ios_subs_signup_upsell="ios_subs_signup_upsell",a.android_subs_announcement="android_subs_announcement";var u=i;let importAnnouncement=()=>t.e(3777).then(t.bind(t,3777));var subscription_MwebAndroidSubscriptionAnnouncementModalOpener=e=>{let{viewer:n}=e,a=(0,l.useFragment)(t(11989),n),[i]=(0,l.useMutation)(t(96035)),c=a.shouldSeeAndroidSubscriptionAnnouncement,[d,m]=(0,s.useState)(c),p=(0,s.useCallback)(()=>{m(!1),i({variables:{dismissibleType:u.android_subs_announcement},onCompleted:()=>{m(!1)}})},[m,i]),g=(0,s.useMemo)(()=>({closeAnnouncement:p}),[p]);return(0,r.jsx)(o.Z,{isOpen:d,onRequestClose:p,body:importAnnouncement,bodyProps:g,modalHeight:200,useMinHeight:!0})},c=t(41143),d=t.n(c);let WebSubscriptionAnnouncementModalOpener_importAnnouncement=()=>t.e(4098).then(t.bind(t,94098));var subscription_WebSubscriptionAnnouncementModalOpener=e=>{var n,a;let{bot:i,viewer:c}=e,m=(0,l.useFragment)(t(10962),i),p=(0,l.useFragment)(t(34932),c),[g]=(0,l.useMutation)(t(74969)),b=null===(n=p.poeUser)||void 0===n?void 0:n.creationTime;d()(!!b,"Viewer creation time cannot be empty!");let f=b/1e3,h=Date.now()-f>=864e5,v=p.shouldSeeWebSubscriptionAnnouncement&&!(null===(a=p.subscription)||void 0===a?void 0:a.isActive)&&m.isCreatedByPoeUserAccount&&h,[_,k]=(0,s.useState)(v),S=(0,s.useCallback)(()=>{k(!1),g({variables:{dismissibleType:u.web_subs_announcement},onCompleted:()=>{k(!1)}})},[k,g]),F=(0,s.useMemo)(()=>({closeAnnouncement:S}),[S]);return(0,r.jsx)(o.Z,{isOpen:_,onRequestClose:S,body:WebSubscriptionAnnouncementModalOpener_importAnnouncement,bodyProps:F,modalHeight:200,useMinHeight:!0})},m=t(62005),p=t(95634),g=t(84931),b=t(20620);let importPaywallModal=()=>Promise.all([t.e(4621),t.e(8059),t.e(3800)]).then(t.bind(t,2459));var subscription_PaywallOpener=e=>{let{subscriptionFunnelId:n,bot:a,viewer:i}=e,{botId:o}=(0,l.useFragment)(t(1828),a),u=(0,l.useFragment)(t(90665),i),{subscription:c}=u,d=(0,s.useMemo)(()=>({botId:o,subscriptionFunnelId:n}),[o,n]),{closePaywall:m}=(0,g.r)();return(null==c?void 0:c.isActive)?null:(0,r.jsx)(s.Suspense,{fallback:null,children:(0,r.jsx)(b.Z,{body:importPaywallModal,bodyProps:d,onRequestClose:m})})},subscription_PaywallContextWrapper=e=>{let{bot:n,viewer:a,children:i}=e,o=(0,l.useFragment)(t(45815),n),u=(0,l.useFragment)(t(56848),a);(0,p.UG)(),(0,p.zw)();let[c,d]=(0,s.useState)(null),b=!!u.poeUser;return(0,m.Z)({viewer:u}),(0,r.jsxs)(g.U,{value:b?d:null,children:[i,b&&(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)(subscription_PaywallOpener,{viewer:u,...c}),(0,r.jsx)(subscription_WebSubscriptionAnnouncementModalOpener,{bot:o,viewer:u}),(0,r.jsx)(subscription_MwebAndroidSubscriptionAnnouncementModalOpener,{viewer:u})]})]})}},62005:function(e,n,t){"use strict";t.d(n,{Z:function(){return WebSubscriptionSuccessMessage}});var a,i=t(85893),r=t(19692),s=t(41664),l=t.n(s),o=t(11163),u=t(67294),c=t(22120),d=t(22578);t(44311);var m=t(74285),p=t(68374),g=t(38357),b=t(43393),f=t.n(b),h=t(88839),v=t(94316);(a||(a={})).multiple_free_trials="multiple_free_trials";var _=a,k=t(61252),S=t(8583),WebSubscriptionSuccessMessage=e=>{let{viewer:n}=e,{t:a}=(0,c.$G)(),s=(0,d.useFragment)(t(51689),n),b=(0,S.ZP)(),F=(0,o.useRouter)(),sendGoogleTagManagerEventHelper=(e,n)=>{let t=JSON.parse(n);(0,r.sendGTMEvent)({event:e,...t})};(0,u.useEffect)(()=>{var e;if(null===(e=F.query)||void 0===e?void 0:e.subscribed){let e=s.subscription;if(null==e?void 0:e.isActive){(0,m.hP)("sng_subscribe"),s.enableGTMEventSending&&(sendGoogleTagManagerEventHelper(v.Z.Subscribe,s.subscribeEnhancedConversionProperties),e.planType==h.Z.yearly?sendGoogleTagManagerEventHelper(v.Z.YearlySubscribe,s.yearlySubscribeEnhancedConversionProperties):e.planType==h.Z.monthly&&sendGoogleTagManagerEventHelper(v.Z.MonthlySubscribe,s.monthlySubscribeEnhancedConversionProperties));let{expiresTime:n,willCancelAtPeriodEnd:t}=e,r=n?t?a("Your plan expires on {{val, datetime}}",{val:new Date(n/1e3),formatParams:{val:k.O}}):a("Your plan automatically renews on {{val, datetime}}",{val:new Date(n/1e3),formatParams:{val:k.O}}):null,l=(0,i.jsxs)(i.Fragment,{children:[a("Successfully subscribed to Poe.")," ",n&&(0,i.jsx)(i.Fragment,{children:r})]});b({content:l,type:S.pC.success}),(0,g.CS)(F,"subscribed"),(0,p.nL)(p.wy.SuccessfullySubscribedStripe)}else if((null==e?void 0:e.purchaseRevocationReason)==_.multiple_free_trials){let e=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("p",{children:[(0,i.jsx)("div",{className:f().ToastTitle,children:a("Your subscription payment method failed.")}),(0,i.jsx)("div",{className:f().ToastText,children:(0,i.jsxs)(c.cC,{i18nKey:"freeTrialRevokedError",shouldUnescape:!0,children:["Your payment method has already been used to access a subscription free trial. You can resubscribe at any time by going to"," ",(0,i.jsx)(l(),{href:(0,g.qm)("/settings"),target:"_blank",className:f().ToastLink,children:"poe.com/settings"}),"."]})})]})});b({content:e,type:S.pC.error,duration:15e3}),(0,g.CS)(F,"subscribed")}}},[])}},61936:function(e,n,t){"use strict";t.d(n,{Y:function(){return useDragAndDrop}});var a=t(67294);let dragContainsNonFileData=e=>{var n;let t=(null===(n=e.dataTransfer)||void 0===n?void 0:n.types)||[];return t.some(e=>"Files"!==e)},useDragEventListener=(e,n,t)=>{(0,a.useEffect)(()=>{let a=e.current;return a&&t?(a.addEventListener(n,t),()=>{a.removeEventListener(n,t)}):()=>{}},[e,n,t])},onDropTargetDragOver=e=>{e.preventDefault()},useDragState=e=>{let[n,t]=(0,a.useState)(!1),i=(0,a.useRef)(0),r=(0,a.useCallback)(()=>{t(!1),i.current=0},[]),s=(0,a.useCallback)(e=>{e.preventDefault(),i.current++,dragContainsNonFileData(e)||t(!0)},[]),l=(0,a.useCallback)(e=>{e.preventDefault(),i.current--,i.current<=0&&t(!1)},[]);return useDragEventListener(e,"dragenter",s),useDragEventListener(e,"dragleave",l),useDragEventListener(e,"dragover",onDropTargetDragOver),{isDraggingOver:n,clearState:r}},useDragAndDrop=(e,n)=>{let t=(0,a.useRef)(document),{isDraggingOver:i,clearState:r}=useDragState(t),{isDraggingOver:s,clearState:l}=useDragState(e),o=(0,a.useCallback)(()=>{r(),l()},[r,l]),u=(0,a.useCallback)(e=>{e.preventDefault(),o(),dragContainsNonFileData(e)||n(e)},[o,n]);return useDragEventListener(t,"drop",o),useDragEventListener(e,"drop",u),{isDropTargetDraggingOver:s,isDocumentDraggingOver:i}}},88839:function(e,n){"use strict";var t,a;(a=t||(t={})).monthly="monthly",a.yearly="yearly",a.gift="gift",a.weekly="weekly",n.Z=t},15901:function(e){e.exports={dropTarget:"ChatDragDropTarget_dropTarget__1WrAL"}},41248:function(e){e.exports={button:"ChatMessageFileInputButton_button___6Emy",input:"ChatMessageFileInputButton_input__svNx4"}},96522:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",container:"ChatMessageInputAttachments_container__AAxGu",attachment:"ChatMessageInputAttachments_attachment__ZTrHT"}},48556:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",inputContainer:"ChatMessageInputContainer_inputContainer__s2AGa",botSelector:"ChatMessageInputContainer_botSelector__5QwRE",textArea:"ChatMessageInputContainer_textArea__fNi6E",sendButton:"ChatMessageInputContainer_sendButton__dBjTt",fileInput:"ChatMessageInputContainer_fileInput__9lLAY"}},80606:function(e){e.exports={noFreeMessageTooltip:"ChatMessageLimitTooltip_noFreeMessageTooltip__dMRGn",tooltipClickable:"ChatMessageLimitTooltip_tooltipClickable__gsAxK",tooltipNonClickable:"ChatMessageLimitTooltip_tooltipNonClickable__W6ZwL",tooltipMuted:"ChatMessageLimitTooltip_tooltipMuted__j1QBl",tooltipNotMuted:"ChatMessageLimitTooltip_tooltipNotMuted__S91Y8",chevronIcon:"ChatMessageLimitTooltip_chevronIcon__6MFcg"}},70797:function(e){e.exports={sendButton:"ChatMessageSendButton_sendButton__4ZyI4"}},6269:function(e){e.exports={button:"ChatMessageVoiceInputButton_button__NjXno",pulse:"ChatMessageVoiceInputButton_pulse__5F2SB",fadeInUpAndOut:"ChatMessageVoiceInputButton_fadeInUpAndOut__NP3s1"}},23408:function(e){e.exports={tooltip:"Tooltip_tooltip__1Q3kv",fadeInUpAndOut:"Tooltip_fadeInUpAndOut__BYIBO"}},99460:function(e){e.exports={dismissableContainer:"Dismissable_dismissableContainer__4Q5Jv",dismissButton:"Dismissable_dismissButton__faL3Y",icon:"Dismissable_icon__nU8Xb"}},96265:function(e){e.exports={growWrap:"GrowingTextArea_growWrap__im5W3",textArea:"GrowingTextArea_textArea__ZWQbP",hidden:"GrowingTextArea_hidden__xLW0K"}},40327:function(e){e.exports={banner:"WarningBanner_banner__otlmq",iconContainer:"WarningBanner_iconContainer__YW6xV"}},43393:function(e){e.exports={ToastLink:"WebSubscriptionSuccessMessage_ToastLink__eq_NR",ToastTitle:"WebSubscriptionSuccessMessage_ToastTitle__srxYc",ToastText:"WebSubscriptionSuccessMessage_ToastText__08fMf"}}}]);