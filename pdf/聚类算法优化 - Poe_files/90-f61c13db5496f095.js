"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{36618:function(e,n,o){o.r(n);let t={argumentDefinitions:[],kind:"Fragment",name:"BotFollowStateButton_bot",selections:[{kind:"FragmentSpread",name:"BotFollowStateButton_useBotFollowState_bot"},{kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"}],type:"Bot"};t.hash="acf3d8b6d7af10f9489985bcc1debaa5",n.default=t},72508:function(e,n,o){var t,a,l,i,d,r,c,s,m,u,k,F,p,B,f,w,b,g,S;o.r(n);let y=(B={kind:"ScalarField",name:"description"},f={kind:"ScalarField",name:"monthlyActiveUsers"},w={kind:"ScalarField",name:"translatedBotTags"},b={kind:"ScalarField",name:"isCreatedByPoeUserAccount"},g={kind:"TypeDiscriminator",abstractKey:"__isNode"},S=[{kind:"Literal",name:"first",value:10}],{fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"BotFollowStateButton_poeBotFollow_Mutation",selections:[{args:a=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"PoeBotFollow",kind:"LinkedField",name:"poeBotFollow",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l={kind:"ScalarField",name:"viewerIsFollower"},i={kind:"ScalarField",name:"followerCount"},d={kind:"ScalarField",name:"shouldHide"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{concreteType:"BotsConnection",kind:"LinkedField",name:"followeeBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"FragmentSpread",name:"UserProfileBotListPanel_edges"}]}]},r={kind:"ScalarField",name:"followeeBotCount"}]},{kind:"FragmentSpread",name:"BotSelectorModalInner_viewer"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BotFollowStateButton_poeBotFollow_Mutation",selections:[{args:a,concreteType:"PoeBotFollow",kind:"LinkedField",name:"poeBotFollow",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l,i,d,c={kind:"ScalarField",name:"id"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{concreteType:"BotsConnection",kind:"LinkedField",name:"followeeBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[c,s={kind:"ScalarField",name:"botId"},m={kind:"ScalarField",name:"handle"},u={kind:"ScalarField",name:"deletionState"},k={kind:"ScalarField",name:"displayName"},p={kind:"LinkedField",name:"picture",plural:!1,selections:[F={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},B,f,w,b,g]},c]},c]},r,c]},{args:S,concreteType:"BotsConnection",kind:"LinkedField",name:"availableBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[c,s,m,w,u,k,p,B,f,b,F,g]},{kind:"ScalarField",name:"cursor"},c]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},c],storageKey:"availableBotsConnection(first:10)"},{args:S,handle:"connection",key:"HomeBotSelector_viewer_availableBotsConnection",kind:"LinkedHandle",name:"availableBotsConnection"},c]}]}]},params:{id:"2fabda5c3b51be48c6e4e297eaff6339e16e93cacd056138886e3e324d24b72a",metadata:{},name:"BotFollowStateButton_poeBotFollow_Mutation",operationKind:"mutation",text:null}});y.hash="c7775d395f1d29174f0af0dcf0611f67",n.default=y},40435:function(e,n,o){var t,a,l,i,d,r,c,s,m,u,k,F,p,B,f,w,b,g,S;o.r(n);let y=(B={kind:"ScalarField",name:"description"},f={kind:"ScalarField",name:"monthlyActiveUsers"},w={kind:"ScalarField",name:"translatedBotTags"},b={kind:"ScalarField",name:"isCreatedByPoeUserAccount"},g={kind:"TypeDiscriminator",abstractKey:"__isNode"},S=[{kind:"Literal",name:"first",value:10}],{fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"BotFollowStateButton_poeBotUnfollow_Mutation",selections:[{args:a=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"PoeBotUnfollow",kind:"LinkedField",name:"poeBotUnfollow",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l={kind:"ScalarField",name:"viewerIsFollower"},i={kind:"ScalarField",name:"followerCount"},d={kind:"ScalarField",name:"shouldHide"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{concreteType:"BotsConnection",kind:"LinkedField",name:"followeeBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"FragmentSpread",name:"UserProfileBotListPanel_edges"}]}]},r={kind:"ScalarField",name:"followeeBotCount"}]},{kind:"FragmentSpread",name:"BotSelectorModalInner_viewer"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BotFollowStateButton_poeBotUnfollow_Mutation",selections:[{args:a,concreteType:"PoeBotUnfollow",kind:"LinkedField",name:"poeBotUnfollow",plural:!1,selections:[{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[l,i,d,c={kind:"ScalarField",name:"id"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{concreteType:"BotsConnection",kind:"LinkedField",name:"followeeBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[c,s={kind:"ScalarField",name:"botId"},m={kind:"ScalarField",name:"handle"},u={kind:"ScalarField",name:"deletionState"},k={kind:"ScalarField",name:"displayName"},p={kind:"LinkedField",name:"picture",plural:!1,selections:[F={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},B,f,w,b,g]},c]},c]},r,c]},{args:S,concreteType:"BotsConnection",kind:"LinkedField",name:"availableBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[c,s,m,w,u,k,p,B,f,b,F,g]},{kind:"ScalarField",name:"cursor"},c]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},c],storageKey:"availableBotsConnection(first:10)"},{args:S,handle:"connection",key:"HomeBotSelector_viewer_availableBotsConnection",kind:"LinkedHandle",name:"availableBotsConnection"},c]}]}]},params:{id:"cc765f21078c3fe765a02358fd7055d6c38a1f243cd2fe8aab5dfc473abcca90",metadata:{},name:"BotFollowStateButton_poeBotUnfollow_Mutation",operationKind:"mutation",text:null}});y.hash="3f00ed638f315039bc72a5cffdfbd8d9",n.default=y},50450:function(e,n,o){o.r(n);let t={argumentDefinitions:[],kind:"Fragment",name:"BotFollowStateButton_useBotFollowState_bot",selections:[{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"followerCount"},{kind:"FragmentSpread",name:"BotFollowStateButton_useFollowBot_bot"},{kind:"FragmentSpread",name:"BotFollowStateButton_useUnfollowBot_bot"}],type:"Bot"};t.hash="01219530637db178702d433cc804505d",n.default=t},47897:function(e,n,o){o.r(n);let t={argumentDefinitions:[],kind:"Fragment",name:"BotFollowStateButton_useFollowBot_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"viewerIsFollower"}],type:"Bot"};t.hash="30d2c5c21fa3cee6c1733b0e0d005913",n.default=t},1081:function(e,n,o){o.r(n);let t={argumentDefinitions:[],kind:"Fragment",name:"BotFollowStateButton_useUnfollowBot_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"viewerIsFollower"}],type:"Bot"};t.hash="6159d3cbbdf74a8bfa92ca014fe2f6b7",n.default=t},16211:function(e,n,o){o.r(n);let t={argumentDefinitions:[],kind:"Fragment",name:"BotShareButton_bot",selections:[{kind:"ScalarField",name:"shareLink"},{kind:"ScalarField",name:"botId"}],type:"Bot"};t.hash="316c377cab80d8411676ffc1c33152f8",n.default=t},48976:function(e,n,o){var t=o(85893),a=o(67294),l=o(22120),i=o(22578);o(44311);var d=o(27460),r=o(98521),c=o(42093),s=o(35542);let useFollowBot=e=>{let{botId:n,id:t,followerCount:l,viewerIsFollower:d}=(0,i.useFragment)(o(47897),e),[r]=(0,i.useMutation)(o(72508));return(0,a.useCallback)(()=>{r({variables:{botId:n},optimisticUpdater:e=>{var n,o;null===(n=e.get(t))||void 0===n||n.setValue(!0,"viewerIsFollower"),null===(o=e.get(t))||void 0===o||o.setValue(l+Number(!d),"followerCount")},updater:e=>{(0,c.As)(e,t),(0,c.MD)(e,t)}})},[r,n,t,l,d])},useUnfollowBot=e=>{let{botId:n,id:t,followerCount:l,viewerIsFollower:d}=(0,i.useFragment)(o(1081),e),[r]=(0,i.useMutation)(o(40435));return(0,a.useCallback)(()=>{r({variables:{botId:n},optimisticUpdater:e=>{var n,o;null===(n=e.get(t))||void 0===n||n.setValue(!1,"viewerIsFollower"),null===(o=e.get(t))||void 0===o||o.setValue(l-Number(d),"followerCount")},updater:e=>{(0,c.Js)(e,t)}})},[r,n,t,l,d])},useBotFollowState=e=>{let n=(0,i.useFragment)(o(50450),e),t=useFollowBot(n),a=useUnfollowBot(n);return{isFollowing:n.viewerIsFollower,followerCount:n.followerCount,toggleFollowState:n.viewerIsFollower?a:t}},useButtonText=(e,n,o)=>{let{t}=(0,l.$G)();return n?null:t(e?o?"Following":"Following bot":o?"Follow":"Follow bot")};n.Z=e=>{let n,{bot:m,includeCount:u,theme:k,shortText:F,iconOnly:p}=e,B=(0,i.useFragment)(o(36618),m),{isFollowing:f,followerCount:w,toggleFollowState:b}=useBotFollowState(B),{isDeleted:g}=(0,c.iZ)(B),{t:S}=(0,l.$G)(),y=useButtonText(f,p,F),[_,v]=(0,a.useState)(null),L=k||(f?"ghost":"primary"),h=S(f?"Unfollow bot":"Follow bot"),C=f?(0,t.jsx)(d.qG,{}):(0,t.jsx)(d.df,{});return null!=y&&(n=y,u&&w>0&&(n+=" \xb7 "+w)),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:v,children:(0,t.jsx)(s.Z,{as:"button","aria-label":h,onClick:b,iconLeft:C,isDisabled:g&&!f,theme:L,size:"sm",showIconOnly:"always",children:n})}),(0,t.jsx)(r.Z,{anchorRef:_,label:h,placement:"top"})]})}},36777:function(e,n,o){var t=o(85893),a=o(67294),l=o(22120),i=o(22578);o(44311);var d=o(78410),r=o(27460),c=o(98521),s=o(9729),m=o(30038),u=o(8583);n.Z=e=>{let{bot:n,theme:k="secondary",iconOnly:F,className:p,actionMetadataContext:B}=e,{t:f}=(0,l.$G)(),{shareLink:w,botId:b}=(0,i.useFragment)(o(16211),n),g=(0,u.ZP)(),S=(0,a.useCallback)(()=>{navigator.clipboard.writeText(w||""),g({type:u.pC.success,content:f("Copied link to clipboard.")}),(0,s.Z)("poe/action_log",{action_type:m.Z.share_button_click,bot_id:b,action_metadata:{context:B}}),(0,s.Z)("poe/action_log",{action_type:m.Z.bot_share,bot_id:b,action_metadata:{context:B}})},[w,g,b,f,B]),[y,_]=(0,a.useState)(null),v=f("Share bot");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{ref:_,as:"button",onClick:S,className:p,theme:k,size:"sm",iconLeft:(0,t.jsx)(r.MS,{}),showIconOnly:"always",children:f("Share bot")}),F?(0,t.jsx)(c.Z,{anchorRef:y,label:v,placement:"top"}):null]})}},35542:function(e,n,o){var t=o(85893),a=o(67294),l=o(78410),i=o(50241),d=o(11431);n.Z=e=>{let{onClick:n,...o}=e,{shouldShowNux:r,openInitialNuxModal:c}=(0,d.Bi)(),{shouldShowSignupWall:s,openSignupWall:m}=(0,i.zl)(),u=(0,a.useCallback)(e=>s?m():r?c(o=>o&&(null==n?void 0:n(e))):null==n?void 0:n(e),[n,s,m,r,c]);return(0,t.jsx)(l.Z,{onClick:u,...o})}},95582:function(e,n){var o,t;(t=o||(o={})).chat_message="chat_message",t.nav_bar="nav_bar",t.bot_info_card="bot_info_card",n.Z=o}}]);