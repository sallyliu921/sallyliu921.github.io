"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8062],{38062:function(e,n,t){t.d(n,{DZ:function(){return getValidatedRedirectUrlFromQueryParams},Dl:function(){return redirectToLoginPageForSocialSignupAttemptMissingBirthday},Ho:function(){return redirectToLoginPageForSocialSignupAttemptMissingEmail},SN:function(){return setRedirectUrlQueryParamForCurrentUrl},Sh:function(){return useOnLoginSuccess},W3:function(){return getDefaultGoogleSignupLoginErrorMessage},X0:function(){return redirectToLoginPage},YL:function(){return isShowSubscriptionWallParamPresent},_q:function(){return redirectToLoginPageForSocialSignupAttemptMissingAgreements},b8:function(){return redirectToLoggedInHomePage},bl:function(){return o},dh:function(){return removeRedirectUrlQueryParamFromCurrentUrl},gA:function(){return getRedirectUrlFromSignupLoginResponse},gS:function(){return getDefaultUserVerificationErrorMessage},gW:function(){return getDesktopAppOpenPageUrl},gf:function(){return useHandleGoogleSignupLoginMutationStatusForGoogleOneTap},h2:function(){return hasUserStartedSignupFlow},k9:function(){return setRedirectUrlToHomeWithSubscriptionWall},n$:function(){return a},o1:function(){return maybeGetRedirectUrl},q2:function(){return L},yn:function(){return getDefaultLoginErrorMessage}});var i,r,o,a,s=t(19692),u=t(11163),l=t(67294),d=t(22120),_=t(8583),c=t(6740),g=t(9729),p=t(87301),m=t(67646),f=t(74285),S=t(95634),b=t(99391),h=t(45598),y=t(64183),w=t(94316),v=t(96182);let getDefaultUserVerificationErrorMessage=e=>e("Something went wrong. Please wait a moment and try again."),getDefaultLoginErrorMessage=e=>e("An error occurred, please try again."),k="missing_email",P="login_success",R="signup_method",U="redirect_url",A="show_subscription_wall",redirectToLoginPageForSocialSignupAttemptMissingBirthday=(e,n,t)=>{redirectToLoginPage(e,t,{missing_birthday:"1",[R]:n})},redirectToLoginPageForSocialSignupAttemptMissingAgreements=(e,n,t,i)=>{redirectToLoginPage(e,t,{...i||{},missing_agreements:"1",[R]:n})},hasUserStartedSignupFlow=e=>{let{isLoginPage:n,queryParams:t}=e;return n&&("1"===t[k]||!!t[R])},redirectToLoginPageForSocialSignupAttemptMissingEmail=(e,n)=>{redirectToLoginPage(e,n,{[k]:"1"})},isShowSubscriptionWallParamPresent=e=>"1"===e[A],setRedirectUrlToHomeWithSubscriptionWall=e=>{setRedirectUrlQueryParamForCurrentUrl(e,"/?".concat(A,"=1"))},redirectToLoginPage=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.replace({pathname:"/login",query:{...t,[U]:null!=n?n:"/"}})},redirectToDesktopAppOpenPage=(e,n)=>{let t=getDesktopAppOpenPageUrl(n);e.replace(t)},maybeGetDesktopAppLoginRequestCode=e=>{let n=e.query.desktop_app_login_request_code;if((0,h.H)(n)&&n.length>0)return n},getValidatedRedirectUrlFromQueryParams=e=>{let n=e[U];if(n&&isValidRedirectUrl(String(n)))return String(n)},setRedirectUrlQueryParamForCurrentUrl=(e,n)=>{e.replace({query:{...e.query,[U]:isValidRedirectUrl(n)?n:void 0}})},removeRedirectUrlQueryParamFromCurrentUrl=e=>{let n={...e.query};delete n[U],e.replace({query:n})},getDesktopAppOpenPageUrl=e=>"/desktop_app_open?desktop_app_login_request_code=".concat(encodeURIComponent(e)),redirectToLoggedInHomePage=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?"/?".concat(P,"=1"):"/";e.replace(t)},maybeGetRedirectUrl=e=>{let n=getValidatedRedirectUrlFromQueryParams(e.query);if(n)return n},getRedirectUrlFromSignupLoginResponse=e=>{let{redirectChatCode:n,redirectUrl:t}=e;if(n)return"/chat/".concat(n);if(t){let e=t.split("?")[1];if(e){let n=new URLSearchParams(e).get(U);if(n&&isValidRedirectUrl(n))return n}}if(t&&isValidRedirectUrl(t))return t},isValidRedirectUrl=e=>e&&e.length>0&&e.startsWith("/")&&!e.includes(":"),useOnLoginSuccess=()=>{let{t:e}=(0,d.$G)(),n=(0,u.useRouter)(),t=(0,S.AO)(),i=(0,_.ZP)(),r=(0,p.q)(),o=(0,l.useCallback)(n=>i({content:n?e("You have successfully signed up"):e("You have successfully logged in"),type:_.pC.success}),[i,e]);return(0,l.useCallback)(async e=>{let{isSignUp:i,isEligibleForRedirectToLoggedInHomePage:a=!0,showLoginSuccessToastAfterRedirectingToDifferentPage:u=!1,redirectUrl:l=maybeGetRedirectUrl(n),loginRequestCode:d=maybeGetDesktopAppLoginRequestCode(n),googleTagManagerEnhancedConversionProperties:_="{}",shouldSendGTMEvent:g=!0}=e;if(i){if(await (0,f.hP)("sng_complete_registration"),g){let e=JSON.parse(_);(0,s.sendGTMEvent)({event:w.Z.CompleteRegistration,...e})}}else await (0,f.hP)("sng_login");if((null==l?void 0:l.startsWith("/chat/"))||(await (0,m.sr)(),await (0,b.FV)()),d){o(!1),redirectToDesktopAppOpenPage(n,d);return}if(l&&isValidRedirectUrl(l))(l===n.asPath||u)&&o(i),window.location.replace(l);else if(a){let e=u?"/?".concat(P,"=1"):"/";window.location.replace(e)}else r(),o(i);(0,c.E)(),t(!0)},[n,t,r,o])},getDefaultGoogleSignupLoginErrorMessage=e=>e("Failed to complete Google login. Please wait a moment and try again."),useHandleGoogleSignupLoginMutationStatusForGoogleOneTap=()=>{let e=useOnLoginSuccess(),n=(0,_.ZP)(),t=(0,u.useRouter)(),{t:i}=(0,d.$G)(),r=getDefaultGoogleSignupLoginErrorMessage(i);return(0,l.useCallback)(i=>{let{status:o,redirectUrl:a,errorMessage:s,errorRedirectUrl:u,showLoginSuccessToastAfterRedirectingToDifferentPage:l,googleTagManagerEnhancedConversionProperties:d="{}"}=i;o===y.Z.success||o===y.Z.success_signup?e({isSignUp:o===y.Z.success_signup,redirectUrl:a,showLoginSuccessToastAfterRedirectingToDifferentPage:l,googleTagManagerEnhancedConversionProperties:d}):o===y.Z.birthday_not_found?redirectToLoginPageForSocialSignupAttemptMissingBirthday(t,v.Z.google,a):o===y.Z.agreement_acceptance_incomplete?redirectToLoginPageForSocialSignupAttemptMissingAgreements(t,v.Z.google,a):(n({content:null!=s?s:r,type:_.pC.error}),s&&(0,g.Z)("poe/signup_login_client_side_error",{status:o,signup_method:v.Z.google}),u&&t.replace({pathname:u}))},[r,e,t,n])};(i=o||(o={}))[i.loginStarted=1]="loginStarted",i[i.signupStarted=2]="signupStarted",i[i.signupContinued=3]="signupContinued",i[i.signupContinuedCodeSent=4]="signupContinuedCodeSent",i[i.signupContinuedBirthdayRequired=5]="signupContinuedBirthdayRequired",i[i.signupContinuedAgreementAcceptanceRequired=6]="signupContinuedAgreementAcceptanceRequired",(r=a||(a={}))[r.emailAddress=0]="emailAddress",r[r.phoneNumber=1]="phoneNumber";let L=/^[0-9]{6,}$/i},74285:function(e,n,t){let i;t.d(n,{Rz:function(){return useInitSingular},h0:function(){return getSingularDeviceId},hP:function(){return singularEvent}});var r=t(67294);let o="quora_b_46ba1291c98480d9dde6fed2b16c7cae__90053357",a="aff4cbc69cc3fee7a3b851fb6c40fed3",s="com.poe",initSingular=async()=>{await loadAndInitSingularSdk()},useInitSingular=()=>{(0,r.useEffect)(()=>{initSingular()},[])},loadAndInitSingularSdk=async()=>(i||(i=_loadAndInitSingularSdk()),await i),_loadAndInitSingularSdk=async()=>{let e=await t.e(8961).then(t.t.bind(t,58961,23)),{singularSdk:n,SingularConfig:i}=e;return await new Promise(e=>{if(n&&i&&o&&a&&s){let t=new i(o,a,s);t.withInitFinishedCallback(()=>e()),n.init(t)}}),e},singularEvent=async e=>{let n=await loadAndInitSingularSdk();return n.singularSdk.event(e)},getSingularDeviceId=async()=>{let e=await loadAndInitSingularSdk();return e.singularSdk.getSingularDeviceId()}},64183:function(e,n){var t,i;(i=t||(t={})).success="success",i.success_signup="success_signup",i.bad_actor="bad_actor",i.rate_limit_exceeded_ip="rate_limit_exceeded_ip",i.suspicious_name_email="suspicious_name_email",i.no_external_account_info="no_external_account_info",i.rate_limit_exceeded_browser_id="rate_limit_exceeded_browser_id",i.banned_browser_id="banned_browser_id",i.other="other",i.email_unconfirmed="email_unconfirmed",i.email_not_found="email_not_found",i.bad_email="bad_email",i.bad_name="bad_name",i.bad_password="bad_password",i.too_many_attempts="too_many_attempts",i.banned_user="banned_user",i.incorrect_password="incorrect_password",i.two_factor_authentication="two_factor_authentication",i.password_leaked="password_leaked",i.force_password_reset="force_password_reset",i.account_delete="account_delete",i.invalid_token="invalid_token",i.blocked_ip="blocked_ip",i.bad_token="bad_token",i.missing_fb_info="missing_fb_info",i.obfuscated_email="obfuscated_email",i.failed_captcha="failed_captcha",i.already_logged_in="already_logged_in",i.account_already_exists="account_already_exists",i.invite_code_needed="invite_code_needed",i.password_needed="password_needed",i.no_google_name="no_google_name",i.unconfirmed_account_exists="unconfirmed_account_exists",i.bad_authentication_token="bad_authentication_token",i.unverified_social_login_for_existing_account="unverified_social_login_for_existing_account",i.invalid_google_data="invalid_google_data",i.no_email="no_email",i.refused="refused",i.failed="failed",i.invalid_verification_code="invalid_verification_code",i.user_with_confirmed_email_not_found="user_with_confirmed_email_not_found",i.user_with_confirmed_phone_number_not_found="user_with_confirmed_phone_number_not_found",i.recently_verified_phone_number_not_found="recently_verified_phone_number_not_found",i.recently_verified_email_not_found="recently_verified_email_not_found",i.rate_limit_exceeded_default="rate_limit_exceeded_default",i.no_verification_in_progress="no_verification_in_progress",i.birthday_not_found="birthday_not_found",i.user_not_old_enough_to_signup="user_not_old_enough_to_signup",i.invalid_birthday="invalid_birthday",i.too_many_user_not_old_enough_to_signup_errors_recently="too_many_user_not_old_enough_to_signup_errors_recently",i.agreement_acceptance_incomplete="agreement_acceptance_incomplete",i.pending_deletion_for_missing_email="pending_deletion_for_missing_email",i.invalid_desktop_app_login_request_code="invalid_desktop_app_login_request_code",i.invalid_desktop_app_auth_token="invalid_desktop_app_auth_token",n.Z=t},94316:function(e,n){var t,i;(i=t||(t={})).CompleteRegistration="CompleteRegistration",i.Subscribe="Subscribe",i.MonthlySubscribe="MonthlySubscribe",i.YearlySubscribe="YearlySubscribe",n.Z=t},96182:function(e,n){var t,i;(i=t||(t={})).google="google",i.facebook="facebook",i.twitter="twitter",i.email="email",i.apple="apple",i.quora="quora",n.Z=t}}]);